import{V as ne,S as R,R as O,aa as U,b as ie,ac as se,U as le,az as K,_ as re,d as X,a as ce,c as E,r as F,D as ue,X as Y,Y as de,A as fe,m,o as i,g as C,i as h,af as ve,h as t,n as g,e as k,w as u,l as $,E as D,t as V,j as J,q as d,bm as me,K as x,ag as pe,a4 as be,bn as Q,a1 as ge,y as ye,aK as ee,F as j,aD as ae,p as I,aL as Z,bk as he,aM as ke}from"./index-Dv6_wpbJ.js";import{I as H,C as q,U as G,k as _e,j as we,i as Ce,l as Ie}from"./drawer-Cod10NLr.js";import{b as Ve,a as Ee,d as Se,c as Te,n as te,m as Ne,e as ze,E as Pe}from"./EditStore-Bu9gI-u2.js";const Be=c=>["",...ne].includes(c),De=ie({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:Be},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:K},activeActionIcon:{type:K},activeIcon:{type:K},inactiveIcon:{type:K},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:le(Function)},id:String,tabindex:{type:[String,Number]},...se(["ariaLabel"])}),Ae={[G]:c=>R(c)||O(c)||U(c),[q]:c=>R(c)||O(c)||U(c),[H]:c=>R(c)||O(c)||U(c)},oe="ElSwitch",$e=X({name:oe}),Fe=X({...$e,props:De,emits:Ae,setup(c,{expose:A,emit:f}){const s=c,{formItem:r}=Ve(),p=Ee(),n=ce("switch"),{inputId:_}=Se(s,{formItemContext:r}),v=Te(E(()=>s.loading)),w=F(s.modelValue!==!1),b=F(),S=F(),T=E(()=>[n.b(),n.m(p.value),n.is("disabled",v.value),n.is("checked",o.value)]),N=E(()=>[n.e("label"),n.em("label","left"),n.is("active",!o.value)]),z=E(()=>[n.e("label"),n.em("label","right"),n.is("active",o.value)]),y=E(()=>({width:ue(s.width)}));Y(()=>s.modelValue,()=>{w.value=!0});const a=E(()=>w.value?s.modelValue:!1),o=E(()=>a.value===s.activeValue);[s.activeValue,s.inactiveValue].includes(a.value)||(f(G,s.inactiveValue),f(q,s.inactiveValue),f(H,s.inactiveValue)),Y(o,e=>{var l;b.value.checked=e,s.validateEvent&&((l=r==null?void 0:r.validate)==null||l.call(r,"change").catch(B=>de()))});const P=()=>{const e=o.value?s.inactiveValue:s.activeValue;f(G,e),f(q,e),f(H,e),be(()=>{b.value.checked=o.value})},W=()=>{if(v.value)return;const{beforeChange:e}=s;if(!e){P();return}const l=e();[Q(l),R(l)].includes(!0)||ge(oe,"beforeChange must return type `Promise<boolean>` or `boolean`"),Q(l)?l.then(M=>{M&&P()}).catch(M=>{}):l&&P()},L=()=>{var e,l;(l=(e=b.value)==null?void 0:e.focus)==null||l.call(e)};return fe(()=>{b.value.checked=o.value}),A({focus:L,checked:o}),(e,l)=>(i(),m("div",{class:g(t(T)),onClick:pe(W,["prevent"])},[C("input",{id:t(_),ref_key:"input",ref:b,class:g(t(n).e("input")),type:"checkbox",role:"switch","aria-checked":t(o),"aria-disabled":t(v),"aria-label":e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:t(v),tabindex:e.tabindex,onChange:P,onKeydown:ve(W,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(i(),m("span",{key:0,class:g(t(N))},[e.inactiveIcon?(i(),k(t(D),{key:0},{default:u(()=>[(i(),k($(e.inactiveIcon)))]),_:1})):h("v-if",!0),!e.inactiveIcon&&e.inactiveText?(i(),m("span",{key:1,"aria-hidden":t(o)},V(e.inactiveText),9,["aria-hidden"])):h("v-if",!0)],2)):h("v-if",!0),C("span",{ref_key:"core",ref:S,class:g(t(n).e("core")),style:x(t(y))},[e.inlinePrompt?(i(),m("div",{key:0,class:g(t(n).e("inner"))},[e.activeIcon||e.inactiveIcon?(i(),k(t(D),{key:0,class:g(t(n).is("icon"))},{default:u(()=>[(i(),k($(t(o)?e.activeIcon:e.inactiveIcon)))]),_:1},8,["class"])):e.activeText||e.inactiveText?(i(),m("span",{key:1,class:g(t(n).is("text")),"aria-hidden":!t(o)},V(t(o)?e.activeText:e.inactiveText),11,["aria-hidden"])):h("v-if",!0)],2)):h("v-if",!0),C("div",{class:g(t(n).e("action"))},[e.loading?(i(),k(t(D),{key:0,class:g(t(n).is("loading"))},{default:u(()=>[d(t(me))]),_:1},8,["class"])):t(o)?J(e.$slots,"active-action",{key:1},()=>[e.activeActionIcon?(i(),k(t(D),{key:0},{default:u(()=>[(i(),k($(e.activeActionIcon)))]),_:1})):h("v-if",!0)]):t(o)?h("v-if",!0):J(e.$slots,"inactive-action",{key:2},()=>[e.inactiveActionIcon?(i(),k(t(D),{key:0},{default:u(()=>[(i(),k($(e.inactiveActionIcon)))]),_:1})):h("v-if",!0)])],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(i(),m("span",{key:1,class:g(t(z))},[e.activeIcon?(i(),k(t(D),{key:0},{default:u(()=>[(i(),k($(e.activeIcon)))]),_:1})):h("v-if",!0),!e.activeIcon&&e.activeText?(i(),m("span",{key:1,"aria-hidden":!t(o)},V(e.activeText),9,["aria-hidden"])):h("v-if",!0)],2)):h("v-if",!0)],10,["onClick"]))}});var We=re(Fe,[["__file","switch.vue"]]);const Ke=ye(We),Re={class:"table-container"},Le={key:0,class:"support-icon"},Me={key:1,class:"carry-icon"},Oe={__name:"AssignmentOverview",setup(c){const A=te(),f=({row:r})=>{let p={};switch(r.color){case 0:p.backgroundColor="#ffe5e5";break;case 1:p.backgroundColor="#fffbe5";break;case 2:p.backgroundColor="#e5ffe5";break}return r.ifsup===1&&(p.border="2px dashed #409eff",p.borderRadius="4px",p.fontWeight="bold"),p};function s(r){var _,v,w,b,S,T,N,z,y,a;const p=Math.max(((_=r.id)==null?void 0:_.length)||0,((v=r.fame)==null?void 0:v.length)||0,((w=r.profession)==null?void 0:w.length)||0,((b=r.color)==null?void 0:b.length)||0,((S=r.ifsup)==null?void 0:S.length)||0),n=[];for(let o=0;o<p;o++)n.push({id:((T=r.id)==null?void 0:T[o])??"",fame:((N=r.fame)==null?void 0:N[o])??"",profession:((z=r.profession)==null?void 0:z[o])??"",color:((y=r.color)==null?void 0:y[o])??"",ifsup:((a=r.ifsup)==null?void 0:a[o])??0});return n}return(r,p)=>{const n=_e,_=we;return i(),m("div",Re,[(i(!0),m(j,null,ae(t(A).getResult(),(v,w)=>(i(),m("div",{key:w,class:"wave-container"},[C("h3",{class:g(["wave-title",v.difficulty.toLowerCase()])}," 第 "+V(w+1)+" 波 - "+V(v.difficulty),3),d(_,{data:s(v),size:"small",border:"",style:{width:"380px"},"row-style":f},{default:u(()=>[d(n,{prop:"id",label:"ID",width:"100"}),d(n,{prop:"fame",label:"名望",width:"100"}),d(n,{label:"职业",width:"180"},{default:u(b=>[b.row.ifsup===1?(i(),m("span",Le,"✚")):(i(),m("span",Me,"⚔️")),I(" "+V(b.row.profession),1)]),_:1})]),_:2},1032,["data"])]))),128))])}}},Ue=ee(Oe,[["__scopeId","data-v-c7cded65"]]),je={class:"button-container"},He={class:"button-group wave-management"},qe={class:"button-group data-operations"},Ge=["onClick"],Xe=X({__name:"WavesBar",emits:["wave-click"],setup(c,{emit:A}){const f=Ne(),s=te(),r=ze(),{waves:p}=Z(f),{lock:n}=Z(f),_=F(-1),v=F(!1),w=A;function b(y){_.value=y,w("wave-click",y)}function S(){f.addnormal(),s.addnormal()}function T(){f.addhard(),s.addhard()}function N(y){f.removeWave(y),s.removeWave(y)}function z(){n&&f.syncData()}return(y,a)=>{const o=Pe,P=Ke,W=Ce,L=Ue,e=Ie;return i(),m(j,null,[C("div",je,[C("div",He,[a[9]||(a[9]=C("h4",{class:"group-title"},"波次管理",-1)),d(o,{size:"large",class:"uniform-button",color:"rgb(252, 210, 210)",onClick:T},{default:u(()=>a[6]||(a[6]=[I(" + 困难")])),_:1,__:[6]}),d(o,{size:"large",class:"uniform-button addnormal",color:"rgb(159.5, 206.5, 255)",onClick:S},{default:u(()=>a[7]||(a[7]=[I(" + 普通")])),_:1,__:[7]}),d(o,{size:"large",class:"uniform-button",color:"rgb(177.3, 179.4, 183.6)",onClick:a[0]||(a[0]=l=>N(_.value))},{default:u(()=>a[8]||(a[8]=[I(" - 删除")])),_:1,__:[8]})]),C("div",qe,[a[13]||(a[13]=C("h4",{class:"group-title"},"数据操作",-1)),d(o,{size:"large",icon:t(he),class:"uniform-button",color:"rgb(148.6, 212.3, 117.1)",onClick:a[1]||(a[1]=l=>v.value=!0)},{default:u(()=>a[10]||(a[10]=[I(" 预览")])),_:1,__:[10]},8,["icon"]),d(o,{size:"large",class:"uniform-button",color:"#FFE4C4",onClick:t(s).initTeams},{default:u(()=>a[11]||(a[11]=[I(" 清空")])),_:1,__:[11]},8,["onClick"]),d(o,{size:"large",class:"uniform-button",color:"#DDA0DD",onClick:t(s).assignExceedPlayers},{default:u(()=>a[12]||(a[12]=[I(" 预分配")])),_:1,__:[12]},8,["onClick"])]),d(o,{size:"large",class:"uniform-button",color:"#40a0ff9c",onClick:a[2]||(a[2]=l=>t(r).fetchAll())},{default:u(()=>a[14]||(a[14]=[I("从数据库载入")])),_:1,__:[14]}),d(P,{modelValue:t(n),"onUpdate:modelValue":a[3]||(a[3]=l=>ke(n)?n.value=l:null),"active-text":"同步至队伍","inactive-text":"编辑","active-color":"#f56c6c","inactive-color":"#67c23a",class:"my-switch",onChange:a[4]||(a[4]=l=>z())},null,8,["modelValue"])]),d(W,{"max-height":"900px"},{default:u(()=>[(i(!0),m(j,null,ae(t(p),(l,B)=>(i(),m("p",{key:B,style:x({backgroundColor:l.difficulty==="Hard"?"rgb(252, 210, 210)":"rgb(159.5, 206.5, 255)"}),class:g(["scrollbar-demo-item",{"is-selected":_.value===B}]),onClick:M=>b(B)},V(l.difficulty)+" "+V(B+1),15,Ge))),128))]),_:1}),d(e,{modelValue:v.value,"onUpdate:modelValue":a[5]||(a[5]=l=>v.value=l),"with-header":!1,direction:"ttb",size:"90%"},{default:u(()=>[d(L)]),_:1},8,["modelValue"])],64)}}}),Ze=ee(Xe,[["__scopeId","data-v-cbf601cf"]]);export{Ze as _};
