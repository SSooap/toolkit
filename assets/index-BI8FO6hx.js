var Uo=Object.defineProperty;var Wo=(c,e,n)=>e in c?Uo(c,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[e]=n;var X=(c,e,n)=>Wo(c,typeof e!="symbol"?e+"":e,n);import{b as zo,i as jt,a as $n,c as Vn,d as hi,e as ot,u as Mn,r as fe,f as Xt,g as ie,h as Jn,_ as at,j as Pe,k as Je,l as ve,o as te,m as ye,w as bt,v as Es,n as z,p as rt,q as oe,s as gi,t as Re,x as et,y as _e,z as ht,A as vi,B as Ho,C as di,D as Ft,E as Pn,F as Wi,G as Ko,H as Xe,I as Cs,J as Zt,K as Os,L as Rs,M as Qe,N as Oe,O as Te,P as pe,Q as re,R as yt,S as Go,T as ws,U as Ts,V as Et,W as Kt,X as bi,Y as Ms,Z as $o,$ as zi,a0 as Hi,a1 as Vo,a2 as Ki,a3 as st,a4 as ii,a5 as Jo,a6 as ko,a7 as xe,a8 as ni,a9 as Ps,aa as Qo,ab as Xo,ac as Yo,ad as Zo,ae as qo,af as _o,ag as ea,ah as ci,ai as Ds,aj as ta,ak as ia,al as kn,am as na,an as sa,ao as ra,ap as oa,aq as Ii,ar as aa,as as la,at as ua,au as fi,av as ha,aw as da,ax as ca,ay as fa,az as pa,aA as Qn,aB as ma,aC as ga,aD as va,aE as ba,aF as ya,aG as Ea,aH as Ca,aI as Oa,aJ as Xn,aK as Ss,aL as xs,aM as Ls,aN as As,aO as Is,aP as Ra,aQ as wa,aR as Ta,aS as Bs,aT as Ma}from"./index-CXLd6n_A.js";import{u as js,a as Pa,i as Gt,E as Da,b as Sa,c as xa,d as Wt}from"./main-Da0dN3j0.js";import{u as La,E as Aa}from"./input-D0lLKyHi.js";import{C as Dt,U as dt,u as Dn,a as Fs,b as Ia,E as Ba,c as Ns,d as ja,e as Sn}from"./button-DqkhCUNZ.js";import{c as Us,g as Fa,r as Na,u as Ua,E as Wa}from"./progress-BTg-vLGE.js";import{t as Yn,E as Zn}from"./index-CZTuRZdJ.js";var za=1/0;function Ha(c){var e=c==null?0:c.length;return e?zo(c,za):[]}let ti;const Ka=c=>{var e;if(!jt)return 0;if(ti!==void 0)return ti;const n=document.createElement("div");n.className=`${c}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const i=n.offsetWidth;n.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",n.appendChild(s);const t=s.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),ti=i-t,ti};function Ga(c,e){if(!jt)return;if(!e){c.scrollTop=0;return}const n=[];let i=e.offsetParent;for(;i!==null&&c!==i&&c.contains(i);)n.push(i),i=i.offsetParent;const s=e.offsetTop+n.reduce((a,l)=>a+l.offsetTop,0),t=s+e.offsetHeight,r=c.scrollTop,o=r+c.clientHeight;s<r?c.scrollTop=s:t>o&&(c.scrollTop=t-c.clientHeight)}const Ws=ot({modelValue:{type:[String,Number,Boolean],default:void 0},size:Mn,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),$a=ot({...Ws,border:Boolean}),zs={[dt]:c=>$n(c)||Vn(c)||hi(c),[Dt]:c=>$n(c)||Vn(c)||hi(c)},Hs=Symbol("radioGroupKey"),Ks=(c,e)=>{const n=fe(),i=Xt(Hs,void 0),s=ie(()=>!!i),t=ie(()=>Jn(c.value)?c.label:c.value),r=ie({get(){return s.value?i.modelValue:c.modelValue},set(d){s.value?i.changeEvent(d):e&&e(dt,d),n.value.checked=c.modelValue===t.value}}),o=js(ie(()=>i==null?void 0:i.size)),a=Pa(ie(()=>i==null?void 0:i.disabled)),l=fe(!1),u=ie(()=>a.value||s.value&&r.value!==t.value?-1:0);return Dn({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},ie(()=>s.value&&Jn(c.value))),{radioRef:n,isGroup:s,radioGroup:i,focus:l,size:o,disabled:a,tabIndex:u,modelValue:r,actualValue:t}},Va=Pe({name:"ElRadio"}),Ja=Pe({...Va,props:$a,emits:zs,setup(c,{emit:e}){const n=c,i=Je("radio"),{radioRef:s,radioGroup:t,focus:r,size:o,disabled:a,modelValue:l,actualValue:u}=Ks(n,e);function d(){ht(()=>e(Dt,l.value))}return(h,f)=>{var m;return te(),ve("label",{class:oe([z(i).b(),z(i).is("disabled",z(a)),z(i).is("focus",z(r)),z(i).is("bordered",h.border),z(i).is("checked",z(l)===z(u)),z(i).m(z(o))])},[ye("span",{class:oe([z(i).e("input"),z(i).is("disabled",z(a)),z(i).is("checked",z(l)===z(u))])},[bt(ye("input",{ref_key:"radioRef",ref:s,"onUpdate:modelValue":g=>gi(l)?l.value=g:null,class:oe(z(i).e("original")),value:z(u),name:h.name||((m=z(t))==null?void 0:m.name),disabled:z(a),checked:z(l)===z(u),type:"radio",onFocus:g=>r.value=!0,onBlur:g=>r.value=!1,onChange:d,onClick:rt(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[Es,z(l)]]),ye("span",{class:oe(z(i).e("inner"))},null,2)],2),ye("span",{class:oe(z(i).e("label")),onKeydown:rt(()=>{},["stop"])},[Re(h.$slots,"default",{},()=>[et(_e(h.label),1)])],42,["onKeydown"])],2)}}});var ka=at(Ja,[["__file","radio.vue"]]);const Qa=ot({...Ws}),Xa=Pe({name:"ElRadioButton"}),Ya=Pe({...Xa,props:Qa,setup(c){const e=c,n=Je("radio"),{radioRef:i,focus:s,size:t,disabled:r,modelValue:o,radioGroup:a,actualValue:l}=Ks(e),u=ie(()=>({backgroundColor:(a==null?void 0:a.fill)||"",borderColor:(a==null?void 0:a.fill)||"",boxShadow:a!=null&&a.fill?`-1px 0 0 0 ${a.fill}`:"",color:(a==null?void 0:a.textColor)||""}));return(d,h)=>{var f;return te(),ve("label",{class:oe([z(n).b("button"),z(n).is("active",z(o)===z(l)),z(n).is("disabled",z(r)),z(n).is("focus",z(s)),z(n).bm("button",z(t))])},[bt(ye("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":m=>gi(o)?o.value=m:null,class:oe(z(n).be("button","original-radio")),value:z(l),type:"radio",name:d.name||((f=z(a))==null?void 0:f.name),disabled:z(r),onFocus:m=>s.value=!0,onBlur:m=>s.value=!1,onClick:rt(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[Es,z(o)]]),ye("span",{class:oe(z(n).be("button","inner")),style:vi(z(o)===z(l)?z(u):{}),onKeydown:rt(()=>{},["stop"])},[Re(d.$slots,"default",{},()=>[et(_e(d.label),1)])],46,["onKeydown"])],2)}}});var Gs=at(Ya,[["__file","radio-button.vue"]]);const Za=ot({id:{type:String,default:void 0},size:Mn,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...Ho(["ariaLabel"])}),qa=zs,_a=Pe({name:"ElRadioGroup"}),el=Pe({..._a,props:Za,emits:qa,setup(c,{emit:e}){const n=c,i=Je("radio"),s=di(),t=fe(),{formItem:r}=Fs(),{inputId:o,isLabeledByFormItem:a}=Ia(n,{formItemContext:r}),l=d=>{e(dt,d),ht(()=>e(Dt,d))};Ft(()=>{const d=t.value.querySelectorAll("[type=radio]"),h=d[0];!Array.from(d).some(f=>f.checked)&&h&&(h.tabIndex=0)});const u=ie(()=>n.name||s.value);return Pn(Hs,Wi({...Ko(n),changeEvent:l,name:u})),Xe(()=>n.modelValue,()=>{n.validateEvent&&(r==null||r.validate("change").catch(d=>Cs()))}),(d,h)=>(te(),ve("div",{id:z(o),ref_key:"radioGroupRef",ref:t,class:oe(z(i).b("group")),role:"radiogroup","aria-label":z(a)?void 0:d.ariaLabel||"radio-group","aria-labelledby":z(a)?z(r).labelId:void 0},[Re(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var $s=at(el,[["__file","radio-group.vue"]]);const tl=Zt(ka,{RadioButton:Gs,RadioGroup:$s});Os($s);Os(Gs);var il=Pe({name:"NodeContent",setup(){return{ns:Je("cascader-node")}},render(){const{ns:c}=this,{node:e,panel:n}=this.$parent,{data:i,label:s}=e,{renderLabelFn:t}=n;return Rs("span",{class:c.e("label")},t?t({node:e,data:i}):s)}});const xn=Symbol(),nl=Pe({name:"ElCascaderNode",components:{ElCheckbox:Ba,ElRadio:tl,NodeContent:il,ElIcon:Et,Check:Ts,Loading:ws,ArrowRight:Go},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(c,{emit:e}){const n=Xt(xn),i=Je("cascader-node"),s=ie(()=>n.isHoverMenu),t=ie(()=>n.config.multiple),r=ie(()=>n.config.checkStrictly),o=ie(()=>{var D;return(D=n.checkedNodes[0])==null?void 0:D.uid}),a=ie(()=>c.node.isDisabled),l=ie(()=>c.node.isLeaf),u=ie(()=>r.value&&!l.value||!a.value),d=ie(()=>f(n.expandingNode)),h=ie(()=>r.value&&n.checkedNodes.some(f)),f=D=>{var M;const{level:P,uid:C}=c.node;return((M=D==null?void 0:D.pathNodes[P-1])==null?void 0:M.uid)===C},m=()=>{d.value||n.expandNode(c.node)},g=D=>{const{node:M}=c;D!==M.checked&&n.handleCheckChange(M,D)},v=()=>{n.lazyLoad(c.node,()=>{l.value||m()})},p=D=>{s.value&&(E(),!l.value&&e("expand",D))},E=()=>{const{node:D}=c;!u.value||D.loading||(D.loaded?m():v())},R=()=>{s.value&&!l.value||(l.value&&!a.value&&!r.value&&!t.value?T(!0):E())},O=D=>{r.value?(g(D),c.node.loaded&&m()):T(D)},T=D=>{c.node.loaded?(g(D),!r.value&&m()):v()};return{panel:n,isHoverMenu:s,multiple:t,checkStrictly:r,checkedNodeId:o,isDisabled:a,isLeaf:l,expandable:u,inExpandingPath:d,inCheckedPath:h,ns:i,handleHoverExpand:p,handleExpand:E,handleClick:R,handleCheck:T,handleSelectCheck:O}}});function sl(c,e,n,i,s,t){const r=Qe("el-checkbox"),o=Qe("el-radio"),a=Qe("check"),l=Qe("el-icon"),u=Qe("node-content"),d=Qe("loading"),h=Qe("arrow-right");return te(),ve("li",{id:`${c.menuId}-${c.node.uid}`,role:"menuitem","aria-haspopup":!c.isLeaf,"aria-owns":c.isLeaf?void 0:c.menuId,"aria-expanded":c.inExpandingPath,tabindex:c.expandable?-1:void 0,class:oe([c.ns.b(),c.ns.is("selectable",c.checkStrictly),c.ns.is("active",c.node.checked),c.ns.is("disabled",!c.expandable),c.inExpandingPath&&"in-active-path",c.inCheckedPath&&"in-checked-path"]),onMouseenter:c.handleHoverExpand,onFocus:c.handleHoverExpand,onClick:c.handleClick},[Oe(" prefix "),c.multiple?(te(),Te(r,{key:0,"model-value":c.node.checked,indeterminate:c.node.indeterminate,disabled:c.isDisabled,onClick:rt(()=>{},["stop"]),"onUpdate:modelValue":c.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):c.checkStrictly?(te(),Te(o,{key:1,"model-value":c.checkedNodeId,label:c.node.uid,disabled:c.isDisabled,"onUpdate:modelValue":c.handleSelectCheck,onClick:rt(()=>{},["stop"])},{default:re(()=>[Oe(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ye("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):c.isLeaf&&c.node.checked?(te(),Te(l,{key:2,class:oe(c.ns.e("prefix"))},{default:re(()=>[pe(a)]),_:1},8,["class"])):Oe("v-if",!0),Oe(" content "),pe(u),Oe(" postfix "),c.isLeaf?Oe("v-if",!0):(te(),ve(yt,{key:3},[c.node.loading?(te(),Te(l,{key:0,class:oe([c.ns.is("loading"),c.ns.e("postfix")])},{default:re(()=>[pe(d)]),_:1},8,["class"])):(te(),Te(l,{key:1,class:oe(["arrow-right",c.ns.e("postfix")])},{default:re(()=>[pe(h)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var rl=at(nl,[["render",sl],["__file","node.vue"]]);const ol=Pe({name:"ElCascaderMenu",components:{Loading:ws,ElIcon:Et,ElScrollbar:Ns,ElCascaderNode:rl},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(c){const e=Ms(),n=Je("cascader-menu"),{t:i}=bi(),s=di();let t=null,r=null;const o=Xt(xn),a=fe(null),l=ie(()=>!c.nodes.length),u=ie(()=>!o.initialLoaded),d=ie(()=>`${s.value}-${c.index}`),h=v=>{t=v.target},f=v=>{if(!(!o.isHoverMenu||!t||!a.value))if(t.contains(v.target)){m();const p=e.vnode.el,{left:E}=p.getBoundingClientRect(),{offsetWidth:R,offsetHeight:O}=p,T=v.clientX-E,D=t.offsetTop,M=D+t.offsetHeight;a.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${D} L${R} 0 V${D} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${M} L${R} ${O} V${M} Z" />
        `}else r||(r=window.setTimeout(g,o.config.hoverThreshold))},m=()=>{r&&(clearTimeout(r),r=null)},g=()=>{a.value&&(a.value.innerHTML="",m())};return{ns:n,panel:o,hoverZone:a,isEmpty:l,isLoading:u,menuId:d,t:i,handleExpand:h,handleMouseMove:f,clearHoverZone:g}}});function al(c,e,n,i,s,t){const r=Qe("el-cascader-node"),o=Qe("loading"),a=Qe("el-icon"),l=Qe("el-scrollbar");return te(),Te(l,{key:c.menuId,tag:"ul",role:"menu",class:oe(c.ns.b()),"wrap-class":c.ns.e("wrap"),"view-class":[c.ns.e("list"),c.ns.is("empty",c.isEmpty)],onMousemove:c.handleMouseMove,onMouseleave:c.clearHoverZone},{default:re(()=>{var u;return[(te(!0),ve(yt,null,Kt(c.nodes,d=>(te(),Te(r,{key:d.uid,node:d,"menu-id":c.menuId,onExpand:c.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),c.isLoading?(te(),ve("div",{key:0,class:oe(c.ns.e("empty-text"))},[pe(a,{size:"14",class:oe(c.ns.is("loading"))},{default:re(()=>[pe(o)]),_:1},8,["class"]),et(" "+_e(c.t("el.cascader.loading")),1)],2)):c.isEmpty?(te(),ve("div",{key:1,class:oe(c.ns.e("empty-text"))},[Re(c.$slots,"empty",{},()=>[et(_e(c.t("el.cascader.noData")),1)])],2)):(u=c.panel)!=null&&u.isHoverMenu?(te(),ve(yt,{key:2},[Oe(" eslint-disable-next-line vue/html-self-closing "),(te(),ve("svg",{ref:"hoverZone",class:oe(c.ns.e("hover-zone"))},null,2))],2112)):Oe("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ll=at(ol,[["render",al],["__file","menu.vue"]]);const qn=c=>$o(c);let ul=0;const hl=c=>{const e=[c];let{parent:n}=c;for(;n;)e.unshift(n),n=n.parent;return e};let Gi=class $i{constructor(e,n,i,s=!1){this.data=e,this.config=n,this.parent=i,this.root=s,this.uid=ul++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:t,label:r,children:o}=n,a=e[o],l=hl(this);this.level=s?0:i?i.level+1:1,this.value=e[t],this.label=e[r],this.pathNodes=l,this.pathValues=l.map(u=>u.value),this.pathLabels=l.map(u=>u.label),this.childrenData=a,this.children=(a||[]).map(u=>new $i(u,n,this)),this.loaded=!n.lazy||this.isLeaf||!zi(a)}get isDisabled(){const{data:e,parent:n,config:i}=this,{disabled:s,checkStrictly:t}=i;return(Hi(s)?s(e,this):!!e[s])||!t&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:i,loaded:s}=this,{lazy:t,leaf:r}=n,o=Hi(r)?r(e,this):e[r];return Vo(o)?t&&!s?!1:!(Ki(i)&&i.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:i}=this,s=new $i(e,this.config,this);return Ki(n)?n.push(e):this.childrenData=[e],i.push(s),s}calcText(e,n){const i=e?this.pathLabels.join(n):this.label;return this.text=i,i}broadcast(e,...n){const i=`onParent${qn(e)}`;this.children.forEach(s=>{s&&(s.broadcast(e,...n),s[i]&&s[i](...n))})}emit(e,...n){const{parent:i}=this,s=`onChild${qn(e)}`;i&&(i[s]&&i[s](...n),i.emit(e,...n))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(s=>!s.isDisabled),i=n.length?n.every(s=>s.checked):!1;this.setCheckState(i)}setCheckState(e){const n=this.children.length,i=this.children.reduce((s,t)=>{const r=t.checked?1:t.indeterminate?.5:0;return s+r},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&e,this.indeterminate=this.loaded&&i!==n&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:i}=this.config;n||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const Vi=(c,e)=>c.reduce((n,i)=>(i.isLeaf?n.push(i):(!e&&n.push(i),n=n.concat(Vi(i.children,e))),n),[]);class _n{constructor(e,n){this.config=n;const i=(e||[]).map(s=>new Gi(s,this.config));this.nodes=i,this.allNodes=Vi(i,!1),this.leafNodes=Vi(i,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const i=n?n.appendChild(e):new Gi(e,this.config);n||this.nodes.push(i),this.appendAllNodesAndLeafNodes(i)}appendNodes(e,n){e.forEach(i=>this.appendNode(i,n))}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(n=>{this.appendAllNodesAndLeafNodes(n)})}getNodeByValue(e,n=!1){return!e&&e!==0?null:this.getFlattedNodes(n).find(s=>Gt(s.value,e)||Gt(s.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:i,level:s})=>Gt(e.value,i)&&e.level===s)||null}}const Vs=ot({modelValue:{type:st([Number,String,Array])},options:{type:st(Array),default:()=>[]},props:{type:st(Object),default:()=>({})}}),dl={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:ii,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},cl=c=>ie(()=>({...dl,...c.props})),es=c=>{if(!c)return 0;const e=c.id.split("-");return Number(e[e.length-2])},fl=c=>{if(!c)return;const e=c.querySelector("input");e?e.click():Jo(c)&&c.click()},pl=(c,e)=>{const n=e.slice(0),i=n.map(t=>t.uid),s=c.reduce((t,r)=>{const o=i.indexOf(r.uid);return o>-1&&(t.push(r),n.splice(o,1),i.splice(o,1)),t},[]);return s.push(...n),s},ts=c=>[...new Set(c)],is=c=>!c&&c!==0?[]:Ki(c)?c:[c],ml=Pe({name:"ElCascaderPanel",components:{ElCascaderMenu:ll},props:{...Vs,border:{type:Boolean,default:!0},renderLabel:Function},emits:[dt,Dt,"close","expand-change"],setup(c,{emit:e,slots:n}){let i=!1;const s=Je("cascader"),t=cl(c);let r=null;const o=fe(!0),a=fe([]),l=fe(null),u=fe([]),d=fe(null),h=fe([]),f=ie(()=>t.value.expandTrigger==="hover"),m=ie(()=>c.renderLabel||n.default),g=()=>{const{options:w}=c,S=t.value;i=!1,r=new _n(w,S),u.value=[r.getNodes()],S.lazy&&zi(c.options)?(o.value=!1,v(void 0,L=>{L&&(r=new _n(L,S),u.value=[r.getNodes()]),o.value=!0,P(!1,!0)})):P(!1,!0)},v=(w,S)=>{const L=t.value;w=w||new Gi({},L,void 0,!0),w.loading=!0;const j=B=>{const F=w,A=F.root?null:F;B&&(r==null||r.appendNodes(B,A)),F.loading=!1,F.loaded=!0,F.childrenData=F.childrenData||[],S&&S(B)};L.lazyLoad(w,j)},p=(w,S)=>{var L;const{level:j}=w,B=u.value.slice(0,j);let F;w.isLeaf?F=w.pathNodes[j-2]:(F=w,B.push(w.children)),((L=d.value)==null?void 0:L.uid)!==(F==null?void 0:F.uid)&&(d.value=w,u.value=B,!S&&e("expand-change",(w==null?void 0:w.pathValues)||[]))},E=(w,S,L=!0)=>{const{checkStrictly:j,multiple:B}=t.value,F=h.value[0];i=!0,!B&&(F==null||F.doCheck(!1)),w.doCheck(S),M(),L&&!B&&!j&&e("close"),!L&&!B&&!j&&R(w)},R=w=>{w&&(w=w.parent,R(w),w&&p(w))},O=w=>r==null?void 0:r.getFlattedNodes(w),T=w=>{var S;return(S=O(w))==null?void 0:S.filter(L=>L.checked!==!1)},D=()=>{h.value.forEach(w=>w.doCheck(!1)),M(),u.value=u.value.slice(0,1),d.value=null,e("expand-change",[])},M=()=>{var w;const{checkStrictly:S,multiple:L}=t.value,j=h.value,B=T(!S),F=pl(j,B),A=F.map(I=>I.valueByOption);h.value=F,l.value=L?A:(w=A[0])!=null?w:null},P=(w=!1,S=!1)=>{const{modelValue:L}=c,{lazy:j,multiple:B,checkStrictly:F}=t.value,A=!F;if(!(!o.value||i||!S&&Gt(L,l.value)))if(j&&!w){const x=ts(Ha(is(L))).map(N=>r==null?void 0:r.getNodeByValue(N)).filter(N=>!!N&&!N.loaded&&!N.loading);x.length?x.forEach(N=>{v(N,()=>P(!1,S))}):P(!0,S)}else{const I=B?is(L):[L],x=ts(I.map(N=>r==null?void 0:r.getNodeByValue(N,A)));C(x,S),l.value=Us(L)}},C=(w,S=!0)=>{const{checkStrictly:L}=t.value,j=h.value,B=w.filter(I=>!!I&&(L||I.isLeaf)),F=r==null?void 0:r.getSameNode(d.value),A=S&&F||B[0];A?A.pathNodes.forEach(I=>p(I,!0)):d.value=null,j.forEach(I=>I.doCheck(!1)),Wi(B).forEach(I=>I.doCheck(!0)),h.value=B,ht(y)},y=()=>{jt&&a.value.forEach(w=>{const S=w==null?void 0:w.$el;if(S){const L=S.querySelector(`.${s.namespace.value}-scrollbar__wrap`),j=S.querySelector(`.${s.b("node")}.${s.is("active")}`)||S.querySelector(`.${s.b("node")}.in-active-path`);Ga(L,j)}})},b=w=>{const S=w.target,{code:L}=w;switch(L){case xe.up:case xe.down:{w.preventDefault();const j=L===xe.up?-1:1;ni(Ps(S,j,`.${s.b("node")}[tabindex="-1"]`));break}case xe.left:{w.preventDefault();const j=a.value[es(S)-1],B=j==null?void 0:j.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);ni(B);break}case xe.right:{w.preventDefault();const j=a.value[es(S)+1],B=j==null?void 0:j.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);ni(B);break}case xe.enter:case xe.numpadEnter:fl(S);break}};return Pn(xn,Wi({config:t,expandingNode:d,checkedNodes:h,isHoverMenu:f,initialLoaded:o,renderLabelFn:m,lazyLoad:v,expandNode:p,handleCheckChange:E})),Xe([t,()=>c.options],g,{deep:!0,immediate:!0}),Xe(()=>c.modelValue,()=>{i=!1,P()},{deep:!0}),Xe(()=>l.value,w=>{Gt(w,c.modelValue)||(e(dt,w),e(Dt,w))}),ko(()=>a.value=[]),Ft(()=>!zi(c.modelValue)&&P()),{ns:s,menuList:a,menus:u,checkedNodes:h,handleKeyDown:b,handleCheckChange:E,getFlattedNodes:O,getCheckedNodes:T,clearCheckedNodes:D,calculateCheckedValue:M,scrollToExpandingNode:y}}});function gl(c,e,n,i,s,t){const r=Qe("el-cascader-menu");return te(),ve("div",{class:oe([c.ns.b("panel"),c.ns.is("bordered",c.border)]),onKeydown:c.handleKeyDown},[(te(!0),ve(yt,null,Kt(c.menus,(o,a)=>(te(),Te(r,{key:a,ref_for:!0,ref:l=>c.menuList[a]=l,index:a,nodes:[...o]},{empty:re(()=>[Re(c.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var vl=at(ml,[["render",gl],["__file","index.vue"]]);const bl=Zt(vl),yl=ot({...Vs,size:Mn,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:st(Function),default:(c,e)=>c.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:st(Function),default:()=>!0},placement:{type:st(String),values:Yo,default:"bottom-start"},fallbackPlacements:{type:st(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Xo.teleported,tagType:{...Yn.type,default:"info"},tagEffect:{...Yn.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Qo}),El={[dt]:c=>!0,[Dt]:c=>!0,focus:c=>c instanceof FocusEvent,blur:c=>c instanceof FocusEvent,clear:()=>!0,visibleChange:c=>hi(c),expandChange:c=>!!c,removeTag:c=>!!c},Cl="ElCascader",Ol=Pe({name:Cl}),Rl=Pe({...Ol,props:yl,emits:El,setup(c,{expose:e,emit:n}){const i=c,s={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:G})=>{const{modifiersData:V,placement:k}=G;["right","left","bottom","top"].includes(k)||(V.arrow.x=35)},requires:["arrow"]}]},t=Zo();let r=0,o=0;const a=Je("cascader"),l=Je("input"),{t:u}=bi(),{form:d,formItem:h}=Fs(),{valueOnClear:f}=qo(i),{isComposing:m,handleComposition:g}=La({afterComposition(G){var V;const k=(V=G.target)==null?void 0:V.value;ce(k)}}),v=fe(null),p=fe(null),E=fe(null),R=fe(null),O=fe(null),T=fe(!1),D=fe(!1),M=fe(!1),P=fe(!1),C=fe(""),y=fe(""),b=fe([]),w=fe([]),S=fe([]),L=ie(()=>t.style),j=ie(()=>i.disabled||(d==null?void 0:d.disabled)),B=ie(()=>i.placeholder||u("el.cascader.placeholder")),F=ie(()=>y.value||b.value.length>0||m.value?"":B.value),A=js(),I=ie(()=>A.value==="small"?"small":"default"),x=ie(()=>!!i.props.multiple),N=ie(()=>!i.filterable||x.value),U=ie(()=>x.value?y.value:C.value),W=ie(()=>{var G;return((G=R.value)==null?void 0:G.checkedNodes)||[]}),H=ie(()=>!i.clearable||j.value||M.value||!D.value?!1:!!W.value.length),K=ie(()=>{const{showAllLevels:G,separator:V}=i,k=W.value;return k.length?x.value?"":k[0].calcText(G,V):""}),Q=ie(()=>(h==null?void 0:h.validateState)||""),J=ie({get(){return Us(i.modelValue)},set(G){const V=G??f.value;n(dt,V),n(Dt,V),i.validateEvent&&(h==null||h.validate("change").catch(k=>Cs()))}}),Y=ie(()=>[a.b(),a.m(A.value),a.is("disabled",j.value),t.class]),ee=ie(()=>[l.e("icon"),"icon-arrow-down",a.is("reverse",T.value)]),ae=ie(()=>a.is("focus",T.value||P.value)),Z=ie(()=>{var G,V;return(V=(G=v.value)==null?void 0:G.popperRef)==null?void 0:V.contentRef}),se=G=>{var V,k,_;j.value||(G=G??!T.value,G!==T.value&&(T.value=G,(k=(V=p.value)==null?void 0:V.input)==null||k.setAttribute("aria-expanded",`${G}`),G?(de(),ht((_=R.value)==null?void 0:_.scrollToExpandingNode)):i.filterable&&Ye(),n("visibleChange",G)))},de=()=>{ht(()=>{var G;(G=v.value)==null||G.updatePopper()})},De=()=>{M.value=!1},Se=G=>{const{showAllLevels:V,separator:k}=i;return{node:G,key:G.uid,text:G.calcText(V,k),hitState:!1,closable:!j.value&&!G.isDisabled,isCollapseTag:!1}},we=G=>{var V;const k=G.node;k.doCheck(!1),(V=R.value)==null||V.calculateCheckedValue(),n("removeTag",k.valueByOption)},Ae=()=>{if(!x.value)return;const G=W.value,V=[],k=[];if(G.forEach(_=>k.push(Se(_))),w.value=k,G.length){G.slice(0,i.maxCollapseTags).forEach(Ce=>V.push(Se(Ce)));const _=G.slice(i.maxCollapseTags),ue=_.length;ue&&(i.collapseTags?V.push({key:-1,text:`+ ${ue}`,closable:!1,isCollapseTag:!0}):_.forEach(Ce=>V.push(Se(Ce))))}b.value=V},Ue=()=>{var G,V;const{filterMethod:k,showAllLevels:_,separator:ue}=i,Ce=(V=(G=R.value)==null?void 0:G.getFlattedNodes(!i.props.checkStrictly))==null?void 0:V.filter($e=>$e.isDisabled?!1:($e.calcText(_,ue),k($e,U.value)));x.value&&(b.value.forEach($e=>{$e.hitState=!1}),w.value.forEach($e=>{$e.hitState=!1})),M.value=!0,S.value=Ce,de()},Ge=()=>{var G;let V;M.value&&O.value?V=O.value.$el.querySelector(`.${a.e("suggestion-item")}`):V=(G=R.value)==null?void 0:G.$el.querySelector(`.${a.b("node")}[tabindex="-1"]`),V&&(V.focus(),!M.value&&V.click())},Fe=()=>{var G,V;const k=(G=p.value)==null?void 0:G.input,_=E.value,ue=(V=O.value)==null?void 0:V.$el;if(!(!jt||!k)){if(ue){const Ce=ue.querySelector(`.${a.e("suggestion-list")}`);Ce.style.minWidth=`${k.offsetWidth}px`}if(_){const{offsetHeight:Ce}=_,$e=b.value.length>0?`${Math.max(Ce,r)-2}px`:`${r}px`;k.style.height=$e,de()}}},Ie=G=>{var V;return(V=R.value)==null?void 0:V.getCheckedNodes(G)},ke=G=>{de(),n("expandChange",G)},Ct=G=>{if(!m.value)switch(G.code){case xe.enter:case xe.numpadEnter:se();break;case xe.down:se(!0),ht(Ge),G.preventDefault();break;case xe.esc:T.value===!0&&(G.preventDefault(),G.stopPropagation(),se(!1));break;case xe.tab:se(!1);break}},it=()=>{var G;(G=R.value)==null||G.clearCheckedNodes(),!T.value&&i.filterable&&Ye(),se(!1),n("clear")},Ye=()=>{const{value:G}=K;C.value=G,y.value=G},We=G=>{var V,k;const{checked:_}=G;x.value?(V=R.value)==null||V.handleCheckChange(G,!_,!1):(!_&&((k=R.value)==null||k.handleCheckChange(G,!0,!1)),se(!1))},Ne=G=>{const V=G.target,{code:k}=G;switch(k){case xe.up:case xe.down:{G.preventDefault();const _=k===xe.up?-1:1;ni(Ps(V,_,`.${a.e("suggestion-item")}[tabindex="-1"]`));break}case xe.enter:case xe.numpadEnter:V.click();break}},Ze=()=>{const G=b.value,V=G[G.length-1];o=y.value?0:o+1,!(!V||!o||i.collapseTags&&G.length>1)&&(V.hitState?we(V):V.hitState=!0)},q=G=>{const V=G.target,k=a.e("search-input");V.className===k&&(P.value=!0),n("focus",G)},ne=G=>{P.value=!1,n("blur",G)},me=ja(()=>{const{value:G}=U;if(!G)return;const V=i.beforeFilter(G);_o(V)?V.then(Ue).catch(()=>{}):V!==!1?Ue():De()},i.debounce),ce=(G,V)=>{!T.value&&se(!0),!(V!=null&&V.isComposing)&&(G?me():De())},ge=G=>Number.parseFloat(oa(l.cssVarName("input-height"),G).value)-2;return Xe(M,de),Xe([W,j,()=>i.collapseTags],Ae),Xe(b,()=>{ht(()=>Fe())}),Xe(A,async()=>{await ht();const G=p.value.input;r=ge(G)||r,Fe()}),Xe(K,Ye,{immediate:!0}),Ft(()=>{const G=p.value.input,V=ge(G);r=G.offsetHeight||V,ea(G,Fe)}),e({getCheckedNodes:Ie,cascaderPanelRef:R,togglePopperVisible:se,contentRef:Z,presentText:K}),(G,V)=>(te(),Te(z(kn),{ref_key:"tooltipRef",ref:v,visible:T.value,teleported:G.teleported,"popper-class":[z(a).e("dropdown"),G.popperClass],"popper-options":s,"fallback-placements":G.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:G.placement,transition:`${z(a).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:G.persistent,onHide:De},{default:re(()=>[bt((te(),ve("div",{class:oe(z(Y)),style:vi(z(L)),onClick:()=>se(z(N)?void 0:!0),onKeydown:Ct,onMouseenter:k=>D.value=!0,onMouseleave:k=>D.value=!1},[pe(z(Aa),{ref_key:"input",ref:p,modelValue:C.value,"onUpdate:modelValue":k=>C.value=k,placeholder:z(F),readonly:z(N),disabled:z(j),"validate-event":!1,size:z(A),class:oe(z(ae)),tabindex:z(x)&&G.filterable&&!z(j)?-1:void 0,onCompositionstart:z(g),onCompositionupdate:z(g),onCompositionend:z(g),onFocus:q,onBlur:ne,onInput:ce},Ds({suffix:re(()=>[z(H)?(te(),Te(z(Et),{key:"clear",class:oe([z(l).e("icon"),"icon-circle-close"]),onClick:rt(it,["stop"])},{default:re(()=>[pe(z(ta))]),_:1},8,["class","onClick"])):(te(),Te(z(Et),{key:"arrow-down",class:oe(z(ee)),onClick:rt(k=>se(),["stop"])},{default:re(()=>[pe(z(ia))]),_:1},8,["class","onClick"]))]),_:2},[G.$slots.prefix?{name:"prefix",fn:re(()=>[Re(G.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),z(x)?(te(),ve("div",{key:0,ref_key:"tagWrapper",ref:E,class:oe([z(a).e("tags"),z(a).is("validate",!!z(Q))])},[(te(!0),ve(yt,null,Kt(b.value,k=>(te(),Te(z(Zn),{key:k.key,type:G.tagType,size:z(I),effect:G.tagEffect,hit:k.hitState,closable:k.closable,"disable-transitions":"",onClose:_=>we(k)},{default:re(()=>[k.isCollapseTag===!1?(te(),ve("span",{key:0},_e(k.text),1)):(te(),Te(z(kn),{key:1,disabled:T.value||!G.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:re(()=>[ye("span",null,_e(k.text),1)]),content:re(()=>[ye("div",{class:oe(z(a).e("collapse-tags"))},[(te(!0),ve(yt,null,Kt(w.value.slice(G.maxCollapseTags),(_,ue)=>(te(),ve("div",{key:ue,class:oe(z(a).e("collapse-tag"))},[(te(),Te(z(Zn),{key:_.key,class:"in-tooltip",type:G.tagType,size:z(I),effect:G.tagEffect,hit:_.hitState,closable:_.closable,"disable-transitions":"",onClose:Ce=>we(_)},{default:re(()=>[ye("span",null,_e(_.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),G.filterable&&!z(j)?bt((te(),ve("input",{key:0,"onUpdate:modelValue":k=>y.value=k,type:"text",class:oe(z(a).e("search-input")),placeholder:z(K)?"":z(B),onInput:k=>ce(y.value,k),onClick:rt(k=>se(!0),["stop"]),onKeydown:na(Ze,["delete"]),onCompositionstart:z(g),onCompositionupdate:z(g),onCompositionend:z(g),onFocus:q,onBlur:ne},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[sa,y.value]]):Oe("v-if",!0)],2)):Oe("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[z(ra),()=>se(!1),z(Z)]])]),content:re(()=>[bt(pe(z(bl),{ref_key:"cascaderPanelRef",ref:R,modelValue:z(J),"onUpdate:modelValue":k=>gi(J)?J.value=k:null,options:G.options,props:i.props,border:!1,"render-label":G.$slots.default,onExpandChange:ke,onClose:k=>G.$nextTick(()=>se(!1))},{empty:re(()=>[Re(G.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[ci,!M.value]]),G.filterable?bt((te(),Te(z(Ns),{key:0,ref_key:"suggestionPanel",ref:O,tag:"ul",class:oe(z(a).e("suggestion-panel")),"view-class":z(a).e("suggestion-list"),onKeydown:Ne},{default:re(()=>[S.value.length?(te(!0),ve(yt,{key:0},Kt(S.value,k=>(te(),ve("li",{key:k.uid,class:oe([z(a).e("suggestion-item"),z(a).is("checked",k.checked)]),tabindex:-1,onClick:_=>We(k)},[Re(G.$slots,"suggestion-item",{item:k},()=>[ye("span",null,_e(k.text),1),k.checked?(te(),Te(z(Et),{key:0},{default:re(()=>[pe(z(Ts))]),_:1})):Oe("v-if",!0)])],10,["onClick"]))),128)):Re(G.$slots,"empty",{key:1},()=>[ye("li",{class:oe(z(a).e("empty-text"))},_e(z(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[ci,M.value]]):Oe("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var wl=at(Rl,[["__file","cascader.vue"]]);const Tl=Zt(wl),Js=c=>{if(!c)return{onClick:ii,onMousedown:ii,onMouseup:ii};let e=!1,n=!1;return{onClick:r=>{e&&n&&c(r),e=n=!1},onMousedown:r=>{e=r.target===r.currentTarget},onMouseup:r=>{n=r.target===r.currentTarget}}},Ml=ot({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:st([String,Array,Object])},zIndex:{type:st([String,Number])}}),Pl={click:c=>c instanceof MouseEvent},Dl="overlay";var Sl=Pe({name:"ElOverlay",props:Ml,emits:Pl,setup(c,{slots:e,emit:n}){const i=Je(Dl),s=a=>{n("click",a)},{onClick:t,onMousedown:r,onMouseup:o}=Js(c.customMaskEvent?void 0:s);return()=>c.mask?pe("div",{class:[i.b(),c.overlayClass],style:{zIndex:c.zIndex},onClick:t,onMousedown:r,onMouseup:o},[Re(e,"default")],Ii.STYLE|Ii.CLASS|Ii.PROPS,["onClick","onMouseup","onMousedown"]):Rs("div",{class:c.overlayClass,style:{zIndex:c.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Re(e,"default")])}});const ks=Sl,Qs=Symbol("dialogInjectionKey"),Xs=ot({center:Boolean,alignCenter:Boolean,closeIcon:{type:aa},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),xl={close:()=>!0},Ll=(c,e,n,i)=>{const s={offsetX:0,offsetY:0},t=(d,h)=>{if(c.value){const{offsetX:f,offsetY:m}=s,g=c.value.getBoundingClientRect(),v=g.left,p=g.top,E=g.width,R=g.height,O=document.documentElement.clientWidth,T=document.documentElement.clientHeight,D=-v+f,M=-p+m,P=O-v-E+f,C=T-p-R+m;i!=null&&i.value||(d=Math.min(Math.max(d,D),P),h=Math.min(Math.max(h,M),C)),s.offsetX=d,s.offsetY=h,c.value.style.transform=`translate(${fi(d)}, ${fi(h)})`}},r=d=>{const h=d.clientX,f=d.clientY,{offsetX:m,offsetY:g}=s,v=E=>{const R=m+E.clientX-h,O=g+E.clientY-f;t(R,O)},p=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",p)},o=()=>{e.value&&c.value&&(e.value.addEventListener("mousedown",r),window.addEventListener("resize",u))},a=()=>{e.value&&c.value&&(e.value.removeEventListener("mousedown",r),window.removeEventListener("resize",u))},l=()=>{s.offsetX=0,s.offsetY=0,c.value&&(c.value.style.transform="")},u=()=>{const{offsetX:d,offsetY:h}=s;t(d,h)};return Ft(()=>{la(()=>{n.value?o():a()})}),ua(()=>{a()}),{resetPosition:l,updatePosition:u}},Al=(...c)=>e=>{c.forEach(n=>{Hi(n)?n(e):n.value=e})},Il=Pe({name:"ElDialogContent"}),Bl=Pe({...Il,props:Xs,emits:xl,setup(c,{expose:e}){const n=c,{t:i}=bi(),{Close:s}=ca,{dialogRef:t,headerRef:r,bodyId:o,ns:a,style:l}=Xt(Qs),{focusTrapRef:u}=Xt(ha),d=ie(()=>[a.b(),a.is("fullscreen",n.fullscreen),a.is("draggable",n.draggable),a.is("align-center",n.alignCenter),{[a.m("center")]:n.center}]),h=Al(u,t),f=ie(()=>n.draggable),m=ie(()=>n.overflow),{resetPosition:g,updatePosition:v}=Ll(t,r,f,m);return e({resetPosition:g,updatePosition:v}),(p,E)=>(te(),ve("div",{ref:z(h),class:oe(z(d)),style:vi(z(l)),tabindex:"-1"},[ye("header",{ref_key:"headerRef",ref:r,class:oe([z(a).e("header"),p.headerClass,{"show-close":p.showClose}])},[Re(p.$slots,"header",{},()=>[ye("span",{role:"heading","aria-level":p.ariaLevel,class:oe(z(a).e("title"))},_e(p.title),11,["aria-level"])]),p.showClose?(te(),ve("button",{key:0,"aria-label":z(i)("el.dialog.close"),class:oe(z(a).e("headerbtn")),type:"button",onClick:R=>p.$emit("close")},[pe(z(Et),{class:oe(z(a).e("close"))},{default:re(()=>[(te(),Te(da(p.closeIcon||z(s))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Oe("v-if",!0)],2),ye("div",{id:z(o),class:oe([z(a).e("body"),p.bodyClass])},[Re(p.$slots,"default")],10,["id"]),p.$slots.footer?(te(),ve("footer",{key:0,class:oe([z(a).e("footer"),p.footerClass])},[Re(p.$slots,"footer")],2)):Oe("v-if",!0)],6))}});var jl=at(Bl,[["__file","dialog-content.vue"]]);const Ys=ot({...Xs,appendToBody:Boolean,appendTo:{type:fa.to.type,default:"body"},beforeClose:{type:st(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Zs={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[dt]:c=>hi(c),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Fl=(c,e={})=>{gi(c)||pa("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||Je("popup"),i=ie(()=>n.bm("parent","hidden"));if(!jt||Qn(document.body,i.value))return;let s=0,t=!1,r="0";const o=()=>{setTimeout(()=>{typeof document>"u"||t&&document&&(document.body.style.width=r,ba(document.body,i.value))},200)};Xe(c,a=>{if(!a){o();return}t=!Qn(document.body,i.value),t&&(r=document.body.style.width,ma(document.body,i.value)),s=Ka(n.namespace.value);const l=document.documentElement.clientHeight<document.body.scrollHeight,u=ga(document.body,"overflowY");s>0&&(l||u==="scroll")&&t&&(document.body.style.width=`calc(100% - ${s}px)`)}),va(()=>o())},qs=(c,e)=>{var n;const s=Ms().emit,{nextZIndex:t}=ya();let r="";const o=di(),a=di(),l=fe(!1),u=fe(!1),d=fe(!1),h=fe((n=c.zIndex)!=null?n:t());let f,m;const g=Ea("namespace",Oa),v=ie(()=>{const j={},B=`--${g.value}-dialog`;return c.fullscreen||(c.top&&(j[`${B}-margin-top`]=c.top),c.width&&(j[`${B}-width`]=fi(c.width))),j}),p=ie(()=>c.alignCenter?{display:"flex"}:{});function E(){s("opened")}function R(){s("closed"),s(dt,!1),c.destroyOnClose&&(d.value=!1)}function O(){s("close")}function T(){m==null||m(),f==null||f(),c.openDelay&&c.openDelay>0?{stop:f}=Xn(()=>C(),c.openDelay):C()}function D(){f==null||f(),m==null||m(),c.closeDelay&&c.closeDelay>0?{stop:m}=Xn(()=>y(),c.closeDelay):y()}function M(){function j(B){B||(u.value=!0,l.value=!1)}c.beforeClose?c.beforeClose(j):D()}function P(){c.closeOnClickModal&&M()}function C(){jt&&(l.value=!0)}function y(){l.value=!1}function b(){s("openAutoFocus")}function w(){s("closeAutoFocus")}function S(j){var B;((B=j.detail)==null?void 0:B.focusReason)==="pointer"&&j.preventDefault()}c.lockScroll&&Fl(l);function L(){c.closeOnPressEscape&&M()}return Xe(()=>c.modelValue,j=>{j?(u.value=!1,T(),d.value=!0,h.value=Ca(c.zIndex)?t():h.value++,ht(()=>{s("open"),e.value&&(e.value.parentElement.scrollTop=0,e.value.parentElement.scrollLeft=0,e.value.scrollTop=0)})):l.value&&D()}),Xe(()=>c.fullscreen,j=>{e.value&&(j?(r=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=r)}),Ft(()=>{c.modelValue&&(l.value=!0,d.value=!0,T())}),{afterEnter:E,afterLeave:R,beforeLeave:O,handleClose:M,onModalClick:P,close:D,doClose:y,onOpenAutoFocus:b,onCloseAutoFocus:w,onCloseRequested:L,onFocusoutPrevented:S,titleId:o,bodyId:a,closed:u,style:v,overlayDialogStyle:p,rendered:d,visible:l,zIndex:h}},Nl=Pe({name:"ElDialog",inheritAttrs:!1}),Ul=Pe({...Nl,props:Ys,emits:Zs,setup(c,{expose:e}){const n=c,i=Ss();Dn({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},ie(()=>!!i.title));const s=Je("dialog"),t=fe(),r=fe(),o=fe(),{visible:a,titleId:l,bodyId:u,style:d,overlayDialogStyle:h,rendered:f,zIndex:m,afterEnter:g,afterLeave:v,beforeLeave:p,handleClose:E,onModalClick:R,onOpenAutoFocus:O,onCloseAutoFocus:T,onCloseRequested:D,onFocusoutPrevented:M}=qs(n,t);Pn(Qs,{dialogRef:t,headerRef:r,bodyId:u,ns:s,rendered:f,style:d});const P=Js(R),C=ie(()=>n.draggable&&!n.fullscreen);return e({visible:a,dialogContentRef:o,resetPosition:()=>{var b;(b=o.value)==null||b.resetPosition()},handleClose:E}),(b,w)=>(te(),Te(z(Is),{to:b.appendTo,disabled:b.appendTo!=="body"?!1:!b.appendToBody},{default:re(()=>[pe(xs,{name:"dialog-fade",onAfterEnter:z(g),onAfterLeave:z(v),onBeforeLeave:z(p),persisted:""},{default:re(()=>[bt(pe(z(ks),{"custom-mask-event":"",mask:b.modal,"overlay-class":b.modalClass,"z-index":z(m)},{default:re(()=>[ye("div",{role:"dialog","aria-modal":"true","aria-label":b.title||void 0,"aria-labelledby":b.title?void 0:z(l),"aria-describedby":z(u),class:oe(`${z(s).namespace.value}-overlay-dialog`),style:vi(z(h)),onClick:z(P).onClick,onMousedown:z(P).onMousedown,onMouseup:z(P).onMouseup},[pe(z(Ls),{loop:"",trapped:z(a),"focus-start-el":"container",onFocusAfterTrapped:z(O),onFocusAfterReleased:z(T),onFocusoutPrevented:z(M),onReleaseRequested:z(D)},{default:re(()=>[z(f)?(te(),Te(jl,As({key:0,ref_key:"dialogContentRef",ref:o},b.$attrs,{center:b.center,"align-center":b.alignCenter,"close-icon":b.closeIcon,draggable:z(C),overflow:b.overflow,fullscreen:b.fullscreen,"header-class":b.headerClass,"body-class":b.bodyClass,"footer-class":b.footerClass,"show-close":b.showClose,title:b.title,"aria-level":b.headerAriaLevel,onClose:z(E)}),Ds({header:re(()=>[b.$slots.title?Re(b.$slots,"title",{key:1}):Re(b.$slots,"header",{key:0,close:z(E),titleId:z(l),titleClass:z(s).e("title")})]),default:re(()=>[Re(b.$slots,"default")]),_:2},[b.$slots.footer?{name:"footer",fn:re(()=>[Re(b.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):Oe("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[ci,z(a)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Wl=at(Ul,[["__file","dialog.vue"]]);const zl=Zt(Wl),Hl=ot({...Ys,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Kl=Zs,Gl=Pe({name:"ElDrawer",inheritAttrs:!1}),$l=Pe({...Gl,props:Hl,emits:Kl,setup(c,{expose:e}){const n=c,i=Ss();Dn({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},ie(()=>!!i.title));const s=fe(),t=fe(),r=Je("drawer"),{t:o}=bi(),{afterEnter:a,afterLeave:l,beforeLeave:u,visible:d,rendered:h,titleId:f,bodyId:m,zIndex:g,onModalClick:v,onOpenAutoFocus:p,onCloseAutoFocus:E,onFocusoutPrevented:R,onCloseRequested:O,handleClose:T}=qs(n,s),D=ie(()=>n.direction==="rtl"||n.direction==="ltr"),M=ie(()=>fi(n.size));return e({handleClose:T,afterEnter:a,afterLeave:l}),(P,C)=>(te(),Te(z(Is),{to:P.appendTo,disabled:P.appendTo!=="body"?!1:!P.appendToBody},{default:re(()=>[pe(xs,{name:z(r).b("fade"),onAfterEnter:z(a),onAfterLeave:z(l),onBeforeLeave:z(u),persisted:""},{default:re(()=>[bt(pe(z(ks),{mask:P.modal,"overlay-class":P.modalClass,"z-index":z(g),onClick:z(v)},{default:re(()=>[pe(z(Ls),{loop:"",trapped:z(d),"focus-trap-el":s.value,"focus-start-el":t.value,onFocusAfterTrapped:z(p),onFocusAfterReleased:z(E),onFocusoutPrevented:z(R),onReleaseRequested:z(O)},{default:re(()=>[ye("div",As({ref_key:"drawerRef",ref:s,"aria-modal":"true","aria-label":P.title||void 0,"aria-labelledby":P.title?void 0:z(f),"aria-describedby":z(m)},P.$attrs,{class:[z(r).b(),P.direction,z(d)&&"open"],style:z(D)?"width: "+z(M):"height: "+z(M),role:"dialog",onClick:rt(()=>{},["stop"])}),[ye("span",{ref_key:"focusStartRef",ref:t,class:oe(z(r).e("sr-focus")),tabindex:"-1"},null,2),P.withHeader?(te(),ve("header",{key:0,class:oe([z(r).e("header"),P.headerClass])},[P.$slots.title?Re(P.$slots,"title",{key:1},()=>[Oe(" DEPRECATED SLOT ")]):Re(P.$slots,"header",{key:0,close:z(T),titleId:z(f),titleClass:z(r).e("title")},()=>[P.$slots.title?Oe("v-if",!0):(te(),ve("span",{key:0,id:z(f),role:"heading","aria-level":P.headerAriaLevel,class:oe(z(r).e("title"))},_e(P.title),11,["id","aria-level"]))]),P.showClose?(te(),ve("button",{key:2,"aria-label":z(o)("el.drawer.close"),class:oe(z(r).e("close-btn")),type:"button",onClick:z(T)},[pe(z(Et),{class:oe(z(r).e("close"))},{default:re(()=>[pe(z(Ra))]),_:1},8,["class"])],10,["aria-label","onClick"])):Oe("v-if",!0)],2)):Oe("v-if",!0),z(h)?(te(),ve("div",{key:1,id:z(m),class:oe([z(r).e("body"),P.bodyClass])},[Re(P.$slots,"default")],10,["id"])):Oe("v-if",!0),P.$slots.footer?(te(),ve("div",{key:2,class:oe([z(r).e("footer"),P.footerClass])},[Re(P.$slots,"footer")],2)):Oe("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[ci,z(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Vl=at($l,[["__file","drawer.vue"]]);const Jl=Zt(Vl);class Le{constructor(e){this.table=e}reloadData(e,n,i){return this.table.dataLoader.load(e,void 0,void 0,void 0,n,i)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(e){return this.table.modules.layout.layout(e)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(e){return this.table.eventBus.subscribed(e)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(e){return this.table.externalEvents.subscribed(e)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(e){return this.table.options[e]}setOption(e,n){return typeof n<"u"&&(this.table.options[e]=n),this.table.options[e]}deprecationCheck(e,n,i){return this.table.deprecationAdvisor.check(e,n,i)}deprecationCheckMsg(e,n){return this.table.deprecationAdvisor.checkMsg(e,n)}deprecationMsg(e){return this.table.deprecationAdvisor.msg(e)}module(e){return this.table.module(e)}}class Ee{static elVisible(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)}static elOffset(e){var n=e.getBoundingClientRect();return{top:n.top+window.pageYOffset-document.documentElement.clientTop,left:n.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(e,n,i){var s=e?n.split(e):[n],t=s.length,r;for(let o=0;o<t&&(i=i[s[o]],r=i,!!i);o++);return r}static deepClone(e,n,i=[]){var s={}.__proto__,t=[].__proto__;n||(n=Object.assign(Array.isArray(e)?[]:{},e));for(var r in e){let o=e[r],a,l;o!=null&&typeof o=="object"&&(o.__proto__===s||o.__proto__===t)&&(a=i.findIndex(u=>u.subject===o),a>-1?n[r]=i[a].copy:(l=Object.assign(Array.isArray(o)?[]:{},o),i.unshift({subject:o,copy:l}),n[r]=this.deepClone(o,l,i)))}return n}}let kl=class _s extends Le{constructor(e,n,i){super(e),this.element=n,this.container=this._lookupContainer(),this.parent=i,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var e=this.table.options.popupContainer;return typeof e=="string"?(e=document.querySelector(e),e||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):e===!0&&(e=this.table.element),e&&!this._checkContainerIsParent(e)&&(e=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),e||(e=document.body),e}_checkContainerIsParent(e,n=this.table.element){return e===n?!0:n.parentNode?this._checkContainerIsParent(e,n.parentNode):!1}renderCallback(e){this.renderedCallback=e}containerEventCoords(e){var n=!(e instanceof MouseEvent),i=n?e.touches[0].pageX:e.pageX,s=n?e.touches[0].pageY:e.pageY;if(this.container!==document.body){let t=Ee.elOffset(this.container);i-=t.left,s-=t.top}return{x:i,y:s}}elementPositionCoords(e,n="right"){var i=Ee.elOffset(e),s,t,r;switch(this.container!==document.body&&(s=Ee.elOffset(this.container),i.left-=s.left,i.top-=s.top),n){case"right":t=i.left+e.offsetWidth,r=i.top-1;break;case"bottom":t=i.left,r=i.top+e.offsetHeight;break;case"left":t=i.left,r=i.top-1;break;case"top":t=i.left,r=i.top;break;case"center":t=i.left+e.offsetWidth/2,r=i.top+e.offsetHeight/2;break}return{x:t,y:r,offset:i}}show(e,n){var i,s,t,r,o;return this.destroyed||this.table.destroyed?this:(e instanceof HTMLElement?(t=e,o=this.elementPositionCoords(e,n),r=o.offset,i=o.x,s=o.y):typeof e=="number"?(r={top:0,left:0},i=e,s=n):(o=this.containerEventCoords(e),i=o.x,s=o.y,this.reversedX=!1),this.element.style.top=s+"px",this.element.style.left=i+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(i,s,t,r,n),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",a=>{a.stopPropagation()}),this)}_fitToScreen(e,n,i,s,t){var r=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(e+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",i?this.element.style.right=this.container.offsetWidth-s.left+"px":this.element.style.right=this.container.offsetWidth-e+"px",this.reversedX=!0);let o=Math.max(this.container.offsetHeight,r?this.container.scrollHeight:0);if(n+this.element.offsetHeight>o)if(i)switch(t){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-i.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+i.offsetHeight+1+"px"}else this.element.style.height=o+"px"}isVisible(){return this.visible}hideOnBlur(e){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=e),this}_escapeCheck(e){e.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(e=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!e&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(e){return this.childPopup&&this.childPopup.hide(),this.childPopup=new _s(this.table,e,this),this.childPopup}};class he extends Le{constructor(e,n){super(e),this._handler=null}initialize(){}registerTableOption(e,n){this.table.optionsList.register(e,n)}registerColumnOption(e,n){this.table.columnManager.optionsList.register(e,n)}registerTableFunction(e,n){typeof this.table[e]>"u"?this.table[e]=(...i)=>(this.table.initGuard(e),n(...i)):console.warn("Unable to bind table function, name already in use",e)}registerComponentFunction(e,n,i){return this.table.componentFunctionBinder.bind(e,n,i)}registerDataHandler(e,n){this.table.rowManager.registerDataPipelineHandler(e,n),this._handler=e}registerDisplayHandler(e,n){this.table.rowManager.registerDisplayPipelineHandler(e,n),this._handler=e}displayRows(e){var n=this.table.rowManager.displayRows.length-1,i;if(this._handler&&(i=this.table.rowManager.displayPipeline.findIndex(s=>s.handler===this._handler),i>-1&&(n=i)),e&&(n=n+e),this._handler)return n>-1?this.table.rowManager.getDisplayRows(n):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(e,n){n||(n=this._handler),n&&this.table.rowManager.refreshActiveData(n,!1,e)}footerAppend(e){return this.table.footerManager.append(e)}footerPrepend(e){return this.table.footerManager.prepend(e)}footerRemove(e){return this.table.footerManager.remove(e)}popup(e,n){return new kl(this.table,e,n)}alert(e,n){return this.table.alertManager.alert(e,n)}clearAlert(){return this.table.alertManager.clear()}}var Ql={rownum:function(c,e,n,i,s,t){return t.getPosition()}};const Lt=class Lt extends he{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var n=!1,i={};this.allowedTypes.forEach(s=>{var t="accessor"+(s.charAt(0).toUpperCase()+s.slice(1)),r;e.definition[t]&&(r=this.lookupAccessor(e.definition[t]),r&&(n=!0,i[t]={accessor:r,params:e.definition[t+"Params"]||{}}))}),n&&(e.modules.accessor=i)}lookupAccessor(e){var n=!1;switch(typeof e){case"string":Lt.accessors[e]?n=Lt.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":n=e;break}return n}transformRow(e,n){var i="accessor"+(n.charAt(0).toUpperCase()+n.slice(1)),s=e.getComponent(),t=Ee.deepClone(e.data||{});return this.table.columnManager.traverse(function(r){var o,a,l,u;r.modules.accessor&&(a=r.modules.accessor[i]||r.modules.accessor.accessor||!1,a&&(o=r.getFieldValue(t),o!="undefined"&&(u=r.getComponent(),l=typeof a.params=="function"?a.params(o,t,n,u,s):a.params,r.setFieldValue(t,a.accessor(o,t,n,l,u,s)))))}),t}};X(Lt,"moduleName","accessor"),X(Lt,"accessors",Ql);let Ji=Lt;var Xl={method:"GET"};function ki(c,e){var n=[];if(e=e||"",Array.isArray(c))c.forEach((s,t)=>{n=n.concat(ki(s,e?e+"["+t+"]":t))});else if(typeof c=="object")for(var i in c)n=n.concat(ki(c[i],e?e+"["+i+"]":i));else n.push({key:e,value:c});return n}function Yl(c){var e=ki(c),n=[];return e.forEach(function(i){n.push(encodeURIComponent(i.key)+"="+encodeURIComponent(i.value))}),n.join("&")}function er(c,e,n){return c&&n&&Object.keys(n).length&&(!e.method||e.method.toLowerCase()=="get")&&(e.method="get",c+=(c.includes("?")?"&":"?")+Yl(n)),c}function Zl(c,e,n){var i;return new Promise((s,t)=>{if(c=this.urlGenerator.call(this.table,c,e,n),e.method.toUpperCase()!="GET")if(i=typeof this.table.options.ajaxContentType=="object"?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType],i){for(var r in i.headers)e.headers||(e.headers={}),typeof e.headers[r]>"u"&&(e.headers[r]=i.headers[r]);e.body=i.body.call(this,c,e,n)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);c?(typeof e.headers>"u"&&(e.headers={}),typeof e.headers.Accept>"u"&&(e.headers.Accept="application/json"),typeof e.headers["X-Requested-With"]>"u"&&(e.headers["X-Requested-With"]="XMLHttpRequest"),typeof e.mode>"u"&&(e.mode="cors"),e.mode=="cors"?(typeof e.headers.Origin>"u"&&(e.headers.Origin=window.location.origin),typeof e.credentials>"u"&&(e.credentials="same-origin")):typeof e.credentials>"u"&&(e.credentials="include"),fetch(c,e).then(o=>{o.ok?o.json().then(a=>{s(a)}).catch(a=>{t(a),console.warn("Ajax Load Error - Invalid JSON returned",a)}):(console.error("Ajax Load Error - Connection Error: "+o.status,o.statusText),t(o))}).catch(o=>{console.error("Ajax Load Error - Connection Error: ",o),t(o)})):(console.warn("Ajax Load Error - No URL Set"),s([]))})}function Qi(c,e){var n=[];if(e=e||"",Array.isArray(c))c.forEach((s,t)=>{n=n.concat(Qi(s,e?e+"["+t+"]":t))});else if(typeof c=="object")for(var i in c)n=n.concat(Qi(c[i],e?e+"["+i+"]":i));else n.push({key:e,value:c});return n}var ql={json:{headers:{"Content-Type":"application/json"},body:function(c,e,n){return JSON.stringify(n)}},form:{headers:{},body:function(c,e,n){var i=Qi(n),s=new FormData;return i.forEach(function(t){s.append(t.key,t.value)}),s}}};const qe=class qe extends he{constructor(e){super(e),this.config={},this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=qe.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||qe.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||qe.defaultURLGenerator,this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.setDefaultConfig(this.table.options.ajaxConfig),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-params",this.requestParams.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestParams(e,n,i,s){var t=this.table.options.ajaxParams;return t&&(typeof t=="function"&&(t=t.call(this.table)),s=Object.assign(Object.assign({},t),s)),s}requestDataCheck(e,n,i,s){return!!(!e&&this.url||typeof e=="string")}requestData(e,n,i,s,t){var r;return!t&&this.requestDataCheck(e)?(e&&this.setUrl(e),r=this.generateConfig(i),this.sendRequest(this.url,n,r)):t}setDefaultConfig(e={}){this.config=Object.assign({},qe.defaultConfig),typeof e=="string"?this.config.method=e:Object.assign(this.config,e)}generateConfig(e={}){var n=Object.assign({},this.config);return typeof e=="string"?n.method=e:Object.assign(n,e),n}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e,n,i){return this.table.options.ajaxRequesting.call(this.table,e,n)!==!1?this.loaderPromise(e,i,n).then(s=>(this.table.options.ajaxResponse&&(s=this.table.options.ajaxResponse.call(this.table,e,n,s)),s)):Promise.reject()}};X(qe,"moduleName","ajax"),X(qe,"defaultConfig",Xl),X(qe,"defaultURLGenerator",er),X(qe,"defaultLoaderPromise",Zl),X(qe,"contentTypeFormatters",ql);let Xi=qe;var _l={replace:function(c){return this.table.setData(c)},update:function(c){return this.table.updateOrAddData(c)},insert:function(c){return this.table.addData(c)}},eu={table:function(c){var e=[],n=!0,i=this.table.columnManager.columns,s=[],t=[];return c=c.split(`
`),c.forEach(function(r){e.push(r.split("	"))}),e.length&&!(e.length===1&&e[0].length<2)?(e[0].forEach(function(r){var o=i.find(function(a){return r&&a.definition.title&&r.trim()&&a.definition.title.trim()===r.trim()});o?s.push(o):n=!1}),n||(n=!0,s=[],e[0].forEach(function(r){var o=i.find(function(a){return r&&a.field&&r.trim()&&a.field.trim()===r.trim()});o?s.push(o):n=!1}),n||(s=this.table.columnManager.columnsByIndex)),n&&e.shift(),e.forEach(function(r){var o={};r.forEach(function(a,l){s[l]&&(o[s[l].field]=a)}),t.push(o)}),t):!1}},tu={copyToClipboard:["ctrl + 67","meta + 67"]},iu={copyToClipboard:function(c){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},nu={keybindings:{bindings:tu,actions:iu}};const ct=class ct extends he{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",e=>{var n,i,s;this.blocked||(e.preventDefault(),this.customSelection?(n=this.customSelection,this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n))):(s=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard"),i=this.table.modules.export.generateHTMLTable(s),n=i?this.generatePlainContent(s):"",this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n),i=this.table.options.clipboardCopyFormatter("html",i))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",n):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",n),i&&e.clipboardData.setData("text/html",i)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",n),i&&e.originalEvent.clipboardData.setData("text/html",i)),this.dispatchExternal("clipboardCopied",n,i),this.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var n=[];return e.forEach(i=>{var s=[];i.columns.forEach(t=>{var r="";if(t)if(i.type==="group"&&(t.value=t.component.getKey()),t.value===null)r="";else switch(typeof t.value){case"object":r=JSON.stringify(t.value);break;case"undefined":r="";break;default:r=t.value}s.push(r)}),n.push(s.join("	"))}),n.join(`
`)}copy(e,n){var i,s;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,typeof window.getSelection<"u"&&typeof document.createRange<"u"?(e=document.createRange(),e.selectNodeContents(this.table.element),i=window.getSelection(),i.toString()&&n&&(this.customSelection=i.toString()),i.removeAllRanges(),i.addRange(e)):typeof document.selection<"u"&&typeof document.body.createTextRange<"u"&&(s=document.body.createTextRange(),s.moveToElementText(this.table.element),s.select()),document.execCommand("copy"),i&&i.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=ct.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e;break}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=ct.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e;break}}paste(e){var n,i,s;this.checkPasteOrigin(e)&&(n=this.getPasteData(e),i=this.pasteParser.call(this,n),i?(e.preventDefault(),this.table.modExists("mutator")&&(i=this.mutateData(i)),s=this.pasteAction.call(this,i),this.dispatchExternal("clipboardPasted",n,i,s)):this.dispatchExternal("clipboardPasteError",n))}mutateData(e){var n=[];return Array.isArray(e)?e.forEach(i=>{n.push(this.table.modules.mutator.transformRow(i,"clipboard"))}):n=e,n}checkPasteOrigin(e){var n=!0,i=this.confirm("clipboard-paste",[e]);return(i||!["DIV","SPAN"].includes(e.target.tagName))&&(n=!1),n}getPasteData(e){var n;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?n=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(n=e.originalEvent.clipboardData.getData("text/plain")),n}};X(ct,"moduleName","clipboard"),X(ct,"moduleExtensions",nu),X(ct,"pasteActions",_l),X(ct,"pasteParsers",eu);let Yi=ct;class su{constructor(e){return this._row=e,new Proxy(this,{get:function(n,i,s){return typeof n[i]<"u"?n[i]:n._row.table.componentFunctionBinder.handle("row",n._row,i)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var e=[];return this._row.getCells().forEach(function(n){e.push(n.getComponent())}),e}getCell(e){var n=this._row.getCell(e);return n?n.getComponent():!1}_getSelf(){return this._row}}class tr{constructor(e){return this._cell=e,new Proxy(this,{get:function(n,i,s){return typeof n[i]<"u"?n[i]:n._cell.table.componentFunctionBinder.handle("cell",n._cell,i)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(e){return this._cell.row.getData(e)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(e,n){typeof n>"u"&&(n=!0),this._cell.setValue(e,n)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class qt extends Le{constructor(e,n){super(e.table),this.table=e.table,this.column=e,this.row=n,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var e=this.element,n=this.column.getField(),i={top:"flex-start",bottom:"flex-end",middle:"center"},s={left:"flex-start",right:"flex-end",center:"center"};if(e.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(e.style.display="inline-flex",e.style.alignItems=i[this.column.vertAlign]||"",this.column.hozAlign&&(e.style.justifyContent=s[this.column.hozAlign]||"")),n&&e.setAttribute("tabulator-field",n),this.column.definition.cssClass){var t=this.column.definition.cssClass.split(" ");t.forEach(r=>{e.classList.add(r)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var e;switch(e=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof e){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",e!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=e}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(e){return this.loaded||(this.loaded=!0,e||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(e,n,i){var s=this.setValueProcessData(e,n,i);s&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(e,n,i){var s=!1;return(this.value!==e||i)&&(s=!0,n&&(e=this.chain("cell-value-changing",[this,e],null,e))),this.setValueActual(e),s&&this.dispatch("cell-value-changed",this),s}setValueActual(e){this.oldValue=this.value,this.value=e,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,e),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new tr(this)),this.component}}class ir{constructor(e){return this._column=e,this.type="ColumnComponent",new Proxy(this,{get:function(n,i,s){return typeof n[i]<"u"?n[i]:n._column.table.componentFunctionBinder.handle("column",n._column,i)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var e=[];return this._column.cells.forEach(function(n){e.push(n.getComponent())}),e}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(e){e.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(e){e.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var e=[];return this._column.columns.length&&this._column.columns.forEach(function(n){e.push(n.getComponent())}),e}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(e,n){return this._column.table.columnManager.scrollToColumn(this._column,e,n)}getTable(){return this._column.table}move(e,n){var i=this._column.table.columnManager.findColumn(e);i?this._column.table.columnManager.moveColumn(this._column,i,n):console.warn("Move Error - No matching column found:",i)}getNextColumn(){var e=this._column.nextColumn();return e?e.getComponent():!1}getPrevColumn(){var e=this._column.prevColumn();return e?e.getComponent():!1}updateDefinition(e){return this._column.updateDefinition(e)}getWidth(){return this._column.getWidth()}setWidth(e){var n;return e===!0?n=this._column.reinitializeWidth(!0):n=this._column.setWidth(e),this._column.table.columnManager.rerenderColumns(!0),n}}var nr={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0};const Ot=class Ot extends Le{constructor(e,n,i){super(n.table),this.definition=e,this.parent=n,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=i,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((s,t)=>{var r=new Ot(s,this);this.attachColumn(r)}),this.checkColumnVisibility()):n.registerColumnField(this),this._initialize()}createElement(){var e=document.createElement("div");switch(e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),this.isRowHeader&&e.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":e.style.justifyContent="center";break;case"bottom":e.style.justifyContent="flex-end";break}return e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let n in e)typeof this.definition[n]>"u"&&(this.definition[n]=e[n]);this.definition=this.table.columnManager.optionsList.generate(Ot.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{Ot.defaultOptionList.indexOf(e)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),e.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var e=this.definition;if(this.dispatch("column-layout",this),typeof e.visible<"u"&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass){var n=e.cssClass.split(" ");n.forEach(i=>{this.element.classList.add(i)})}e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxInitialWidth&&(this.maxInitialWidth=parseInt(e.maxInitialWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e}_buildColumnHeaderTitle(){var e=this.definition,n=document.createElement("div");if(n.classList.add("tabulator-col-title"),e.headerWordWrap&&n.classList.add("tabulator-col-title-wrap"),e.editableTitle){var i=document.createElement("input");i.classList.add("tabulator-title-editor"),i.addEventListener("click",s=>{s.stopPropagation(),i.focus()}),i.addEventListener("mousedown",s=>{s.stopPropagation()}),i.addEventListener("change",()=>{e.title=i.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),n.appendChild(i),e.field?this.langBind("columns|"+e.field,s=>{i.value=s||e.title||"&nbsp;"}):i.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,s=>{this._formatColumnHeaderTitle(n,s||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(n,e.title||"&nbsp;");return n}_formatColumnHeaderTitle(e,n){var i=this.chain("column-format",[this,n,e],null,()=>n);switch(typeof i){case"object":i instanceof Node?e.appendChild(i):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",i));break;case"undefined":e.innerHTML="";break;default:e.innerHTML=i}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var e=this.definition.cssClass.split(" ");e.forEach(n=>{this.element.classList.add(n)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var n=e,i=this.fieldStructure,s=i.length,t;for(let r=0;r<s&&(n=n[i[r]],t=n,!!n);r++);return t}_setFlatData(e,n){this.field&&(e[this.field]=n)}_setNestedData(e,n){var i=e,s=this.fieldStructure,t=s.length;for(let r=0;r<t;r++)if(r==t-1)i[s[r]]=n;else{if(!i[s[r]])if(typeof n<"u")i[s[r]]={};else break;i=i[s[r]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement()),e.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,n){var i=this.parent.isGroup?this.parent.getGroupElement().clientHeight:n||this.parent.getHeadersElement().clientHeight;this.element.style.height=i+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=i-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(s){s.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(e){var n=[];return e?this.columns.forEach(i=>{n.push(i),n=n.concat(i.getColumns(!0))}):n=this.columns,n}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var n=[];return this.isGroup&&e&&(this.columns.forEach(function(i){n.push(i.getDefinition(!0))}),this.definition.columns=n),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(n){n.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,n){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(i){i.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,n),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(e,n){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(i){i.hide()}),this.dispatch("column-hide",this,n),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.table.initialized&&(this.element.style.width=e+"px"),this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var n=this.columns.indexOf(e);n>-1&&this.columns.splice(n,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(n){n.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var e=[];this.cells.forEach(function(n){n.row.heightInitialized&&(n.row.getElement().offsetParent!==null?(e.push(n.row),n.row.clearCellHeight()):n.row.heightInitialized=!1)}),e.forEach(function(n){n.calcHeight()}),e.forEach(function(n){n.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}):e=this.width,e}getLeftOffset(){var e=this.element.offsetLeft;return this.parent.isGroup&&(e+=this.parent.getLeftOffset()),e}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(e){this.maxWidth&&e>this.maxWidth&&(e=this.maxWidth,console.warn("the minWidth ("+e+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(n){n.setMinWidth()})}setMaxWidth(e){this.minWidth&&e<this.minWidth&&(e=this.minWidth,console.warn("the maxWidth ("+e+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(n){n.setMaxWidth()})}delete(){return new Promise((e,n)=>{this.isGroup&&this.columns.forEach(function(s){s.delete()}),this.dispatch("column-delete",this);var i=this.cells.length;for(let s=0;s<i;s++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(e){var n=new qt(this,e);return this.cells.push(n),n}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._nextVisibleColumn(e+1):!1}_nextVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._prevVisibleColumn(e-1):!1}_prevVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,typeof this.definition.width<"u"&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(e),this.dispatch("column-width-fit-after",this)}fitToData(e){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(s=>{s.clearWidth()}));var n=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(s=>{var t=s.getWidth();t>n&&(n=t)}),n)){var i=n+1;e?this.setWidth(i):(this.maxInitialWidth&&!e&&(i=Math.min(i,this.maxInitialWidth)),this.setWidthActual(i))}}}updateDefinition(e){var n;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(n=Object.assign({},this.getDefinition()),n=Object.assign(n,e),this.table.columnManager.addColumn(n,!1,this).then(i=>(n.field==this.field&&(this.field=!1),this.delete().then(()=>i.getComponent()))))}deleteCell(e){var n=this.cells.indexOf(e);n>-1&&this.cells.splice(n,1)}getComponent(){return this.component||(this.component=new ir(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof Ot?this.parent.getComponent():!1}};X(Ot,"defaultOptionList",nr);let Mt=Ot;class yi{constructor(e){return this._row=e,new Proxy(this,{get:function(n,i,s){return typeof n[i]<"u"?n[i]:n._row.table.componentFunctionBinder.handle("row",n._row,i)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getCells(){var e=[];return this._row.getCells().forEach(function(n){e.push(n.getComponent())}),e}getCell(e){var n=this._row.getCell(e);return n?n.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(e){return this._row.watchPosition(e)}delete(){return this._row.delete()}scrollTo(e,n){return this._row.table.rowManager.scrollToRow(this._row,e,n)}move(e,n){this._row.moveToRow(e,n)}update(e){return this._row.updateData(e)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var e=this._row.nextRow();return e&&e.getComponent()}getPrevRow(){var e=this._row.prevRow();return e&&e.getComponent()}}class Be extends Le{constructor(e,n,i="row"){super(n.table),this.parent=n,this.data={},this.type=i,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(e)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var e=document.createElement("div");e.classList.add("tabulator-row"),e.setAttribute("role","row"),this.element=e}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(e,n){if(this.create(),!this.initialized||e){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,n),e&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,n)}rendered(){this.cells.forEach(e=>{e.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(e){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(e){var n=0,i=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(i=this.calcMinHeight(),n=this.calcMaxHeight(),e?this.height=Math.max(n,i):this.height=this.manualHeight?this.height:Math.max(n,i)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var e=0;return this.cells.forEach(function(n){var i=n.getHeight();i>e&&(e=i)}),e}setCellHeight(){this.cells.forEach(function(e){e.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(e){e.clearHeight()})}normalizeHeight(e){e&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()}setHeight(e,n){(this.height!=e||n)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(e){var n=this.cells.indexOf(e);n>-1&&this.cells.splice(n,1)}setData(e){this.data=this.chain("row-data-init-before",[this,e],void 0,e),this.dispatch("row-data-init-after",this)}updateData(e){var n=this.element&&Ee.elVisible(this.element),i={},s;return new Promise((t,r)=>{typeof e=="string"&&(e=JSON.parse(e)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(i=Object.assign(i,this.data),i=Object.assign(i,e)),s=this.chain("row-data-changing",[this,i,e],null,e);for(let o in s)this.data[o]=s[o];this.dispatch("row-data-save-after",this);for(let o in e)this.table.columnManager.getColumnsByFieldRoot(o).forEach(l=>{let u=this.getCell(l.getField());if(u){let d=l.getFieldValue(s);u.getValue()!==d&&(u.setValueProcessData(d),n&&u.cellRendered())}});n?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,n,e),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),t()})}getData(e){return e?this.chain("row-data-retrieve",[this,e],null,this.data):this.data}getCell(e){var n=!1;return e=this.table.columnManager.findColumn(e),!this.initialized&&this.cells.length===0&&this.generateCells(),n=this.cells.find(function(i){return i.column===e}),n}getCellIndex(e){return this.cells.findIndex(function(n){return n===e})}findCell(e){return this.cells.find(n=>n.element===e)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var e=this.table.rowManager.nextDisplayRow(this,!0);return e||!1}prevRow(){var e=this.table.rowManager.prevDisplayRow(this,!0);return e||!1}moveToRow(e,n){var i=this.table.rowManager.findRow(e);i?(this.table.rowManager.moveRowActual(this,i,!n),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(e){this.detachModules(),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var e=this.cells.length;for(let n=0;n<e;n++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(e){e!=this.position&&(this.position=e,this.positionWatchers.forEach(n=>{n(this.position)}))}watchPosition(e){this.positionWatchers.push(e),e(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new yi(this)),this.component}}var ru={avg:function(c,e,n){var i=0,s=typeof n.precision<"u"?n.precision:2;return c.length&&(i=c.reduce(function(t,r){return Number(t)+Number(r)}),i=i/c.length,i=s!==!1?i.toFixed(s):i),parseFloat(i).toString()},max:function(c,e,n){var i=null,s=typeof n.precision<"u"?n.precision:!1;return c.forEach(function(t){t=Number(t),(t>i||i===null)&&(i=t)}),i!==null?s!==!1?i.toFixed(s):i:""},min:function(c,e,n){var i=null,s=typeof n.precision<"u"?n.precision:!1;return c.forEach(function(t){t=Number(t),(t<i||i===null)&&(i=t)}),i!==null?s!==!1?i.toFixed(s):i:""},sum:function(c,e,n){var i=0,s=typeof n.precision<"u"?n.precision:!1;return c.length&&c.forEach(function(t){t=Number(t),i+=isNaN(t)?0:Number(t)}),s!==!1?i.toFixed(s):i},concat:function(c,e,n){var i=0;return c.length&&(i=c.reduce(function(s,t){return String(s)+String(t)})),i},count:function(c,e,n){var i=0;return c.length&&c.forEach(function(s){s&&i++}),i},unique:function(c,e,n){var i=c.filter((s,t)=>(c||s===0)&&c.indexOf(s)===t);return i.length}};const ft=class ft extends he{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.blocked=!1,this.recalcAfterBlock=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new Mt({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refreshed",this.recalcActiveRowsRefresh.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this)),this.subscribe("redraw-blocked",this.blockRedraw.bind(this)),this.subscribe("redraw-restored",this.restoreRedraw.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this)),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}blockRedraw(){this.blocked=!0,this.recalcAfterBlock=!1}restoreRedraw(){this.blocked=!1,this.recalcAfterBlock&&(this.recalcAfterBlock=!1,this.recalcActiveRowsRefresh())}userRecalc(){this.recalc(this.table.rowManager.activeRows)}blockCheck(){return this.blocked&&(this.recalcAfterBlock=!0),this.blocked}visibleRows(e,n){return this.topRow&&n.unshift(this.topRow),this.botRow&&n.push(this.botRow),n}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(e):this.recalcActiveRows()}recalcActiveRowsRefresh(){this.table.options.groupBy&&this.table.options.dataTreeStartExpanded&&this.table.options.dataTree?this.recalcAll():this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.recalcActiveRows(),this.table.options.columnCalcs!="table"&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var n=e.definition,i={topCalcParams:n.topCalcParams||{},botCalcParams:n.bottomCalcParams||{}};if(n.topCalc){switch(typeof n.topCalc){case"string":ft.calculations[n.topCalc]?i.topCalc=ft.calculations[n.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.topCalc);break;case"function":i.topCalc=n.topCalc;break}i.topCalc&&(e.modules.columnCalcs=i,this.topCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(n.bottomCalc){switch(typeof n.bottomCalc){case"string":ft.calculations[n.bottomCalc]?i.botCalc=ft.calculations[n.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.bottomCalc);break;case"function":i.botCalc=n.bottomCalc;break}i.botCalc&&(e.modules.columnCalcs=i,this.botCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.footerRemove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}reinitializeCalcs(){this.topCalcs.length&&this.initializeTopRow(),this.botCalcs.length&&this.initializeBottomRow()}initializeTopRow(){var e=document.createDocumentFragment();this.topInitialized||(e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.footerPrepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botElement.scrollLeft=e)}recalc(e){var n,i;if(!this.blockCheck()&&(this.topInitialized||this.botInitialized)){if(n=this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),i=this.generateRow("top",n),this.topRow=i;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(i.getElement()),i.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),i=this.generateRow("bottom",n),this.botRow=i;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(i.getElement()),i.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){if((this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalcActiveRows(),this.table.options.groupBy&&this.table.options.columnCalcs!=="table")){var e=this.table.modules.groupRows.getChildGroups();e.forEach(n=>{this.recalcGroup(n)})}}recalcGroup(e){var n,i;this.blockCheck()||e&&e.calcs&&(e.calcs.bottom&&(n=this.rowsToData(e.rows),i=this.generateRowData("bottom",n),e.calcs.bottom.updateData(i),e.calcs.bottom.reinitialize()),e.calcs.top&&(n=this.rowsToData(e.rows),i=this.generateRowData("top",n),e.calcs.top.updateData(i),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var n=[],i=this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs,s=this.table.modules.dataTree;return e.forEach(t=>{var r;n.push(t.getData()),i&&((r=t.modules.dataTree)!=null&&r.open)&&this.rowsToData(s.getFilteredTreeChildren(t)).forEach(o=>{n.push(t)})}),n}generateRow(e,n){var i=this.generateRowData(e,n),s;return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),s=new Be(i,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),s.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),s.component=!1,s.getComponent=()=>(s.component||(s.component=new su(s)),s.component),s.generateCells=()=>{var t=[];this.table.columnManager.columnsByIndex.forEach(r=>{this.genColumn.setField(r.getField()),this.genColumn.hozAlign=r.hozAlign,r.definition[e+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter(r.definition[e+"CalcFormatter"]),params:r.definition[e+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=r.definition.cssClass;var o=new qt(this.genColumn,s);o.getElement(),o.column=r,o.setWidth(),r.cells.push(o),t.push(o),r.visible||o.hide()}),s.cells=t},s}generateRowData(e,n){var i={},s=e=="top"?this.topCalcs:this.botCalcs,t=e=="top"?"topCalc":"botCalc",r,o;return s.forEach(function(a){var l=[];a.modules.columnCalcs&&a.modules.columnCalcs[t]&&(n.forEach(function(u){l.push(a.getFieldValue(u))}),o=t+"Params",r=typeof a.modules.columnCalcs[o]=="function"?a.modules.columnCalcs[o](l,n):a.modules.columnCalcs[o],a.setFieldValue(i,a.modules.columnCalcs[t](l,n,r)))}),i}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={},n;return this.table.options.groupBy&&this.table.modExists("groupRows")?(n=this.table.modules.groupRows.getGroups(!0),n.forEach(i=>{e[i.getKey()]=this.getGroupResults(i)})):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var n=e._getSelf(),i=e.getSubGroups(),s={},t={};return i.forEach(r=>{s[r.getKey()]=this.getGroupResults(r)}),t={top:n.calcs.top?n.calcs.top.getData():{},bottom:n.calcs.bottom?n.calcs.bottom.getData():{},groups:s},t}adjustForScrollbar(e){this.botRow&&(this.table.rtl?this.botElement.style.paddingLeft=e+"px":this.botElement.style.paddingRight=e+"px")}};X(ft,"moduleName","columnCalcs"),X(ft,"calculations",ru);let Zi=ft;class sr extends he{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this)),this.registerComponentFunction("row","isTreeExpanded",this.isRowExpanded.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,n=this.table.options;switch(this.field=n.dataTreeChildField,this.indent=n.dataTreeChildIndent,this.options("movableRows")&&console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"),n.dataTreeBranchElement?n.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof n.dataTreeBranchElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=n.dataTreeBranchElement:(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch-empty")),n.dataTreeCollapseElement?typeof n.dataTreeCollapseElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=n.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),n.dataTreeExpandElement?typeof n.dataTreeExpandElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=n.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof n.dataTreeStartExpanded){case"boolean":this.startOpen=function(i,s){return n.dataTreeStartExpanded};break;case"function":this.startOpen=n.dataTreeStartExpanded;break;default:this.startOpen=function(i,s){return n.dataTreeStartExpanded[s]};break}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("cell-value-updated",this.cellValueChanged.bind(this)),this.subscribe("edit-cancelled",this.cellValueChanged.bind(this)),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.subscribe("table-built",this.initializeElementField.bind(this)),this.subscribe("table-redrawing",this.tableRedrawing.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}tableRedrawing(e){var n;e&&(n=this.table.rowManager.getRows(),n.forEach(i=>{this.reinitializeRowChildren(i)}))}initializeElementField(){var e=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(e?e.field:!1)}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(n=>{e=e.concat(this.getTreeChildren(n,!1,!0))}),e}rowDataChanged(e,n,i){this.redrawNeeded(i)&&(this.initializeRow(e),n&&(this.layoutRow(e),this.refreshData(!0)))}cellValueChanged(e){var n=e.column.getField();n===this.elementField&&this.layoutRow(e.row)}initializeRow(e){var n=e.getData()[this.field],i=Array.isArray(n),s=i||!i&&typeof n=="object"&&n!==null;!s&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!s&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:s?e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0):!1,controlEl:e.modules.dataTree&&s?e.modules.dataTree.controlEl:!1,branchEl:e.modules.dataTree&&s?e.modules.dataTree.branchEl:!1,parent:e.modules.dataTree?e.modules.dataTree.parent:!1,children:s}}reinitializeRowChildren(e){var n=this.getTreeChildren(e,!1,!0);n.forEach(function(i){i.reinitialize(!0)})}layoutRow(e){var n=this.elementField?e.getCell(this.elementField):e.getCells()[0],i=n.getElement(),s=e.modules.dataTree;s.branchEl&&(s.branchEl.parentNode&&s.branchEl.parentNode.removeChild(s.branchEl),s.branchEl=!1),s.controlEl&&(s.controlEl.parentNode&&s.controlEl.parentNode.removeChild(s.controlEl),s.controlEl=!1),this.generateControlElement(e,i),e.getElement().classList.add("tabulator-tree-level-"+s.index),s.index&&(this.branchEl?(s.branchEl=this.branchEl.cloneNode(!0),i.insertBefore(s.branchEl,i.firstChild),this.table.rtl?s.branchEl.style.marginRight=(s.branchEl.offsetWidth+s.branchEl.style.marginLeft)*(s.index-1)+s.index*this.indent+"px":s.branchEl.style.marginLeft=(s.branchEl.offsetWidth+s.branchEl.style.marginRight)*(s.index-1)+s.index*this.indent+"px"):this.table.rtl?i.style.paddingRight=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-right"))+s.index*this.indent+"px":i.style.paddingLeft=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-left"))+s.index*this.indent+"px")}generateControlElement(e,n){var i=e.modules.dataTree,s=i.controlEl;n=n||e.getCells()[0].getElement(),i.children!==!1&&(i.open?(i.controlEl=this.collapseEl.cloneNode(!0),i.controlEl.addEventListener("click",t=>{t.stopPropagation(),this.collapseRow(e)})):(i.controlEl=this.expandEl.cloneNode(!0),i.controlEl.addEventListener("click",t=>{t.stopPropagation(),this.expandRow(e)})),i.controlEl.addEventListener("mousedown",t=>{t.stopPropagation()}),s&&s.parentNode===n?s.parentNode.replaceChild(i.controlEl,s):n.insertBefore(i.controlEl,n.firstChild))}getRows(e){var n=[];return e.forEach((i,s)=>{var t,r;n.push(i),i instanceof Be&&(i.create(),t=i.modules.dataTree,!t.index&&t.children!==!1&&(r=this.getChildren(i,!1,!0),r.forEach(o=>{o.create(),n.push(o)})))}),n}getChildren(e,n,i){var s=e.modules.dataTree,t=[],r=[];return s.children!==!1&&(s.open||n)&&(Array.isArray(s.children)||(s.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?t=this.table.modules.filter.filter(s.children):t=s.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(t,i),t.forEach(o=>{r.push(o);var a=this.getChildren(o,!1,!0);a.forEach(l=>{r.push(l)})})),r}generateChildren(e){var n=[],i=e.getData()[this.field];return Array.isArray(i)||(i=[i]),i.forEach(s=>{var t=new Be(s||{},this.table.rowManager);t.create(),t.modules.dataTree.index=e.modules.dataTree.index+1,t.modules.dataTree.parent=e,t.modules.dataTree.children&&(t.modules.dataTree.open=this.startOpen(t.getComponent(),t.modules.dataTree.index)),n.push(t)}),n}expandRow(e,n){var i=e.modules.dataTree;i.children!==!1&&(i.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var n=e.modules.dataTree;n.children!==!1&&(n.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var n=e.modules.dataTree;n.children!==!1&&(n.open?this.collapseRow(e):this.expandRow(e))}isRowExpanded(e){return e.modules.dataTree.open}getTreeParent(e){return e.modules.dataTree.parent?e.modules.dataTree.parent.getComponent():!1}getTreeParentRoot(e){return e.modules.dataTree&&e.modules.dataTree.parent?this.getTreeParentRoot(e.modules.dataTree.parent):e}getFilteredTreeChildren(e){var n=e.modules.dataTree,i=[],s;return n.children&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?s=this.table.modules.filter.filter(n.children):s=n.children,s.forEach(t=>{t instanceof Be&&i.push(t)})),i}rowDeleting(e){var n=e.modules.dataTree;n&&n.children&&Array.isArray(n.children)&&n.children.forEach(i=>{i instanceof Be&&i.wipe()})}rowDelete(e){var n=e.modules.dataTree.parent,i;n&&(i=this.findChildIndex(e,n),i!==!1&&n.data[this.field].splice(i,1),n.data[this.field].length||delete n.data[this.field],this.initializeRow(n),this.layoutRow(n)),this.refreshData(!0)}addTreeChildRow(e,n,i,s){var t=!1;typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),typeof s<"u"&&(t=this.findChildIndex(s,e),t!==!1&&e.data[this.field].splice(i?t:t+1,0,n)),t===!1&&(i?e.data[this.field].unshift(n):e.data[this.field].push(n)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,n){var i=!1;return typeof e=="object"?e instanceof Be?i=e.data:e instanceof yi?i=e._getSelf().data:typeof HTMLElement<"u"&&e instanceof HTMLElement?n.modules.dataTree&&(i=n.modules.dataTree.children.find(s=>s instanceof Be?s.element===e:!1),i&&(i=i.data)):e===null&&(i=!1):typeof e>"u"?i=!1:i=n.data[this.field].find(s=>s.data[this.table.options.index]==e),i&&(Array.isArray(n.data[this.field])&&(i=n.data[this.field].indexOf(i)),i==-1&&(i=!1)),i}getTreeChildren(e,n,i){var s=e.modules.dataTree,t=[];return s&&s.children&&(Array.isArray(s.children)||(s.children=this.generateChildren(e)),s.children.forEach(r=>{r instanceof Be&&(t.push(n?r.getComponent():r),i&&this.getTreeChildren(r,n,i).forEach(o=>{t.push(o)}))})),t}getChildField(){return this.field}redrawNeeded(e){return(this.field?typeof e[this.field]<"u":!1)||(this.elementField?typeof e[this.elementField]<"u":!1)}}X(sr,"moduleName","dataTree");function ou(c,e={},n){var i=e.delimiter?e.delimiter:",",s=[],t=[];c.forEach(r=>{var o=[];switch(r.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":r.columns.forEach((a,l)=>{a&&a.depth===1&&(t[l]=typeof a.value>"u"||a.value===null?"":'"'+String(a.value).split('"').join('""')+'"')});break;case"row":r.columns.forEach(a=>{if(a){switch(typeof a.value){case"object":a.value=a.value!==null?JSON.stringify(a.value):"";break;case"undefined":a.value="";break}o.push('"'+String(a.value).split('"').join('""')+'"')}}),s.push(o.join(i));break}}),t.length&&s.unshift(t.join(i)),s=s.join(`
`),e.bom&&(s="\uFEFF"+s),n(s,"text/csv")}function au(c,e,n){var i=[];c.forEach(s=>{var t={};switch(s.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":s.columns.forEach(r=>{r&&(t[r.component.getTitleDownload()||r.component.getField()]=r.value)}),i.push(t);break}}),i=JSON.stringify(i,null,"	"),n(i,"application/json")}function lu(c,e={},n){var i=[],s=[],t={},r=e.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},o=e.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},a=e.jsPDF||{},l=e.title?e.title:"",u,d;a.orientation||(a.orientation=e.orientation||"landscape"),a.unit||(a.unit="pt"),c.forEach(f=>{switch(f.type){case"header":i.push(h(f));break;case"group":s.push(h(f,r));break;case"calc":s.push(h(f,o));break;case"row":s.push(h(f));break}});function h(f,m){var g=[];return f.columns.forEach(v=>{var p;if(v){switch(typeof v.value){case"object":v.value=v.value!==null?JSON.stringify(v.value):"";break;case"undefined":v.value="";break}p={content:v.value,colSpan:v.width,rowSpan:v.height},m&&(p.styles=m),g.push(p)}}),g}u=this.dependencyRegistry.lookup("jspdf","jsPDF"),d=new u(a),e.autoTable&&(typeof e.autoTable=="function"?t=e.autoTable(d)||{}:t=e.autoTable),l&&(t.didDrawPage=function(f){d.text(l,40,30)}),t.head=i,t.body=s,d.autoTable(t),e.documentProcessing&&e.documentProcessing(d),n(d.output("arraybuffer"),"application/pdf")}function uu(c,e,n){var i=this,s=e.sheetName||"Sheet1",t=this.dependencyRegistry.lookup("XLSX"),r=t.utils.book_new(),o=new Le(this),a="compress"in e?e.compress:!0,l=e.writeOptions||{bookType:"xlsx",bookSST:!0,compression:a},u;l.type="binary",r.SheetNames=[],r.Sheets={};function d(){var m=[],g=[],v={},p={s:{c:0,r:0},e:{c:c[0]?c[0].columns.reduce((E,R)=>E+(R&&R.width?R.width:1),0):0,r:c.length}};return c.forEach((E,R)=>{var O=[];E.columns.forEach(function(T,D){T?(O.push(!(T.value instanceof Date)&&typeof T.value=="object"?JSON.stringify(T.value):T.value),(T.width>1||T.height>-1)&&(T.height>1||T.width>1)&&g.push({s:{r:R,c:D},e:{r:R+T.height-1,c:D+T.width-1}})):O.push("")}),m.push(O)}),t.utils.sheet_add_aoa(v,m),v["!ref"]=t.utils.encode_range(p),g.length&&(v["!merges"]=g),v}if(e.sheetOnly){n(d());return}if(e.sheets)for(var h in e.sheets)e.sheets[h]===!0?(r.SheetNames.push(h),r.Sheets[h]=d()):(r.SheetNames.push(h),o.commsSend(e.sheets[h],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:i.active,intercept:function(m){r.Sheets[h]=m}}));else r.SheetNames.push(s),r.Sheets[s]=d();e.documentProcessing&&(r=e.documentProcessing(r));function f(m){for(var g=new ArrayBuffer(m.length),v=new Uint8Array(g),p=0;p!=m.length;++p)v[p]=m.charCodeAt(p)&255;return g}u=t.write(r,l),n(f(u),"application/octet-stream")}function hu(c,e,n){this.modExists("export",!0)&&n(this.modules.export.generateHTMLTable(c),"text/html")}function du(c,e,n){const i=[];c.forEach(s=>{const t={};switch(s.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":s.columns.forEach(r=>{r&&(t[r.component.getTitleDownload()||r.component.getField()]=r.value)}),i.push(JSON.stringify(t));break}}),n(i.join(`
`),"application/x-ndjson")}var cu={csv:ou,json:au,jsonLines:du,pdf:lu,xlsx:uu,html:hu};const At=class At extends he{constructor(e){super(e),this.registerTableOption("downloadEncoder",function(n,i){return new Blob([n],{type:i})}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.deprecatedOptionsCheck(),this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}deprecatedOptionsCheck(){}downloadToTab(e,n,i,s){this.download(e,n,i,s,!0)}download(e,n,i,s,t){var r=!1;function o(l,u){t?t===!0?this.triggerDownload(l,u,e,n,!0):t(l):this.triggerDownload(l,u,e,n)}if(typeof e=="function"?r=e:At.downloaders[e]?r=At.downloaders[e]:console.warn("Download Error - No such download type found: ",e),r){var a=this.generateExportList(s);r.call(this.table,a,i||{},o.bind(this))}}generateExportList(e){var n=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),i=this.table.options.groupHeaderDownload;return i&&!Array.isArray(i)&&(i=[i]),n.forEach(s=>{var t;s.type==="group"&&(t=s.columns[0],i&&i[s.indent]&&(t.value=i[s.indent](t.value,s.component._group.getRowCount(),s.component._group.getData(),s.component)))}),n}triggerDownload(e,n,i,s,t){var r=document.createElement("a"),o=this.table.options.downloadEncoder(e,n);o&&(t?window.open(window.URL.createObjectURL(o)):(s=s||"Tabulator."+(typeof i=="function"?"txt":i),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(o,s):(r.setAttribute("href",window.URL.createObjectURL(o)),r.setAttribute("download",s),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r))),this.dispatchExternal("downloadComplete"))}commsReceived(e,n,i){switch(n){case"intercept":this.download(i.type,"",i.options,i.active,i.intercept);break}}};X(At,"moduleName","download"),X(At,"downloaders",cu);let qi=At;function Ei(c,e){var n=e.mask,i=typeof e.maskLetterChar<"u"?e.maskLetterChar:"A",s=typeof e.maskNumberChar<"u"?e.maskNumberChar:"9",t=typeof e.maskWildcardChar<"u"?e.maskWildcardChar:"*";function r(o){var a=n[o];typeof a<"u"&&a!==t&&a!==i&&a!==s&&(c.value=c.value+""+a,r(o+1))}c.addEventListener("keydown",o=>{var a=c.value.length,l=o.key;if(o.keyCode>46&&!o.ctrlKey&&!o.metaKey){if(a>=n.length)return o.preventDefault(),o.stopPropagation(),!1;switch(n[a]){case i:if(l.toUpperCase()==l.toLowerCase())return o.preventDefault(),o.stopPropagation(),!1;break;case s:if(isNaN(l))return o.preventDefault(),o.stopPropagation(),!1;break;case t:break;default:if(l!==n[a])return o.preventDefault(),o.stopPropagation(),!1}}}),c.addEventListener("keyup",o=>{o.keyCode>46&&e.maskAutoFill&&r(c.value.length)}),c.placeholder||(c.placeholder=n),e.maskAutoFill&&r(c.value.length)}function fu(c,e,n,i,s){var t=c.getValue(),r=document.createElement("input");if(r.setAttribute("type",s.search?"search":"text"),r.style.padding="4px",r.style.width="100%",r.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let a in s.elementAttributes)a.charAt(0)=="+"?(a=a.slice(1),r.setAttribute(a,r.getAttribute(a)+s.elementAttributes["+"+a])):r.setAttribute(a,s.elementAttributes[a]);r.value=typeof t<"u"?t:"",e(function(){c.getType()==="cell"&&(r.focus({preventScroll:!0}),r.style.height="100%",s.selectContents&&r.select())});function o(a){(t===null||typeof t>"u")&&r.value!==""||r.value!==t?n(r.value)&&(t=r.value):i()}return r.addEventListener("change",o),r.addEventListener("blur",o),r.addEventListener("keydown",function(a){switch(a.keyCode){case 13:o();break;case 27:i();break;case 35:case 36:a.stopPropagation();break}}),s.mask&&Ei(r,s),r}function pu(c,e,n,i,s){var t=c.getValue(),r=s.verticalNavigation||"hybrid",o=String(t!==null&&typeof t<"u"?t:""),a=document.createElement("textarea"),l=0;if(a.style.display="block",a.style.padding="2px",a.style.height="100%",a.style.width="100%",a.style.boxSizing="border-box",a.style.whiteSpace="pre-wrap",a.style.resize="none",s.elementAttributes&&typeof s.elementAttributes=="object")for(let d in s.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),a.setAttribute(d,a.getAttribute(d)+s.elementAttributes["+"+d])):a.setAttribute(d,s.elementAttributes[d]);a.value=o,e(function(){c.getType()==="cell"&&(a.focus({preventScroll:!0}),a.style.height="100%",a.scrollHeight,a.style.height=a.scrollHeight+"px",c.getRow().normalizeHeight(),s.selectContents&&a.select())});function u(d){(t===null||typeof t>"u")&&a.value!==""||a.value!==t?(n(a.value)&&(t=a.value),setTimeout(function(){c.getRow().normalizeHeight()},300)):i()}return a.addEventListener("change",u),a.addEventListener("blur",u),a.addEventListener("keyup",function(){a.style.height="";var d=a.scrollHeight;a.style.height=d+"px",d!=l&&(l=d,c.getRow().normalizeHeight())}),a.addEventListener("keydown",function(d){switch(d.keyCode){case 13:d.shiftKey&&s.shiftEnterSubmit&&u();break;case 27:i();break;case 38:(r=="editor"||r=="hybrid"&&a.selectionStart)&&(d.stopImmediatePropagation(),d.stopPropagation());break;case 40:(r=="editor"||r=="hybrid"&&a.selectionStart!==a.value.length)&&(d.stopImmediatePropagation(),d.stopPropagation());break;case 35:case 36:d.stopPropagation();break}}),s.mask&&Ei(a,s),a}function mu(c,e,n,i,s){var t=c.getValue(),r=s.verticalNavigation||"editor",o=document.createElement("input");if(o.setAttribute("type","number"),typeof s.max<"u"&&o.setAttribute("max",s.max),typeof s.min<"u"&&o.setAttribute("min",s.min),typeof s.step<"u"&&o.setAttribute("step",s.step),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let u in s.elementAttributes)u.charAt(0)=="+"?(u=u.slice(1),o.setAttribute(u,o.getAttribute(u)+s.elementAttributes["+"+u])):o.setAttribute(u,s.elementAttributes[u]);o.value=t;var a=function(u){l()};e(function(){c.getType()==="cell"&&(o.removeEventListener("blur",a),o.focus({preventScroll:!0}),o.style.height="100%",o.addEventListener("blur",a),s.selectContents&&o.select())});function l(){var u=o.value;!isNaN(u)&&u!==""&&(u=Number(u)),u!==t?n(u)&&(t=u):i()}return o.addEventListener("keydown",function(u){switch(u.keyCode){case 13:l();break;case 27:i();break;case 38:case 40:r=="editor"&&(u.stopImmediatePropagation(),u.stopPropagation());break;case 35:case 36:u.stopPropagation();break}}),s.mask&&Ei(o,s),o}function gu(c,e,n,i,s){var t=c.getValue(),r=document.createElement("input");if(r.setAttribute("type","range"),typeof s.max<"u"&&r.setAttribute("max",s.max),typeof s.min<"u"&&r.setAttribute("min",s.min),typeof s.step<"u"&&r.setAttribute("step",s.step),r.style.padding="4px",r.style.width="100%",r.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let a in s.elementAttributes)a.charAt(0)=="+"?(a=a.slice(1),r.setAttribute(a,r.getAttribute(a)+s.elementAttributes["+"+a])):r.setAttribute(a,s.elementAttributes[a]);r.value=t,e(function(){c.getType()==="cell"&&(r.focus({preventScroll:!0}),r.style.height="100%")});function o(){var a=r.value;!isNaN(a)&&a!==""&&(a=Number(a)),a!=t?n(a)&&(t=a):i()}return r.addEventListener("blur",function(a){o()}),r.addEventListener("keydown",function(a){switch(a.keyCode){case 13:o();break;case 27:i();break}}),r}function vu(c,e,n,i,s){var t=s.format,r=s.verticalNavigation||"editor",o=t?window.DateTime||luxon.DateTime:null,a=c.getValue(),l=document.createElement("input");function u(h){var f;return o.isDateTime(h)?f=h:t==="iso"?f=o.fromISO(String(h)):f=o.fromFormat(String(h),t),f.toFormat("yyyy-MM-dd")}if(l.type="date",l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",s.max&&l.setAttribute("max",t?u(s.max):s.max),s.min&&l.setAttribute("min",t?u(s.min):s.min),s.elementAttributes&&typeof s.elementAttributes=="object")for(let h in s.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),l.setAttribute(h,l.getAttribute(h)+s.elementAttributes["+"+h])):l.setAttribute(h,s.elementAttributes[h]);a=typeof a<"u"?a:"",t&&(o?a=u(a):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),l.value=a,e(function(){c.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%",s.selectContents&&l.select())});function d(){var h=l.value,f;if((a===null||typeof a>"u")&&h!==""||h!==a){if(h&&t)switch(f=o.fromFormat(String(h),"yyyy-MM-dd"),t){case!0:h=f;break;case"iso":h=f.toISO();break;default:h=f.toFormat(t)}n(h)&&(a=l.value)}else i()}return l.addEventListener("blur",function(h){(h.relatedTarget||h.rangeParent||h.explicitOriginalTarget!==l)&&d()}),l.addEventListener("keydown",function(h){switch(h.keyCode){case 13:d();break;case 27:i();break;case 35:case 36:h.stopPropagation();break;case 38:case 40:r=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break}}),l}function bu(c,e,n,i,s){var t=s.format,r=s.verticalNavigation||"editor",o=t?window.DateTime||luxon.DateTime:null,a,l=c.getValue(),u=document.createElement("input");if(u.type="time",u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let h in s.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),u.setAttribute(h,u.getAttribute(h)+s.elementAttributes["+"+h])):u.setAttribute(h,s.elementAttributes[h]);l=typeof l<"u"?l:"",t&&(o?(o.isDateTime(l)?a=l:t==="iso"?a=o.fromISO(String(l)):a=o.fromFormat(String(l),t),l=a.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),u.value=l,e(function(){c.getType()=="cell"&&(u.focus({preventScroll:!0}),u.style.height="100%",s.selectContents&&u.select())});function d(){var h=u.value,f;if((l===null||typeof l>"u")&&h!==""||h!==l){if(h&&t)switch(f=o.fromFormat(String(h),"hh:mm"),t){case!0:h=f;break;case"iso":h=f.toISO();break;default:h=f.toFormat(t)}n(h)&&(l=u.value)}else i()}return u.addEventListener("blur",function(h){(h.relatedTarget||h.rangeParent||h.explicitOriginalTarget!==u)&&d()}),u.addEventListener("keydown",function(h){switch(h.keyCode){case 13:d();break;case 27:i();break;case 35:case 36:h.stopPropagation();break;case 38:case 40:r=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break}}),u}function yu(c,e,n,i,s){var t=s.format,r=s.verticalNavigation||"editor",o=t?this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"):null,a,l=c.getValue(),u=document.createElement("input");if(u.type="datetime-local",u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let h in s.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),u.setAttribute(h,u.getAttribute(h)+s.elementAttributes["+"+h])):u.setAttribute(h,s.elementAttributes[h]);l=typeof l<"u"?l:"",t&&(o?(o.isDateTime(l)?a=l:t==="iso"?a=o.fromISO(String(l)):a=o.fromFormat(String(l),t),l=a.toFormat("yyyy-MM-dd")+"T"+a.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),u.value=l,e(function(){c.getType()==="cell"&&(u.focus({preventScroll:!0}),u.style.height="100%",s.selectContents&&u.select())});function d(){var h=u.value,f;if((l===null||typeof l>"u")&&h!==""||h!==l){if(h&&t)switch(f=o.fromISO(String(h)),t){case!0:h=f;break;case"iso":h=f.toISO();break;default:h=f.toFormat(t)}n(h)&&(l=u.value)}else i()}return u.addEventListener("blur",function(h){(h.relatedTarget||h.rangeParent||h.explicitOriginalTarget!==u)&&d()}),u.addEventListener("keydown",function(h){switch(h.keyCode){case 13:d();break;case 27:i();break;case 35:case 36:h.stopPropagation();break;case 38:case 40:r=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break}}),u}let Eu=class{constructor(e,n,i,s,t,r){this.edit=e,this.table=e.table,this.cell=n,this.params=this._initializeParams(r),this.data=[],this.displayItems=[],this.currentItems=[],this.focusedItem=null,this.input=this._createInputElement(),this.listEl=this._createListElement(),this.initialValues=null,this.isFilter=n.getType()==="header",this.filterTimeout=null,this.filtered=!1,this.typing=!1,this.values=[],this.popup=null,this.listIteration=0,this.lastAction="",this.filterTerm="",this.blurable=!0,this.actions={success:s,cancel:t},this._deprecatedOptionsCheck(),this._initializeValue(),i(this._onRendered.bind(this))}_deprecatedOptionsCheck(){}_initializeValue(){var e=this.cell.getValue();typeof e>"u"&&typeof this.params.defaultValue<"u"&&(e=this.params.defaultValue),this.initialValues=this.params.multiselect?e:[e],this.isFilter&&(this.input.value=this.initialValues?this.initialValues.join(","):"",this.headerFilterInitialListGen())}_onRendered(){var e=this.cell.getElement();function n(i){i.stopPropagation()}this.isFilter||(this.input.style.height="100%",this.input.focus({preventScroll:!0})),e.addEventListener("click",n),setTimeout(()=>{e.removeEventListener("click",n)},1e3),this.input.addEventListener("mousedown",this._preventPopupBlur.bind(this))}_createListElement(){var e=document.createElement("div");return e.classList.add("tabulator-edit-list"),e.addEventListener("mousedown",this._preventBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e}_setListWidth(){var e=this.isFilter?this.input:this.cell.getElement();this.listEl.style.minWidth=e.offsetWidth+"px",this.params.maxWidth&&(this.params.maxWidth===!0?this.listEl.style.maxWidth=e.offsetWidth+"px":typeof this.params.maxWidth=="number"?this.listEl.style.maxWidth=this.params.maxWidth+"px":this.listEl.style.maxWidth=this.params.maxWidth)}_createInputElement(){var e=this.params.elementAttributes,n=document.createElement("input");if(n.setAttribute("type",this.params.clearable?"search":"text"),n.style.padding="4px",n.style.width="100%",n.style.boxSizing="border-box",this.params.autocomplete||(n.style.cursor="default",n.style.caretColor="transparent"),e&&typeof e=="object")for(let i in e)i.charAt(0)=="+"?(i=i.slice(1),n.setAttribute(i,n.getAttribute(i)+e["+"+i])):n.setAttribute(i,e[i]);return this.params.mask&&Ei(n,this.params),this._bindInputEvents(n),n}_initializeParams(e){var n=["values","valuesURL","valuesLookup"],i;return e=Object.assign({},e),e.verticalNavigation=e.verticalNavigation||"editor",e.placeholderLoading=typeof e.placeholderLoading>"u"?"Searching ...":e.placeholderLoading,e.placeholderEmpty=typeof e.placeholderEmpty>"u"?"No Results Found":e.placeholderEmpty,e.filterDelay=typeof e.filterDelay>"u"?300:e.filterDelay,e.emptyValue=Object.keys(e).includes("emptyValue")?e.emptyValue:"",i=Object.keys(e).filter(s=>n.includes(s)).length,i?i>1&&console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor"):console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"),e.autocomplete?e.multiselect&&(e.multiselect=!1,console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")):(e.freetext&&(e.freetext=!1,console.warn("list editor config error - freetext option is only available when autocomplete is enabled")),e.filterFunc&&(e.filterFunc=!1,console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")),e.filterRemote&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")),e.mask&&(e.mask=!1,console.warn("list editor config error - mask option is only available when autocomplete is enabled")),e.allowEmpty&&(e.allowEmpty=!1,console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")),e.listOnEmpty&&(e.listOnEmpty=!1,console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))),e.filterRemote&&!(typeof e.valuesLookup=="function"||e.valuesURL)&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")),e}_bindInputEvents(e){e.addEventListener("focus",this._inputFocus.bind(this)),e.addEventListener("click",this._inputClick.bind(this)),e.addEventListener("blur",this._inputBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e.addEventListener("search",this._inputSearch.bind(this)),this.params.autocomplete&&e.addEventListener("keyup",this._inputKeyUp.bind(this))}_inputFocus(e){this.rebuildOptionsList()}_filter(){this.params.filterRemote?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.rebuildOptionsList()},this.params.filterDelay)):this._filterList()}_inputClick(e){e.stopPropagation()}_inputBlur(e){this.blurable&&(this.popup?this.popup.hide():this._resolveValue(!0))}_inputSearch(){this._clearChoices()}_inputKeyDown(e){switch(e.keyCode){case 38:this._keyUp(e);break;case 40:this._keyDown(e);break;case 37:case 39:this._keySide(e);break;case 13:this._keyEnter();break;case 27:this._keyEsc();break;case 36:case 35:this._keyHomeEnd(e);break;case 9:this._keyTab(e);break;default:this._keySelectLetter(e)}}_inputKeyUp(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:this._keyAutoCompLetter(e)}}_preventPopupBlur(){this.popup&&this.popup.blockHide(),setTimeout(()=>{this.popup&&this.popup.restoreHide()},10)}_preventBlur(){this.blurable=!1,setTimeout(()=>{this.blurable=!0},10)}_keyTab(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem,!0)}_keyUp(e){var n=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&n)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),n>0&&this._focusItem(this.displayItems[n-1]))}_keyDown(e){var n=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&n<this.displayItems.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),n<this.displayItems.length-1&&(n==-1?this._focusItem(this.displayItems[0]):this._focusItem(this.displayItems[n+1])))}_keySide(e){this.params.autocomplete||(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())}_keyEnter(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem)}_keyEsc(e){this._cancel()}_keyHomeEnd(e){this.params.autocomplete&&e.stopImmediatePropagation()}_keySelectLetter(e){this.params.autocomplete||(e.preventDefault(),e.keyCode>=38&&e.keyCode<=90&&this._scrollToValue(e.keyCode))}_keyAutoCompLetter(e){this._filter(),this.lastAction="typing",this.typing=!0}_scrollToValue(e){clearTimeout(this.filterTimeout);var n=String.fromCharCode(e).toLowerCase();this.filterTerm+=n.toLowerCase();var i=this.displayItems.find(s=>typeof s.label<"u"&&s.label.toLowerCase().startsWith(this.filterTerm));i&&this._focusItem(i),this.filterTimeout=setTimeout(()=>{this.filterTerm=""},800)}_focusItem(e){this.lastAction="focus",this.focusedItem&&this.focusedItem.element&&this.focusedItem.element.classList.remove("focused"),this.focusedItem=e,e&&e.element&&(e.element.classList.add("focused"),e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}headerFilterInitialListGen(){this._generateOptions(!0)}rebuildOptionsList(){this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(e=>{Number.isInteger(e)||console.error("List generation error",e)})}_filterList(){this._buildList(this._filterOptions()),this._showList()}_generateOptions(e){var n=[],i=++this.listIteration;return this.filtered=!1,this.params.values?n=this.params.values:this.params.valuesURL?n=this._ajaxRequest(this.params.valuesURL,this.input.value):typeof this.params.valuesLookup=="function"?n=this.params.valuesLookup(this.cell,this.input.value):this.params.valuesLookup&&(n=this._uniqueColumnValues(this.params.valuesLookupField)),n instanceof Promise?(e||this._addPlaceholder(this.params.placeholderLoading),n.then().then(s=>this.listIteration===i?this._parseList(s):Promise.reject(i))):Promise.resolve(this._parseList(n))}_addPlaceholder(e){var n=document.createElement("div");typeof e=="function"&&(e=e(this.cell.getComponent(),this.listEl)),e&&(this._clearList(),e instanceof HTMLElement?n=e:(n.classList.add("tabulator-edit-list-placeholder"),n.innerHTML=e),this.listEl.appendChild(n),this._showList())}_ajaxRequest(e,n){var i=this.params.filterRemote?{term:n}:{};return e=er(e,{},i),fetch(e).then(s=>s.ok?s.json().catch(t=>(console.warn("List Ajax Load Error - Invalid JSON returned",t),Promise.reject(t))):(console.error("List Ajax Load Error - Connection Error: "+s.status,s.statusText),Promise.reject(s))).catch(s=>(console.error("List Ajax Load Error - Connection Error: ",s),Promise.reject(s)))}_uniqueColumnValues(e){var n={},i=this.table.getData(this.params.valuesLookup),s;return e?s=this.table.columnManager.getColumnByField(e):s=this.cell.getColumn()._getSelf(),s?i.forEach(t=>{var r=s.getFieldValue(t);this._emptyValueCheck(r)||(this.params.multiselect&&Array.isArray(r)?r.forEach(o=>{this._emptyValueCheck(o)||(n[o]=!0)}):n[r]=!0)}):(console.warn("unable to find matching column to create select lookup list:",e),n=[]),Object.keys(n)}_emptyValueCheck(e){return e===null||typeof e>"u"||e===""}_parseList(e){var n=[];return Array.isArray(e)||(e=Object.entries(e).map(([i,s])=>({label:s,value:i}))),e.forEach(i=>{typeof i!="object"&&(i={label:i,value:i}),this._parseListItem(i,n,0)}),!this.currentItems.length&&this.params.freetext&&(this.input.value=this.initialValues,this.typing=!0,this.lastAction="typing"),this.data=n,n}_parseListItem(e,n,i){var s={};e.options?s=this._parseListGroup(e,i+1):(s={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,selected:!1,visible:!0,level:i,original:e},this.initialValues&&this.initialValues.indexOf(e.value)>-1&&this._chooseItem(s,!0)),n.push(s)}_parseListGroup(e,n){var i={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,visible:!0,level:n,options:[],original:e};return e.options.forEach(s=>{this._parseListItem(s,i.options,n)}),i}_sortOptions(e){var n;return this.params.sort&&(n=typeof this.params.sort=="function"?this.params.sort:this._defaultSortFunction.bind(this),this._sortGroup(n,e)),e}_sortGroup(e,n){n.sort((i,s)=>e(i.label,s.label,i.value,s.value,i.original,s.original)),n.forEach(i=>{i.group&&this._sortGroup(e,i.options)})}_defaultSortFunction(e,n){var i,s,t,r,o=0,a,l=/(\d+)|(\D+)/g,u=/\d/,d=0;if(this.params.sort==="desc"&&([e,n]=[n,e]),!e&&e!==0)d=!n&&n!==0?0:-1;else if(!n&&n!==0)d=1;else{if(isFinite(e)&&isFinite(n))return e-n;if(i=String(e).toLowerCase(),s=String(n).toLowerCase(),i===s)return 0;if(!(u.test(i)&&u.test(s)))return i>s?1:-1;for(i=i.match(l),s=s.match(l),a=i.length>s.length?s.length:i.length;o<a;)if(t=i[o],r=s[o++],t!==r)return isFinite(t)&&isFinite(r)?(t.charAt(0)==="0"&&(t="."+t),r.charAt(0)==="0"&&(r="."+r),t-r):t>r?1:-1;return i.length>s.length}return d}_filterOptions(){var e=this.params.filterFunc||this._defaultFilterFunc,n=this.input.value;return n?(this.filtered=!0,this.data.forEach(i=>{this._filterItem(e,n,i)})):this.filtered=!1,this.data}_filterItem(e,n,i){var s=!1;return i.group?(i.options.forEach(t=>{this._filterItem(e,n,t)&&(s=!0)}),i.visible=s):i.visible=e(n,i.label,i.value,i.original),i.visible}_defaultFilterFunc(e,n,i,s){return e=String(e).toLowerCase(),n!==null&&typeof n<"u"&&(String(n).toLowerCase().indexOf(e)>-1||String(i).toLowerCase().indexOf(e)>-1)}_clearList(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild);this.displayItems=[]}_buildList(e){this._clearList(),e.forEach(n=>{this._buildItem(n)}),this.displayItems.length||this._addPlaceholder(this.params.placeholderEmpty)}_buildItem(e){var n=e.element,i;if(!this.filtered||e.visible){if(!n){if(n=document.createElement("div"),n.tabIndex=0,i=this.params.itemFormatter?this.params.itemFormatter(e.label,e.value,e.original,n):e.label,i instanceof HTMLElement?n.appendChild(i):n.innerHTML=i,e.group?n.classList.add("tabulator-edit-list-group"):n.classList.add("tabulator-edit-list-item"),n.classList.add("tabulator-edit-list-group-level-"+e.level),e.elementAttributes&&typeof e.elementAttributes=="object")for(let s in e.elementAttributes)s.charAt(0)=="+"?(s=s.slice(1),n.setAttribute(s,this.input.getAttribute(s)+e.elementAttributes["+"+s])):n.setAttribute(s,e.elementAttributes[s]);e.group?n.addEventListener("click",this._groupClick.bind(this,e)):n.addEventListener("click",this._itemClick.bind(this,e)),n.addEventListener("mousedown",this._preventBlur.bind(this)),e.element=n}this._styleItem(e),this.listEl.appendChild(n),e.group?e.options.forEach(s=>{this._buildItem(s)}):this.displayItems.push(e)}}_showList(){var e=this.popup&&this.popup.isVisible();if(this.input.parentNode){if(this.params.autocomplete&&this.input.value===""&&!this.params.listOnEmpty){this.popup&&this.popup.hide(!0);return}this._setListWidth(),this.popup||(this.popup=this.edit.popup(this.listEl)),this.popup.show(this.cell.getElement(),"bottom"),e||setTimeout(()=>{this.popup.hideOnBlur(this._resolveValue.bind(this,!0))},10)}}_styleItem(e){e&&e.element&&(e.selected?e.element.classList.add("active"):e.element.classList.remove("active"))}_itemClick(e,n){n.stopPropagation(),this._chooseItem(e)}_groupClick(e,n){n.stopPropagation()}_cancel(){this.popup.hide(!0),this.actions.cancel()}_clearChoices(){this.typing=!0,this.currentItems.forEach(e=>{e.selected=!1,this._styleItem(e)}),this.currentItems=[],this.focusedItem=null}_chooseItem(e,n){var i;this.typing=!1,this.params.multiselect?(i=this.currentItems.indexOf(e),i>-1?(this.currentItems.splice(i,1),e.selected=!1):(this.currentItems.push(e),e.selected=!0),this.input.value=this.currentItems.map(s=>s.label).join(","),this._styleItem(e)):(this.currentItems=[e],e.selected=!0,this.input.value=e.label,this._styleItem(e),n||this._resolveValue()),this._focusItem(e)}_resolveValue(e){var n,i;if(this.popup&&this.popup.hide(!0),this.params.multiselect)n=this.currentItems.map(s=>s.value);else if(e&&this.params.autocomplete&&this.typing)if(this.params.freetext||this.params.allowEmpty&&this.input.value==="")n=this.input.value;else{this.actions.cancel();return}else this.currentItems[0]?n=this.currentItems[0].value:(i=Array.isArray(this.initialValues)?this.initialValues[0]:this.initialValues,i===null||typeof i>"u"||i===""?n=i:n=this.params.emptyValue);n===""&&(n=this.params.emptyValue),this.actions.success(n),this.isFilter&&(this.initialValues=n&&!Array.isArray(n)?[n]:n,this.currentItems=[])}};function Cu(c,e,n,i,s){var t=new Eu(this,c,e,n,i,s);return t.input}function Ou(c,e,n,i,s){var t=this,r=c.getElement(),o=c.getValue(),a=r.getElementsByTagName("svg").length||5,l=r.getElementsByTagName("svg")[0]?r.getElementsByTagName("svg")[0].getAttribute("width"):14,u=[],d=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg");function f(p){u.forEach(function(E,R){R<p?(t.table.browser=="ie"?E.setAttribute("class","tabulator-star-active"):E.classList.replace("tabulator-star-inactive","tabulator-star-active"),E.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(t.table.browser=="ie"?E.setAttribute("class","tabulator-star-inactive"):E.classList.replace("tabulator-star-active","tabulator-star-inactive"),E.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function m(p){var E=document.createElement("span"),R=h.cloneNode(!0);u.push(R),E.addEventListener("mouseenter",function(O){O.stopPropagation(),O.stopImmediatePropagation(),f(p)}),E.addEventListener("mousemove",function(O){O.stopPropagation(),O.stopImmediatePropagation()}),E.addEventListener("click",function(O){O.stopPropagation(),O.stopImmediatePropagation(),n(p),r.blur()}),E.appendChild(R),d.appendChild(E)}function g(p){o=p,f(p)}if(r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",d.style.verticalAlign="middle",d.style.display="inline-block",d.style.padding="4px",h.setAttribute("width",l),h.setAttribute("height",l),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px",s.elementAttributes&&typeof s.elementAttributes=="object")for(let p in s.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),d.setAttribute(p,d.getAttribute(p)+s.elementAttributes["+"+p])):d.setAttribute(p,s.elementAttributes[p]);for(var v=1;v<=a;v++)m(v);return o=Math.min(parseInt(o),a),f(o),d.addEventListener("mousemove",function(p){f(0)}),d.addEventListener("click",function(p){n(0)}),r.addEventListener("blur",function(p){i()}),r.addEventListener("keydown",function(p){switch(p.keyCode){case 39:g(o+1);break;case 37:g(o-1);break;case 13:n(o);break;case 27:i();break}}),d}function Ru(c,e,n,i,s){var t=c.getElement(),r=typeof s.max>"u"?t.getElementsByTagName("div")[0]&&t.getElementsByTagName("div")[0].getAttribute("max")||100:s.max,o=typeof s.min>"u"?t.getElementsByTagName("div")[0]&&t.getElementsByTagName("div")[0].getAttribute("min")||0:s.min,a=(r-o)/100,l=c.getValue()||0,u=document.createElement("div"),d=document.createElement("div"),h,f;function m(){var g=window.getComputedStyle(t,null),v=a*Math.round(d.offsetWidth/((t.clientWidth-parseInt(g.getPropertyValue("padding-left"))-parseInt(g.getPropertyValue("padding-right")))/100))+o;n(v),t.setAttribute("aria-valuenow",v),t.setAttribute("aria-label",l)}if(u.style.position="absolute",u.style.right="0",u.style.top="0",u.style.bottom="0",u.style.width="5px",u.classList.add("tabulator-progress-handle"),d.style.display="inline-block",d.style.position="relative",d.style.height="100%",d.style.backgroundColor="#488CE9",d.style.maxWidth="100%",d.style.minWidth="0%",s.elementAttributes&&typeof s.elementAttributes=="object")for(let g in s.elementAttributes)g.charAt(0)=="+"?(g=g.slice(1),d.setAttribute(g,d.getAttribute(g)+s.elementAttributes["+"+g])):d.setAttribute(g,s.elementAttributes[g]);return t.style.padding="4px 4px",l=Math.min(parseFloat(l),r),l=Math.max(parseFloat(l),o),l=Math.round((l-o)/a),d.style.width=l+"%",t.setAttribute("aria-valuemin",o),t.setAttribute("aria-valuemax",r),d.appendChild(u),u.addEventListener("mousedown",function(g){h=g.screenX,f=d.offsetWidth}),u.addEventListener("mouseover",function(){u.style.cursor="ew-resize"}),t.addEventListener("mousemove",function(g){h&&(d.style.width=f+g.screenX-h+"px")}),t.addEventListener("mouseup",function(g){h&&(g.stopPropagation(),g.stopImmediatePropagation(),h=!1,f=!1,m())}),t.addEventListener("keydown",function(g){switch(g.keyCode){case 39:g.preventDefault(),d.style.width=d.clientWidth+t.clientWidth/100+"px";break;case 37:g.preventDefault(),d.style.width=d.clientWidth-t.clientWidth/100+"px";break;case 9:case 13:m();break;case 27:i();break}}),t.addEventListener("blur",function(){i()}),d}function wu(c,e,n,i,s){var t=c.getValue(),r=document.createElement("input"),o=s.tristate,a=typeof s.indeterminateValue>"u"?null:s.indeterminateValue,l=!1,u=Object.keys(s).includes("trueValue"),d=Object.keys(s).includes("falseValue");if(r.setAttribute("type","checkbox"),r.style.marginTop="5px",r.style.boxSizing="border-box",s.elementAttributes&&typeof s.elementAttributes=="object")for(let f in s.elementAttributes)f.charAt(0)=="+"?(f=f.slice(1),r.setAttribute(f,r.getAttribute(f)+s.elementAttributes["+"+f])):r.setAttribute(f,s.elementAttributes[f]);r.value=t,o&&(typeof t>"u"||t===a||t==="")&&(l=!0,r.indeterminate=!0),this.table.browser!="firefox"&&this.table.browser!="safari"&&e(function(){c.getType()==="cell"&&r.focus({preventScroll:!0})}),r.checked=u?t===s.trueValue:t===!0||t==="true"||t==="True"||t===1;function h(f){var m=r.checked;return u&&m?m=s.trueValue:d&&!m&&(m=s.falseValue),o?f?l?a:m:r.checked&&!l?(r.checked=!1,r.indeterminate=!0,l=!0,a):(l=!1,m):m}return r.addEventListener("change",function(f){n(h())}),r.addEventListener("blur",function(f){n(h(!0))}),r.addEventListener("keydown",function(f){f.keyCode==13&&n(h()),f.keyCode==27&&i()}),r}function Tu(c,e,n,i,s){var t=c._getSelf().column,r,o,a;function l(u){var d=u.getValue(),h="input";switch(typeof d){case"number":h="number";break;case"boolean":h="tickCross";break;case"string":d.includes(`
`)&&(h="textarea");break}return h}return r=s.editorLookup?s.editorLookup(c):l(c),s.paramsLookup&&(a=typeof s.paramsLookup=="function"?s.paramsLookup(r,c):s.paramsLookup[r]),o=this.table.modules.edit.lookupEditor(r,t),o.call(this,c,e,n,i,a||{})}var Mu={input:fu,textarea:pu,number:mu,range:gu,date:vu,time:bu,datetime:yu,list:Cu,star:Ou,progress:Ru,tickCross:wu,adaptable:Tu};const $t=class $t extends he{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.convertEmptyValues=!1,this.editors=$t.editors,this.registerTableOption("editTriggerEvent","focus"),this.registerTableOption("editorEmptyValue"),this.registerTableOption("editorEmptyValueFunc",this.emptyValueCheck.bind(this)),this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("editorEmptyValue"),this.registerColumnOption("editorEmptyValueFunc"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellIsEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("cell-value-changed",this.updateCellClass.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("row-layout",this.rowEditableCheck.bind(this)),this.subscribe("data-refreshing",this.cancelEdit.bind(this)),this.subscribe("clipboard-paste",this.pasteBlocker.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this,void 0)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this,void 0)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this,void 0)),Object.keys(this.table.options).includes("editorEmptyValue")&&(this.convertEmptyValues=!0)}pasteBlocker(e){if(this.currentCell)return!0}keybindingNavigateNext(e){var n=this.currentCell,i=this.options("tabEndNewRow");n&&(this.navigateNext(n,e)||i&&(n.getElement().firstChild.blur(),this.invalidEdit||(i===!0?i=this.table.addRow({}):typeof i=="function"?i=this.table.addRow(i(n.row.getComponent())):i=this.table.addRow(Object.assign({},i)),i.then(()=>{setTimeout(()=>{n.getComponent().navigateNext()})}))))}cellIsEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}updateCellClass(e){this.allowEdit(e)?e.getElement().classList.add("tabulator-editable"):e.getElement().classList.remove("tabulator-editable")}clearCellEdited(e){e||(e=this.table.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.table.modules.edit.clearEdited(n._getSelf())})}navigatePrev(e=this.currentCell,n){var i,s;if(e){if(n&&n.preventDefault(),i=this.navigateLeft(),i)return!0;if(s=this.table.rowManager.prevDisplayRow(e.row,!0),s&&(i=this.findPrevEditableCell(s,s.cells.length),i))return i.getComponent().edit(),!0}return!1}navigateNext(e=this.currentCell,n){var i,s;if(e){if(n&&n.preventDefault(),i=this.navigateRight(),i)return!0;if(s=this.table.rowManager.nextDisplayRow(e.row,!0),s&&(i=this.findNextEditableCell(s,-1),i))return i.getComponent().edit(),!0}return!1}navigateLeft(e=this.currentCell,n){var i,s;return e&&(n&&n.preventDefault(),i=e.getIndex(),s=this.findPrevEditableCell(e.row,i),s)?(s.getComponent().edit(),!0):!1}navigateRight(e=this.currentCell,n){var i,s;return e&&(n&&n.preventDefault(),i=e.getIndex(),s=this.findNextEditableCell(e.row,i),s)?(s.getComponent().edit(),!0):!1}navigateUp(e=this.currentCell,n){var i,s;return e&&(n&&n.preventDefault(),i=e.getIndex(),s=this.table.rowManager.prevDisplayRow(e.row,!0),s)?(s.cells[i].getComponent().edit(),!0):!1}navigateDown(e=this.currentCell,n){var i,s;return e&&(n&&n.preventDefault(),i=e.getIndex(),s=this.table.rowManager.nextDisplayRow(e.row,!0),s)?(s.cells[i].getComponent().edit(),!0):!1}findNextEditableCell(e,n){var i=!1;if(n<e.cells.length-1)for(var s=n+1;s<e.cells.length;s++){let t=e.cells[s];if(t.column.modules.edit&&Ee.elVisible(t.getElement())&&this.allowEdit(t)){i=t;break}}return i}findPrevEditableCell(e,n){var i=!1;if(n>0)for(var s=n-1;s>=0;s--){let t=e.cells[s];if(t.column.modules.edit&&Ee.elVisible(t.getElement())&&this.allowEdit(t)){i=t;break}}return i}initializeColumnCheck(e){typeof e.definition.editor<"u"&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}rowEditableCheck(e){e.getCells().forEach(n=>{n.column.modules.edit&&typeof n.column.modules.edit.check=="function"&&this.updateCellClass(n)})}initializeColumn(e){var n=Object.keys(e.definition).includes("editorEmptyValue"),i={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{},convertEmptyValues:n,editorEmptyValue:e.definition.editorEmptyValue,editorEmptyValueFunc:e.definition.editorEmptyValueFunc};i.editor=this.lookupEditor(e.definition.editor,e),i.editor&&(e.modules.edit=i)}lookupEditor(e,n){var i;switch(typeof e){case"string":this.editors[e]?i=this.editors[e]:console.warn("Editor Error - No such editor found: ",e);break;case"function":i=e;break;case"boolean":e===!0&&(typeof n.definition.formatter!="function"?this.editors[n.definition.formatter]?i=this.editors[n.definition.formatter]:i=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",n.definition.formatter));break}return i}getCurrentCell(){return this.currentCell?this.currentCell.getComponent():!1}clearEditor(e){var n=this.currentCell,i;if(this.invalidEdit=!1,n){for(this.currentCell=!1,i=n.getElement(),this.dispatch("edit-editor-clear",n,e),i.classList.remove("tabulator-editing");i.firstChild;)i.removeChild(i.firstChild);n.row.getElement().classList.remove("tabulator-editing"),n.table.element.classList.remove("tabulator-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,n=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),(e.column.definition.editor=="textarea"||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,n),this.dispatch("edit-cancelled",e),this.dispatchExternal("cellEditCancelled",n)}}bindEditor(e){if(e.column.modules.edit){var n=this,i=e.getElement(!0);this.updateCellClass(e),i.setAttribute("tabindex",0),i.addEventListener("mousedown",function(s){s.button===2?s.preventDefault():n.mouseClick=!0}),this.options("editTriggerEvent")==="dblclick"&&i.addEventListener("dblclick",function(s){i.classList.contains("tabulator-editing")||(i.focus({preventScroll:!0}),n.edit(e,s,!1))}),(this.options("editTriggerEvent")==="focus"||this.options("editTriggerEvent")==="click")&&i.addEventListener("click",function(s){i.classList.contains("tabulator-editing")||(i.focus({preventScroll:!0}),n.edit(e,s,!1))}),this.options("editTriggerEvent")==="focus"&&i.addEventListener("focus",function(s){n.recursionBlock||n.edit(e,s,!1)})}}focusCellNoEvent(e,n){this.recursionBlock=!0,n&&this.table.browser==="ie"||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,n){this.focusCellNoEvent(e),this.edit(e,!1,n)}focusScrollAdjust(e){if(this.table.rowManager.getRenderMode()=="virtual"){var n=this.table.rowManager.element.scrollTop,i=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,s=e.row.getElement();s.offsetTop<n?this.table.rowManager.element.scrollTop-=n-s.offsetTop:s.offsetTop+s.offsetHeight>i&&(this.table.rowManager.element.scrollTop+=s.offsetTop+s.offsetHeight-i);var t=this.table.rowManager.element.scrollLeft,r=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,o=e.getElement();this.table.modExists("frozenColumns")&&(t+=parseInt(this.table.modules.frozenColumns.leftMargin||0),r-=parseInt(this.table.modules.frozenColumns.rightMargin||0)),this.table.options.renderHorizontal==="virtual"&&(t-=parseInt(this.table.columnManager.renderer.vDomPadLeft),r-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),o.offsetLeft<t?this.table.rowManager.element.scrollLeft-=t-o.offsetLeft:o.offsetLeft+o.offsetWidth>r&&(this.table.rowManager.element.scrollLeft+=o.offsetLeft+o.offsetWidth-r)}}allowEdit(e){var n=!!e.column.modules.edit;if(e.column.modules.edit)switch(typeof e.column.modules.edit.check){case"function":e.row.initialized&&(n=e.column.modules.edit.check(e.getComponent()));break;case"string":n=!!e.row.data[e.column.modules.edit.check];break;case"boolean":n=e.column.modules.edit.check;break}return n}edit(e,n,i){var s=this,t=!0,r=function(){},o=e.getElement(),a=!1,l,u,d;if(this.currentCell){!this.invalidEdit&&this.currentCell!==e&&this.cancelEdit();return}function h(p){if(s.currentCell===e&&!a){var E=s.chain("edit-success",[e,p],!0,!0);return E===!0||s.table.options.validationMode==="highlight"?(a=!0,s.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,s.editedCells.indexOf(e)==-1&&s.editedCells.push(e),p=s.transformEmptyValues(p,e),e.setValue(p,!0),E===!0):(a=!0,s.invalidEdit=!0,s.focusCellNoEvent(e,!0),r(),setTimeout(()=>{a=!1},10),!1)}}function f(){s.currentCell===e&&!a&&s.cancelEdit()}function m(p){r=p}if(e.column.modules.edit.blocked)return this.mouseClick=!1,this.blur(o),!1;if(n&&n.stopPropagation(),t=this.allowEdit(e),t||i){if(s.cancelEdit(),s.currentCell=e,this.focusScrollAdjust(e),u=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,n,u)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,u),this.dispatch("cell-editing",e),this.dispatchExternal("cellEditing",u),d=typeof e.column.modules.edit.params=="function"?e.column.modules.edit.params(u):e.column.modules.edit.params,l=e.column.modules.edit.editor.call(s,u,m,h,f,d),this.currentCell&&l!==!1)if(l instanceof Node){for(o.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-editing"),e.table.element.classList.add("tabulator-editing");o.firstChild;)o.removeChild(o.firstChild);o.appendChild(l),r();for(var g=o.children,v=0;v<g.length;v++)g[v].addEventListener("click",function(p){p.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",l),this.blur(o),!1;else return this.blur(o),!1;return!0}else return this.mouseClick=!1,this.blur(o),!1}emptyValueCheck(e){return e===""||e===null||typeof e>"u"}transformEmptyValues(e,n){var i=n.column.modules.edit,s=i.convertEmptyValues||this.convertEmptyValues,t;return s&&(t=i.editorEmptyValueFunc||this.options("editorEmptyValueFunc"),t&&t(e)&&(e=i.convertEmptyValues?i.editorEmptyValue:this.options("editorEmptyValue"))),e}blur(e){this.confirm("edit-blur",[e])||e.blur()}getEditedCells(){var e=[];return this.editedCells.forEach(n=>{e.push(n.getComponent())}),e}clearEdited(e){var n;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,this.dispatch("edit-edited-clear",e)),n=this.editedCells.indexOf(e),n>-1&&this.editedCells.splice(n,1)}};X($t,"moduleName","edit"),X($t,"editors",Mu);let _i=$t;class ns{constructor(e,n,i,s){this.type=e,this.columns=n,this.component=i||!1,this.indent=s||0}}class Bi{constructor(e,n,i,s,t){this.value=e,this.component=n||!1,this.width=i,this.height=s,this.depth=t}}var Pu={},Du={visible:function(){return this.rowManager.getVisibleRows(!1,!0)},all:function(){return this.rowManager.rows},selected:function(){return this.modules.selectRow.selectedRows},active:function(){return this.options.pagination?this.rowManager.getDisplayRows(this.rowManager.displayRows.length-2):this.rowManager.getDisplayRows()}};const pt=class pt extends he{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.colVisPropAttach="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,n,i,s){var t,r,o,a;return this.cloneTableStyle=n,this.config=e||{},this.colVisProp=s,this.colVisPropAttach=this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1),a=pt.columnLookups[i],a&&(o=a.call(this.table),o=o.filter(l=>this.columnVisCheck(l))),t=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders(o)):[],o&&(o=o.map(l=>l.getComponent())),r=this.bodyToExportRows(this.rowLookup(i),o),t.concat(r)}generateTable(e,n,i,s){var t=this.generateExportList(e,n,i,s);return this.generateTableElement(t)}rowLookup(e){var n=[],i;return typeof e=="function"?e.call(this.table).forEach(s=>{s=this.table.rowManager.findRow(s),s&&n.push(s)}):(i=pt.rowLookups[e]||pt.rowLookups.active,n=i.call(this.table)),Object.assign([],n)}generateColumnGroupHeaders(e){var n=[];return e||(e=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex),e.forEach(i=>{var s=this.processColumnGroup(i);s&&n.push(s)}),n}processColumnGroup(e){var n=e.columns,i=0,s=e.definition["title"+this.colVisPropAttach]||e.definition.title,t={title:s,column:e,depth:1};if(n.length){if(t.subGroups=[],t.width=0,n.forEach(r=>{var o=this.processColumnGroup(r);o&&(t.width+=o.width,t.subGroups.push(o),o.depth>i&&(i=o.depth))}),t.depth+=i,!t.width)return!1}else if(this.columnVisCheck(e))t.width=1;else return!1;return t}columnVisCheck(e){var n=e.definition[this.colVisProp];return this.config.rowHeaders===!1&&e.isRowHeader?!1:(typeof n=="function"&&(n=n.call(this.table,e.getComponent())),n===!1||n===!0?n:e.visible&&e.field)}headersToExportRows(e){var n=[],i=0,s=[];function t(r,o){var a=i-o;if(typeof n[o]>"u"&&(n[o]=[]),r.height=r.subGroups?1:a-r.depth+1,n[o].push(r),r.height>1)for(let l=1;l<r.height;l++)typeof n[o+l]>"u"&&(n[o+l]=[]),n[o+l].push(!1);if(r.width>1)for(let l=1;l<r.width;l++)n[o].push(!1);r.subGroups&&r.subGroups.forEach(function(l){t(l,o+1)})}return e.forEach(function(r){r.depth>i&&(i=r.depth)}),e.forEach(function(r){t(r,0)}),n.forEach(r=>{var o=[];r.forEach(a=>{if(a){let l=typeof a.title>"u"?"":a.title;o.push(new Bi(l,a.column.getComponent(),a.width,a.height,a.depth))}else o.push(null)}),s.push(new ns("header",o))}),s}bodyToExportRows(e,n=[]){var i=[];return n.length===0&&this.table.columnManager.columnsByIndex.forEach(s=>{this.columnVisCheck(s)&&n.push(s.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),e=e.filter(s=>{switch(s.type){case"group":return this.config.rowGroups!==!1;case"calc":return this.config.columnCalcs!==!1;case"row":return!(this.table.options.dataTree&&this.config.dataTree===!1&&s.modules.dataTree.parent)}return!0}),e.forEach((s,t)=>{var r=s.getData(this.colVisProp),o=[],a=0;switch(s.type){case"group":a=s.level,o.push(new Bi(s.key,s.getComponent(),n.length,1));break;case"calc":case"row":n.forEach(l=>{o.push(new Bi(l._column.getFieldValue(r),l,1,1))}),this.table.options.dataTree&&this.config.dataTree!==!1&&(a=s.modules.dataTree.index);break}i.push(new ns(s.type,o,s.getComponent(),a))}),i}generateTableElement(e){var n=document.createElement("table"),i=document.createElement("thead"),s=document.createElement("tbody"),t=this.lookupTableStyles(),r=this.table.options["rowFormatter"+this.colVisPropAttach],o={};return o.rowFormatter=r!==null?r:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(o.treeElementField=this.table.modules.dataTree.elementField),o.groupHeader=this.table.options["groupHeader"+this.colVisPropAttach],o.groupHeader&&!Array.isArray(o.groupHeader)&&(o.groupHeader=[o.groupHeader]),n.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),i,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((a,l)=>{let u;switch(a.type){case"header":i.appendChild(this.generateHeaderElement(a,o,t));break;case"group":s.appendChild(this.generateGroupElement(a,o,t));break;case"calc":s.appendChild(this.generateCalcElement(a,o,t));break;case"row":u=this.generateRowElement(a,o,t),this.mapElementStyles(l%2&&t.evenRow?t.evenRow:t.oddRow,u,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),s.appendChild(u);break}}),i.innerHTML&&n.appendChild(i),n.appendChild(s),this.mapElementStyles(this.table.element,n,["border-top","border-left","border-right","border-bottom"]),n}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.styleRowHeader=e.firstRow.getElementsByClassName("tabulator-row-header")[0],e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}generateHeaderElement(e,n,i){var s=document.createElement("tr");return e.columns.forEach(t=>{if(t){var r=document.createElement("th"),o=t.component._column.definition.cssClass?t.component._column.definition.cssClass.split(" "):[];r.colSpan=t.width,r.rowSpan=t.height,r.innerHTML=t.value,this.cloneTableStyle&&(r.style.boxSizing="border-box"),o.forEach(function(a){r.classList.add(a)}),this.mapElementStyles(t.component.getElement(),r,["text-align","border-left","border-right","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(t.component._column.contentElement,r,["padding-top","padding-left","padding-right","padding-bottom"]),t.component._column.visible?this.mapElementStyles(t.component.getElement(),r,["width"]):t.component._column.definition.width&&(r.style.width=t.component._column.definition.width+"px"),t.component._column.parent&&t.component._column.parent.isGroup?this.mapElementStyles(t.component._column.parent.groupElement,r,["border-top"]):this.mapElementStyles(t.component.getElement(),r,["border-top"]),t.component._column.isGroup?this.mapElementStyles(t.component.getElement(),r,["border-bottom"]):this.mapElementStyles(this.table.columnManager.getElement(),r,["border-bottom"]),s.appendChild(r)}}),s}generateGroupElement(e,n,i){var s=document.createElement("tr"),t=document.createElement("td"),r=e.columns[0];return s.classList.add("tabulator-print-table-row"),n.groupHeader&&n.groupHeader[e.indent]?r.value=n.groupHeader[e.indent](r.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):n.groupHeader!==!1&&(r.value=e.component._group.generator(r.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)),t.colSpan=r.width,t.innerHTML=r.value,s.classList.add("tabulator-print-table-group"),s.classList.add("tabulator-group-level-"+e.indent),r.component.isVisible()&&s.classList.add("tabulator-group-visible"),this.mapElementStyles(i.firstGroup,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(i.firstGroup,t,["padding-top","padding-left","padding-right","padding-bottom"]),s.appendChild(t),s}generateCalcElement(e,n,i){var s=this.generateRowElement(e,n,i);return s.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(i.calcRow,s,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),s}generateRowElement(e,n,i){var s=document.createElement("tr");if(s.classList.add("tabulator-print-table-row"),e.columns.forEach((t,r)=>{if(t){var o=document.createElement("td"),a=t.component._column,l=this.table,u=l.columnManager.findColumnIndex(a),d=t.value,h,f,m={modules:{},getValue:function(){return d},getField:function(){return a.definition.field},getElement:function(){return o},getType:function(){return"cell"},getColumn:function(){return a.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getTable:function(){return l},getComponent:function(){return m},column:a},g=a.definition.cssClass?a.definition.cssClass.split(" "):[];if(g.forEach(function(v){o.classList.add(v)}),this.table.modExists("format")&&this.config.formatCells!==!1)d=this.table.modules.format.formatExportValue(m,this.colVisProp);else switch(typeof d){case"object":d=d!==null?JSON.stringify(d):"";break;case"undefined":d="";break}d instanceof Node?o.appendChild(d):o.innerHTML=d,f=["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"],a.isRowHeader?(h=i.styleRowHeader,f.push("background-color")):h=i.styleCells&&i.styleCells[u]?i.styleCells[u]:i.firstCell,h&&(this.mapElementStyles(h,o,f),a.definition.align&&(o.style.textAlign=a.definition.align)),this.table.options.dataTree&&this.config.dataTree!==!1&&(n.treeElementField&&n.treeElementField==a.field||!n.treeElementField&&r==0)&&(e.component._row.modules.dataTree.controlEl&&o.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),o.firstChild),e.component._row.modules.dataTree.branchEl&&o.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),o.firstChild)),s.appendChild(o),m.modules.format&&m.modules.format.renderedCallback&&m.modules.format.renderedCallback()}}),n.rowFormatter&&e.type==="row"&&this.config.formatCells!==!1){let t=Object.assign(e.component);t.getElement=function(){return s},n.rowFormatter(e.component)}return s}generateHTMLTable(e){var n=document.createElement("div");return n.appendChild(this.generateTableElement(e)),n.innerHTML}getHtml(e,n,i,s){var t=this.generateExportList(i||this.table.options.htmlOutputConfig,n,e,s||"htmlOutput");return this.generateHTMLTable(t)}mapElementStyles(e,n,i){if(this.cloneTableStyle&&e&&n){var s={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var t=window.getComputedStyle(e);i.forEach(function(r){n.style[s[r]]||(n.style[s[r]]=t.getPropertyValue(r))})}}}};X(pt,"moduleName","export"),X(pt,"columnLookups",Pu),X(pt,"rowLookups",Du);let en=pt;var Su={"=":function(c,e,n,i){return e==c},"<":function(c,e,n,i){return e<c},"<=":function(c,e,n,i){return e<=c},">":function(c,e,n,i){return e>c},">=":function(c,e,n,i){return e>=c},"!=":function(c,e,n,i){return e!=c},regex:function(c,e,n,i){return typeof c=="string"&&(c=new RegExp(c)),c.test(e)},like:function(c,e,n,i){return c===null||typeof c>"u"?e===c:typeof e<"u"&&e!==null?String(e).toLowerCase().indexOf(c.toLowerCase())>-1:!1},keywords:function(c,e,n,i){var s=c.toLowerCase().split(typeof i.separator>"u"?" ":i.separator),t=String(e===null||typeof e>"u"?"":e).toLowerCase(),r=[];return s.forEach(o=>{t.includes(o)&&r.push(!0)}),i.matchAll?r.length===s.length:!!r.length},starts:function(c,e,n,i){return c===null||typeof c>"u"?e===c:typeof e<"u"&&e!==null?String(e).toLowerCase().startsWith(c.toLowerCase()):!1},ends:function(c,e,n,i){return c===null||typeof c>"u"?e===c:typeof e<"u"&&e!==null?String(e).toLowerCase().endsWith(c.toLowerCase()):!1},in:function(c,e,n,i){return Array.isArray(c)?c.length?c.indexOf(e)>-1:!0:(console.warn("Filter Error - filter value is not an array:",c),!1)}};const lt=class lt extends he{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerTableOption("placeholderHeaderFilter",!1),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.subscribe("placeholder",this.generatePlaceholder.bind(this)),this.table.options.filterMode==="remote"&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var n=this.table.columnManager.findColumn(e.field);if(n)this.setHeaderFilterValue(n,e.value);else return console.warn("Column Filter Error - No matching column found:",e.field),!1}),this.tableInitialized=!0}remoteFilterParams(e,n,i,s){return s.filter=this.getFilters(!0,!0),s}generatePlaceholder(e){if(this.table.options.placeholderHeaderFilter&&Object.keys(this.headerFilters).length)return this.table.options.placeholderHeaderFilter}userSetFilter(e,n,i,s){this.setFilter(e,n,i,s),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,n,i,s){this.addFilter(e,n,i,s),this.refreshFilter()}userSetHeaderFilterFocus(e){var n=this.table.columnManager.findColumn(e);if(n)this.setHeaderFilterFocus(n);else return console.warn("Column Filter Focus Error - No matching column found:",e),!1}userGetHeaderFilterValue(e){var n=this.table.columnManager.findColumn(e);if(n)return this.getHeaderFilterValue(n);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,n){var i=this.table.columnManager.findColumn(e);if(i)this.setHeaderFilterValue(i,n);else return console.warn("Column Filter Error - No matching column found:",e),!1}userRemoveFilter(e,n,i){this.removeFilter(e,n,i),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,n,i){return this.search("rows",e,n,i)}searchData(e,n,i){return this.search("data",e,n,i)}initializeColumnHeaderFilter(e){var n=e.definition;n.headerFilter&&this.initializeColumn(e)}initializeColumn(e,n){var i=this,s=e.getField();function t(r){var o=e.modules.filter.tagType=="input"&&e.modules.filter.attrType=="text"||e.modules.filter.tagType=="textarea"?"partial":"match",a="",l="",u;if(typeof e.modules.filter.prevSuccess>"u"||e.modules.filter.prevSuccess!==r){if(e.modules.filter.prevSuccess=r,e.modules.filter.emptyFunc(r))delete i.headerFilters[s];else{switch(e.modules.filter.value=r,typeof e.definition.headerFilterFunc){case"string":lt.filters[e.definition.headerFilterFunc]?(a=e.definition.headerFilterFunc,u=function(d){var h=e.definition.headerFilterFuncParams||{},f=e.getFieldValue(d);return h=typeof h=="function"?h(r,f,d):h,lt.filters[e.definition.headerFilterFunc](r,f,d,h)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":u=function(d){var h=e.definition.headerFilterFuncParams||{},f=e.getFieldValue(d);return h=typeof h=="function"?h(r,f,d):h,e.definition.headerFilterFunc(r,f,d,h)},a=u;break}if(!u)switch(o){case"partial":u=function(d){var h=e.getFieldValue(d);return typeof h<"u"&&h!==null?String(h).toLowerCase().indexOf(String(r).toLowerCase())>-1:!1},a="like";break;default:u=function(d){return e.getFieldValue(d)==r},a="="}i.headerFilters[s]={value:r,func:u,type:a}}e.modules.filter.value=r,l=JSON.stringify(i.headerFilters),i.prevHeaderFilterChangeCheck!==l&&(i.prevHeaderFilterChangeCheck=l,i.trackChanges(),i.refreshFilter())}return!0}e.modules.filter={success:t,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,n,i){var s=this,t=e.modules.filter.success,r=e.getField(),o,a,l,u,d,h,f,m;e.modules.filter.value=n;function g(){}function v(p){m=p}if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),r){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(p){return!p&&p!==0},o=document.createElement("div"),o.classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":s.table.modules.edit.editors[e.definition.headerFilter]?(a=s.table.modules.edit.editors[e.definition.headerFilter],(e.definition.headerFilter==="tick"||e.definition.headerFilter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(p){return p!==!0&&p!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":a=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?a=e.modules.edit.editor:e.definition.formatter&&s.table.modules.edit.editors[e.definition.formatter]?(a=s.table.modules.edit.editors[e.definition.formatter],(e.definition.formatter==="tick"||e.definition.formatter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(p){return p!==!0&&p!==!1})):a=s.table.modules.edit.editors.input;break}if(a){if(u={getValue:function(){return typeof n<"u"?n:""},getField:function(){return e.definition.field},getElement:function(){return o},getColumn:function(){return e.getComponent()},getTable:()=>this.table,getType:()=>"header",getRow:function(){return{normalizeHeight:function(){}}}},f=e.definition.headerFilterParams||{},f=typeof f=="function"?f.call(s.table,u):f,l=a.call(this.table.modules.edit,u,v,t,g,f),!l){console.warn("Filter Error - Cannot add filter to "+r+" column, editor returned a value of false");return}if(!(l instanceof Node)){console.warn("Filter Error - Cannot add filter to "+r+" column, editor should return an instance of Node, the editor returned:",l);return}s.langBind("headerFilters|columns|"+e.definition.field,function(p){l.setAttribute("placeholder",typeof p<"u"&&p?p:e.definition.headerFilterPlaceholder||s.langText("headerFilters|default"))}),l.addEventListener("click",function(p){p.stopPropagation(),l.focus()}),l.addEventListener("focus",p=>{var E=this.table.columnManager.contentsElement.scrollLeft,R=this.table.rowManager.element.scrollLeft;E!==R&&(this.table.rowManager.scrollHorizontal(E),this.table.columnManager.scrollHorizontal(E))}),d=!1,h=function(p){d&&clearTimeout(d),d=setTimeout(function(){t(l.value)},s.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=l,e.modules.filter.attrType=l.hasAttribute("type")?l.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=l.tagName.toLowerCase(),e.definition.headerFilterLiveFilter!==!1&&(e.definition.headerFilter==="autocomplete"||e.definition.headerFilter==="tickCross"||(e.definition.editor==="autocomplete"||e.definition.editor==="tickCross")&&e.definition.headerFilter===!0||(l.addEventListener("keyup",h),l.addEventListener("search",h),e.modules.filter.attrType=="number"&&l.addEventListener("change",function(p){t(l.value)}),e.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&l.setAttribute("type","search")),(e.modules.filter.tagType=="input"||e.modules.filter.tagType=="select"||e.modules.filter.tagType=="textarea")&&l.addEventListener("mousedown",function(p){p.stopPropagation()})),o.appendChild(l),e.contentElement.appendChild(o),i||s.headerFilterColumns.push(e),m&&m()}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,n){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,n,!0),e.modules.filter.success(n)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&(this.table.options.filterMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0))}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,n,i,s){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:n,value:i,params:s}]),this.addFilter(e)}addFilter(e,n,i,s){var t=!1;Array.isArray(e)||(e=[{field:e,type:n,value:i,params:s}]),e.forEach(r=>{r=this.findFilter(r),r&&(this.filterList.push(r),t=!0)}),t&&this.trackChanges()}findFilter(e){var n;if(Array.isArray(e))return this.findSubFilters(e);var i=!1;return typeof e.field=="function"?i=function(s){return e.field(s,e.type||{})}:lt.filters[e.type]?(n=this.table.columnManager.getColumnByField(e.field),n?i=function(s){return lt.filters[e.type](e.value,n.getFieldValue(s),s,e.params||{})}:i=function(s){return lt.filters[e.type](e.value,s[e.field],s,e.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=i,e.func?e:!1}findSubFilters(e){var n=[];return e.forEach(i=>{i=this.findFilter(i),i&&n.push(i)}),n.length?n:!1}getFilters(e,n){var i=[];return e&&(i=this.getHeaderFilters()),n&&i.forEach(function(s){typeof s.type=="function"&&(s.type="function")}),i=i.concat(this.filtersToArray(this.filterList,n)),i}filtersToArray(e,n){var i=[];return e.forEach(s=>{var t;Array.isArray(s)?i.push(this.filtersToArray(s,n)):(t={field:s.field,type:s.type,value:s.value},n&&typeof t.type=="function"&&(t.type="function"),i.push(t))}),i}getHeaderFilters(){var e=[];for(var n in this.headerFilters)e.push({field:n,type:this.headerFilters[n].type,value:this.headerFilters[n].value});return e}removeFilter(e,n,i){Array.isArray(e)||(e=[{field:e,type:n,value:i}]),e.forEach(s=>{var t=-1;typeof s.field=="object"?t=this.filterList.findIndex(r=>s===r):t=this.filterList.findIndex(r=>s.field===r.field&&s.type===r.type&&s.value===r.value),t>-1?this.filterList.splice(t,1):console.warn("Filter Error - No matching filter type found, ignoring: ",s.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{typeof e.modules.filter.value<"u"&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,n,i,s){var t=[],r=[];return Array.isArray(n)||(n=[{field:n,type:i,value:s}]),n.forEach(o=>{o=this.findFilter(o),o&&r.push(o)}),this.table.rowManager.rows.forEach(o=>{var a=!0;r.forEach(l=>{this.filterRecurse(l,o.getData())||(a=!1)}),a&&t.push(e==="data"?o.getData("data"):o.getComponent())}),t}filter(e,n){var i=[],s=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters(!0)),this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(t=>{this.filterRow(t)&&i.push(t)}):i=e.slice(0),this.subscribedExternal("dataFiltered")&&(i.forEach(t=>{s.push(t.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(!0),s)),i}filterRow(e,n){var i=!0,s=e.getData();this.filterList.forEach(r=>{this.filterRecurse(r,s)||(i=!1)});for(var t in this.headerFilters)this.headerFilters[t].func(s)||(i=!1);return i}filterRecurse(e,n){var i=!1;return Array.isArray(e)?e.forEach(s=>{this.filterRecurse(s,n)&&(i=!0)}):i=e.func(n),i}};X(lt,"moduleName","filter"),X(lt,"filters",Su);let tn=lt;function xu(c,e,n){return this.emptyToSpace(this.sanitizeHTML(c.getValue()))}function Lu(c,e,n){return c.getValue()}function Au(c,e,n){return c.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(c.getValue()))}function Iu(c,e,n){var i=parseFloat(c.getValue()),s="",t,r,o,a,l,u=e.decimal||".",d=e.thousand||",",h=e.negativeSign||"-",f=e.symbol||"",m=!!e.symbolAfter,g=typeof e.precision<"u"?e.precision:2;if(isNaN(i))return this.emptyToSpace(this.sanitizeHTML(c.getValue()));if(i<0&&(i=Math.abs(i),s=h),t=g!==!1?i.toFixed(g):i,t=String(t).split("."),r=t[0],o=t.length>1?u+t[1]:"",e.thousand!==!1)for(a=/(\d+)(\d{3})/;a.test(r);)r=r.replace(a,"$1"+d+"$2");return l=r+o,s===!0?(l="("+l+")",m?l+f:f+l):m?s+l+f:s+f+l}function Bu(c,e,n){var i=c.getValue(),s=e.urlPrefix||"",t=e.download,r=i,o=document.createElement("a"),a;function l(u,d){var h=u.shift(),f=d[h];return u.length&&typeof f=="object"?l(u,f):f}if(e.labelField&&(a=c.getData(),r=l(e.labelField.split(this.table.options.nestedFieldSeparator),a)),e.label)switch(typeof e.label){case"string":r=e.label;break;case"function":r=e.label(c);break}if(r){if(e.urlField&&(a=c.getData(),i=Ee.retrieveNestedData(this.table.options.nestedFieldSeparator,e.urlField,a)),e.url)switch(typeof e.url){case"string":i=e.url;break;case"function":i=e.url(c);break}return o.setAttribute("href",s+i),e.target&&o.setAttribute("target",e.target),e.download&&(typeof t=="function"?t=t(c):t=t===!0?"":t,o.setAttribute("download",t)),o.innerHTML=this.emptyToSpace(this.sanitizeHTML(r)),o}else return"&nbsp;"}function ju(c,e,n){var i=document.createElement("img"),s=c.getValue();switch(e.urlPrefix&&(s=e.urlPrefix+c.getValue()),e.urlSuffix&&(s=s+e.urlSuffix),i.setAttribute("src",s),typeof e.height){case"number":i.style.height=e.height+"px";break;case"string":i.style.height=e.height;break}switch(typeof e.width){case"number":i.style.width=e.width+"px";break;case"string":i.style.width=e.width;break}return i.addEventListener("load",function(){c.getRow().normalizeHeight()}),i}function Fu(c,e,n){var i=c.getValue(),s=c.getElement(),t=e.allowEmpty,r=e.allowTruthy,o=Object.keys(e).includes("trueValue"),a=typeof e.tickElement<"u"?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=typeof e.crossElement<"u"?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return o&&i===e.trueValue||!o&&(r&&i||i===!0||i==="true"||i==="True"||i===1||i==="1")?(s.setAttribute("aria-checked",!0),a||""):t&&(i==="null"||i===""||i===null||typeof i>"u")?(s.setAttribute("aria-checked","mixed"),""):(s.setAttribute("aria-checked",!1),l||"")}function Nu(c,e,n){var i=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),s=e.inputFormat||"yyyy-MM-dd HH:mm:ss",t=e.outputFormat||"dd/MM/yyyy HH:mm:ss",r=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",o=c.getValue();if(typeof i<"u"){var a;return i.isDateTime(o)?a=o:s==="iso"?a=i.fromISO(String(o)):a=i.fromFormat(String(o),s),a.isValid?(e.timezone&&(a=a.setZone(e.timezone)),a.toFormat(t)):r===!0||!o?o:typeof r=="function"?r(o):r}else console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}function Uu(c,e,n){var i=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),s=e.inputFormat||"yyyy-MM-dd HH:mm:ss",t=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",r=typeof e.suffix<"u"?e.suffix:!1,o=typeof e.unit<"u"?e.unit:"days",a=typeof e.humanize<"u"?e.humanize:!1,l=typeof e.date<"u"?e.date:i.now(),u=c.getValue();if(typeof i<"u"){var d;return i.isDateTime(u)?d=u:s==="iso"?d=i.fromISO(String(u)):d=i.fromFormat(String(u),s),d.isValid?a?d.diff(l,o).toHuman()+(r?" "+r:""):parseInt(d.diff(l,o)[o])+(r?" "+r:""):t===!0?u:typeof t=="function"?t(u):t}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}function Wu(c,e,n){var i=c.getValue();return typeof e[i]>"u"?(console.warn("Missing display value for "+i),i):e[i]}function zu(c,e,n){var i=c.getValue(),s=c.getElement(),t=e&&e.stars?e.stars:5,r=document.createElement("span"),o=document.createElementNS("http://www.w3.org/2000/svg","svg"),a='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',l='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';r.style.verticalAlign="middle",o.setAttribute("width","14"),o.setAttribute("height","14"),o.setAttribute("viewBox","0 0 512 512"),o.setAttribute("xml:space","preserve"),o.style.padding="0 1px",i=i&&!isNaN(i)?parseInt(i):0,i=Math.max(0,Math.min(i,t));for(var u=1;u<=t;u++){var d=o.cloneNode(!0);d.innerHTML=u<=i?a:l,r.appendChild(d)}return s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.textOverflow="ellipsis",s.setAttribute("aria-label",i),r}function Hu(c,e,n){var i=this.sanitizeHTML(c.getValue())||0,s=document.createElement("span"),t=e&&e.max?e.max:100,r=e&&e.min?e.min:0,o=e&&typeof e.color<"u"?e.color:["red","orange","green"],a="#666666",l,u;if(!(isNaN(i)||typeof c.getValue()>"u")){switch(s.classList.add("tabulator-traffic-light"),u=parseFloat(i)<=t?parseFloat(i):t,u=parseFloat(u)>=r?parseFloat(u):r,l=(t-r)/100,u=Math.round((u-r)/l),typeof o){case"string":a=o;break;case"function":a=o(i);break;case"object":if(Array.isArray(o)){var d=100/o.length,h=Math.floor(u/d);h=Math.min(h,o.length-1),h=Math.max(h,0),a=o[h];break}}return s.style.backgroundColor=a,s}}function Ku(c,e={},n){var i=this.sanitizeHTML(c.getValue())||0,s=c.getElement(),t=e.max?e.max:100,r=e.min?e.min:0,o=e.legendAlign?e.legendAlign:"center",a,l,u,d,h;switch(l=parseFloat(i)<=t?parseFloat(i):t,l=parseFloat(l)>=r?parseFloat(l):r,a=(t-r)/100,l=Math.round((l-r)/a),typeof e.color){case"string":u=e.color;break;case"function":u=e.color(i);break;case"object":if(Array.isArray(e.color)){let v=100/e.color.length,p=Math.floor(l/v);p=Math.min(p,e.color.length-1),p=Math.max(p,0),u=e.color[p];break}default:u="#2DC214"}switch(typeof e.legend){case"string":d=e.legend;break;case"function":d=e.legend(i);break;case"boolean":d=i;break;default:d=!1}switch(typeof e.legendColor){case"string":h=e.legendColor;break;case"function":h=e.legendColor(i);break;case"object":if(Array.isArray(e.legendColor)){let v=100/e.legendColor.length,p=Math.floor(l/v);p=Math.min(p,e.legendColor.length-1),p=Math.max(p,0),h=e.legendColor[p]}break;default:h="#000"}s.style.minWidth="30px",s.style.position="relative",s.setAttribute("aria-label",l);var f=document.createElement("div");f.style.display="inline-block",f.style.width=l+"%",f.style.backgroundColor=u,f.style.height="100%",f.setAttribute("data-max",t),f.setAttribute("data-min",r);var m=document.createElement("div");if(m.style.position="relative",m.style.width="100%",m.style.height="100%",d){var g=document.createElement("div");g.style.position="absolute",g.style.top=0,g.style.left=0,g.style.textAlign=o,g.style.width="100%",g.style.color=h,g.innerHTML=d}return n(function(){if(!(c instanceof tr)){var v=document.createElement("div");v.style.position="absolute",v.style.top="4px",v.style.bottom="4px",v.style.left="4px",v.style.right="4px",s.appendChild(v),s=v}s.appendChild(m),m.appendChild(f),d&&m.appendChild(g)}),""}function Gu(c,e,n){return c.getElement().style.backgroundColor=this.sanitizeHTML(c.getValue()),""}function $u(c,e,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function Vu(c,e,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function Ju(c,e,n){var i=c.getValue(),s=e.size||15,t=s+"px",r,o,a=e.hasOwnProperty("onValue")?e.onValue:!0,l=e.hasOwnProperty("offValue")?e.offValue:!1,u=e.onTruthy?i:i===a;return r=document.createElement("div"),r.classList.add("tabulator-toggle"),u?(r.classList.add("tabulator-toggle-on"),r.style.flexDirection="row-reverse",e.onColor&&(r.style.background=e.onColor)):e.offColor&&(r.style.background=e.offColor),r.style.width=2.5*s+"px",r.style.borderRadius=t,e.clickable&&r.addEventListener("click",d=>{c.setValue(u?l:a)}),o=document.createElement("div"),o.classList.add("tabulator-toggle-switch"),o.style.height=t,o.style.width=t,o.style.borderRadius=t,r.appendChild(o),r}function ku(c,e,n){var i=document.createElement("span"),s=c.getRow(),t=c.getTable();return s.watchPosition(r=>{e.relativeToPage&&(r+=t.modules.page.getPageSize()*(t.modules.page.getPage()-1)),i.innerText=r}),i}function Qu(c,e,n){return c.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}function Xu(c,e,n){var i,s,t;function r(o){var a=o.getValue(),l="plaintext";switch(typeof a){case"boolean":l="tickCross";break;case"string":a.includes(`
`)&&(l="textarea");break}return l}return i=e.formatterLookup?e.formatterLookup(c):r(c),e.paramsLookup&&(t=typeof e.paramsLookup=="function"?e.paramsLookup(i,c):e.paramsLookup[i]),s=this.table.modules.format.lookupFormatter(i),s.call(this,c,t||{},n)}function Yu(c,e,n){var i=e.delimiter||",",s=c.getValue(),t=this.table,r;return e.valueMap&&(typeof e.valueMap=="string"?r=function(o){return o.map(a=>Ee.retrieveNestedData(t.options.nestedFieldSeparator,e.valueMap,a))}:r=e.valueMap),Array.isArray(s)?(r&&(s=r(s)),s.join(i)):s}function Zu(c,e,n){var i=e.indent||"	",s=typeof e.multiline>"u"?!0:e.multiline,t=e.replacer||null,r=c.getValue();return s&&(c.getElement().style.whiteSpace="pre-wrap"),JSON.stringify(r,t,i)}var qu={plaintext:xu,html:Lu,textarea:Au,money:Iu,link:Bu,image:ju,tickCross:Fu,datetime:Nu,datetimediff:Uu,lookup:Wu,star:zu,traffic:Hu,progress:Ku,color:Gu,buttonTick:$u,buttonCross:Vu,toggle:Ju,rownum:ku,handle:Qu,adaptable:Xu,array:Yu,json:Zu};const mt=class mt extends he{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupTypeFormatter(e,""),typeof e.definition.formatterPrint<"u"&&(e.modules.format.print=this.lookupTypeFormatter(e,"Print")),typeof e.definition.formatterClipboard<"u"&&(e.modules.format.clipboard=this.lookupTypeFormatter(e,"Clipboard")),typeof e.definition.formatterHtmlOutput<"u"&&(e.modules.format.htmlOutput=this.lookupTypeFormatter(e,"HtmlOutput"))}lookupTypeFormatter(e,n){var i={params:e.definition["formatter"+n+"Params"]||{}},s=e.definition["formatter"+n];return i.formatter=this.lookupFormatter(s),i}lookupFormatter(e){var n;switch(typeof e){case"string":mt.formatters[e]?n=mt.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),n=mt.formatters.plaintext);break;case"function":n=e;break;default:n=mt.formatters.plaintext;break}return n}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,n,i){var s,t,r,o;return e.definition.titleFormatter?(s=this.lookupFormatter(e.definition.titleFormatter),r=a=>{e.titleFormatterRendered=a},o={getValue:function(){return n},getElement:function(){return i},getType:function(){return"header"},getColumn:function(){return e.getComponent()},getTable:()=>this.table},t=e.definition.titleFormatterParams||{},t=typeof t=="function"?t():t,s.call(this,o,t,r)):n}formatValue(e){var n=e.getComponent(),i=typeof e.column.modules.format.params=="function"?e.column.modules.format.params(n):e.column.modules.format.params;function s(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t,e.modules.format.rendered=!1}return e.column.modules.format.formatter.call(this,n,i,s)}formatExportValue(e,n){var i=e.column.modules.format[n],s;if(i){let t=function(r){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=r,e.modules.format.rendered=!1};return s=typeof i.params=="function"?i.params(e.getComponent()):i.params,i.formatter.call(this,e.getComponent(),s,t)}else return this.formatValue(e)}sanitizeHTML(e){if(e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=/]/g,function(i){return n[i]})}else return e}emptyToSpace(e){return e===null||typeof e>"u"||e===""?"&nbsp;":e}};X(mt,"moduleName","format"),X(mt,"formatters",qu);let nn=mt;class rr extends he{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.initializationMode="left",this.active=!1,this.blocked=!0,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("column-add",this.reinitializeColumns.bind(this)),this.subscribe("column-deleted",this.reinitializeColumns.bind(this)),this.subscribe("column-hide",this.reinitializeColumns.bind(this)),this.subscribe("column-show",this.reinitializeColumns.bind(this)),this.subscribe("columns-loaded",this.reinitializeColumns.bind(this)),this.subscribe("table-redraw",this.layout.bind(this)),this.subscribe("layout-refreshing",this.blockLayout.bind(this)),this.subscribe("layout-refreshed",this.unblockLayout.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this))}blockLayout(){this.blocked=!0}unblockLayout(){this.blocked=!1}layoutCell(e){this.layoutElement(e.element,e.column)}reinitializeColumns(){this.reset(),this.table.columnManager.columnsByIndex.forEach(e=>{this.initializeColumn(e)}),this.layout()}initializeColumn(e){var n={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(n.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=n):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(n=>{n.calcs.top&&this.layoutRow(n.calcs.top),n.calcs.bottom&&this.layoutRow(n.calcs.bottom),n.groupList&&n.groupList.length&&this.layoutGroupCalcs(n.groupList)})}layoutColumnPosition(e){var n=[],i=0,s=0;this.leftColumns.forEach((t,r)=>{if(t.modules.frozen.marginValue=i,t.modules.frozen.margin=t.modules.frozen.marginValue+"px",t.visible&&(i+=t.getWidth()),r==this.leftColumns.length-1?t.modules.frozen.edge=!0:t.modules.frozen.edge=!1,t.parent.isGroup){var o=this.getColGroupParentElement(t);n.includes(o)||(this.layoutElement(o,t),n.push(o)),o.classList.toggle("tabulator-frozen-left",t.modules.frozen.edge&&t.modules.frozen.position==="left"),o.classList.toggle("tabulator-frozen-right",t.modules.frozen.edge&&t.modules.frozen.position==="right")}else this.layoutElement(t.getElement(),t);e&&t.cells.forEach(a=>{this.layoutElement(a.getElement(!0),t)})}),this.rightColumns.forEach((t,r)=>{t.modules.frozen.marginValue=s,t.modules.frozen.margin=t.modules.frozen.marginValue+"px",t.visible&&(s+=t.getWidth()),r==this.rightColumns.length-1?t.modules.frozen.edge=!0:t.modules.frozen.edge=!1,t.parent.isGroup?this.layoutElement(this.getColGroupParentElement(t),t):this.layoutElement(t.getElement(),t),e&&t.cells.forEach(o=>{this.layoutElement(o.getElement(!0),t)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&!this.blocked&&(this.layoutColumnPosition(),this.reinitializeRows(),this.layoutCalcRows())}reinitializeRows(){var e=this.table.rowManager.getVisibleRows(!0),n=this.table.rowManager.getRows().filter(i=>!e.includes(i));n.forEach(i=>{i.deinitialize()}),e.forEach(i=>{i.type==="row"&&this.layoutRow(i)})}layoutRow(e){this.table.options.layout==="fitDataFill"&&this.rightColumns.length&&(this.table.rowManager.getTableElement().style.minWidth="calc(100% - "+this.rightMargin+")"),this.leftColumns.forEach(n=>{var i=e.getCell(n);i&&this.layoutElement(i.getElement(!0),n)}),this.rightColumns.forEach(n=>{var i=e.getCell(n);i&&this.layoutElement(i.getElement(!0),n)})}layoutElement(e,n){var i;n.modules.frozen&&e&&(e.style.position="sticky",this.table.rtl?i=n.modules.frozen.position==="left"?"right":"left":i=n.modules.frozen.position,e.style[i]=n.modules.frozen.margin,e.classList.add("tabulator-frozen"),e.classList.toggle("tabulator-frozen-left",n.modules.frozen.edge&&n.modules.frozen.position==="left"),e.classList.toggle("tabulator-frozen-right",n.modules.frozen.edge&&n.modules.frozen.position==="right"))}adjustForScrollbar(e){this.rightColumns.length&&(this.table.columnManager.getContentsElement().style.width="calc(100% - "+e+"px)")}getFrozenColumns(){return this.leftColumns.concat(this.rightColumns)}_calcSpace(e,n){var i=0;for(let s=0;s<n;s++)e[s].visible&&(i+=e[s].getWidth());return i}}X(rr,"moduleName","frozenColumns");class or extends he{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this)),this.registerTableOption("frozenRowsField","id"),this.registerTableOption("frozenRows",!1)}initialize(){var e=document.createDocumentFragment();this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10),this.table.options.frozenRows&&(this.subscribe("data-processed",this.initializeRows.bind(this)),this.subscribe("row-added",this.initializeRow.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this))),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}initializeRows(){this.table.rowManager.getRows().forEach(e=>{this.initializeRow(e)})}initializeRow(e){var n=this.table.options.frozenRows,i=typeof n;i==="number"?e.getPosition()&&e.getPosition()+this.rows.length<=n&&this.freezeRow(e):i==="function"?n.call(this.table,e.getComponent())&&this.freezeRow(e):Array.isArray(n)&&n.includes(e.data[this.options("frozenRowsField")])&&this.freezeRow(e)}isRowFrozen(e){var n=this.rows.indexOf(e);return n>-1}isFrozen(){return!!this.rows.length}visibleRows(e,n){return this.rows.forEach(i=>{n.push(i)}),n}getRows(e){var n=e.slice(0);return this.rows.forEach(function(i){var s=n.indexOf(i);s>-1&&n.splice(s,1)}),n}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.rows.push(e),this.refreshData(!1,"display"),this.table.rowManager.adjustTableSize(),this.styleRows())}unfreezeRow(e){e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var n=this.rows.indexOf(e);if(n>-1){var i=e.getElement();i.parentNode&&i.parentNode.removeChild(i),this.rows.splice(n,1)}}styleRows(e){this.rows.forEach((n,i)=>{this.table.rowManager.styleRow(n,i)})}}X(or,"moduleName","frozenRows");class _u{constructor(e){return this._group=e,this.type="GroupComponent",new Proxy(this,{get:function(n,i,s){return typeof n[i]<"u"?n[i]:n._group.groupManager.table.componentFunctionBinder.handle("group",n._group,i)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return this._group.parent?this._group.parent.getComponent():!1}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}scrollTo(e,n){return this._group.groupManager.table.rowManager.scrollToRow(this._group,e,n)}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class xt{constructor(e,n,i,s,t,r,o){this.groupManager=e,this.parent=n,this.key=s,this.level=i,this.field=t,this.hasSubGroups=i<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=o,this.rows=[],this.groups=[],this.groupList=[],this.generator=r,this.element=!1,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=o?o.visible:typeof e.startOpen[i]<"u"?e.startOpen[i]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(e){e||(this.groupList.length?this.groupList.forEach(function(n){n.wipe()}):this.rows.forEach(n=>{n.modules&&delete n.modules.group})),this.element=!1,this.arrowElement=!1,this.elementContents=!1}createElements(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var e=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]&&this.groupManager.allowedValues[e].forEach(n=>{this._createGroup(n,e)})}addBindings(){var e;this.groupManager.table.options.groupToggleElement&&(e=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element,e.addEventListener("click",n=>{this.groupManager.table.options.groupToggleElement==="arrow"&&(n.stopPropagation(),n.stopImmediatePropagation()),setTimeout(()=>{this.toggleVisibility()})}))}_createGroup(e,n){var i=n+"_"+e,s=new xt(this.groupManager,this,n,e,this.groupManager.groupIDLookups[n].field,this.groupManager.headerGenerator[n]||this.groupManager.headerGenerator[0],this.old?this.old.groups[i]:!1);this.groups[i]=s,this.groupList.push(s)}_addRowToGroup(e){var n=this.level+1;if(this.hasSubGroups){var i=this.groupManager.groupIDLookups[n].func(e.getData()),s=n+"_"+i;this.groupManager.allowedValues&&this.groupManager.allowedValues[n]?this.groups[s]&&this.groups[s].addRow(e):(this.groups[s]||this._createGroup(i,n),this.groups[s].addRow(e))}}_addRow(e){this.rows.push(e),e.modules.group=this}insertRow(e,n,i){var s=this.conformRowData({});e.updateData(s);var t=this.rows.indexOf(n);t>-1?i?this.rows.splice(t+1,0,e):this.rows.splice(t,0,e):i?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(e){this.arrowElement&&(this.arrowElement.style.marginLeft=e,this.groupList.forEach(function(n){n.scrollHeader(e)}))}getRowIndex(e){}conformRowData(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e}removeRow(e){var n=this.rows.indexOf(e),i=e.getElement();n>-1&&this.rows.splice(n,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(i.parentNode&&i.parentNode.removeChild(i),this.groupManager.blockRedraw||(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)))}removeGroup(e){var n=e.level+"_"+e.key,i;this.groups[n]&&(delete this.groups[n],i=this.groupList.indexOf(e),i>-1&&this.groupList.splice(i,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(){var e=[];return e.push(this),this._visSet(),this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.visible?this.groupList.length?this.groupList.forEach(function(n){e=e.concat(n.getHeadersAndRows())}):(this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))),e}getData(e,n){var i=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach(s=>{i.push(s.getData(n||"data"))}),i}getRowCount(){var e=0;return this.groupList.length?this.groupList.forEach(n=>{e+=n.getRowCount()}):e=this.rows.length,e}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(e=>{var n=e.getHeadersAndRows();n.forEach(i=>{i.detachElement()})}):this.rows.forEach(e=>{var n=e.getElement();n.parentNode.removeChild(n)}),this.groupManager.updateGroupRows(!0)):this.groupManager.updateGroupRows(!0),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var e=this.generateElement();this.groupList.length?this.groupList.forEach(n=>{var i=n.getHeadersAndRows();i.forEach(s=>{var t=s.getElement();e.parentNode.insertBefore(t,e.nextSibling),s.initialize(),e=t})}):this.rows.forEach(n=>{var i=n.getElement();e.parentNode.insertBefore(i,e.nextSibling),n.initialize(),e=i}),this.groupManager.updateGroupRows(!0)}else this.groupManager.updateGroupRows(!0);this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var e=[];typeof this.visible=="function"&&(this.rows.forEach(function(n){e.push(n.getData())}),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))}getRowGroup(e){var n=!1;return this.groupList.length?this.groupList.forEach(function(i){var s=i.getRowGroup(e);s&&(n=s)}):this.rows.find(function(i){return i===e})&&(n=this),n}getSubGroups(e){var n=[];return this.groupList.forEach(function(i){n.push(e?i.getComponent():i)}),n}getRows(e,n){var i=[];return n&&this.groupList.length?this.groupList.forEach(s=>{i=i.concat(s.getRows(e,n))}):this.rows.forEach(function(s){i.push(e?s.getComponent():s)}),i}generateGroupHeaderContents(){var e=[],n=this.getRows(!1,!0);for(n.forEach(function(i){e.push(i.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(e=[]){return e.unshift(this.key),this.parent&&this.parent.getPath(e),e}getElement(){return this.elementContents?this.element:this.generateElement()}generateElement(){this.addBindings=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(e){(!this.initialized||e)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Ee.elVisible(this.element)&&this.initialize(!0)}setHeight(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}rendered(){}getComponent(){return this.component||(this.component=new _u(this)),this.component}}class ar extends he{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayHandler=this.getRows.bind(this),this.blockRedraw=!1,this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.subscribe("table-destroy",this._blockRedrawing.bind(this)),this.subscribe("rows-wipe",this._blockRedrawing.bind(this)),this.subscribe("rows-wiped",this._restore_redrawing.bind(this)),this.table.options.groupBy&&(this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("table-built",this.configureGroupSetup.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}_blockRedrawing(){this.blockRedraw=!0}_restore_redrawing(){this.blockRedraw=!1}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,n=this.table.options.groupStartOpen,i=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(i)&&e.length>i.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(t,r)=>{this.headerGenerator[0]=(o,a,l)=>(typeof o>"u"?"":o)+"<span>("+a+" "+(a===1?t:r.groups.items)+")</span>"}),this.groupIDLookups=[],e)this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var s=this.table.columnManager.getRealColumns();s.forEach(t=>{t.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),t.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(e)||(e=[e]),e.forEach((t,r)=>{var o,a;typeof t=="function"?o=t:(a=this.table.columnManager.getColumnByField(t),a?o=function(l){return a.getFieldValue(l)}:o=function(l){return l[t]}),this.groupIDLookups.push({field:typeof t=="function"?!1:t,func:o,values:this.allowedValues?this.allowedValues[r]:!1})}),n&&(Array.isArray(n)||(n=[n]),n.forEach(t=>{}),this.startOpen=n),i&&(this.headerGenerator=Array.isArray(i)?i:[i])}else this.groupList=[],this.groups={}}rowSample(e,n){if(this.table.options.groupBy){var i=this.getGroups(!1)[0];n.push(i.getRows(!1)[0])}return n}virtualRenderFill(){var e=this.table.rowManager.tableElement,n=this.table.rowManager.getVisibleRows();if(this.table.options.groupBy)n=n.filter(i=>i.type!=="group"),e.style.minWidth=n.length?"":this.table.columnManager.getWidth()+"px";else return n}rowAddingIndex(e,n,i){if(this.table.options.groupBy){this.assignRowToGroup(e);var s=e.modules.group.rows;return s.length>1&&(!n||n&&s.indexOf(n)==-1?i?s[0]!==e&&(n=s[0],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!i)):s[s.length-1]!==e&&(n=s[s.length-1],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!i)):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!i)),n}}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.initialized||this.initialize(),this.configureGroupSetup(),!e&&this.table.modExists("columnCalcs")&&this.table.options.columnCalcs===!0&&this.table.modules.columnCalcs.reinitializeCalcs(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return e.modules.group?e.modules.group.getComponent():!1}rowMoving(e,n,i){if(this.table.options.groupBy){!i&&n instanceof xt&&(n=this.table.rowManager.prevDisplayRow(e)||n);var s=n instanceof xt?n:n.modules.group,t=e instanceof xt?e:e.modules.group;s===t?this.table.rowManager.moveRowInArray(s.rows,e,n,i):(t&&t.removeRow(e),s.insertRow(e,n,i))}}rowDeleting(e){this.table.options.groupBy&&e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.table.options.groupBy&&this.updateGroupRows(!0)}cellUpdated(e){this.table.options.groupBy&&this.reassignRowToGroup(e.row)}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var n=[];return this.groupList.forEach(function(i){n.push(e?i.getComponent():i)}),n}getChildGroups(e){var n=[];return e||(e=this),e.groupList.forEach(i=>{i.groupList.length?n=n.concat(this.getChildGroups(i)):n.push(i)}),n}wipe(){this.table.options.groupBy&&(this.groupList.forEach(function(e){e.wipe()}),this.groupList=[],this.groups={})}pullGroupListData(e){var n=[];return e.forEach(i=>{var s={};s.level=0,s.rowCount=0,s.headerContent="";var t=[];i.hasSubGroups?(t=this.pullGroupListData(i.groupList),s.level=i.level,s.rowCount=t.length-i.groupList.length,s.headerContent=i.generator(i.key,s.rowCount,i.rows,i),n.push(s),n=n.concat(t)):(s.level=i.level,s.headerContent=i.generator(i.key,i.rows.length,i.rows,i),s.rowCount=i.getRows().length,n.push(s),i.getRows().forEach(r=>{n.push(r.getData("data"))}))}),n}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var n=!1;return this.options("dataTree")&&(e=this.table.modules.dataTree.getTreeParentRoot(e)),this.groupList.forEach(i=>{var s=i.getRowGroup(e);s&&(n=s)}),n}countGroups(){return this.groupList.length}generateGroups(e){var n=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(i=>{this.createGroup(i,0,n)}),e.forEach(i=>{this.assignRowToExistingGroup(i,n)})):e.forEach(i=>{this.assignRowToGroup(i,n)}),Object.values(n).forEach(i=>{i.wipe(!0)})}createGroup(e,n,i){var s=n+"_"+e,t;i=i||[],t=new xt(this,!1,n,e,this.groupIDLookups[0].field,this.headerGenerator[0],i[s]),this.groups[s]=t,this.groupList.push(t)}assignRowToExistingGroup(e,n){var i=this.groupIDLookups[0].func(e.getData()),s="0_"+i;this.groups[s]&&this.groups[s].addRow(e)}assignRowToGroup(e,n){var i=this.groupIDLookups[0].func(e.getData()),s=!this.groups["0_"+i];return s&&this.createGroup(i,0,n),this.groups["0_"+i].addRow(e),!s}reassignRowToGroup(e){if(e.type==="row"){var n=e.modules.group,i=n.getPath(),s=this.getExpectedPath(e),t;t=i.length==s.length&&i.every((r,o)=>r===s[o]),t||(n.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var n=[],i=e.getData();return this.groupIDLookups.forEach(s=>{n.push(s.func(i))}),n}updateGroupRows(e){var n=[];return this.blockRedraw||(this.groupList.forEach(i=>{n=n.concat(i.getHeadersAndRows())}),e&&this.refreshData(!0)),n}scrollHeaders(e){this.table.options.groupBy&&(this.table.options.renderHorizontal==="virtual"&&(e-=this.table.columnManager.renderer.vDomPadLeft),e=e+"px",this.groupList.forEach(n=>{n.scrollHeader(e)}))}removeGroup(e){var n=e.level+"_"+e.key,i;this.groups[n]&&(delete this.groups[n],i=this.groupList.indexOf(e),i>-1&&this.groupList.splice(i,1))}checkBasicModeGroupHeaderWidth(){var e=this.table.rowManager.tableElement,n=!0;this.table.rowManager.getDisplayRows().forEach((i,s)=>{this.table.rowManager.styleRow(i,s),e.appendChild(i.getElement()),i.initialize(!0),i.type!=="group"&&(n=!1)}),n?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}}X(ar,"moduleName","groupRows");var eh={cellEdit:function(c){c.component.setValueProcessData(c.data.oldValue),c.component.cellRendered()},rowAdd:function(c){c.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowDelete:function(c){var e=this.table.rowManager.addRowActual(c.data.data,c.data.pos,c.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(c.component,e),this.table.rowManager.checkPlaceholder()},rowMove:function(c){var e=c.data.posFrom-c.data.posTo>0;this.table.rowManager.moveRowActual(c.component,this.table.rowManager.getRowFromPosition(c.data.posFrom),e),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},th={cellEdit:function(c){c.component.setValueProcessData(c.data.newValue),c.component.cellRendered()},rowAdd:function(c){var e=this.table.rowManager.addRowActual(c.data.data,c.data.pos,c.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(c.component,e),this.table.rowManager.checkPlaceholder()},rowDelete:function(c){c.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowMove:function(c){this.table.rowManager.moveRowActual(c.component,this.table.rowManager.getRowFromPosition(c.data.posTo),c.data.after),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},ih={undo:["ctrl + 90","meta + 90"],redo:["ctrl + 89","meta + 89"]},nh={undo:function(c){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(c.preventDefault(),this.table.modules.history.undo()))},redo:function(c){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(c.preventDefault(),this.table.modules.history.redo()))}},sh={keybindings:{bindings:ih,actions:nh}};const gt=class gt extends he{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,n,i){this.action("rowMove",e,{posFrom:e.getPosition(),posTo:n.getPosition(),to:n,after:i})}rowAdded(e,n,i,s){this.action("rowAdd",e,{data:n,pos:i,index:s})}rowDeleted(e){var n,i;this.table.options.groupBy?(i=e.getComponent().getGroup()._getSelf().rows,n=i.indexOf(e),n&&(n=i[n-1])):(n=e.table.rowManager.getRowIndex(e),n&&(n=e.table.rowManager.rows[n-1])),this.action("rowDelete",e,{data:e.getData(),pos:!n,index:n})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,n,i){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:n,data:i}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var n=this.history.findIndex(function(i){return i.component===e});n>-1&&(this.history.splice(n,1),n<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return gt.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Undo Error - No more history to undo":"History module not enabled"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return gt.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Redo Error - No more history to redo":"History module not enabled"),!1}_rebindRow(e,n){this.history.forEach(function(i){if(i.component instanceof Be)i.component===e&&(i.component=n);else if(i.component instanceof qt&&i.component.row===e){var s=i.component.column.getField();s&&(i.component=n.getCell(s))}})}};X(gt,"moduleName","history"),X(gt,"moduleExtensions",sh),X(gt,"undoers",eh),X(gt,"redoers",th);let sn=gt;class lr extends he{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&this.table.originalElement.tagName==="TABLE"&&(this.table.originalElement.childNodes.length?this.parseTable():console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."))}parseTable(){var e=this.table.originalElement,n=this.table.options,i=e.getElementsByTagName("th"),s=e.getElementsByTagName("tbody")[0],t=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),s=s?s.getElementsByTagName("tr"):[],this._extractOptions(e,n),i.length?this._extractHeaders(i,s):this._generateBlankHeaders(i,s);for(var r=0;r<s.length;r++){var o=s[r],a=o.getElementsByTagName("td"),l={};this.hasIndex||(l[n.index]=r);for(var u=0;u<a.length;u++){var d=a[u];typeof this.fieldIndex[u]<"u"&&(l[this.fieldIndex[u]]=d.innerHTML)}t.push(l)}n.data=t,this.dispatchExternal("htmlImported")}_extractOptions(e,n,i){var s=e.attributes,t=Object.keys(i||n),r={};t.forEach(u=>{r[u.toLowerCase()]=u});for(var o in s){var a=s[o],l;a&&typeof a=="object"&&a.name&&a.name.indexOf("tabulator-")===0&&(l=a.name.replace("tabulator-",""),typeof r[l]<"u"&&(n[r[l]]=this._attribValue(a.value)))}}_attribValue(e){return e==="true"?!0:e==="false"?!1:e}_findCol(e){var n=this.table.options.columns.find(i=>i.title===e);return n||!1}_extractHeaders(e,n){for(var i=0;i<e.length;i++){var s=e[i],t=!1,r=this._findCol(s.textContent),o;r?t=!0:r={title:s.textContent.trim()},r.field||(r.field=s.textContent.trim().toLowerCase().replaceAll(" ","_")),o=s.getAttribute("width"),o&&!r.width&&(r.width=o),this._extractOptions(s,r,this.table.columnManager.optionsList.registeredDefaults),this.fieldIndex[i]=r.field,r.field==this.table.options.index&&(this.hasIndex=!0),t||this.table.options.columns.push(r)}}_generateBlankHeaders(e,n){for(var i=0;i<e.length;i++){var s=e[i],t={title:"",field:"col"+i};this.fieldIndex[i]=t.field;var r=s.getAttribute("width");r&&(t.width=r),this.table.options.columns.push(t)}}}X(lr,"moduleName","htmlTableImport");function rh(c){var e=[],n=0,i=0,s=!1;for(let t=0;t<c.length;t++){let r=c[t],o=c[t+1];if(e[n]||(e[n]=[]),e[n][i]||(e[n][i]=""),r=='"'&&s&&o=='"'){e[n][i]+=r,t++;continue}if(r=='"'){s=!s;continue}if(r==","&&!s){i++;continue}if(r=="\r"&&o==`
`&&!s){i=0,n++,t++;continue}if((r=="\r"||r==`
`)&&!s){i=0,n++;continue}e[n][i]+=r}return e}function oh(c){try{return JSON.parse(c)}catch(e){return console.warn("JSON Import Error - File contents is invalid JSON",e),Promise.reject()}}function ah(c){return c}function lh(c){var e=this.dependencyRegistry.lookup("XLSX"),n=e.read(c),i=n.Sheets[n.SheetNames[0]];return e.utils.sheet_to_json(i,{header:1})}var uh={csv:rh,json:oh,array:ah,xlsx:lh};const Vt=class Vt extends he{constructor(e){super(e),this.registerTableOption("importFormat"),this.registerTableOption("importReader","text"),this.registerTableOption("importHeaderTransform"),this.registerTableOption("importValueTransform"),this.registerTableOption("importDataValidator"),this.registerTableOption("importFileValidator")}initialize(){this.registerTableFunction("import",this.importFromFile.bind(this)),this.table.options.importFormat&&(this.subscribe("data-loading",this.loadDataCheck.bind(this),10),this.subscribe("data-load",this.loadData.bind(this),10))}loadDataCheck(e){return this.table.options.importFormat&&(typeof e=="string"||Array.isArray(e)&&e.length&&Array.isArray(e))}loadData(e,n,i,s,t){return this.importData(this.lookupImporter(),e).then(this.structureData.bind(this)).catch(r=>(console.error("Import Error:",r||"Unable to import data"),Promise.reject(r)))}lookupImporter(e){var n;return e||(e=this.table.options.importFormat),typeof e=="string"?n=Vt.importers[e]:n=e,n||console.error("Import Error - Importer not found:",e),n}importFromFile(e,n,i){var s=this.lookupImporter(e);if(s)return this.pickFile(n,i).then(this.importData.bind(this,s)).then(this.structureData.bind(this)).then(this.mutateData.bind(this)).then(this.validateData.bind(this)).then(this.setData.bind(this)).catch(t=>(this.dispatch("import-error",t),this.dispatchExternal("importError",t),console.error("Import Error:",t||"Unable to import file"),this.table.dataLoader.alertError(),setTimeout(()=>{this.table.dataLoader.clearAlert()},3e3),Promise.reject(t)))}pickFile(e,n){return new Promise((i,s)=>{var t=document.createElement("input");t.type="file",t.accept=e,t.addEventListener("change",r=>{var o=t.files[0],a=new FileReader,l=this.validateFile(o);if(l===!0){switch(this.dispatch("import-importing",t.files),this.dispatchExternal("importImporting",t.files),n||this.table.options.importReader){case"buffer":a.readAsArrayBuffer(o);break;case"binary":a.readAsBinaryString(o);break;case"url":a.readAsDataURL(o);break;case"text":default:a.readAsText(o)}a.onload=u=>{i(a.result)},a.onerror=u=>{console.warn("File Load Error - Unable to read file"),s(u)}}else s(l)}),this.dispatch("import-choose"),this.dispatchExternal("importChoose"),t.click()})}importData(e,n){var i;return this.table.dataLoader.alertLoader(),new Promise((s,t)=>{setTimeout(()=>{i=e.call(this.table,n),i instanceof Promise||i?s(i):t()},10)})}structureData(e){var n=[];return Array.isArray(e)&&e.length&&Array.isArray(e[0])?(this.table.options.autoColumns?n=this.structureArrayToObject(e):n=this.structureArrayToColumns(e),n):e}mutateData(e){var n=[];return Array.isArray(e)?e.forEach(i=>{n.push(this.table.modules.mutator.transformRow(i,"import"))}):n=e,n}transformHeader(e){var n=[];if(this.table.options.importHeaderTransform)e.forEach(i=>{n.push(this.table.options.importHeaderTransform.call(this.table,i,e))});else return e;return n}transformData(e){var n=[];if(this.table.options.importValueTransform)e.forEach(i=>{n.push(this.table.options.importValueTransform.call(this.table,i,e))});else return e;return n}structureArrayToObject(e){var n=this.transformHeader(e.shift()),i=e.map(s=>{var t={};return s=this.transformData(s),n.forEach((r,o)=>{t[r]=s[o]}),t});return i}structureArrayToColumns(e){var n=[],i=this.transformHeader(e[0]),s=this.table.getColumns();return s[0]&&i[0]&&s[0].getDefinition().title===i[0]&&e.shift(),e.forEach(t=>{var r={};t=this.transformData(t),t.forEach((o,a)=>{var l=s[a];l&&(r[l.getField()]=o)}),n.push(r)}),n}validateFile(e){return this.table.options.importFileValidator?this.table.options.importFileValidator.call(this.table,e):!0}validateData(e){var n;return this.table.options.importDataValidator?(n=this.table.options.importDataValidator.call(this.table,e),n===!0?e:Promise.reject(n)):e}setData(e){return this.dispatch("import-imported",e),this.dispatchExternal("importImported",e),this.table.dataLoader.clearAlert(),this.table.setData(e)}};X(Vt,"moduleName","import"),X(Vt,"importers",uh);let rn=Vt;class ur extends he{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowMouseDown:"row-mousedown",rowMouseUp:"row-mouseup",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellMouseDown:"cell-mousedown",cellMouseUp:"cell-mouseup",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerMouseDown:"column-mousedown",headerMouseUp:"column-mouseup",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupMouseDown:"group-mousedown",groupMouseUp:"group-mouseup",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null},group:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerMouseDown"),this.registerColumnOption("headerMouseUp"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellMouseDown"),this.registerColumnOption("cellMouseUp"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this)),this.subscribe("scroll-horizontal",this.clearTouchWatchers.bind(this)),this.subscribe("scroll-vertical",this.clearTouchWatchers.bind(this))}clearTouchWatchers(){var e=Object.values(this.touchWatchers);e.forEach(n=>{for(let i in n)n[i]=null})}cellContentsSelectionFixer(e,n){var i;if(!(this.table.modExists("edit")&&this.table.modules.edit.currentCell===n)){e.preventDefault();try{document.selection?(i=document.body.createTextRange(),i.moveToElementText(n.getElement()),i.select()):window.getSelection&&(i=document.createRange(),i.selectNode(n.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(i))}catch{}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,n){n?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var n=this.eventMap[e];this.touchSubscribers[n+"-touchstart"]||(this.touchSubscribers[n+"-touchstart"]=this.handleTouch.bind(this,n,"start"),this.touchSubscribers[n+"-touchend"]=this.handleTouch.bind(this,n,"end"),this.subscribe(n+"-touchstart",this.touchSubscribers[n+"-touchstart"]),this.subscribe(n+"-touchend",this.touchSubscribers[n+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var n=!0,i=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let s in this.eventMap)this.eventMap[s]===i&&this.subscribers[s]&&(n=!1);n&&(this.unsubscribe(i+"-touchstart",this.touchSubscribers[i+"-touchstart"]),this.unsubscribe(i+"-touchend",this.touchSubscribers[i+"-touchend"]),delete this.touchSubscribers[i+"-touchstart"],delete this.touchSubscribers[i+"-touchend"])}}initializeColumn(e){var n=e.definition;for(let i in this.eventMap)n[i]&&(this.subscriptionChanged(i,!0),this.columnSubscribers[i]||(this.columnSubscribers[i]=[]),this.columnSubscribers[i].push(e))}handle(e,n,i){this.dispatchEvent(e,n,i)}handleTouch(e,n,i,s){var t=this.touchWatchers[e];switch(e==="column"&&(e="header"),n){case"start":t.tap=!0,clearTimeout(t.tapHold),t.tapHold=setTimeout(()=>{clearTimeout(t.tapHold),t.tapHold=null,t.tap=null,clearTimeout(t.tapDbl),t.tapDbl=null,this.dispatchEvent(e+"TapHold",i,s)},1e3);break;case"end":t.tap&&(t.tap=null,this.dispatchEvent(e+"Tap",i,s)),t.tapDbl?(clearTimeout(t.tapDbl),t.tapDbl=null,this.dispatchEvent(e+"DblTap",i,s)):t.tapDbl=setTimeout(()=>{clearTimeout(t.tapDbl),t.tapDbl=null},300),clearTimeout(t.tapHold),t.tapHold=null;break}}dispatchEvent(e,n,i){var s=i.getComponent(),t;this.columnSubscribers[e]&&(i instanceof qt?t=i.column.definition[e]:i instanceof Mt&&(t=i.definition[e]),t&&t(n,s)),this.dispatchExternal(e,n,s)}}X(ur,"moduleName","interaction");var hh={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,navLeft:37,navRight:39,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35},dh={keyBlock:function(c){c.stopPropagation(),c.preventDefault()},scrollPageUp:function(c){var e=this.table.rowManager,n=e.scrollTop-e.element.clientHeight;c.preventDefault(),e.displayRowsCount&&(n>=0?e.element.scrollTop=n:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(c){var e=this.table.rowManager,n=e.scrollTop+e.element.clientHeight,i=e.element.scrollHeight;c.preventDefault(),e.displayRowsCount&&(n<=i?e.element.scrollTop=n:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(c){var e=this.table.rowManager;c.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(c){var e=this.table.rowManager;c.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(c){this.dispatch("keybinding-nav-prev",c)},navNext:function(c){this.dispatch("keybinding-nav-next",c)},navLeft:function(c){this.dispatch("keybinding-nav-left",c)},navRight:function(c){this.dispatch("keybinding-nav-right",c)},navUp:function(c){this.dispatch("keybinding-nav-up",c)},navDown:function(c){this.dispatch("keybinding-nav-down",c)}};const vt=class vt extends he{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",{}),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,n={};this.watchKeys={},this.pressedKeys=[],e!==!1&&(Object.assign(n,vt.bindings),Object.assign(n,e),this.mapBindings(n),this.bindEvents()),this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let n in e)vt.actions[n]?e[n]&&(typeof e[n]!="object"&&(e[n]=[e[n]]),e[n].forEach(i=>{var s=Array.isArray(i)?i:[i];s.forEach(t=>{this.mapBinding(n,t)})})):console.warn("Key Binding Error - no such action:",n)}mapBinding(e,n){var i={action:vt.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1},s=n.toString().toLowerCase().split(" ").join("").split("+");s.forEach(t=>{switch(t){case"ctrl":i.ctrl=!0;break;case"shift":i.shift=!0;break;case"meta":i.meta=!0;break;default:t=isNaN(t)?t.toUpperCase().charCodeAt(0):parseInt(t),i.keys.push(t),this.watchKeys[t]||(this.watchKeys[t]=[]),this.watchKeys[t].push(i)}})}bindEvents(){var e=this;this.keyupBinding=function(n){var i=n.keyCode,s=e.watchKeys[i];s&&(e.pressedKeys.push(i),s.forEach(function(t){e.checkBinding(n,t)}))},this.keydownBinding=function(n){var i=n.keyCode,s=e.watchKeys[i];if(s){var t=e.pressedKeys.indexOf(i);t>-1&&e.pressedKeys.splice(t,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,n){var i=!0;return e.ctrlKey==n.ctrl&&e.shiftKey==n.shift&&e.metaKey==n.meta?(n.keys.forEach(s=>{var t=this.pressedKeys.indexOf(s);t==-1&&(i=!1)}),i&&n.action.call(this,e),!0):!1}};X(vt,"moduleName","keybindings"),X(vt,"bindings",hh),X(vt,"actions",dh);let on=vt;class hr extends he{constructor(e){super(e),this.menuContainer=null,this.nestedMenuBlock=!1,this.currentComponent=null,this.rootPopup=null,this.columnSubscribers={},this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("rowDblClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerTableOption("groupDblClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerClickMenu"),this.registerColumnOption("headerDblClickMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("headerMenuIcon"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu"),this.registerColumnOption("dblClickMenu")}initialize(){this.deprecatedOptionsCheck(),this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeRowWatchers(){this.table.options.rowContextMenu&&(this.subscribe("row-contextmenu",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu)),this.table.on("rowTapHold",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu))),this.table.options.rowClickMenu&&this.subscribe("row-click",this.loadMenuEvent.bind(this,this.table.options.rowClickMenu)),this.table.options.rowDblClickMenu&&this.subscribe("row-dblclick",this.loadMenuEvent.bind(this,this.table.options.rowDblClickMenu))}initializeGroupWatchers(){this.table.options.groupContextMenu&&(this.subscribe("group-contextmenu",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu)),this.table.on("groupTapHold",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu))),this.table.options.groupClickMenu&&this.subscribe("group-click",this.loadMenuEvent.bind(this,this.table.options.groupClickMenu)),this.table.options.groupDblClickMenu&&this.subscribe("group-dblclick",this.loadMenuEvent.bind(this,this.table.options.groupDblClickMenu))}initializeColumn(e){var n=e.definition;n.headerContextMenu&&!this.columnSubscribers.headerContextMenu&&(this.columnSubscribers.headerContextMenu=this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextMenu),this.table.on("headerTapHold",this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"))),n.headerClickMenu&&!this.columnSubscribers.headerClickMenu&&(this.columnSubscribers.headerClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerClickMenu"),this.subscribe("column-click",this.columnSubscribers.headerClickMenu)),n.headerDblClickMenu&&!this.columnSubscribers.headerDblClickMenu&&(this.columnSubscribers.headerDblClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerDblClickMenu"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickMenu)),n.headerMenu&&this.initializeColumnHeaderMenu(e),n.contextMenu&&!this.columnSubscribers.contextMenu&&(this.columnSubscribers.contextMenu=this.loadMenuTableCellEvent.bind(this,"contextMenu"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextMenu),this.table.on("cellTapHold",this.loadMenuTableCellEvent.bind(this,"contextMenu"))),n.clickMenu&&!this.columnSubscribers.clickMenu&&(this.columnSubscribers.clickMenu=this.loadMenuTableCellEvent.bind(this,"clickMenu"),this.subscribe("cell-click",this.columnSubscribers.clickMenu)),n.dblClickMenu&&!this.columnSubscribers.dblClickMenu&&(this.columnSubscribers.dblClickMenu=this.loadMenuTableCellEvent.bind(this,"dblClickMenu"),this.subscribe("cell-dblclick",this.columnSubscribers.dblClickMenu))}initializeColumnHeaderMenu(e){var n=e.definition.headerMenuIcon,i;i=document.createElement("span"),i.classList.add("tabulator-header-popup-button"),n?(typeof n=="function"&&(n=n(e.getComponent())),n instanceof HTMLElement?i.appendChild(n):i.innerHTML=n):i.innerHTML="&vellip;",i.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.loadMenuEvent(e.definition.headerMenu,s,e)}),e.titleElement.insertBefore(i,e.titleElement.firstChild)}loadMenuTableCellEvent(e,n,i){i._cell&&(i=i._cell),i.column.definition[e]&&this.loadMenuEvent(i.column.definition[e],n,i)}loadMenuTableColumnEvent(e,n,i){i._column&&(i=i._column),i.definition[e]&&this.loadMenuEvent(i.definition[e],n,i)}loadMenuEvent(e,n,i){i._group?i=i._group:i._row&&(i=i._row),e=typeof e=="function"?e.call(this.table,n,i.getComponent()):e,this.loadMenu(n,i,e)}loadMenu(e,n,i,s,t){var r=!(e instanceof MouseEvent),o=document.createElement("div"),a;if(o.classList.add("tabulator-menu"),r||e.preventDefault(),!(!i||!i.length)){if(s)a=t.child(o);else{if(this.nestedMenuBlock){if(this.rootPopup)return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.rootPopup&&this.rootPopup.hide(),this.rootPopup=a=this.popup(o)}i.forEach(l=>{var u=document.createElement("div"),d=l.label,h=l.disabled;l.separator?u.classList.add("tabulator-menu-separator"):(u.classList.add("tabulator-menu-item"),typeof d=="function"&&(d=d.call(this.table,n.getComponent())),d instanceof Node?u.appendChild(d):u.innerHTML=d,typeof h=="function"&&(h=h.call(this.table,n.getComponent())),h?(u.classList.add("tabulator-menu-item-disabled"),u.addEventListener("click",f=>{f.stopPropagation()})):l.menu&&l.menu.length?u.addEventListener("click",f=>{f.stopPropagation(),this.loadMenu(f,n,l.menu,u,a)}):l.action&&u.addEventListener("click",f=>{l.action(f,n.getComponent())}),l.menu&&l.menu.length&&u.classList.add("tabulator-menu-item-submenu")),o.appendChild(u)}),o.addEventListener("click",l=>{this.rootPopup&&this.rootPopup.hide()}),a.show(s||e),a===this.rootPopup&&(this.rootPopup.hideOnBlur(()=>{this.rootPopup=null,this.currentComponent&&(this.dispatch("menu-closed",i,a),this.dispatchExternal("menuClosed",this.currentComponent.getComponent()),this.currentComponent=null)}),this.currentComponent=n,this.dispatch("menu-opened",i,a),this.dispatchExternal("menuOpened",n.getComponent()))}}}X(hr,"moduleName","menu");class dr extends he{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.table.options.movableColumns&&(this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("alert-show",this.abortMove.bind(this)))}abortMove(){clearTimeout(this.checkTimeout)}initializeColumn(e){var n=this,i={},s;!e.modules.frozen&&!e.isGroup&&!e.isRowHeader&&(s=e.getElement(),i.mousemove=(function(t){e.parent===n.moving.parent&&((n.touchMove?t.touches[0].pageX:t.pageX)-Ee.elOffset(s).left+n.table.columnManager.contentsElement.scrollLeft>e.getWidth()/2?(n.toCol!==e||!n.toColAfter)&&(s.parentNode.insertBefore(n.placeholderElement,s.nextSibling),n.moveColumn(e,!0)):(n.toCol!==e||n.toColAfter)&&(s.parentNode.insertBefore(n.placeholderElement,s),n.moveColumn(e,!1)))}).bind(n),s.addEventListener("mousedown",function(t){n.touchMove=!1,t.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(t,e)},n.checkPeriod))}),s.addEventListener("mouseup",function(t){t.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),n.bindTouchEvents(e)),e.modules.moveColumn=i}bindTouchEvents(e){var n=e.getElement(),i=!1,s,t,r,o,a,l;n.addEventListener("touchstart",u=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,s=e.nextColumn(),r=s?s.getWidth()/2:0,t=e.prevColumn(),o=t?t.getWidth()/2:0,a=0,l=0,i=!1,this.startMove(u,e)},this.checkPeriod)},{passive:!0}),n.addEventListener("touchmove",u=>{var d,h;this.moving&&(this.moveHover(u),i||(i=u.touches[0].pageX),d=u.touches[0].pageX-i,d>0?s&&d-a>r&&(h=s,h!==e&&(i=u.touches[0].pageX,h.getElement().parentNode.insertBefore(this.placeholderElement,h.getElement().nextSibling),this.moveColumn(h,!0))):t&&-d-l>o&&(h=t,h!==e&&(i=u.touches[0].pageX,h.getElement().parentNode.insertBefore(this.placeholderElement,h.getElement()),this.moveColumn(h,!1))),h&&(s=h.nextColumn(),a=r,r=s?s.getWidth()/2:0,t=h.prevColumn(),l=o,o=t?t.getWidth()/2:0))},{passive:!0}),n.addEventListener("touchend",u=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(u)})}startMove(e,n){var i=n.getElement(),s=this.table.columnManager.getContentsElement(),t=this.table.columnManager.getHeadersElement();this.table.modules.selectRange&&this.table.modules.selectRange.columnSelection&&this.table.modules.selectRange.mousedown&&this.table.modules.selectRange.selecting==="column"||(this.moving=n,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-Ee.elOffset(i).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=n.getWidth()+"px",this.placeholderElement.style.height=n.getHeight()+"px",i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),s.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=s.clientHeight-t.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e),this.dispatch("column-moving",e,this.moving))}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,n){var i=this.moving.getCells();this.toCol=e,this.toColAfter=n,n?e.getCells().forEach(function(s,t){var r=s.getElement(!0);r.parentNode&&i[t]&&r.parentNode.insertBefore(i[t].getElement(),r.nextSibling)}):e.getCells().forEach(function(s,t){var r=s.getElement(!0);r.parentNode&&i[t]&&r.parentNode.insertBefore(i[t].getElement(),r)})}endMove(e){(e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var n=this.table.columnManager.getContentsElement(),i=n.scrollLeft,s=(this.touchMove?e.touches[0].pageX:e.pageX)-Ee.elOffset(n).left+i,t;this.hoverElement.style.left=s-this.startX+"px",s-i<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{t=Math.max(0,i-5),this.table.rowManager.getElement().scrollLeft=t,this.autoScrollTimeout=!1},1))),i+n.clientWidth-s<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{t=Math.min(n.clientWidth,i+5),this.table.rowManager.getElement().scrollLeft=t,this.autoScrollTimeout=!1},1)))}}X(dr,"moduleName","moveColumn");var ch={delete:function(c,e,n){c.delete()}},fh={insert:function(c,e,n){return this.table.addRow(c.getData(),void 0,e),!0},add:function(c,e,n){return this.table.addRow(c.getData()),!0},update:function(c,e,n){return e?(e.update(c.getData()),!0):!1},replace:function(c,e,n){return e?(this.table.addRow(c.getData(),void 0,e),e.delete(),!0):!1}};const Rt=class Rt extends he{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(e){var n=this,i={};i.mouseup=(function(s){n.tableRowDrop(s,e)}).bind(n),i.mousemove=(function(s){var t;s.pageY-Ee.elOffset(e.element).top+n.table.rowManager.element.scrollTop>e.getHeight()/2?(n.toRow!==e||!n.toRowAfter)&&(t=e.getElement(),t.parentNode.insertBefore(n.placeholderElement,t.nextSibling),n.moveRow(e,!0)):(n.toRow!==e||n.toRowAfter)&&(t=e.getElement(),t.previousSibling&&(t.parentNode.insertBefore(n.placeholderElement,t),n.moveRow(e,!1)))}).bind(n),e.modules.moveRow=i}initializeRow(e){var n=this,i={},s;i.mouseup=(function(t){n.tableRowDrop(t,e)}).bind(n),i.mousemove=(function(t){var r=e.getElement();t.pageY-Ee.elOffset(r).top+n.table.rowManager.element.scrollTop>e.getHeight()/2?(n.toRow!==e||!n.toRowAfter)&&(r.parentNode.insertBefore(n.placeholderElement,r.nextSibling),n.moveRow(e,!0)):(n.toRow!==e||n.toRowAfter)&&(r.parentNode.insertBefore(n.placeholderElement,r),n.moveRow(e,!1))}).bind(n),this.hasHandle||(s=e.getElement(),s.addEventListener("mousedown",function(t){t.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(t,e)},n.checkPeriod))}),s.addEventListener("mouseup",function(t){t.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=i}initializeColumn(e){e.definition.rowHandle&&this.table.options.movableRows!==!1&&(this.hasHandle=!0)}initializeCell(e){if(e.column.definition.rowHandle&&this.table.options.movableRows!==!1){var n=this,i=e.getElement(!0);i.addEventListener("mousedown",function(s){s.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(s,e.row)},n.checkPeriod))}),i.addEventListener("mouseup",function(s){s.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),this.bindTouchEvents(e.row,i)}}bindTouchEvents(e,n){var i=!1,s,t,r,o,a,l;n.addEventListener("touchstart",u=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,s=e.nextRow(),r=s?s.getHeight()/2:0,t=e.prevRow(),o=t?t.getHeight()/2:0,a=0,l=0,i=!1,this.startMove(u,e)},this.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,n.addEventListener("touchmove",u=>{var d,h;this.moving&&(u.preventDefault(),this.moveHover(u),i||(i=u.touches[0].pageY),d=u.touches[0].pageY-i,d>0?s&&d-a>r&&(h=s,h!==e&&(i=u.touches[0].pageY,h.getElement().parentNode.insertBefore(this.placeholderElement,h.getElement().nextSibling),this.moveRow(h,!0))):t&&-d-l>o&&(h=t,h!==e&&(i=u.touches[0].pageY,h.getElement().parentNode.insertBefore(this.placeholderElement,h.getElement()),this.moveRow(h,!1))),h&&(s=h.nextRow(),a=r,r=s?s.getHeight()/2:0,t=h.prevRow(),l=o,o=t?t.getHeight()/2:0))}),n.addEventListener("touchend",u=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(u),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)})}startMove(e,n){var i=n.getElement();this.setStartPosition(e,n),this.moving=n,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=n.getWidth()+"px",this.placeholderElement.style.height=n.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(n)):(i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i)),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.dispatchExternal("rowMoving",n.getComponent()),this.moveHover(e)}setStartPosition(e,n){var i=this.touchMove?e.touches[0].pageX:e.pageX,s=this.touchMove?e.touches[0].pageY:e.pageY,t,r;t=n.getElement(),this.connection?(r=t.getBoundingClientRect(),this.startX=r.left-i+window.pageXOffset,this.startY=r.top-s+window.pageYOffset):this.startY=s-t.getBoundingClientRect().top}endMove(e){(!e||e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow?this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter):this.dispatchExternal("rowMoveCancelled",this.moving.getComponent()),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(e,n){this.toRow=e,this.toRowAfter=n}moveHover(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)}moveHoverTable(e){var n=this.table.rowManager.getElement(),i=n.scrollTop,s=(this.touchMove?e.touches[0].pageY:e.pageY)-n.getBoundingClientRect().top+i;this.hoverElement.style.top=Math.min(s-this.startY,this.table.rowManager.element.scrollHeight-this.hoverElement.offsetHeight)+"px"}moveHoverConnections(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"}elementRowDrop(e,n,i){this.dispatchExternal("movableRowsElementDrop",e,n,i?i.getComponent():!1)}connectToTables(e){var n;this.connectionSelectorsTables&&(n=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",n),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(i=>{typeof i=="string"?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(i))):this.connectionElements.push(i)}),this.connectionElements.forEach(i=>{var s=t=>{this.elementRowDrop(t,i,this.moving)};i.addEventListener("mouseup",s),i.tabulatorElementDropEvent=s,i.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",e),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(n=>{n.classList.remove("tabulator-movingrow-receiving"),n.removeEventListener("mouseup",n.tabulatorElementDropEvent),delete n.tabulatorElementDropEvent})}connect(e,n){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=n,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(i=>{i.type==="row"&&i.modules.moveRow&&i.modules.moveRow.mouseup&&i.getElement().addEventListener("mouseup",i.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",n,e),!0)}disconnect(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(n=>{n.type==="row"&&n.modules.moveRow&&n.modules.moveRow.mouseup&&n.getElement().removeEventListener("mouseup",n.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",e)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(e,n,i){var s=!1;if(i){switch(typeof this.table.options.movableRowsSender){case"string":s=Rt.senders[this.table.options.movableRowsSender];break;case"function":s=this.table.options.movableRowsSender;break}s?s.call(this,this.moving?this.moving.getComponent():void 0,n?n.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),n?n.getComponent():void 0,e)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),n?n.getComponent():void 0,e);this.endMove()}tableRowDrop(e,n){var i=!1,s=!1;switch(e.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":i=Rt.receivers[this.table.options.movableRowsReceiver];break;case"function":i=this.table.options.movableRowsReceiver;break}i?s=i.call(this,this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),s?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:n,success:s})}commsReceived(e,n,i){switch(n){case"connect":return this.connect(e,i.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,i.row,i.success)}}};X(Rt,"moduleName","moveRow"),X(Rt,"senders",ch),X(Rt,"receivers",fh);let an=Rt;var ph={};const It=class It extends he{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard","import"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams"),this.registerColumnOption("mutatorImport"),this.registerColumnOption("mutatorImportParams"),this.registerColumnOption("mutateLink")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("cell-value-changed",this.mutateLink.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,n,i){return this.transformRow(n,"data",i)}initializeColumn(e){var n=!1,i={};this.allowedTypes.forEach(s=>{var t="mutator"+(s.charAt(0).toUpperCase()+s.slice(1)),r;e.definition[t]&&(r=this.lookupMutator(e.definition[t]),r&&(n=!0,i[t]={mutator:r,params:e.definition[t+"Params"]||{}}))}),n&&(e.modules.mutate=i)}lookupMutator(e){var n=!1;switch(typeof e){case"string":It.mutators[e]?n=It.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":n=e;break}return n}transformRow(e,n,i){var s="mutator"+(n.charAt(0).toUpperCase()+n.slice(1)),t;return this.enabled&&this.table.columnManager.traverse(r=>{var o,a,l;r.modules.mutate&&(o=r.modules.mutate[s]||r.modules.mutate.mutator||!1,o&&(t=r.getFieldValue(typeof i<"u"?i:e),(n=="data"&&!i||typeof t<"u")&&(l=r.getComponent(),a=typeof o.params=="function"?o.params(t,e,n,l):o.params,r.setFieldValue(e,o.mutator(t,e,n,a,l)))))}),e}transformCell(e,n){if(e.column.modules.mutate){var i=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,s={};if(i)return s=Object.assign(s,e.row.getData()),e.column.setFieldValue(s,n),i.mutator(n,s,"edit",i.params,e.getComponent())}return n}mutateLink(e){var n=e.column.definition.mutateLink;n&&(Array.isArray(n)||(n=[n]),n.forEach(i=>{var s=e.row.getCell(i);s&&s.setValue(s.getValue(),!0,!0)}))}enable(){this.enabled=!0}disable(){this.enabled=!1}};X(It,"moduleName","mutator"),X(It,"mutators",ph);let ln=It;function mh(c,e,n,i,s){var t=document.createElement("span"),r=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),u=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",d=>{r.innerHTML=d}),this.table.modules.localize.langBind("pagination|counter|of",d=>{a.innerHTML=d}),this.table.modules.localize.langBind("pagination|counter|rows",d=>{u.innerHTML=d}),i?(o.innerHTML=" "+e+"-"+Math.min(e+c-1,i)+" ",l.innerHTML=" "+i+" ",t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(l),t.appendChild(u)):(o.innerHTML=" 0 ",t.appendChild(r),t.appendChild(o),t.appendChild(u)),t}function gh(c,e,n,i,s){var t=document.createElement("span"),r=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),u=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",d=>{r.innerHTML=d}),o.innerHTML=" "+n+" ",this.table.modules.localize.langBind("pagination|counter|of",d=>{a.innerHTML=d}),l.innerHTML=" "+s+" ",this.table.modules.localize.langBind("pagination|counter|pages",d=>{u.innerHTML=d}),t.appendChild(r),t.appendChild(o),t.appendChild(a),t.appendChild(l),t.appendChild(u),t}var vh={rows:mh,pages:gh};const Jt=class Jt extends he{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.element=null,this.pageCounterElement=null,this.pageCounter=null,this.size=0,this.page=1,this.count=5,this.max=1,this.remoteRowCountEstimate=null,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationCounter",!1),this.registerTableOption("paginationCounterElement",!1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("paginationOutOfRange",!1),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("footer-redraw",this.footerRedraw.bind(this)),this.table.options.paginationAddRow=="page"&&this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.table.options.paginationMode==="remote"&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePageCounter(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),this.table.options.progressiveLoad==="scroll"&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,n){var i=this.table.rowManager,s=i.getDisplayRows(),t;return n?s.length?t=s[0]:i.activeRows.length&&(t=i.activeRows[i.activeRows.length-1],n=!1):s.length&&(t=s[s.length-1],n=!(s.length<this.size)),{index:t,top:n}}calculatePageSizes(){var e,n;this.table.options.paginationSize?this.size=this.table.options.paginationSize:(e=document.createElement("div"),e.classList.add("tabulator-row"),e.style.visibility="hidden",n=document.createElement("div"),n.classList.add("tabulator-cell"),n.innerHTML="Page Row Test",e.appendChild(n),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.dispatchExternal("pageSizeChanged",this.size),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,n,i,s){return this.initialLoad||(this.progressiveLoad&&!i||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),s.page=this.page,this.size&&(s.size=this.size),s}userSetPageToRow(e){return this.table.options.pagination&&(e=this.table.rowManager.findRow(e),e)?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return this.table.options.pagination?(this.setPageSize(e),this.setPage(1)):!1}scrollVertical(e,n){var i,s,t;!n&&!this.table.dataLoader.loading&&(i=this.table.rowManager.getElement(),s=i.scrollHeight-i.clientHeight-e,t=this.table.options.progressiveLoadScrollMargin||i.clientHeight*2,s<t&&this.nextPage().catch(()=>{}))}restOnRenderBefore(e,n){return n||this.mode==="local"&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),e=document.createElement("button"),e.classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))e=this.table.options.paginationSizeSelector,this.pageSizes=e,this.pageSizes.indexOf(this.size)==-1&&e.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){e=[];for(let n=1;n<5;n++)e.push(this.size*n);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(n=>{var i=document.createElement("option");i.value=n,n===!0?this.langBind("pagination|all",function(s){i.innerHTML=s}):i.innerHTML=n,this.pageSizeSelect.appendChild(i)}),this.pageSizeSelect.value=this.size}}initializePageCounter(){var e=this.table.options.paginationCounter,n=null;e&&(typeof e=="function"?n=e:n=Jt.pageCounters[e],n?(this.pageCounter=n,this.pageCounterElement=document.createElement("span"),this.pageCounterElement.classList.add("tabulator-page-counter")):console.warn("Pagination Error - No such page counter found: ",e))}initializePaginator(e){var n,i;e||(this.langBind("pagination|first",s=>{this.firstBut.innerHTML=s}),this.langBind("pagination|first_title",s=>{this.firstBut.setAttribute("aria-label",s),this.firstBut.setAttribute("title",s)}),this.langBind("pagination|prev",s=>{this.prevBut.innerHTML=s}),this.langBind("pagination|prev_title",s=>{this.prevBut.setAttribute("aria-label",s),this.prevBut.setAttribute("title",s)}),this.langBind("pagination|next",s=>{this.nextBut.innerHTML=s}),this.langBind("pagination|next_title",s=>{this.nextBut.setAttribute("aria-label",s),this.nextBut.setAttribute("title",s)}),this.langBind("pagination|last",s=>{this.lastBut.innerHTML=s}),this.langBind("pagination|last_title",s=>{this.lastBut.setAttribute("aria-label",s),this.lastBut.setAttribute("title",s)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(n=document.createElement("label"),this.langBind("pagination|page_size",s=>{this.pageSizeSelect.setAttribute("aria-label",s),this.pageSizeSelect.setAttribute("title",s),n.innerHTML=s}),this.element.appendChild(n),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",s=>{this.setPageSize(this.pageSizeSelect.value=="true"?!0:this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||(this.table.options.paginationCounter&&(this.table.options.paginationCounterElement?this.table.options.paginationCounterElement instanceof HTMLElement?this.table.options.paginationCounterElement.appendChild(this.pageCounterElement):typeof this.table.options.paginationCounterElement=="string"&&(i=document.querySelector(this.table.options.paginationCounterElement),i?i.appendChild(this.pageCounterElement):console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:",this.table.options.paginationCounterElement)):this.footerAppend(this.pageCounterElement)),this.footerAppend(this.element)),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setMaxRows(e){e?this.max=this.size===!0?1:Math.ceil(e/this.size):this.max=1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||(this.mode=="local"||e)&&(this.page=1,this.trackChanges())}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return e=parseInt(e),e>0&&e<=this.max||this.mode!=="local"?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var n=this.displayRows(-1),i=n.indexOf(e);if(i>-1){var s=this.size===!0?1:Math.ceil((i+1)/this.size);return this.setPage(s)}else return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){e!==!0&&(e=parseInt(e)),e>0&&(this.size=e,this.dispatchExternal("pageSizeChanged",e)),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageCounter(e,n,i){var s;if(this.pageCounter)switch(this.mode==="remote"&&(n=this.size,i=(this.page-1)*this.size+1,e=this.remoteRowCountEstimate),s=this.pageCounter.call(this,n,i,this.page,e,this.max),typeof s){case"object":if(s instanceof Node){for(;this.pageCounterElement.firstChild;)this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);this.pageCounterElement.appendChild(s)}else this.pageCounterElement.innerHTML="",s!=null&&console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:",s);break;case"undefined":this.pageCounterElement.innerHTML="";break;default:this.pageCounterElement.innerHTML=s}}_setPageButtons(){let e=Math.floor((this.count-1)/2),n=Math.ceil((this.count-1)/2),i=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),s=this.page<=n?Math.min(this.count,this.max):Math.min(this.page+n,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);this.page==1?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let t=i;t<=s;t++)t>0&&t<=this.max&&this.pagesElement.appendChild(this._generatePageButton(t));this.footerRedraw()}_generatePageButton(e){var n=document.createElement("button");return n.classList.add("tabulator-page"),e==this.page&&n.classList.add("active"),n.setAttribute("type","button"),n.setAttribute("role","button"),this.langBind("pagination|page_title",i=>{n.setAttribute("aria-label",i+" "+e),n.setAttribute("title",i+" "+e)}),n.setAttribute("data-page",e),n.textContent=e,n.addEventListener("click",i=>{this.setPage(e)}),n}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var n=0,i,s,t,r,o=e.filter(a=>a.type==="row");if(this.mode=="local"){i=[],this.setMaxRows(e.length),this.size===!0?(s=0,t=e.length):(s=this.size*(this.page-1),t=s+parseInt(this.size)),this._setPageButtons();for(let a=s;a<t;a++){let l=e[a];l&&(i.push(l),l.type==="row"&&(r||(r=l),n++))}return this._setPageCounter(o.length,n,r?o.indexOf(r)+1:0),i}else return this._setPageButtons(),this._setPageCounter(o.length),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){var n,i;if(typeof e.last_page>"u"&&console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property"),e.data)if(this.max=parseInt(e.last_page)||1,this.remoteRowCountEstimate=typeof e.last_row<"u"?e.last_row:e.last_page*this.size-(this.page==e.last_page?this.size-e.data.length:0),this.progressiveLoad){switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(e.data,!1,this.page==1):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.page===1?e.data:this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,this.page!==1,this.page==1),n=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+n&&this.page<this.max&&setTimeout(()=>{this.nextPage()});break}return!1}else{if(this.page>this.max&&(console.warn("Remote Pagination Error - Server returned last page value lower than the current page"),i=this.options("paginationOutOfRange"),i))return this.setPage(typeof i=="function"?i.call(this,this.page,this.max):i);this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.containerElement;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}};X(Jt,"moduleName","page"),X(Jt,"pageCounters",vh);let un=Jt;var bh={local:function(c,e){var n=localStorage.getItem(c+"-"+e);return n?JSON.parse(n):!1},cookie:function(c,e){var n=document.cookie,i=c+"-"+e,s=n.indexOf(i+"="),t,r;return s>-1&&(n=n.slice(s),t=n.indexOf(";"),t>-1&&(n=n.slice(0,t)),r=n.replace(i+"=","")),r?JSON.parse(r):!1}},yh={local:function(c,e,n){localStorage.setItem(c+"-"+e,JSON.stringify(n))},cookie:function(c,e,n){var i=new Date;i.setDate(i.getDate()+1e4),document.cookie=c+"-"+e+"="+JSON.stringify(n)+"; expires="+i.toUTCString()}};const ze=class ze extends he{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}initialize(){if(this.table.options.persistence){var e=this.table.options.persistenceMode,n=this.table.options.persistenceID,i;this.mode=e!==!0?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:ze.readers[this.table.options.persistenceReaderFunc]?this.readFunc=ze.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):ze.readers[this.mode]?this.readFunc=ze.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:ze.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=ze.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):ze.writers[this.mode]?this.writeFunc=ze.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(n||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,headerFilter:this.table.options.persistence===!0||this.table.options.persistence.headerFilter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(i=this.retrieveData("page"),i&&(typeof i.paginationSize<"u"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=i.paginationSize),typeof i.paginationInitialPage<"u"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=i.paginationInitialPage))),this.config.group&&(i=this.retrieveData("group"),i&&(typeof i.groupBy<"u"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=i.groupBy),typeof i.groupStartOpen<"u"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=i.groupStartOpen),typeof i.groupHeader<"u"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=i.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns"))),this.subscribe("table-built",this.tableBuilt.bind(this),0),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("filter-changed",this.eventSave.bind(this,"headerFilter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("column-width",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var e,n,i;this.config.sort&&(e=this.load("sort"),e&&(this.table.options.initialSort=e)),this.config.filter&&(n=this.load("filter"),n&&(this.table.options.initialFilter=n)),this.config.headerFilter&&(i=this.load("headerFilter"),i&&(this.table.options.initialHeaderFilter=i))}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e,!0)),!0}initializeColumn(e){var n,i;this.config.columns&&(this.defWatcherBlock=!0,n=e.getDefinition(),i=this.config.columns===!0?Object.keys(n):this.config.columns,i.forEach(s=>{var t=Object.getOwnPropertyDescriptor(n,s),r=n[s];t&&Object.defineProperty(n,s,{set:o=>{r=o,this.defWatcherBlock||this.save("columns"),t.set&&t.set(o)},get:()=>(t.get&&t.get(),r)})}),this.defWatcherBlock=!1)}load(e,n){var i=this.retrieveData(e);return n&&(i=i?this.mergeDefinition(n,i):n),i}retrieveData(e){return this.readFunc?this.readFunc(this.id,e):!1}mergeDefinition(e,n,i){var s=[];return n=n||[],n.forEach((t,r)=>{var o=this._findColumn(e,t),a;o&&(i?a=Object.keys(t):this.config.columns===!0||this.config.columns==null?(a=Object.keys(o),a.push("width")):a=this.config.columns,a.forEach(l=>{l!=="columns"&&typeof t[l]<"u"&&(o[l]=t[l])}),o.columns&&(o.columns=this.mergeDefinition(o.columns,t.columns)),s.push(o))}),e.forEach((t,r)=>{var o=this._findColumn(n,t);o||(s.length>r?s.splice(r,0,t):s.push(t))}),s}_findColumn(e,n){var i=n.columns?"group":n.field?"field":"object";return e.find(function(s){switch(i){case"group":return s.title===n.title&&s.columns.length===n.columns.length;case"field":return s.field===n.field;case"object":return s===n}})}save(e){var n={};switch(e){case"columns":n=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":n=this.table.modules.filter.getFilters();break;case"headerFilter":n=this.table.modules.filter.getHeaderFilters();break;case"sort":n=this.validateSorters(this.table.modules.sort.getSort());break;case"group":n=this.getGroupConfig();break;case"page":n=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,e,n)}validateSorters(e){return e.forEach(function(n){n.column=n.field,delete n.field}),e}getGroupConfig(){var e={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var n=[],i=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(s=>{var t={},r=s.getDefinition(),o;s.isGroup?(t.title=r.title,t.columns=this.parseColumns(s.getColumns())):(t.field=s.getField(),this.config.columns===!0||this.config.columns==null?(o=Object.keys(r),o.push("width"),o.push("visible")):o=this.config.columns,o.forEach(a=>{switch(a){case"width":t.width=s.getWidth();break;case"visible":t.visible=s.visible;break;default:typeof r[a]!="function"&&i.indexOf(a)===-1&&(t[a]=r[a])}})),n.push(t)}),n}};X(ze,"moduleName","persistence"),X(ze,"moduleInitOrder",-10),X(ze,"readers",bh),X(ze,"writers",yh);let hn=ze;class cr extends he{constructor(e){super(e),this.columnSubscribers={},this.registerTableOption("rowContextPopup",!1),this.registerTableOption("rowClickPopup",!1),this.registerTableOption("rowDblClickPopup",!1),this.registerTableOption("groupContextPopup",!1),this.registerTableOption("groupClickPopup",!1),this.registerTableOption("groupDblClickPopup",!1),this.registerColumnOption("headerContextPopup"),this.registerColumnOption("headerClickPopup"),this.registerColumnOption("headerDblClickPopup"),this.registerColumnOption("headerPopup"),this.registerColumnOption("headerPopupIcon"),this.registerColumnOption("contextPopup"),this.registerColumnOption("clickPopup"),this.registerColumnOption("dblClickPopup"),this.registerComponentFunction("cell","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("column","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("row","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("group","popup",this._componentPopupCall.bind(this))}initialize(){this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}_componentPopupCall(e,n,i){this.loadPopupEvent(n,null,e,i)}initializeRowWatchers(){this.table.options.rowContextPopup&&(this.subscribe("row-contextmenu",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup)),this.table.on("rowTapHold",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup))),this.table.options.rowClickPopup&&this.subscribe("row-click",this.loadPopupEvent.bind(this,this.table.options.rowClickPopup)),this.table.options.rowDblClickPopup&&this.subscribe("row-dblclick",this.loadPopupEvent.bind(this,this.table.options.rowDblClickPopup))}initializeGroupWatchers(){this.table.options.groupContextPopup&&(this.subscribe("group-contextmenu",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup)),this.table.on("groupTapHold",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup))),this.table.options.groupClickPopup&&this.subscribe("group-click",this.loadPopupEvent.bind(this,this.table.options.groupClickPopup)),this.table.options.groupDblClickPopup&&this.subscribe("group-dblclick",this.loadPopupEvent.bind(this,this.table.options.groupDblClickPopup))}initializeColumn(e){var n=e.definition;n.headerContextPopup&&!this.columnSubscribers.headerContextPopup&&(this.columnSubscribers.headerContextPopup=this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextPopup),this.table.on("headerTapHold",this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"))),n.headerClickPopup&&!this.columnSubscribers.headerClickPopup&&(this.columnSubscribers.headerClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerClickPopup"),this.subscribe("column-click",this.columnSubscribers.headerClickPopup)),n.headerDblClickPopup&&!this.columnSubscribers.headerDblClickPopup&&(this.columnSubscribers.headerDblClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerDblClickPopup"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickPopup)),n.headerPopup&&this.initializeColumnHeaderPopup(e),n.contextPopup&&!this.columnSubscribers.contextPopup&&(this.columnSubscribers.contextPopup=this.loadPopupTableCellEvent.bind(this,"contextPopup"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextPopup),this.table.on("cellTapHold",this.loadPopupTableCellEvent.bind(this,"contextPopup"))),n.clickPopup&&!this.columnSubscribers.clickPopup&&(this.columnSubscribers.clickPopup=this.loadPopupTableCellEvent.bind(this,"clickPopup"),this.subscribe("cell-click",this.columnSubscribers.clickPopup)),n.dblClickPopup&&!this.columnSubscribers.dblClickPopup&&(this.columnSubscribers.dblClickPopup=this.loadPopupTableCellEvent.bind(this,"dblClickPopup"),this.subscribe("cell-click",this.columnSubscribers.dblClickPopup))}initializeColumnHeaderPopup(e){var n=e.definition.headerPopupIcon,i;i=document.createElement("span"),i.classList.add("tabulator-header-popup-button"),n?(typeof n=="function"&&(n=n(e.getComponent())),n instanceof HTMLElement?i.appendChild(n):i.innerHTML=n):i.innerHTML="&vellip;",i.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.loadPopupEvent(e.definition.headerPopup,s,e)}),e.titleElement.insertBefore(i,e.titleElement.firstChild)}loadPopupTableCellEvent(e,n,i){i._cell&&(i=i._cell),i.column.definition[e]&&this.loadPopupEvent(i.column.definition[e],n,i)}loadPopupTableColumnEvent(e,n,i){i._column&&(i=i._column),i.definition[e]&&this.loadPopupEvent(i.definition[e],n,i)}loadPopupEvent(e,n,i,s){var t;function r(o){t=o}i._group?i=i._group:i._row&&(i=i._row),e=typeof e=="function"?e.call(this.table,n,i.getComponent(),r):e,this.loadPopup(n,i,e,t,s)}loadPopup(e,n,i,s,t){var r=!(e instanceof MouseEvent),o,a;i instanceof HTMLElement?o=i:(o=document.createElement("div"),o.innerHTML=i),o.classList.add("tabulator-popup"),o.addEventListener("click",l=>{l.stopPropagation()}),r||e.preventDefault(),a=this.popup(o),typeof s=="function"&&a.renderCallback(s),e?a.show(e):a.show(n.getElement(),t||"center"),a.hideOnBlur(()=>{this.dispatchExternal("popupClosed",n.getComponent())}),this.dispatchExternal("popupOpened",n.getComponent())}}X(cr,"moduleName","popup");class fr extends he{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.beforeprintEventHandler=null,this.afterprintEventHandler=null,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(this.beforeprintEventHandler=this.replaceTable.bind(this),this.afterprintEventHandler=this.cleanup.bind(this),window.addEventListener("beforeprint",this.beforeprintEventHandler),window.addEventListener("afterprint",this.afterprintEventHandler),this.subscribe("table-destroy",this.destroy.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}destroy(){this.table.options.printAsHtml&&(window.removeEventListener("beforeprint",this.beforeprintEventHandler),window.removeEventListener("afterprint",this.afterprintEventHandler))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,n,i){var s=window.scrollX,t=window.scrollY,r=document.createElement("div"),o=document.createElement("div"),a=this.table.modules.export.generateTable(typeof i<"u"?i:this.table.options.printConfig,typeof n<"u"?n:this.table.options.printStyled,e||this.table.options.printRowRange,"print"),l,u;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(r.classList.add("tabulator-print-header"),l=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof l=="string"?r.innerHTML=l:r.appendChild(l),this.element.appendChild(r)),this.element.appendChild(a),this.table.options.printFooter&&(o.classList.add("tabulator-print-footer"),u=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof u=="string"?o.innerHTML=u:o.appendChild(u),this.element.appendChild(o)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,a),window.print(),this.cleanup(),window.scrollTo(s,t),this.manualBlock=!1}}X(fr,"moduleName","print");class pr extends he{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this,"cellsave")),this.subscribe("cell-value-save-after",this.unblock.bind(this,"cellsave")),this.subscribe("row-data-save-before",this.block.bind(this,"rowsave")),this.subscribe("row-data-save-after",this.unblock.bind(this,"rowsave")),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var n=this,i;this.currentVersion++,i=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),t;return!n.blocked&&i===n.currentVersion&&(n.block("data-push"),s.forEach(r=>{n.table.rowManager.addRowActual(r,!1)}),t=n.origFuncs.push.apply(e,arguments),n.unblock("data-push")),t}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),t;return!n.blocked&&i===n.currentVersion&&(n.block("data-unshift"),s.forEach(r=>{n.table.rowManager.addRowActual(r,!0)}),t=n.origFuncs.unshift.apply(e,arguments),n.unblock("data-unshift")),t}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var s,t;return!n.blocked&&i===n.currentVersion&&(n.block("data-shift"),n.data.length&&(s=n.table.rowManager.getRowFromDataObject(n.data[0]),s&&s.deleteActual()),t=n.origFuncs.shift.call(e),n.unblock("data-shift")),t}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var s,t;return!n.blocked&&i===n.currentVersion&&(n.block("data-pop"),n.data.length&&(s=n.table.rowManager.getRowFromDataObject(n.data[n.data.length-1]),s&&s.deleteActual()),t=n.origFuncs.pop.call(e),n.unblock("data-pop")),t}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var s=Array.from(arguments),t=s[0]<0?e.length+s[0]:s[0],r=s[1],o=s[2]?s.slice(2):!1,a,l;if(!n.blocked&&i===n.currentVersion){if(n.block("data-splice"),o&&(a=e[t]?n.table.rowManager.getRowFromDataObject(e[t]):!1,a?o.forEach(d=>{n.table.rowManager.addRowActual(d,!0,a,!0)}):(o=o.slice().reverse(),o.forEach(d=>{n.table.rowManager.addRowActual(d,!0,!1,!0)}))),r!==0){var u=e.slice(t,typeof s[1]>"u"?s[1]:t+r);u.forEach((d,h)=>{var f=n.table.rowManager.getRowFromDataObject(d);f&&f.deleteActual(h!==u.length-1)})}(o||r!==0)&&n.table.rowManager.reRenderInPosition(),l=n.origFuncs.splice.apply(e,arguments),n.unblock("data-splice")}return l}})}unwatchData(){if(this.data!==!1)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var n=e.getData();for(var i in n)this.watchKey(e,n,i);this.table.options.dataTree&&this.watchTreeChildren(e)}watchTreeChildren(e){var n=this,i=e.getData()[this.table.options.dataTreeChildField],s={};i&&(s.push=i.push,Object.defineProperty(i,"push",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-push");var t=s.push.apply(i,arguments);this.rebuildTree(e),n.unblock("tree-push")}return t}}),s.unshift=i.unshift,Object.defineProperty(i,"unshift",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-unshift");var t=s.unshift.apply(i,arguments);this.rebuildTree(e),n.unblock("tree-unshift")}return t}}),s.shift=i.shift,Object.defineProperty(i,"shift",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-shift");var t=s.shift.call(i);this.rebuildTree(e),n.unblock("tree-shift")}return t}}),s.pop=i.pop,Object.defineProperty(i,"pop",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-pop");var t=s.pop.call(i);this.rebuildTree(e),n.unblock("tree-pop")}return t}}),s.splice=i.splice,Object.defineProperty(i,"splice",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-splice");var t=s.splice.apply(i,arguments);this.rebuildTree(e),n.unblock("tree-splice")}return t}}))}rebuildTree(e){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}watchKey(e,n,i){var s=this,t=Object.getOwnPropertyDescriptor(n,i),r=n[i],o=this.currentVersion;Object.defineProperty(n,i,{set:a=>{if(r=a,!s.blocked&&o===s.currentVersion){s.block("key");var l={};l[i]=a,e.updateData(l),s.unblock("key")}t.set&&t.set(a)},get:()=>(t.get&&t.get(),r)})}unwatchRow(e){var n=e.getData();for(var i in n)Object.defineProperty(n,i,{value:n[i]})}block(e){this.blocked||(this.blocked=e)}unblock(e){this.blocked===e&&(this.blocked=!1)}}X(pr,"moduleName","reactiveData");class mr extends he{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.latestX=!1,this.handle=null,this.initialNextColumn=null,this.nextColumn=null,this.initialized=!1,this.registerColumnOption("resizable",!0),this.registerTableOption("resizableColumnFit",!1),this.registerTableOption("resizableColumnGuide",!1)}initialize(){this.subscribe("column-rendered",this.layoutColumnHeader.bind(this))}initializeEventWatchers(){this.initialized||(this.subscribe("cell-rendered",this.layoutCellHandles.bind(this)),this.subscribe("cell-delete",this.deInitializeComponent.bind(this)),this.subscribe("cell-height",this.resizeHandle.bind(this)),this.subscribe("column-moved",this.columnLayoutUpdated.bind(this)),this.subscribe("column-hide",this.deInitializeColumn.bind(this)),this.subscribe("column-show",this.columnLayoutUpdated.bind(this)),this.subscribe("column-width",this.columnWidthUpdated.bind(this)),this.subscribe("column-delete",this.deInitializeComponent.bind(this)),this.subscribe("column-height",this.resizeHandle.bind(this)),this.initialized=!0)}layoutCellHandles(e){e.row.type==="row"&&(this.deInitializeComponent(e),this.initializeColumn("cell",e,e.column,e.element))}layoutColumnHeader(e){e.definition.resizable&&(this.initializeEventWatchers(),this.deInitializeComponent(e),this.initializeColumn("header",e,e,e.element))}columnLayoutUpdated(e){var n=e.prevColumn();this.reinitializeColumn(e),n&&this.reinitializeColumn(n)}columnWidthUpdated(e){e.modules.frozen&&(this.table.modules.frozenColumns.leftColumns.includes(e)?this.table.modules.frozenColumns.leftColumns.forEach(n=>{this.reinitializeColumn(n)}):this.table.modules.frozenColumns.rightColumns.includes(e)&&this.table.modules.frozenColumns.rightColumns.forEach(n=>{this.reinitializeColumn(n)}))}frozenColumnOffset(e){var n=!1;return e.modules.frozen&&(n=e.modules.frozen.marginValue,e.modules.frozen.position==="left"?n+=e.getWidth()-3:n&&(n-=3)),n!==!1?n+"px":!1}reinitializeColumn(e){var n=this.frozenColumnOffset(e);e.cells.forEach(i=>{i.modules.resize&&i.modules.resize.handleEl&&(n&&(i.modules.resize.handleEl.style[e.modules.frozen.position]=n,i.modules.resize.handleEl.style["z-index"]=11),i.element.after(i.modules.resize.handleEl))}),e.modules.resize&&e.modules.resize.handleEl&&(n&&(e.modules.resize.handleEl.style[e.modules.frozen.position]=n),e.element.after(e.modules.resize.handleEl))}initializeColumn(e,n,i,s){var t=this,r=!1,o=i.definition.resizable,a={},l=i.getLastColumn();if(e==="header"&&(r=i.definition.formatter=="textarea"||i.definition.variableHeight,a={variableHeight:r}),(o===!0||o==e)&&this._checkResizability(l)){var u=document.createElement("span");u.className="tabulator-col-resize-handle",u.addEventListener("click",function(h){h.stopPropagation()});var d=function(h){t.startColumn=i,t.initialNextColumn=t.nextColumn=l.nextColumn(),t._mouseDown(h,l,u)};u.addEventListener("mousedown",d),u.addEventListener("touchstart",d,{passive:!0}),u.addEventListener("dblclick",h=>{var f=l.getWidth();h.stopPropagation(),l.reinitializeWidth(!0),f!==l.getWidth()&&(t.dispatch("column-resized",l),t.dispatchExternal("columnResized",l.getComponent()))}),i.modules.frozen&&(u.style.position="sticky",u.style[i.modules.frozen.position]=this.frozenColumnOffset(i)),a.handleEl=u,s.parentNode&&i.visible&&s.after(u)}n.modules.resize=a}deInitializeColumn(e){this.deInitializeComponent(e),e.cells.forEach(n=>{this.deInitializeComponent(n)})}deInitializeComponent(e){var n;e.modules.resize&&(n=e.modules.resize.handleEl,n&&n.parentElement&&n.parentElement.removeChild(n))}resizeHandle(e,n){e.modules.resize&&e.modules.resize.handleEl&&(e.modules.resize.handleEl.style.height=n)}resize(e,n){var i=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,s=i-this.startX,t=i-this.latestX,r,o;if(this.latestX=i,this.table.rtl&&(s=-s,t=-t),r=n.width==n.minWidth||n.width==n.maxWidth,n.setWidth(this.startWidth+s),o=n.width==n.minWidth||n.width==n.maxWidth,t<0&&(this.nextColumn=this.initialNextColumn),this.table.options.resizableColumnFit&&this.nextColumn&&!(r&&o)){let a=this.nextColumn.getWidth();t>0&&a<=this.nextColumn.minWidth&&(this.nextColumn=this.nextColumn.nextColumn()),this.nextColumn&&this.nextColumn.setWidth(this.nextColumn.getWidth()-t)}this.table.columnManager.rerenderColumns(!0),!this.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights()}calcGuidePosition(e,n,i){var s=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,t=i.getBoundingClientRect().x-this.table.element.getBoundingClientRect().x,r=this.table.element.getBoundingClientRect().x,o=n.element.getBoundingClientRect().left-r,a=s-this.startX,l=Math.max(t+a,o+n.minWidth);return n.maxWidth&&(l=Math.min(l,o+n.maxWidth)),l}_checkResizability(e){return e.definition.resizable}_mouseDown(e,n,i){var s=this,t;this.dispatchExternal("columnResizing",n.getComponent()),s.table.options.resizableColumnGuide&&(t=document.createElement("span"),t.classList.add("tabulator-col-resize-guide"),s.table.element.appendChild(t),setTimeout(()=>{t.style.left=s.calcGuidePosition(e,n,i)+"px"})),s.table.element.classList.add("tabulator-block-select");function r(a){s.table.options.resizableColumnGuide?t.style.left=s.calcGuidePosition(a,n,i)+"px":s.resize(a,n)}function o(a){s.table.options.resizableColumnGuide&&(s.resize(a,n),t.remove()),s.startColumn.modules.edit&&(s.startColumn.modules.edit.blocked=!1),s.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights(),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",r),i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o),s.table.element.classList.remove("tabulator-block-select"),s.startWidth!==n.getWidth()&&(s.table.columnManager.verticalAlignHeaders(),s.dispatch("column-resized",n),s.dispatchExternal("columnResized",n.getComponent()))}e.stopPropagation(),s.startColumn.modules.edit&&(s.startColumn.modules.edit.blocked=!0),s.startX=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,s.latestX=s.startX,s.startWidth=n.getWidth(),document.body.addEventListener("mousemove",r),document.body.addEventListener("mouseup",o),i.addEventListener("touchmove",r,{passive:!0}),i.addEventListener("touchend",o)}}X(mr,"moduleName","resizeColumns");class gr extends he{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1),this.registerTableOption("resizableRowGuide",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var n=this,i=e.getElement(),s=document.createElement("div");s.className="tabulator-row-resize-handle";var t=document.createElement("div");t.className="tabulator-row-resize-handle prev",s.addEventListener("click",function(a){a.stopPropagation()});var r=function(a){n.startRow=e,n._mouseDown(a,e,s)};s.addEventListener("mousedown",r),s.addEventListener("touchstart",r,{passive:!0}),t.addEventListener("click",function(a){a.stopPropagation()});var o=function(a){var l=n.table.rowManager.prevDisplayRow(e);l&&(n.startRow=l,n._mouseDown(a,l,t))};t.addEventListener("mousedown",o),t.addEventListener("touchstart",o,{passive:!0}),i.appendChild(s),i.appendChild(t)}resize(e,n){n.setHeight(this.startHeight+((typeof e.screenY>"u"?e.touches[0].screenY:e.screenY)-this.startY))}calcGuidePosition(e,n,i){var s=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,t=i.getBoundingClientRect().y-this.table.element.getBoundingClientRect().y,r=this.table.element.getBoundingClientRect().y,o=n.element.getBoundingClientRect().top-r,a=s-this.startY;return Math.max(t+a,o)}_mouseDown(e,n,i){var s=this,t;s.dispatchExternal("rowResizing",n.getComponent()),s.table.options.resizableRowGuide&&(t=document.createElement("span"),t.classList.add("tabulator-row-resize-guide"),s.table.element.appendChild(t),setTimeout(()=>{t.style.top=s.calcGuidePosition(e,n,i)+"px"})),s.table.element.classList.add("tabulator-block-select");function r(a){s.table.options.resizableRowGuide?t.style.top=s.calcGuidePosition(a,n,i)+"px":s.resize(a,n)}function o(a){s.table.options.resizableRowGuide&&(s.resize(a,n),t.remove()),document.body.removeEventListener("mouseup",r),document.body.removeEventListener("mousemove",r),i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o),s.table.element.classList.remove("tabulator-block-select"),s.dispatchExternal("rowResized",n.getComponent())}e.stopPropagation(),s.startY=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,s.startHeight=n.getHeight(),document.body.addEventListener("mousemove",r),document.body.addEventListener("mouseup",o),i.addEventListener("touchmove",r,{passive:!0}),i.addEventListener("touchend",o)}}X(gr,"moduleName","resizeRows");class vr extends he{constructor(e){super(e),this.binding=!1,this.visibilityObserver=!1,this.resizeObserver=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.visible=!1,this.initialized=!1,this.initialRedraw=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var e=this.table,n;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),typeof IntersectionObserver<"u"&&typeof ResizeObserver<"u"&&e.rowManager.getRenderMode()==="virtual"?(this.initializeVisibilityObserver(),this.autoResize=!0,this.resizeObserver=new ResizeObserver(i=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var s=Math.floor(i[0].contentRect.height),t=Math.floor(i[0].contentRect.width);(this.tableHeight!=s||this.tableWidth!=t)&&(this.tableHeight=s,this.tableWidth=t,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.redrawTable())}}),this.resizeObserver.observe(e.element),n=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(n.getPropertyValue("max-height")||n.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(i=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var s=Math.floor(i[0].contentRect.height),t=Math.floor(i[0].contentRect.width);(this.containerHeight!=s||this.containerWidth!=t)&&(this.containerHeight=s,this.containerWidth=t,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),this.redrawTable()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell))&&(e.columnManager.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(e=>{this.visible=e[0].isIntersecting,this.initialized?this.visible&&(this.redrawTable(this.initialRedraw),this.initialRedraw=!1):(this.initialized=!0,this.initialRedraw=!this.visible)}),this.visibilityObserver.observe(this.table.element)}redrawTable(e){this.initialized&&this.visible&&(this.table.columnManager.rerenderColumns(!0),this.table.redraw(e))}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.resizeObserver&&this.resizeObserver.unobserve(this.table.element),this.visibilityObserver&&this.visibilityObserver.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}X(vr,"moduleName","resizeTable");function Eh(c,e,n){var i=document.createElement("div"),s=c.getRow()._row.modules.responsiveLayout;i.classList.add("tabulator-responsive-collapse-toggle"),i.innerHTML=`<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`,c.getElement().classList.add("tabulator-row-handle");function t(r){var o=s.element;s.open=r,o&&(s.open?(i.classList.add("open"),o.style.display=""):(i.classList.remove("open"),o.style.display="none"))}return i.addEventListener("click",function(r){r.stopImmediatePropagation(),t(!s.open),c.getTable().rowManager.adjustTableSize()}),t(s.open),i}var Ch={format:{formatters:{responsiveCollapse:Eh}}};class dn extends he{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),this.table.options.responsiveLayout==="collapse"&&(this.subscribe("row-data-changed",this.generateCollapsedRowContent.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.collapseFormatter&&(this.collapseFormatter=this.collapseFormatter.bind(this.table)),this.table.columnManager.columnsByIndex.forEach((n,i)=>{n.modules.responsive&&n.modules.responsive.order&&n.modules.responsive.visible&&(n.modules.responsive.index=i,e.push(n),!n.visible&&this.mode==="collapse"&&this.hiddenColumns.push(n))}),e=e.reverse(),e=e.sort((n,i)=>{var s=i.modules.responsive.order-n.modules.responsive.order;return s||i.modules.responsive.index-n.modules.responsive.index}),this.columns=e,this.mode==="collapse"&&this.generateCollapsedContent();for(let n of this.table.columnManager.columnsByIndex)if(n.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=n;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var n=e.getDefinition();e.modules.responsive={order:typeof n.responsive>"u"?1:n.responsive,visible:n.visible!==!1}}initializeRow(e){var n;e.type!=="calc"&&(n=document.createElement("div"),n.classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:n,open:this.collapseStartOpen},this.collapseStartOpen||(n.style.display="none"))}layoutRow(e){var n=e.getElement();e.modules.responsiveLayout&&(n.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,n){!n&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initializeResponsivity())}hideColumn(e){var n=this.hiddenColumns.length;e.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!n&&this.collapseHandleColumn.show())}showColumn(e){var n;e.show(!1,!0),e.setWidth(e.getWidth()),this.mode==="collapse"&&(n=this.hiddenColumns.indexOf(e),n>-1&&this.hiddenColumns.splice(n,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=!0;e;){let n=this.table.modules.layout.getMode()=="fitColumns"?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),i=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-n;if(i<0){let s=this.columns[this.index];s?(this.hideColumn(s),this.index++):e=!1}else{let s=this.columns[this.index-1];s&&i>0&&i>=s.getWidth()?(this.showColumn(s),this.index--):e=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this.table.rowManager.getDisplayRows();e.forEach(n=>{this.generateCollapsedRowContent(n)})}generateCollapsedRowContent(e){var n,i;if(e.modules.responsiveLayout){for(n=e.modules.responsiveLayout.element;n.firstChild;)n.removeChild(n.firstChild);i=this.collapseFormatter(this.generateCollapsedRowData(e)),i&&n.appendChild(i),e.calcHeight(!0)}}generateCollapsedRowData(e){var n=e.getData(),i=[],s;return this.hiddenColumns.forEach(t=>{var r=t.getFieldValue(n);if(t.definition.title&&t.field)if(t.modules.format&&this.table.options.responsiveLayoutCollapseUseFormatters){let o=function(a){a()};s={value:!1,data:{},getValue:function(){return r},getData:function(){return n},getType:function(){return"cell"},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return t.getComponent()},getTable:()=>this.table},i.push({field:t.field,title:t.definition.title,value:t.modules.format.formatter.call(this.table.modules.format,s,t.modules.format.params,o)})}else i.push({field:t.field,title:t.definition.title,value:r})}),i}formatCollapsedData(e){var n=document.createElement("table");return e.forEach(i=>{var s=document.createElement("tr"),t=document.createElement("td"),r=document.createElement("td"),o,a=document.createElement("strong");t.appendChild(a),this.modules.localize.bind("columns|"+i.field,function(l){a.innerHTML=l||i.title}),i.value instanceof Node?(o=document.createElement("div"),o.appendChild(i.value),r.appendChild(o)):r.innerHTML=i.value,s.appendChild(t),s.appendChild(r),n.appendChild(s)}),Object.keys(e).length?n:""}}X(dn,"moduleName","responsiveLayout"),X(dn,"moduleExtensions",Ch);function Oh(c,e,n){var i=document.createElement("input"),s=!1;if(i.type="checkbox",i.setAttribute("aria-label","Select Row"),this.table.modExists("selectRow",!0))if(i.addEventListener("click",r=>{r.stopPropagation()}),typeof c.getRow=="function"){var t=c.getRow();t instanceof yi?(i.addEventListener("change",r=>{this.table.options.selectableRowsRangeMode==="click"&&s?s=!1:t.toggleSelect()}),this.table.options.selectableRowsRangeMode==="click"&&i.addEventListener("click",r=>{s=!0,this.table.modules.selectRow.handleComplexRowClick(t._row,r)}),i.checked=t.isSelected&&t.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(t,i)):i=""}else i.addEventListener("change",r=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(e.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(i);return i}var Rh={format:{formatters:{rowSelection:Oh}}};class cn extends he{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectableRows","highlight"),this.registerTableOption("selectableRowsRangeMode","drag"),this.registerTableOption("selectableRowsRollingSelection",!0),this.registerTableOption("selectableRowsPersistence",!0),this.registerTableOption("selectableRowsCheck",function(n,i){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){this.deprecatedOptionsCheck(),this.table.options.selectableRows==="highlight"&&this.table.options.selectableRange&&(this.table.options.selectableRows=!1),this.table.options.selectableRows!==!1&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectableRows&&!this.table.options.selectableRowsPersistence&&this.subscribe("data-refreshing",this.deselectRows.bind(this)))}deprecatedOptionsCheck(){}rowRetrieve(e,n){return e==="selected"?this.selectedRows:n}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){var n=this.selectedRows.length;this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],n&&e!==!0&&this._rowSelectionChanged()}initializeRow(e){var n=this,i=n.checkRowSelectability(e),s=e.getElement(),t=function(){setTimeout(function(){n.selecting=!1},50),document.body.removeEventListener("mouseup",t)};e.modules.select={selected:!1},s.classList.toggle("tabulator-selectable",i),s.classList.toggle("tabulator-unselectable",!i),n.checkRowSelectability(e)&&n.table.options.selectableRows&&n.table.options.selectableRows!="highlight"&&(n.table.options.selectableRowsRangeMode==="click"?s.addEventListener("click",this.handleComplexRowClick.bind(this,e)):(s.addEventListener("click",function(r){(!n.table.modExists("edit")||!n.table.modules.edit.getCurrentCell())&&n.table._clearSelection(),n.selecting||n.toggleRow(e)}),s.addEventListener("mousedown",function(r){if(r.shiftKey)return n.table._clearSelection(),n.selecting=!0,n.selectPrev=[],document.body.addEventListener("mouseup",t),document.body.addEventListener("keyup",t),n.toggleRow(e),!1}),s.addEventListener("mouseenter",function(r){n.selecting&&(n.table._clearSelection(),n.toggleRow(e),n.selectPrev[1]==e&&n.toggleRow(n.selectPrev[0]))}),s.addEventListener("mouseout",function(r){n.selecting&&(n.table._clearSelection(),n.selectPrev.unshift(e))})))}handleComplexRowClick(e,n){if(n.shiftKey){this.table._clearSelection(),this.lastClickedRow=this.lastClickedRow||e;var i=this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),s=this.table.rowManager.getDisplayRowIndex(e),t=i<=s?i:s,r=i>=s?i:s,o=this.table.rowManager.getDisplayRows().slice(0),a=o.splice(t,r-t+1);n.ctrlKey||n.metaKey?(a.forEach(l=>{l!==this.lastClickedRow&&(this.table.options.selectableRows!==!0&&!this.isRowSelected(e)?this.selectedRows.length<this.table.options.selectableRows&&this.toggleRow(l):this.toggleRow(l))}),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.table.options.selectableRows!==!0&&a.length>this.table.options.selectableRows&&(a=a.slice(0,this.table.options.selectableRows)),this.selectRows(a)),this.table._clearSelection()}else n.ctrlKey||n.metaKey?(this.toggleRow(e),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.selectRows(e),this.lastClickedRow=e)}checkRowSelectability(e){return e&&e.type==="row"?this.table.options.selectableRowsCheck.call(this.table,e.getComponent()):!1}toggleRow(e){this.checkRowSelectability(e)&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var n=[],i,s;switch(typeof e){case"undefined":i=this.table.rowManager.rows;break;case"number":i=this.table.rowManager.findRow(e);break;case"string":i=this.table.rowManager.findRow(e),i||(i=this.table.rowManager.getRows(e));break;default:i=e;break}Array.isArray(i)?i.length&&(i.forEach(t=>{s=this._selectRow(t,!0,!0),s&&n.push(s)}),this._rowSelectionChanged(!1,n)):i&&this._selectRow(i,!1,!0)}_selectRow(e,n,i){if(!isNaN(this.table.options.selectableRows)&&this.table.options.selectableRows!==!0&&!i&&this.selectedRows.length>=this.table.options.selectableRows)if(this.table.options.selectableRowsRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;var s=this.table.rowManager.findRow(e);if(s){if(this.selectedRows.indexOf(s)==-1)return s.getElement().classList.add("tabulator-selected"),s.modules.select||(s.modules.select={}),s.modules.select.selected=!0,s.modules.select.checkboxEl&&(s.modules.select.checkboxEl.checked=!0),this.selectedRows.push(s),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(s,!0),this.dispatchExternal("rowSelected",s.getComponent()),this._rowSelectionChanged(n,s),s}else n||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return this.selectedRows.indexOf(e)!==-1}deselectRows(e,n){var i=[],s,t;switch(typeof e){case"undefined":s=Object.assign([],this.selectedRows);break;case"number":s=this.table.rowManager.findRow(e);break;case"string":s=this.table.rowManager.findRow(e),s||(s=this.table.rowManager.getRows(e));break;default:s=e;break}Array.isArray(s)?s.length&&(s.forEach(r=>{t=this._deselectRow(r,!0,!0),t&&i.push(t)}),this._rowSelectionChanged(n,[],i)):s&&this._deselectRow(s,n,!0)}_deselectRow(e,n){var i=this,s=i.table.rowManager.findRow(e),t,r;if(s){if(t=i.selectedRows.findIndex(function(o){return o==s}),t>-1)return r=s.getElement(),r&&r.classList.remove("tabulator-selected"),s.modules.select||(s.modules.select={}),s.modules.select.selected=!1,s.modules.select.checkboxEl&&(s.modules.select.checkboxEl.checked=!1),i.selectedRows.splice(t,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(s,!1),this.dispatchExternal("rowDeselected",s.getComponent()),i._rowSelectionChanged(n,void 0,s),s}else n||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getComponent())}),e}_rowSelectionChanged(e,n=[],i=[]){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||(Array.isArray(n)||(n=[n]),n=n.map(s=>s.getComponent()),Array.isArray(i)||(i=[i]),i=i.map(s=>s.getComponent()),this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows(),n,i))}registerRowSelectCheckbox(e,n){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=n}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,n){var i=this.table.modules.dataTree.getChildren(e,!0,!0);if(n)for(let s of i)this._selectRow(s,!0);else for(let s of i)this._deselectRow(s,!0)}}X(cn,"moduleName","selectRow"),X(cn,"moduleExtensions",Rh);class wh{constructor(e){return this._range=e,new Proxy(this,{get:function(n,i,s){return typeof n[i]<"u"?n[i]:n._range.table.componentFunctionBinder.handle("range",n._range,i)}})}getElement(){return this._range.element}getData(){return this._range.getData()}getCells(){return this._range.getCells(!0,!0)}getStructuredCells(){return this._range.getStructuredCells()}getRows(){return this._range.getRows().map(e=>e.getComponent())}getColumns(){return this._range.getColumns().map(e=>e.getComponent())}getBounds(){return this._range.getBounds()}getTopEdge(){return this._range.top}getBottomEdge(){return this._range.bottom}getLeftEdge(){return this._range.left}getRightEdge(){return this._range.right}setBounds(e,n){this._range.destroyedGuard("setBounds")&&this._range.setBounds(e&&e._cell,n&&n._cell)}setStartBound(e){this._range.destroyedGuard("setStartBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}setEndBound(e){this._range.destroyedGuard("setEndBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}clearValues(){this._range.destroyedGuard("clearValues")&&this._range.clearValues()}remove(){this._range.destroyedGuard("remove")&&this._range.destroy(!0)}}class Th extends Le{constructor(e,n,i,s){super(e),this.rangeManager=n,this.element=null,this.initialized=!1,this.initializing={start:!1,end:!1},this.destroyed=!1,this.top=0,this.bottom=0,this.left=0,this.right=0,this.table=e,this.start={row:0,col:0},this.end={row:0,col:0},this.rangeManager.rowHeader&&(this.left=1,this.right=1,this.start.col=1,this.end.col=1),this.initElement(),setTimeout(()=>{this.initBounds(i,s)})}initElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-range")}initBounds(e,n){this._updateMinMax(),e&&this.setBounds(e,n||e)}setStart(e,n){(this.start.row!==e||this.start.col!==n)&&(this.start.row=e,this.start.col=n,this.initializing.start=!0,this._updateMinMax())}setEnd(e,n){(this.end.row!==e||this.end.col!==n)&&(this.end.row=e,this.end.col=n,this.initializing.end=!0,this._updateMinMax())}setBounds(e,n,i){e&&this.setStartBound(e),this.setEndBound(n||e),this.rangeManager.layoutElement(i)}setStartBound(e){var n,i;e.type==="column"?this.rangeManager.columnSelection&&this.setStart(0,e.getPosition()-1):(n=e.row.position-1,i=e.column.getPosition()-1,e.column===this.rangeManager.rowHeader?this.setStart(n,1):this.setStart(n,i))}setEndBound(e){var n=this._getTableRows().length,i,s,t;e.type==="column"?this.rangeManager.columnSelection&&(this.rangeManager.selecting==="column"?this.setEnd(n-1,e.getPosition()-1):this.rangeManager.selecting==="cell"&&this.setEnd(0,e.getPosition()-1)):(i=e.row.position-1,s=e.column.getPosition()-1,t=e.column===this.rangeManager.rowHeader,this.rangeManager.selecting==="row"?this.setEnd(i,this._getTableColumns().length-1):this.rangeManager.selecting!=="row"&&t?this.setEnd(i,0):this.rangeManager.selecting==="column"?this.setEnd(n-1,s):this.setEnd(i,s))}_updateMinMax(){this.top=Math.min(this.start.row,this.end.row),this.bottom=Math.max(this.start.row,this.end.row),this.left=Math.min(this.start.col,this.end.col),this.right=Math.max(this.start.col,this.end.col),this.initialized?this.dispatchExternal("rangeChanged",this.getComponent()):this.initializing.start&&this.initializing.end&&(this.initialized=!0,this.dispatchExternal("rangeAdded",this.getComponent()))}_getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}_getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}layout(){var e=this.table.rowManager.renderer.vDomTop,n=this.table.rowManager.renderer.vDomBottom,i=this.table.columnManager.renderer.leftCol,s=this.table.columnManager.renderer.rightCol,t,r,o,a,l,u,d,h,f,m;this.table.options.renderHorizontal==="virtual"&&this.rangeManager.rowHeader&&(s+=1),e==null&&(e=0),n==null&&(n=1/0),i==null&&(i=0),s==null&&(s=1/0),this.overlaps(i,e,s,n)&&(t=Math.max(this.top,e),r=Math.min(this.bottom,n),o=Math.max(this.left,i),a=Math.min(this.right,s),l=this.rangeManager.getCell(t,o),u=this.rangeManager.getCell(r,a),d=l.getElement(),h=u.getElement(),f=l.row.getElement(),m=u.row.getElement(),this.element.classList.add("tabulator-range-active"),this.table.rtl?(this.element.style.right=f.offsetWidth-d.offsetLeft-d.offsetWidth+"px",this.element.style.width=d.offsetLeft+d.offsetWidth-h.offsetLeft+"px"):(this.element.style.left=f.offsetLeft+d.offsetLeft+"px",this.element.style.width=h.offsetLeft+h.offsetWidth-d.offsetLeft+"px"),this.element.style.top=f.offsetTop+"px",this.element.style.height=m.offsetTop+m.offsetHeight-f.offsetTop+"px")}atTopLeft(e){return e.row.position-1===this.top&&e.column.getPosition()-1===this.left}atBottomRight(e){return e.row.position-1===this.bottom&&e.column.getPosition()-1===this.right}occupies(e){return this.occupiesRow(e.row)&&this.occupiesColumn(e.column)}occupiesRow(e){return this.top<=e.position-1&&e.position-1<=this.bottom}occupiesColumn(e){return this.left<=e.getPosition()-1&&e.getPosition()-1<=this.right}overlaps(e,n,i,s){return!(this.left>i||e>this.right||this.top>s||n>this.bottom)}getData(){var e=[],n=this.getRows(),i=this.getColumns();return n.forEach(s=>{var t=s.getData(),r={};i.forEach(o=>{r[o.field]=t[o.field]}),e.push(r)}),e}getCells(e,n){var i=[],s=this.getRows(),t=this.getColumns();return e?i=s.map(r=>{var o=[];return r.getCells().forEach(a=>{t.includes(a.column)&&o.push(n?a.getComponent():a)}),o}):s.forEach(r=>{r.getCells().forEach(o=>{t.includes(o.column)&&i.push(n?o.getComponent():o)})}),i}getStructuredCells(){return this.getCells(!0,!0)}getRows(){return this._getTableRows().slice(this.top,this.bottom+1)}getColumns(){return this._getTableColumns().slice(this.left,this.right+1)}clearValues(){var e=this.getCells(),n=this.table.options.selectableRangeClearCellsValue;this.table.blockRedraw(),e.forEach(i=>{i.setValue(n)}),this.table.restoreRedraw()}getBounds(e){var n=this.getCells(!1,e),i={start:null,end:null};return n.length?(i.start=n[0],i.end=n[n.length-1]):console.warn("No bounds defined on range"),i}getComponent(){return this.component||(this.component=new wh(this)),this.component}destroy(e){this.destroyed=!0,this.element.remove(),e&&this.rangeManager.rangeRemoved(this),this.initialized&&this.dispatchExternal("rangeRemoved",this.getComponent())}destroyedGuard(e){return this.destroyed&&console.warn("You cannot call the "+e+" function on a destroyed range"),!this.destroyed}}var Mh={rangeJumpUp:["ctrl + 38","meta + 38"],rangeJumpDown:["ctrl + 40","meta + 40"],rangeJumpLeft:["ctrl + 37","meta + 37"],rangeJumpRight:["ctrl + 39","meta + 39"],rangeExpandUp:"shift + 38",rangeExpandDown:"shift + 40",rangeExpandLeft:"shift + 37",rangeExpandRight:"shift + 39",rangeExpandJumpUp:["ctrl + shift + 38","meta + shift + 38"],rangeExpandJumpDown:["ctrl + shift + 40","meta + shift + 40"],rangeExpandJumpLeft:["ctrl + shift + 37","meta + shift + 37"],rangeExpandJumpRight:["ctrl + shift + 39","meta + shift + 39"]},Ph={rangeJumpLeft:function(c){this.dispatch("keybinding-nav-range",c,"left",!0,!1)},rangeJumpRight:function(c){this.dispatch("keybinding-nav-range",c,"right",!0,!1)},rangeJumpUp:function(c){this.dispatch("keybinding-nav-range",c,"up",!0,!1)},rangeJumpDown:function(c){this.dispatch("keybinding-nav-range",c,"down",!0,!1)},rangeExpandLeft:function(c){this.dispatch("keybinding-nav-range",c,"left",!1,!0)},rangeExpandRight:function(c){this.dispatch("keybinding-nav-range",c,"right",!1,!0)},rangeExpandUp:function(c){this.dispatch("keybinding-nav-range",c,"up",!1,!0)},rangeExpandDown:function(c){this.dispatch("keybinding-nav-range",c,"down",!1,!0)},rangeExpandJumpLeft:function(c){this.dispatch("keybinding-nav-range",c,"left",!0,!0)},rangeExpandJumpRight:function(c){this.dispatch("keybinding-nav-range",c,"right",!0,!0)},rangeExpandJumpUp:function(c){this.dispatch("keybinding-nav-range",c,"up",!0,!0)},rangeExpandJumpDown:function(c){this.dispatch("keybinding-nav-range",c,"down",!0,!0)}},Dh={range:function(c){var e=[],n=this.table.modules.selectRange.activeRange,i=!1,s,t,r,o,a;return a=c.length,n&&(s=n.getBounds(),t=s.start,s.start===s.end&&(i=!0),t&&(e=this.table.rowManager.activeRows.slice(),r=e.indexOf(t.row),i?o=c.length:o=e.indexOf(s.end.row)-r+1,r>-1&&(this.table.blockRedraw(),e=e.slice(r,r+o),e.forEach((l,u)=>{l.updateData(c[u%a])}),this.table.restoreRedraw()))),e}},Sh={range:function(c){var e=[],n=[],i=this.table.modules.selectRange.activeRange,s=!1,t,r,o,a,l;return i&&(t=i.getBounds(),r=t.start,t.start===t.end&&(s=!0),r&&(c=c.split(`
`),c.forEach(function(u){e.push(u.split("	"))}),e.length&&(a=this.table.columnManager.getVisibleColumnsByIndex(),l=a.indexOf(r.column),l>-1)))?(s?o=e[0].length:o=a.indexOf(t.end.column)-l+1,a=a.slice(l,l+o),e.forEach(u=>{var d={},h=u.length;a.forEach(function(f,m){d[f.field]=u[m%h]}),n.push(d)}),n):!1}},xh={range:function(){var c=this.modules.selectRange.selectedColumns();return this.columnManager.rowHeader&&c.unshift(this.columnManager.rowHeader),c}},Lh={range:function(){return this.modules.selectRange.selectedRows()}},Ah={keybindings:{bindings:Mh,actions:Ph},clipboard:{pasteActions:Dh,pasteParsers:Sh},export:{columnLookups:xh,rowLookups:Lh}};class si extends he{constructor(e){super(e),this.selecting="cell",this.mousedown=!1,this.ranges=[],this.overlay=null,this.rowHeader=null,this.layoutChangeTimeout=null,this.columnSelection=!1,this.rowSelection=!1,this.maxRanges=0,this.activeRange=!1,this.blockKeydown=!1,this.keyDownEvent=this._handleKeyDown.bind(this),this.mouseUpEvent=this._handleMouseUp.bind(this),this.registerTableOption("selectableRange",!1),this.registerTableOption("selectableRangeColumns",!1),this.registerTableOption("selectableRangeRows",!1),this.registerTableOption("selectableRangeClearCells",!1),this.registerTableOption("selectableRangeClearCellsValue",void 0),this.registerTableOption("selectableRangeAutoFocus",!0),this.registerTableFunction("getRangesData",this.getRangesData.bind(this)),this.registerTableFunction("getRanges",this.getRanges.bind(this)),this.registerTableFunction("addRange",this.addRangeFromComponent.bind(this)),this.registerComponentFunction("cell","getRanges",this.cellGetRanges.bind(this)),this.registerComponentFunction("row","getRanges",this.rowGetRanges.bind(this)),this.registerComponentFunction("column","getRanges",this.colGetRanges.bind(this))}initialize(){this.options("selectableRange")&&(this.options("selectableRows")?console.warn("SelectRange functionality cannot be used in conjunction with row selection"):(this.maxRanges=this.options("selectableRange"),this.initializeTable(),this.initializeWatchers()),this.options("columns").findIndex(e=>e.frozen)>0&&console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."),this.options("columns").filter(e=>e.frozen)>1&&console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."))}initializeTable(){this.overlay=document.createElement("div"),this.overlay.classList.add("tabulator-range-overlay"),this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("tabulator-range-container"),this.activeRangeCellElement=document.createElement("div"),this.activeRangeCellElement.classList.add("tabulator-range-cell-active"),this.overlay.appendChild(this.rangeContainer),this.overlay.appendChild(this.activeRangeCellElement),this.table.rowManager.element.addEventListener("keydown",this.keyDownEvent),this.resetRanges(),this.table.rowManager.element.appendChild(this.overlay),this.table.columnManager.element.setAttribute("tabindex",0),this.table.element.classList.add("tabulator-ranges")}initializeWatchers(){this.columnSelection=this.options("selectableRangeColumns"),this.rowSelection=this.options("selectableRangeRows"),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-mousedown",this.handleColumnMouseDown.bind(this)),this.subscribe("column-mousemove",this.handleColumnMouseMove.bind(this)),this.subscribe("column-resized",this.handleColumnResized.bind(this)),this.subscribe("column-moving",this.handleColumnMoving.bind(this)),this.subscribe("column-moved",this.handleColumnMoved.bind(this)),this.subscribe("column-width",this.layoutChange.bind(this)),this.subscribe("column-height",this.layoutChange.bind(this)),this.subscribe("column-resized",this.layoutChange.bind(this)),this.subscribe("columns-loaded",this.updateHeaderColumn.bind(this)),this.subscribe("cell-height",this.layoutChange.bind(this)),this.subscribe("cell-rendered",this.renderCell.bind(this)),this.subscribe("cell-mousedown",this.handleCellMouseDown.bind(this)),this.subscribe("cell-mousemove",this.handleCellMouseMove.bind(this)),this.subscribe("cell-click",this.handleCellClick.bind(this)),this.subscribe("cell-editing",this.handleEditingCell.bind(this)),this.subscribe("page-changed",this.redraw.bind(this)),this.subscribe("scroll-vertical",this.layoutChange.bind(this)),this.subscribe("scroll-horizontal",this.layoutChange.bind(this)),this.subscribe("data-destroy",this.tableDestroyed.bind(this)),this.subscribe("data-processed",this.resetRanges.bind(this)),this.subscribe("table-layout",this.layoutElement.bind(this)),this.subscribe("table-redraw",this.redraw.bind(this)),this.subscribe("table-destroy",this.tableDestroyed.bind(this)),this.subscribe("edit-editor-clear",this.finishEditingCell.bind(this)),this.subscribe("edit-blur",this.restoreFocus.bind(this)),this.subscribe("keybinding-nav-prev",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-next",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-left",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-right",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-up",this.keyNavigate.bind(this,"up")),this.subscribe("keybinding-nav-down",this.keyNavigate.bind(this,"down")),this.subscribe("keybinding-nav-range",this.keyNavigateRange.bind(this))}initializeColumn(e){this.columnSelection&&e.definition.headerSort&&this.options("headerSortClickElement")!=="icon"&&console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."),e.modules.edit}updateHeaderColumn(){var e;this.rowSelection&&(this.rowHeader=this.table.columnManager.getVisibleColumnsByIndex()[0],this.rowHeader&&(this.rowHeader.definition.cssClass=this.rowHeader.definition.cssClass+" tabulator-range-row-header",this.rowHeader.definition.headerSort&&console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"),this.rowHeader.definition.editor&&console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))),this.table.modules.frozenColumns&&this.table.modules.frozenColumns.active&&(e=this.table.modules.frozenColumns.getFrozenColumns(),(e.length>1||e.length===1&&e[0]!==this.rowHeader)&&console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"))}getRanges(){return this.ranges.map(e=>e.getComponent())}getRangesData(){return this.ranges.map(e=>e.getData())}addRangeFromComponent(e,n){return e=e?e._cell:null,n=n?n._cell:null,this.addRange(e,n)}cellGetRanges(e){var n=[];return e.column===this.rowHeader?n=this.ranges.filter(i=>i.occupiesRow(e.row)):n=this.ranges.filter(i=>i.occupies(e)),n.map(i=>i.getComponent())}rowGetRanges(e){var n=this.ranges.filter(i=>i.occupiesRow(e));return n.map(i=>i.getComponent())}colGetRanges(e){var n=this.ranges.filter(i=>i.occupiesColumn(e));return n.map(i=>i.getComponent())}_handleMouseUp(e){this.mousedown=!1,document.removeEventListener("mouseup",this.mouseUpEvent)}_handleKeyDown(e){if(!this.blockKeydown&&(!this.table.modules.edit||this.table.modules.edit&&!this.table.modules.edit.currentCell)){if(e.key==="Enter"){if(this.table.modules.edit&&this.table.modules.edit.currentCell)return;this.table.modules.edit.editCell(this.getActiveCell()),e.preventDefault()}(e.key==="Backspace"||e.key==="Delete")&&this.options("selectableRangeClearCells")&&this.activeRange&&this.activeRange.clearValues()}}initializeFocus(e){var n;this.restoreFocus();try{document.selection?(n=document.body.createTextRange(),n.moveToElementText(e.getElement()),n.select()):window.getSelection&&(n=document.createRange(),n.selectNode(e.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(n))}catch{}}restoreFocus(e){return this.table.rowManager.element.focus(),!0}handleColumnResized(e){var n;this.selecting!=="column"&&this.selecting!=="all"||(n=this.ranges.some(i=>i.occupiesColumn(e)),n&&this.ranges.forEach(i=>{var s=i.getColumns(!0);s.forEach(t=>{t!==e&&t.setWidth(e.width)})}))}handleColumnMoving(e,n){this.resetRanges().setBounds(n),this.overlay.style.visibility="hidden"}handleColumnMoved(e,n,i){this.activeRange.setBounds(e),this.layoutElement()}handleColumnMouseDown(e,n){e.button===2&&(this.selecting==="column"||this.selecting==="all")&&this.activeRange.occupiesColumn(n)||this.table.options.movableColumns&&this.selecting==="column"&&this.activeRange.occupiesColumn(n)||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,n))}handleColumnMouseMove(e,n){n===this.rowHeader||!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,n,!0)}renderCell(e){var n=e.getElement(),i=this.ranges.findIndex(s=>s.occupies(e));n.classList.toggle("tabulator-range-selected",i!==-1),n.classList.toggle("tabulator-range-only-cell-selected",this.ranges.length===1&&this.ranges[0].atTopLeft(e)&&this.ranges[0].atBottomRight(e)),n.dataset.range=i}handleCellMouseDown(e,n){e.button===2&&(this.activeRange.occupies(n)||(this.selecting==="row"||this.selecting==="all")&&this.activeRange.occupiesRow(n.row))||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,n))}handleCellMouseMove(e,n){!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,n,!0)}handleCellClick(e,n){this.initializeFocus(n)}handleEditingCell(e){this.activeRange&&this.activeRange.setBounds(e)}finishEditingCell(){this.blockKeydown=!0,this.table.rowManager.element.focus(),setTimeout(()=>{this.blockKeydown=!1},10)}keyNavigate(e,n){this.navigate(!1,!1,e),n.preventDefault()}keyNavigateRange(e,n,i,s){this.navigate(i,s,n),e.preventDefault()}navigate(e,n,i){var s=!1,t,r,o,a,l,u,d,h,f,m,g;if(this.table.modules.edit&&this.table.modules.edit.currentCell)return!1;if(this.ranges.length>1&&(this.ranges=this.ranges.filter(v=>v===this.activeRange?(v.setEnd(v.start.row,v.start.col),!0):(v.destroy(),!1))),t=this.activeRange,o={top:t.top,bottom:t.bottom,left:t.left,right:t.right},r=n?t.end:t.start,a=r.row,l=r.col,e)switch(i){case"left":l=this.findJumpCellLeft(t.start.row,r.col);break;case"right":l=this.findJumpCellRight(t.start.row,r.col);break;case"up":a=this.findJumpCellUp(r.row,t.start.col);break;case"down":a=this.findJumpCellDown(r.row,t.start.col);break}else{if(n&&(this.selecting==="row"&&(i==="left"||i==="right")||this.selecting==="column"&&(i==="up"||i==="down")))return;switch(i){case"left":l=Math.max(l-1,0);break;case"right":l=Math.min(l+1,this.getTableColumns().length-1);break;case"up":a=Math.max(a-1,0);break;case"down":a=Math.min(a+1,this.getTableRows().length-1);break}}if(this.rowHeader&&l===0&&(l=1),n||t.setStart(a,l),t.setEnd(a,l),n||(this.selecting="cell"),s=o.top!==t.top||o.bottom!==t.bottom||o.left!==t.left||o.right!==t.right,s)return u=this.getRowByRangePos(t.end.row),d=this.getColumnByRangePos(t.end.col),h=u.getElement().getBoundingClientRect(),m=d.getElement().getBoundingClientRect(),f=this.table.rowManager.getElement().getBoundingClientRect(),g=this.table.columnManager.getElement().getBoundingClientRect(),h.top>=f.top&&h.bottom<=f.bottom||(u.getElement().parentNode&&d.getElement().parentNode?this.autoScroll(t,u.getElement(),d.getElement()):u.getComponent().scrollTo(void 0,!1)),m.left>=g.left+this.getRowHeaderWidth()&&m.right<=g.right||(u.getElement().parentNode&&d.getElement().parentNode?this.autoScroll(t,u.getElement(),d.getElement()):d.getComponent().scrollTo(void 0,!1)),this.layoutElement(),!0}rangeRemoved(e){this.ranges=this.ranges.filter(n=>n!==e),this.activeRange===e&&(this.ranges.length?this.activeRange=this.ranges[this.ranges.length-1]:this.addRange()),this.layoutElement()}findJumpRow(e,n,i,s,t){return i&&(n=n.reverse()),this.findJumpItem(s,t,n,function(r){return r.getData()[e.getField()]})}findJumpCol(e,n,i,s,t){return i&&(n=n.reverse()),this.findJumpItem(s,t,n,function(r){return e.getData()[r.getField()]})}findJumpItem(e,n,i,s){var t;for(let r of i){let o=s(r);if(e){if(t=r,o)break}else if(n){if(t=r,o)break}else if(o)t=r;else break}return t}findJumpCellLeft(e,n){var i=this.getRowByRangePos(e),s=this.getTableColumns(),t=this.isEmpty(i.getData()[s[n].getField()]),r=s[n-1]?this.isEmpty(i.getData()[s[n-1].getField()]):!1,o=this.rowHeader?s.slice(1,n):s.slice(0,n),a=this.findJumpCol(i,o,!0,t,r);return a?a.getPosition()-1:n}findJumpCellRight(e,n){var i=this.getRowByRangePos(e),s=this.getTableColumns(),t=this.isEmpty(i.getData()[s[n].getField()]),r=s[n+1]?this.isEmpty(i.getData()[s[n+1].getField()]):!1,o=this.findJumpCol(i,s.slice(n+1,s.length),!1,t,r);return o?o.getPosition()-1:n}findJumpCellUp(e,n){var i=this.getColumnByRangePos(n),s=this.getTableRows(),t=this.isEmpty(s[e].getData()[i.getField()]),r=s[e-1]?this.isEmpty(s[e-1].getData()[i.getField()]):!1,o=this.findJumpRow(i,s.slice(0,e),!0,t,r);return o?o.position-1:e}findJumpCellDown(e,n){var i=this.getColumnByRangePos(n),s=this.getTableRows(),t=this.isEmpty(s[e].getData()[i.getField()]),r=s[e+1]?this.isEmpty(s[e+1].getData()[i.getField()]):!1,o=this.findJumpRow(i,s.slice(e+1,s.length),!1,t,r);return o?o.position-1:e}newSelection(e,n){var i;if(n.type==="column"){if(!this.columnSelection)return;if(n===this.rowHeader){i=this.resetRanges(),this.selecting="all";var s,t=this.getCell(-1,-1);this.rowHeader?s=this.getCell(0,1):s=this.getCell(0,0),i.setBounds(s,t);return}else this.selecting="column"}else n.column===this.rowHeader?this.selecting="row":this.selecting="cell";e.shiftKey?this.activeRange.setBounds(!1,n):e.ctrlKey?this.addRange().setBounds(n):this.resetRanges().setBounds(n)}autoScroll(e,n,i){var s=this.table.rowManager.element,t,r,o,a;typeof n>"u"&&(n=this.getRowByRangePos(e.end.row).getElement()),typeof i>"u"&&(i=this.getColumnByRangePos(e.end.col).getElement()),t={left:i.offsetLeft,right:i.offsetLeft+i.offsetWidth,top:n.offsetTop,bottom:n.offsetTop+n.offsetHeight},r={left:s.scrollLeft+this.getRowHeaderWidth(),right:Math.ceil(s.scrollLeft+s.clientWidth),top:s.scrollTop,bottom:s.scrollTop+s.offsetHeight-this.table.rowManager.scrollbarWidth},o=r.left<t.left&&t.left<r.right&&r.left<t.right&&t.right<r.right,a=r.top<t.top&&t.top<r.bottom&&r.top<t.bottom&&t.bottom<r.bottom,o||(t.left<r.left?s.scrollLeft=t.left-this.getRowHeaderWidth():t.right>r.right&&(s.scrollLeft=Math.min(t.right-s.clientWidth,t.left-this.getRowHeaderWidth()))),a||(t.top<r.top?s.scrollTop=t.top:t.bottom>r.bottom&&(s.scrollTop=t.bottom-s.clientHeight))}layoutChange(){this.overlay.style.visibility="hidden",clearTimeout(this.layoutChangeTimeout),this.layoutChangeTimeout=setTimeout(this.layoutRanges.bind(this),200)}redraw(e){e&&(this.selecting="cell",this.resetRanges(),this.layoutElement())}layoutElement(e){var n;e?n=this.table.rowManager.getVisibleRows(!0):n=this.table.rowManager.getRows(),n.forEach(i=>{i.type==="row"&&(this.layoutRow(i),i.cells.forEach(s=>this.renderCell(s)))}),this.getTableColumns().forEach(i=>{this.layoutColumn(i)}),this.layoutRanges()}layoutRow(e){var n=e.getElement(),i=!1,s=this.ranges.some(t=>t.occupiesRow(e));this.selecting==="row"?i=s:this.selecting==="all"&&(i=!0),n.classList.toggle("tabulator-range-selected",i),n.classList.toggle("tabulator-range-highlight",s)}layoutColumn(e){var n=e.getElement(),i=!1,s=this.ranges.some(t=>t.occupiesColumn(e));this.selecting==="column"?i=s:this.selecting==="all"&&(i=!0),n.classList.toggle("tabulator-range-selected",i),n.classList.toggle("tabulator-range-highlight",s)}layoutRanges(){var e,n,i;this.table.initialized&&(e=this.getActiveCell(),e&&(n=e.getElement(),i=e.row.getElement(),this.table.rtl?this.activeRangeCellElement.style.right=i.offsetWidth-n.offsetLeft-n.offsetWidth+"px":this.activeRangeCellElement.style.left=i.offsetLeft+n.offsetLeft+"px",this.activeRangeCellElement.style.top=i.offsetTop+"px",this.activeRangeCellElement.style.width=n.offsetWidth+"px",this.activeRangeCellElement.style.height=i.offsetHeight+"px",this.ranges.forEach(s=>s.layout()),this.overlay.style.visibility="visible"))}getCell(e,n){var i;return n<0&&(n=this.getTableColumns().length+n,n<0)?null:(e<0&&(e=this.getTableRows().length+e),i=this.table.rowManager.getRowFromPosition(e+1),i?i.getCells(!1,!0).filter(s=>s.column.visible)[n]:null)}getActiveCell(){return this.getCell(this.activeRange.start.row,this.activeRange.start.col)}getRowByRangePos(e){return this.getTableRows()[e]}getColumnByRangePos(e){return this.getTableColumns()[e]}getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}addRange(e,n){var i;return this.maxRanges!==!0&&this.ranges.length>=this.maxRanges&&this.ranges.shift().destroy(),i=new Th(this.table,this,e,n),this.activeRange=i,this.ranges.push(i),this.rangeContainer.appendChild(i.element),i}resetRanges(){var e,n,i;return this.ranges.forEach(s=>s.destroy()),this.ranges=[],e=this.addRange(),this.table.rowManager.activeRows.length&&(i=this.table.rowManager.activeRows[0].cells.filter(s=>s.column.visible),n=i[this.rowHeader?1:0],n&&(e.setBounds(n),this.options("selectableRangeAutoFocus")&&this.initializeFocus(n))),e}tableDestroyed(){document.removeEventListener("mouseup",this.mouseUpEvent),this.table.rowManager.element.removeEventListener("keydown",this.keyDownEvent)}selectedRows(e){return e?this.activeRange.getRows().map(n=>n.getComponent()):this.activeRange.getRows()}selectedColumns(e){return e?this.activeRange.getColumns().map(n=>n.getComponent()):this.activeRange.getColumns()}getRowHeaderWidth(){return this.rowHeader?this.rowHeader.getElement().offsetWidth:0}isEmpty(e){return e==null||e===""}}X(si,"moduleName","selectRange"),X(si,"moduleInitOrder",1),X(si,"moduleExtensions",Ah);function Ih(c,e,n,i,s,t,r){var o=r.alignEmptyValues,a=r.decimalSeparator,l=r.thousandSeparator,u=0;if(c=String(c),e=String(e),l&&(c=c.split(l).join(""),e=e.split(l).join("")),a&&(c=c.split(a).join("."),e=e.split(a).join(".")),c=parseFloat(c),e=parseFloat(e),isNaN(c))u=isNaN(e)?0:-1;else if(isNaN(e))u=1;else return c-e;return(o==="top"&&t==="desc"||o==="bottom"&&t==="asc")&&(u*=-1),u}function Bh(c,e,n,i,s,t,r){var o=r.alignEmptyValues,a=0,l;if(!c)a=e?-1:0;else if(!e)a=1;else{switch(typeof r.locale){case"boolean":r.locale&&(l=this.langLocale());break;case"string":l=r.locale;break}return String(c).toLowerCase().localeCompare(String(e).toLowerCase(),l)}return(o==="top"&&t==="desc"||o==="bottom"&&t==="asc")&&(a*=-1),a}function Ln(c,e,n,i,s,t,r){var o=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),a=r.format||"dd/MM/yyyy HH:mm:ss",l=r.alignEmptyValues,u=0;if(typeof o<"u"){if(o.isDateTime(c)||(a==="iso"?c=o.fromISO(String(c)):c=o.fromFormat(String(c),a)),o.isDateTime(e)||(a==="iso"?e=o.fromISO(String(e)):e=o.fromFormat(String(e),a)),!c.isValid)u=e.isValid?-1:0;else if(!e.isValid)u=1;else return c-e;return(l==="top"&&t==="desc"||l==="bottom"&&t==="asc")&&(u*=-1),u}else console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}function jh(c,e,n,i,s,t,r){return r.format||(r.format="dd/MM/yyyy"),Ln.call(this,c,e,n,i,s,t,r)}function Fh(c,e,n,i,s,t,r){return r.format||(r.format="HH:mm"),Ln.call(this,c,e,n,i,s,t,r)}function Nh(c,e,n,i,s,t,r){var o=c===!0||c==="true"||c==="True"||c===1?1:0,a=e===!0||e==="true"||e==="True"||e===1?1:0;return o-a}function Uh(c,e,n,i,s,t,r){var o=r.type||"length",a=r.alignEmptyValues,l=0,u=this.table,d;r.valueMap&&(typeof r.valueMap=="string"?d=function(f){return f.map(m=>Ee.retrieveNestedData(u.options.nestedFieldSeparator,r.valueMap,m))}:d=r.valueMap);function h(f){var m;switch(d&&(f=d(f)),o){case"length":m=f.length;break;case"sum":m=f.reduce(function(g,v){return g+v});break;case"max":m=Math.max.apply(null,f);break;case"min":m=Math.min.apply(null,f);break;case"avg":m=f.reduce(function(g,v){return g+v})/f.length;break;case"string":m=f.join("");break}return m}if(!Array.isArray(c))l=Array.isArray(e)?-1:0;else if(!Array.isArray(e))l=1;else return o==="string"?String(h(c)).toLowerCase().localeCompare(String(h(e)).toLowerCase()):h(e)-h(c);return(a==="top"&&t==="desc"||a==="bottom"&&t==="asc")&&(l*=-1),l}function Wh(c,e,n,i,s,t,r){var o=typeof c>"u"?0:1,a=typeof e>"u"?0:1;return o-a}function zh(c,e,n,i,s,t,r){var o,a,l,u,d=0,h,f=/(\d+)|(\D+)/g,m=/\d/,g=r.alignEmptyValues,v=0;if(!c&&c!==0)v=!e&&e!==0?0:-1;else if(!e&&e!==0)v=1;else{if(isFinite(c)&&isFinite(e))return c-e;if(o=String(c).toLowerCase(),a=String(e).toLowerCase(),o===a)return 0;if(!(m.test(o)&&m.test(a)))return o>a?1:-1;for(o=o.match(f),a=a.match(f),h=o.length>a.length?a.length:o.length;d<h;)if(l=o[d],u=a[d++],l!==u)return isFinite(l)&&isFinite(u)?(l.charAt(0)==="0"&&(l="."+l),u.charAt(0)==="0"&&(u="."+u),l-u):l>u?1:-1;return o.length>a.length}return(g==="top"&&t==="desc"||g==="bottom"&&t==="asc")&&(v*=-1),v}var Hh={number:Ih,string:Bh,date:jh,time:Fh,datetime:Ln,boolean:Nh,array:Uh,exists:Wh,alphanum:zh};const wt=class wt extends he{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerTableOption("headerSortClickElement","header"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),this.table.options.sortMode==="remote"&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,n,i,s){var t=this.getSort();return t.forEach(r=>{delete r.column}),s.sort=t,s}userSetSort(e,n){this.setSort(e,n),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var n=!1,i,s;switch(typeof e.definition.sorter){case"string":wt.sorters[e.definition.sorter]?n=wt.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":n=e.definition.sorter;break}if(e.modules.sort={sorter:n,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},e.definition.headerSort!==!1){switch(i=e.getElement(),i.classList.add("tabulator-sortable"),s=document.createElement("div"),s.classList.add("tabulator-col-sorter"),this.table.options.headerSortClickElement){case"icon":s.classList.add("tabulator-col-sorter-element");break;case"header":i.classList.add("tabulator-col-sorter-element");break;default:i.classList.add("tabulator-col-sorter-element");break}switch(this.table.options.headerSortElement){case"function":break;case"object":s.appendChild(this.table.options.headerSortElement);break;default:s.innerHTML=this.table.options.headerSortElement}e.titleHolderElement.appendChild(s),e.modules.sort.element=s,this.setColumnHeaderSortIcon(e,"none"),this.table.options.headerSortClickElement==="icon"&&s.addEventListener("mousedown",t=>{t.stopPropagation()}),(this.table.options.headerSortClickElement==="icon"?s:i).addEventListener("click",t=>{var r="",o=[],a=!1;if(e.modules.sort){if(e.modules.sort.tristate)e.modules.sort.dir=="none"?r=e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?r=e.modules.sort.dir=="asc"?"desc":"asc":r="none";else switch(e.modules.sort.dir){case"asc":r="desc";break;case"desc":r="asc";break;default:r=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?(o=this.getSort(),a=o.findIndex(l=>l.field===e.getField()),a>-1?(o[a].dir=r,a=o.splice(a,1)[0],r!="none"&&o.push(a)):r!="none"&&o.push({column:e,dir:r}),this.setSort(o)):r=="none"?this.clear():this.setSort(e,r),this.refreshSort()}})}}refreshSort(){this.table.options.sortMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0)}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var e=this,n=[];return e.sortList.forEach(function(i){i.column&&n.push({column:i.column.getComponent(),field:i.column.getField(),dir:i.dir})}),n}setSort(e,n){var i=this,s=[];Array.isArray(e)||(e=[{column:e,dir:n}]),e.forEach(function(t){var r;r=i.table.columnManager.findColumn(t.column),r?(t.column=r,s.push(t),i.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)}),i.sortList=s,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var n=this.table.rowManager.activeRows[0],i="string",s,t;if(n&&(n=n.getData(),s=e.getField(),s))switch(t=e.getFieldValue(n),typeof t){case"undefined":i="string";break;case"boolean":i="boolean";break;default:!isNaN(t)&&t!==""?i="number":t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum");break}return wt.sorters[i]}sort(e,n){var i=this,s=this.table.options.sortOrderReverse?i.sortList.slice().reverse():i.sortList,t=[],r=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",i.getSort()),n||i.clearColumnHeaders(),this.table.options.sortMode!=="remote"?(s.forEach(function(o,a){var l;o.column&&(l=o.column.modules.sort,l&&(l.sorter||(l.sorter=i.findSorter(o.column)),o.params=typeof l.params=="function"?l.params(o.column.getComponent(),o.dir):l.params,t.push(o)),n||i.setColumnHeader(o.column,o.dir))}),t.length&&i._sortItems(e,t)):n||s.forEach(function(o,a){i.setColumnHeader(o.column,o.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(o=>{r.push(o.getComponent())}),this.dispatchExternal("dataSorted",i.getSort(),r)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(e=>{e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"),this.setColumnHeaderSortIcon(e,"none"))})}setColumnHeader(e,n){e.modules.sort.dir=n,e.getElement().setAttribute("aria-sort",n==="asc"?"ascending":"descending"),this.setColumnHeaderSortIcon(e,n)}setColumnHeaderSortIcon(e,n){var i=e.modules.sort.element,s;if(e.definition.headerSort&&typeof this.table.options.headerSortElement=="function"){for(;i.firstChild;)i.removeChild(i.firstChild);s=this.table.options.headerSortElement.call(this.table,e.getComponent(),n),typeof s=="object"?i.appendChild(s):i.innerHTML=s}}_sortItems(e,n){var i=n.length-1;e.sort((s,t)=>{for(var r,o=i;o>=0;o--){let a=n[o];if(r=this._sortRow(s,t,a.column,a.dir,a.params),r!==0)break}return r})}_sortRow(e,n,i,s,t){var r,o,a=s=="asc"?e:n,l=s=="asc"?n:e;return e=i.getFieldValue(a.getData()),n=i.getFieldValue(l.getData()),e=typeof e<"u"?e:"",n=typeof n<"u"?n:"",r=a.getComponent(),o=l.getComponent(),i.modules.sort.sorter.call(this,e,n,r,o,i.getComponent(),s,t)}};X(wt,"moduleName","sort"),X(wt,"sorters",Hh);let fn=wt;class Kh{constructor(e,n){this.columnCount=e,this.rowCount=n,this.columnString=[],this.columns=[],this.rows=[]}genColumns(e){var n=Math.max(this.columnCount,Math.max(...e.map(i=>i.length)));this.columnString=[],this.columns=[];for(let i=1;i<=n;i++)this.incrementChar(this.columnString.length-1),this.columns.push(this.columnString.join(""));return this.columns}genRows(e){var n=Math.max(this.rowCount,e.length);this.rows=[];for(let i=1;i<=n;i++)this.rows.push(i);return this.rows}incrementChar(e){let n=this.columnString[e];n?n!=="Z"?this.columnString[e]=String.fromCharCode(this.columnString[e].charCodeAt(0)+1):(this.columnString[e]="A",e?this.incrementChar(e-1):this.columnString.push("A")):this.columnString.push("A")}setRowCount(e){this.rowCount=e}setColumnCount(e){this.columnCount=e}}class br{constructor(e){return this._sheet=e,new Proxy(this,{get:function(n,i,s){return typeof n[i]<"u"?n[i]:n._sheet.table.componentFunctionBinder.handle("sheet",n._sheet,i)}})}getTitle(){return this._sheet.title}getKey(){return this._sheet.key}getDefinition(){return this._sheet.getDefinition()}getData(){return this._sheet.getData()}setData(e){return this._sheet.setData(e)}clear(){return this._sheet.clear()}remove(){return this._sheet.remove()}active(){return this._sheet.active()}setTitle(e){return this._sheet.setTitle(e)}setRows(e){return this._sheet.setRows(e)}setColumns(e){return this._sheet.setColumns(e)}}class ss extends Le{constructor(e,n){super(e.table),this.spreadsheetManager=e,this.definition=n,this.title=this.definition.title||"",this.key=this.definition.key||this.definition.title,this.rowCount=this.definition.rows,this.columnCount=this.definition.columns,this.data=this.definition.data||[],this.element=null,this.isActive=!1,this.grid=new Kh(this.columnCount,this.rowCount),this.defaultColumnDefinition={width:100,headerHozAlign:"center",headerSort:!1},this.columnDefinition=Object.assign(this.defaultColumnDefinition,this.options("spreadsheetColumnDefinition")),this.columnDefs=[],this.rowDefs=[],this.columnFields=[],this.columns=[],this.rows=[],this.scrollTop=null,this.scrollLeft=null,this.initialize(),this.dispatchExternal("sheetAdded",this.getComponent())}initialize(){this.initializeElement(),this.initializeColumns(),this.initializeRows()}reinitialize(){this.initializeColumns(),this.initializeRows()}initializeElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tab"),this.element.innerText=this.title,this.element.addEventListener("click",()=>{this.spreadsheetManager.loadSheet(this)})}initializeColumns(){this.grid.setColumnCount(this.columnCount),this.columnFields=this.grid.genColumns(this.data),this.columnDefs=[],this.columnFields.forEach(e=>{var n=Object.assign({},this.columnDefinition);n.field=e,n.title=e,this.columnDefs.push(n)})}initializeRows(){var e;this.grid.setRowCount(this.rowCount),e=this.grid.genRows(this.data),this.rowDefs=[],e.forEach((n,i)=>{var s={_id:n},t=this.data[i];t&&t.forEach((r,o)=>{var a=this.columnFields[o];a&&(s[a]=r)}),this.rowDefs.push(s)})}unload(){this.isActive=!1,this.scrollTop=this.table.rowManager.scrollTop,this.scrollLeft=this.table.rowManager.scrollLeft,this.data=this.getData(!0),this.element.classList.remove("tabulator-spreadsheet-tab-active")}load(){var e=!this.isActive;this.isActive=!0,this.table.blockRedraw(),this.table.setData([]),this.table.setColumns(this.columnDefs),this.table.setData(this.rowDefs),this.table.restoreRedraw(),e&&this.scrollTop!==null&&(this.table.rowManager.element.scrollLeft=this.scrollLeft,this.table.rowManager.element.scrollTop=this.scrollTop),this.element.classList.add("tabulator-spreadsheet-tab-active"),this.dispatchExternal("sheetLoaded",this.getComponent())}getComponent(){return new br(this)}getDefinition(){return{title:this.title,key:this.key,rows:this.rowCount,columns:this.columnCount,data:this.getData()}}getData(e){var n=[],i,s,t;return this.rowDefs.forEach(r=>{var o=[];this.columnFields.forEach(a=>{o.push(r[a])}),n.push(o)}),!e&&!this.options("spreadsheetOutputFull")&&(i=n.map(r=>r.findLastIndex(o=>typeof o<"u")+1),s=Math.max(...i),t=i.findLastIndex(r=>r>0)+1,n=n.slice(0,t),n=n.map(r=>r.slice(0,s))),n}setData(e){this.data=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}clear(){this.setData([])}setTitle(e){this.title=e,this.element.innerText=e,this.dispatchExternal("sheetUpdated",this.getComponent())}setRows(e){this.rowCount=e,this.initializeRows(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}setColumns(e){this.columnCount=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}remove(){this.spreadsheetManager.removeSheet(this)}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispatchExternal("sheetRemoved",this.getComponent())}active(){this.spreadsheetManager.loadSheet(this)}}class yr extends he{constructor(e){super(e),this.sheets=[],this.element=null,this.registerTableOption("spreadsheet",!1),this.registerTableOption("spreadsheetRows",50),this.registerTableOption("spreadsheetColumns",50),this.registerTableOption("spreadsheetColumnDefinition",{}),this.registerTableOption("spreadsheetOutputFull",!1),this.registerTableOption("spreadsheetData",!1),this.registerTableOption("spreadsheetSheets",!1),this.registerTableOption("spreadsheetSheetTabs",!1),this.registerTableOption("spreadsheetSheetTabsElement",!1),this.registerTableFunction("setSheets",this.setSheets.bind(this)),this.registerTableFunction("addSheet",this.addSheet.bind(this)),this.registerTableFunction("getSheets",this.getSheets.bind(this)),this.registerTableFunction("getSheetDefinitions",this.getSheetDefinitions.bind(this)),this.registerTableFunction("setSheetData",this.setSheetData.bind(this)),this.registerTableFunction("getSheet",this.getSheet.bind(this)),this.registerTableFunction("getSheetData",this.getSheetData.bind(this)),this.registerTableFunction("clearSheet",this.clearSheet.bind(this)),this.registerTableFunction("removeSheet",this.removeSheetFunc.bind(this)),this.registerTableFunction("activeSheet",this.activeSheetFunc.bind(this))}initialize(){this.options("spreadsheet")&&(this.subscribe("table-initialized",this.tableInitialized.bind(this)),this.subscribe("data-loaded",this.loadRemoteData.bind(this)),this.table.options.index="_id",this.options("spreadsheetData")&&this.options("spreadsheetSheets")&&(console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"),this.table.options.spreadsheetData=!1),this.compatibilityCheck(),this.options("spreadsheetSheetTabs")&&this.initializeTabset())}compatibilityCheck(){this.options("data")&&console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"),this.options("pagination")&&console.warn("The spreadsheet module is not compatible with the pagination module"),this.options("groupBy")&&console.warn("The spreadsheet module is not compatible with the row grouping module"),this.options("responsiveCollapse")&&console.warn("The spreadsheet module is not compatible with the responsive collapse module")}initializeTabset(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tabs");var e=this.options("spreadsheetSheetTabsElement");e&&!(e instanceof HTMLElement)&&(e=document.querySelector(e),e||console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:",this.options("spreadsheetSheetTabsElement"))),e?e.appendChild(this.element):this.footerAppend(this.element)}tableInitialized(){this.sheets.length?this.loadSheet(this.sheets[0]):this.options("spreadsheetSheets")?this.loadSheets(this.options("spreadsheetSheets")):this.options("spreadsheetData")&&this.loadData(this.options("spreadsheetData"))}loadRemoteData(e,n,i){return console.log("data",e,n,i),Array.isArray(e)?(this.table.dataLoader.clearAlert(),this.dispatchExternal("dataLoaded",e),!e.length||Array.isArray(e[0])?this.loadData(e):this.loadSheets(e)):console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e),!1}loadData(e){var n={data:e};this.loadSheet(this.newSheet(n))}destroySheets(){this.sheets.forEach(e=>{e.destroy()}),this.sheets=[],this.activeSheet=null}loadSheets(e){Array.isArray(e)||(e=[]),this.destroySheets(),e.forEach(n=>{this.newSheet(n)}),this.loadSheet(this.sheets[0])}loadSheet(e){this.activeSheet!==e&&(this.activeSheet&&this.activeSheet.unload(),this.activeSheet=e,e.load())}newSheet(e={}){var n;return e.rows||(e.rows=this.options("spreadsheetRows")),e.columns||(e.columns=this.options("spreadsheetColumns")),n=new ss(this,e),this.sheets.push(n),this.element&&this.element.appendChild(n.element),n}removeSheet(e){var n=this.sheets.indexOf(e),i;this.sheets.length>1?n>-1&&(this.sheets.splice(n,1),e.destroy(),this.activeSheet===e&&(i=this.sheets[n-1]||this.sheets[0],i?this.loadSheet(i):this.activeSheet=null)):console.warn("Unable to remove sheet, at least one sheet must be active")}lookupSheet(e){return e?e instanceof ss?e:e instanceof br?e._sheet:this.sheets.find(n=>n.key===e)||!1:this.activeSheet}setSheets(e){return this.loadSheets(e),this.getSheets()}addSheet(e){return this.newSheet(e).getComponent()}getSheetDefinitions(){return this.sheets.map(e=>e.getDefinition())}getSheets(){return this.sheets.map(e=>e.getComponent())}getSheet(e){var n=this.lookupSheet(e);return n?n.getComponent():!1}setSheetData(e,n){e&&!n&&(n=e,e=!1);var i=this.lookupSheet(e);return i?i.setData(n):!1}getSheetData(e){var n=this.lookupSheet(e);return n?n.getData():!1}clearSheet(e){var n=this.lookupSheet(e);return n?n.clear():!1}removeSheetFunc(e){var n=this.lookupSheet(e);n&&this.removeSheet(n)}activeSheetFunc(e){var n=this.lookupSheet(e);return n?this.loadSheet(n):!1}}X(yr,"moduleName","spreadsheet");class Er extends he{constructor(e){super(e),this.tooltipSubscriber=null,this.headerSubscriber=null,this.timeout=null,this.popupInstance=null,this.registerTableOption("tooltipDelay",300),this.registerColumnOption("tooltip"),this.registerColumnOption("headerTooltip")}initialize(){this.deprecatedOptionsCheck(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeColumn(e){e.definition.headerTooltip&&!this.headerSubscriber&&(this.headerSubscriber=!0,this.subscribe("column-mousemove",this.mousemoveCheck.bind(this,"headerTooltip")),this.subscribe("column-mouseout",this.mouseoutCheck.bind(this,"headerTooltip"))),e.definition.tooltip&&!this.tooltipSubscriber&&(this.tooltipSubscriber=!0,this.subscribe("cell-mousemove",this.mousemoveCheck.bind(this,"tooltip")),this.subscribe("cell-mouseout",this.mouseoutCheck.bind(this,"tooltip")))}mousemoveCheck(e,n,i){var s=e==="tooltip"?i.column.definition.tooltip:i.definition.headerTooltip;s&&(this.clearPopup(),this.timeout=setTimeout(this.loadTooltip.bind(this,n,i,s),this.table.options.tooltipDelay))}mouseoutCheck(e,n,i){this.popupInstance||this.clearPopup()}clearPopup(e,n,i){clearTimeout(this.timeout),this.timeout=null,this.popupInstance&&this.popupInstance.hide()}loadTooltip(e,n,i){var s,t,r;function o(a){t=a}typeof i=="function"&&(i=i(e,n.getComponent(),o)),i instanceof HTMLElement?s=i:(s=document.createElement("div"),i===!0&&(n instanceof qt?i=n.value:n.definition.field?this.langBind("columns|"+n.definition.field,a=>{s.innerHTML=i=a||n.definition.title}):i=n.definition.title),s.innerHTML=i),(i||i===0||i===!1)&&(s.classList.add("tabulator-tooltip"),s.addEventListener("mousemove",a=>a.preventDefault()),this.popupInstance=this.popup(s),typeof t=="function"&&this.popupInstance.renderCallback(t),r=this.popupInstance.containerEventCoords(e),this.popupInstance.show(r.x+15,r.y+15).hideOnBlur(()=>{this.dispatchExternal("TooltipClosed",n.getComponent()),this.popupInstance=null}),this.dispatchExternal("TooltipOpened",n.getComponent()))}}X(Er,"moduleName","tooltip");var Gh={integer:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&Math.floor(e)===e)},float:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&e%1!==0)},numeric:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:!isNaN(e)},string:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:isNaN(e)},alphanumeric:function(c,e,n){if(e===""||e===null||typeof e>"u")return!0;var i=new RegExp(/^[a-z0-9]+$/i);return i.test(e)},max:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)<=n},min:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)>=n},starts:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().startsWith(String(n).toLowerCase())},ends:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().endsWith(String(n).toLowerCase())},minLength:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:String(e).length>=n},maxLength:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:String(e).length<=n},in:function(c,e,n){return e===""||e===null||typeof e>"u"?!0:(typeof n=="string"&&(n=n.split("|")),n.indexOf(e)>-1)},regex:function(c,e,n){if(e===""||e===null||typeof e>"u")return!0;var i=new RegExp(n);return i.test(e)},unique:function(c,e,n){if(e===""||e===null||typeof e>"u")return!0;var i=!0,s=c.getData(),t=c.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(r){var o=r.getData();o!==s&&e==t.getFieldValue(o)&&(i=!1)}),i},required:function(c,e,n){return e!==""&&e!==null&&typeof e<"u"}};const kt=class kt extends he{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("edit-success",this.editValidate.bind(this)),this.subscribe("edit-editor-clear",this.editorClear.bind(this)),this.subscribe("edit-edited-clear",this.editedClear.bind(this))}editValidate(e,n,i){var s=this.table.options.validationMode!=="manual"?this.validate(e.column.modules.validate,e,n):!0;return s!==!0&&setTimeout(()=>{e.getElement().classList.add("tabulator-validation-fail"),this.dispatchExternal("validationFailed",e.getComponent(),n,s)}),s}editorClear(e,n){n&&e.column.modules.validate&&this.cellValidate(e),e.getElement().classList.remove("tabulator-validation-fail")}editedClear(e){e.modules.validate&&(e.modules.validate.invalid=!1)}cellIsValid(e){return e.modules.validate&&e.modules.validate.invalid||!0}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var n=[];return e.cells.forEach(i=>{this.cellValidate(i)!==!0&&n.push(i.getComponent())}),n.length?n:!0}rowValidate(e){var n=[];return e.cells.forEach(i=>{this.cellValidate(i)!==!0&&n.push(i.getComponent())}),n.length?n:!0}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.clearValidation(n._getSelf())})}userValidate(e){var n=[];return this.table.rowManager.rows.forEach(i=>{i=i.getComponent();var s=i.validate();s!==!0&&(n=n.concat(s))}),n.length?n:!0}initializeColumnCheck(e){typeof e.definition.validator<"u"&&this.initializeColumn(e)}initializeColumn(e){var n=this,i=[],s;e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(t=>{s=n._extractValidator(t),s&&i.push(s)}):(s=this._extractValidator(e.definition.validator),s&&i.push(s)),e.modules.validate=i.length?i:!1)}_extractValidator(e){var n,i,s;switch(typeof e){case"string":return s=e.indexOf(":"),s>-1?(n=e.substring(0,s),i=e.substring(s+1)):n=e,this._buildValidator(n,i);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,n){var i=typeof e=="function"?e:kt.validators[e];return i?{type:typeof e=="function"?"function":e,func:i,params:n}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,n,i){var s=this,t=[],r=this.invalidCells.indexOf(n);return e&&e.forEach(o=>{o.func.call(s,n.getComponent(),i,o.params)||t.push({type:o.type,parameters:o.params})}),n.modules.validate||(n.modules.validate={}),t.length?(n.modules.validate.invalid=t,this.table.options.validationMode!=="manual"&&n.getElement().classList.add("tabulator-validation-fail"),r==-1&&this.invalidCells.push(n)):(n.modules.validate.invalid=!1,n.getElement().classList.remove("tabulator-validation-fail"),r>-1&&this.invalidCells.splice(r,1)),t.length?t:!0}getInvalidCells(){var e=[];return this.invalidCells.forEach(n=>{e.push(n.getComponent())}),e}clearValidation(e){var n;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,n=this.invalidCells.indexOf(e),n>-1&&this.invalidCells.splice(n,1))}};X(kt,"moduleName","validate"),X(kt,"validators",Gh);let pn=kt;var ji=Object.freeze({__proto__:null,AccessorModule:Ji,AjaxModule:Xi,ClipboardModule:Yi,ColumnCalcsModule:Zi,DataTreeModule:sr,DownloadModule:qi,EditModule:_i,ExportModule:en,FilterModule:tn,FormatModule:nn,FrozenColumnsModule:rr,FrozenRowsModule:or,GroupRowsModule:ar,HistoryModule:sn,HtmlTableImportModule:lr,ImportModule:rn,InteractionModule:ur,KeybindingsModule:on,MenuModule:hr,MoveColumnsModule:dr,MoveRowsModule:an,MutatorModule:ln,PageModule:un,PersistenceModule:hn,PopupModule:cr,PrintModule:fr,ReactiveDataModule:pr,ResizeColumnsModule:mr,ResizeRowsModule:gr,ResizeTableModule:vr,ResponsiveLayoutModule:dn,SelectRangeModule:si,SelectRowModule:cn,SortModule:fn,SpreadsheetModule:yr,TooltipModule:Er,ValidateModule:pn}),$h={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{},dependencies:{}};class Cr{constructor(e,n,i={}){this.table=e,this.msgType=n,this.registeredDefaults=Object.assign({},i)}register(e,n){this.registeredDefaults[e]=n}generate(e,n={}){var i=Object.assign({},this.registeredDefaults),s=this.table.options.debugInvalidOptions||n.debugInvalidOptions===!0;Object.assign(i,e);for(let t in n)i.hasOwnProperty(t)||(s&&console.warn("Invalid "+this.msgType+" option:",t),i[t]=n.key);for(let t in i)t in n?i[t]=n[t]:Array.isArray(i[t])?i[t]=Object.assign([],i[t]):typeof i[t]=="object"&&i[t]!==null?i[t]=Object.assign({},i[t]):typeof i[t]>"u"&&delete i[t];return i}}class Ci extends Le{constructor(e){super(e),this.elementVertical=e.rowManager.element,this.elementHorizontal=e.columnManager.element,this.tableElement=e.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(e){}renderRows(){}renderColumns(){}rerenderRows(e){e&&e()}rerenderColumns(e,n){}renderRowCells(e){}rerenderRowCells(e,n){}scrollColumns(e,n){}scrollRows(e,n){}resize(){}scrollToRow(e){}scrollToRowNearestTop(e){}visibleRows(e){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(e,n){var i=e.getElement();n%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(e){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(e,n,i){var s=this.rows().indexOf(e),t=e.getElement(),r=0;return new Promise((o,a)=>{if(s>-1){if(typeof i>"u"&&(i=this.table.options.scrollToRowIfVisible),!i&&Ee.elVisible(t)&&(r=Ee.elOffset(t).top-Ee.elOffset(this.elementVertical).top,r>0&&r<this.elementVertical.clientHeight-t.offsetHeight))return o(),!1;switch(typeof n>"u"&&(n=this.table.options.scrollToRowPosition),n==="nearest"&&(n=this.scrollToRowNearestTop(e)?"top":"bottom"),this.scrollToRow(e),n){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(t.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-t.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-t.offsetTop)+t.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+t.offsetHeight;break;case"top":this.elementVertical.scrollTop=t.offsetTop;break}o()}else console.warn("Scroll Error - Row not visible"),a("Scroll Error - Row not visible")})}}class Vh extends Ci{constructor(e){super(e)}renderRowCells(e,n){const i=document.createDocumentFragment();e.cells.forEach(s=>{i.appendChild(s.getElement())}),e.element.appendChild(i),n||e.cells.forEach(s=>{s.cellRendered()})}reinitializeColumnWidths(e){e.forEach(function(n){n.reinitializeWidth()})}}class Jh extends Ci{constructor(e){super(e),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(e,n){this.dataChange()}scrollColumns(e,n){this.scrollLeft!=e&&(this.scrollLeft=e,this.scroll(e-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var e=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(n=>{if(n.visible){var i=n.getWidth();i>e&&(e=i)}}),this.windowBuffer=e*2}rerenderColumns(e,n){var i={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},s=0;e&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(t=>{var r={},o;t.visible&&(t.modules.frozen||(o=t.getWidth(),r.leftPos=s,r.rightPos=s+o,r.width=o,this.isFitData&&(r.fitDataCheck=t.modules.vdomHoz?t.modules.vdomHoz.fitDataCheck:!0),s+o>this.vDomScrollPosLeft&&s<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=s),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=o),this.columns.push(t),t.modules.vdomHoz=r,s+=o))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,n||(!e||this.reinitChanged(i))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(e){if(this.initialized)this.initializeRow(e);else{const n=document.createDocumentFragment();e.cells.forEach(i=>{n.appendChild(i.getElement())}),e.element.appendChild(n),e.cells.forEach(i=>{i.cellRendered()})}}rerenderRowCells(e,n){this.reinitializeRow(e,n)}reinitializeColumnWidths(e){for(let n=this.leftCol;n<=this.rightCol;n++){let i=this.columns[n];i&&i.reinitializeWidth()}}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var e=!1,n,i;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(s=>{!s.definition.width&&s.visible&&(e=!0)}),e&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,n=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],n)){i=n.getElement(),n.generateCells(),this.tableElement.appendChild(i);for(let s=0;s<n.cells.length;s++){let t=n.cells[s];i.appendChild(t.getElement()),t.column.reinitializeWidth()}i.parentNode.removeChild(i),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(e){var n=!0;return e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol?!0:(e.cols.forEach((i,s)=>{i!==this.columns[s]&&(n=!1)}),!n)}reinitializeRows(){var e=this.getVisibleRows(),n=this.table.rowManager.getRows().filter(i=>!e.includes(i));e.forEach(i=>{this.reinitializeRow(i,!0)}),n.forEach(i=>{i.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(e){this.vDomScrollPosLeft+=e,this.vDomScrollPosRight+=e,Math.abs(e)>this.windowBuffer/2?this.rerenderColumns():e>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(e,n,i){for(let s=e;s<n;s++){let t=this.columns[s];t.modules.vdomHoz.leftPos+=i,t.modules.vdomHoz.rightPos+=i}}addColRight(){for(var e=!1,n=!0;n;){let i=this.columns[this.rightCol+1];i&&i.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var t=s.getCell(i);s.getElement().insertBefore(t.getElement(),s.getCell(this.columns[this.rightCol]).getElement().nextSibling),t.cellRendered()}}),this.fitDataColActualWidthCheck(i),this.rightCol++,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=i.getWidth()):n=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var e=!1,n=!0;n;){let i=this.columns[this.leftCol-1];if(i)if(i.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){e=!0,this.getVisibleRows().forEach(t=>{if(t.type!=="group"){var r=t.getCell(i);t.getElement().insertBefore(r.getElement(),t.getCell(this.columns[this.leftCol]).getElement()),r.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(t=>{t.type!=="group"&&(t.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=i.getWidth();let s=this.fitDataColActualWidthCheck(i);s&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+s,this.vDomPadRight-=s)}else n=!1;else n=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var e=!1,n=!0;n;){let i=this.columns[this.rightCol];i&&i.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var t=s.getCell(i);try{s.getElement().removeChild(t.getElement())}catch(r){console.warn("Could not removeColRight",r.message)}}}),this.vDomPadRight+=i.getWidth(),this.rightCol--,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.rightCol=this.rightCol)})):n=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var e=!1,n=!0;n;){let i=this.columns[this.leftCol];i&&i.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(e=!0,this.getVisibleRows().forEach(s=>{if(s.type!=="group"){var t=s.getCell(i);try{s.getElement().removeChild(t.getElement())}catch(r){console.warn("Could not removeColLeft",r.message)}}}),this.vDomPadLeft+=i.getWidth(),this.leftCol++,this.getVisibleRows().forEach(s=>{s.type!=="group"&&(s.modules.vdomHoz.leftCol=this.leftCol)})):n=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(e){var n,i;return e.modules.vdomHoz.fitDataCheck&&(e.reinitializeWidth(),n=e.getWidth(),i=n-e.modules.vdomHoz.width,i&&(e.modules.vdomHoz.rightPos+=i,e.modules.vdomHoz.width=n,this.colPositionAdjust(this.columns.indexOf(e)+1,this.columns.length,i)),e.modules.vdomHoz.fitDataCheck=!1),i}initializeRow(e){if(e.type!=="group"){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(n=>{this.appendCell(e,n)});for(let n=this.leftCol;n<=this.rightCol;n++)this.appendCell(e,this.columns[n]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(n=>{this.appendCell(e,n)})}}appendCell(e,n){if(n&&n.visible){let i=e.getCell(n);e.getElement().appendChild(i.getElement()),i.cellRendered()}}reinitializeRow(e,n){if(e.type!=="group"&&(n||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol)){for(var i=e.getElement();i.firstChild;)i.removeChild(i.firstChild);this.initializeRow(e)}}}class kh extends Le{constructor(e){super(e),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new Cr(this.table,"column definition",nr),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(e){this.table.rtl?this.headersElement.style.marginLeft=e+"px":this.headersElement.style.marginRight=e+"px"}initializeRenderer(){var e,n={virtual:Jh,basic:Vh};typeof this.table.options.renderHorizontal=="string"?e=n[this.table.options.renderHorizontal]:e=this.table.options.renderHorizontal,e?(this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e.setAttribute("role","row"),e}createHeaderContentsElement(){var e=document.createElement("div");return e.classList.add("tabulator-header-contents"),e.setAttribute("role","rowgroup"),e}createHeaderElement(){var e=document.createElement("div");return e.classList.add("tabulator-header"),e.setAttribute("role","rowgroup"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(e){this.contentsElement.scrollLeft=e,this.scrollLeft=e,this.renderer.scrollColumns(e)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",e=>{var n;e.deltaX&&(n=this.contentsElement.scrollLeft+e.deltaX,this.table.rowManager.scrollHorizontal(n),this.table.columnManager.scrollHorizontal(n))})}generateColumnsFromRowData(e){var n=[],i={},s=this.table.options.autoColumns==="full"?e:[e[0]],t=this.table.options.autoColumnsDefinitions;if(e&&e.length){if(s.forEach(r=>{Object.keys(r).forEach((o,a)=>{let l=r[o],u;i[o]?i[o]!==!0&&typeof l<"u"&&(i[o].sorter=this.calculateSorterFromValue(l),i[o]=!0):(u={field:o,title:o,sorter:this.calculateSorterFromValue(l)},n.splice(a,0,u),i[o]=typeof l>"u"?u:!0)})}),t)switch(typeof t){case"function":this.table.options.columns=t.call(this.table,n);break;case"object":Array.isArray(t)?n.forEach(r=>{var o=t.find(a=>a.field===r.field);o&&Object.assign(r,o)}):n.forEach(r=>{t[r.field]&&Object.assign(r,t[r.field])}),this.table.options.columns=n;break}else this.table.options.columns=n;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(e){var n;switch(typeof e){case"undefined":n="string";break;case"boolean":n="boolean";break;case"number":n="number";break;case"object":Array.isArray(e)?n="array":n="string";break;default:!isNaN(e)&&e!==""?n="number":e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?n="alphanum":n="string";break}return n}setColumns(e,n){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new Mt(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),e.forEach((i,s)=>{this._addColumn(i)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(e,n,i){var s=new Mt(e,this),t=s.getElement(),r=i&&this.findColumnIndex(i);if(n&&this.rowHeader&&(!i||i===this.rowHeader)&&(n=!1,i=this.rowHeader,r=0),i&&r>-1){var o=i.getTopColumn(),a=this.columns.indexOf(o),l=o.getElement();n?(this.columns.splice(a,0,s),l.parentNode.insertBefore(t,l)):(this.columns.splice(a+1,0,s),l.parentNode.insertBefore(t,l.nextSibling))}else n?(this.columns.unshift(s),this.headersElement.insertBefore(s.getElement(),this.headersElement.firstChild)):(this.columns.push(s),this.headersElement.appendChild(s.getElement()));return s.columnRendered(),s}registerColumnField(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)}registerColumnPosition(e){this.columnsByIndex.push(e)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(e){e.reRegisterPosition()})}verticalAlignHeaders(){var e=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(n=>{n.clearVerticalAlign()}),this.columns.forEach(n=>{var i=n.getHeight();i>e&&(e=i)}),this.headersElement.style.height=e+"px",this.columns.forEach(n=>{n.verticalAlign(this.table.options.columnHeaderVertAlign,e)}),this.table.rowManager.adjustTableSize())}findColumn(e){var n;if(typeof e=="object"){if(e instanceof Mt)return e;if(e instanceof ir)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return n=[],this.columns.forEach(s=>{n.push(s),n=n.concat(s.getColumns(!0))}),n.find(s=>s.element===e)||!1}else return this.columnsByField[e]||!1;return!1}getColumnByField(e){return this.columnsByField[e]}getColumnsByFieldRoot(e){var n=[];return Object.keys(this.columnsByField).forEach(i=>{var s=this.table.options.nestedFieldSeparator?i.split(this.table.options.nestedFieldSeparator)[0]:i;s===e&&n.push(this.columnsByField[i])}),n}getColumnByIndex(e){return this.columnsByIndex[e]}getFirstVisibleColumn(){var e=this.columnsByIndex.findIndex(n=>n.visible);return e>-1?this.columnsByIndex[e]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(e=>e.visible)}getColumns(){return this.columns}findColumnIndex(e){return this.columnsByIndex.findIndex(n=>e===n)}getRealColumns(){return this.columnsByIndex}traverse(e){this.columnsByIndex.forEach((n,i)=>{e(n,i)})}getDefinitions(e){var n=[];return this.columnsByIndex.forEach(i=>{(!e||e&&i.visible)&&n.push(i.getDefinition())}),n}getDefinitionTree(){var e=[];return this.columns.forEach(n=>{e.push(n.getDefinition(!0))}),e}getComponents(e){var n=[],i=e?this.columns:this.columnsByIndex;return i.forEach(s=>{n.push(s.getComponent())}),n}getWidth(){var e=0;return this.columnsByIndex.forEach(n=>{n.visible&&(e+=n.getWidth())}),e}moveColumn(e,n,i){n.element.parentNode.insertBefore(e.element,n.element),i&&n.element.parentNode.insertBefore(n.element,e.element),this.moveColumnActual(e,n,i),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(e,n,i){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,n,i):this._moveColumnInArray(this.columns,e,n,i),this._moveColumnInArray(this.columnsByIndex,e,n,i,!0),this.rerenderColumns(!0),this.dispatch("column-moved",e,n,i),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",e.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(e,n,i,s,t){var r=e.indexOf(n),o,a=[];r>-1&&(e.splice(r,1),o=e.indexOf(i),o>-1?s&&(o=o+1):o=r,e.splice(o,0,n),t&&(a=this.chain("column-moving-rows",[n,i,s],null,[])||[],a=a.concat(this.table.rowManager.rows),a.forEach(function(l){if(l.cells.length){var u=l.cells.splice(r,1)[0];l.cells.splice(o,0,u)}})))}scrollToColumn(e,n,i){var s=0,t=e.getLeftOffset(),r=0,o=e.getElement();return new Promise((a,l)=>{if(typeof n>"u"&&(n=this.table.options.scrollToColumnPosition),typeof i>"u"&&(i=this.table.options.scrollToColumnIfVisible),e.visible){switch(n){case"middle":case"center":r=-this.element.clientWidth/2;break;case"right":r=o.clientWidth-this.headersElement.clientWidth;break}if(!i&&t>0&&t+o.offsetWidth<this.element.clientWidth)return!1;s=t+r,s=Math.max(Math.min(s,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(s),this.scrollHorizontal(s),a()}else console.warn("Scroll Error - Column not visible"),l("Scroll Error - Column not visible")})}generateCells(e){var n=[];return this.columnsByIndex.forEach(i=>{n.push(i.generateCell(e))}),n}getFlexBaseWidth(){var e=this.table.element.clientWidth,n=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(i){var s,t,r;i.visible&&(s=i.definition.width||0,t=parseInt(i.minWidth),typeof s=="string"?s.indexOf("%")>-1?r=e/100*parseInt(s):r=parseInt(s):r=s,n+=r>t?r:t)}),n}addColumn(e,n,i){return new Promise((s,t)=>{var r=this._addColumn(e,n,i);this._reIndexColumns(),this.dispatch("column-add",e,n,i),this.layoutMode()!="fitColumns"&&r.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),s(r)})}deregisterColumn(e){var n=e.getField(),i;n&&delete this.columnsByField[n],i=this.columnsByIndex.indexOf(e),i>-1&&this.columnsByIndex.splice(i,1),i=this.columns.indexOf(e),i>-1&&this.columns.splice(i,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(e,n){this.redrawBlock?(e===!1||e===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=e):this.renderer.rerenderColumns(e,n)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(e){Ee.elVisible(this.element)&&this.verticalAlignHeaders(),e&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",e)||this.layoutRefresh(e),this.dispatch("table-redraw",e),this.table.footerManager.redraw()}}class Qh extends Ci{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.scrollTop=0,e.scrollLeft=0,e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility=""}renderRows(){var e=this.tableElement,n=!0,i=document.createDocumentFragment(),s=this.rows();s.forEach((t,r)=>{this.styleRow(t,r),t.initialize(!1,!0),t.type!=="group"&&(n=!1),i.appendChild(t.getElement())}),e.appendChild(i),s.forEach(t=>{t.rendered(),t.heightInitialized||t.calcHeight(!0)}),s.forEach(t=>{t.heightInitialized||t.setCellHeight()}),n?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}rerenderRows(e){this.clearRows(),e&&e(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(e){var n=Ee.elOffset(e.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-n)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-n))}scrollToRow(e){var n=e.getElement();this.elementVertical.scrollTop=Ee.elOffset(n).top-Ee.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(e){return this.rows()}}class Xh extends Ci{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(e){for(var n=this.elementVertical.scrollTop,i=!1,s=!1,t=this.table.rowManager.scrollLeft,r=this.rows(),o=this.vDomTop;o<=this.vDomBottom;o++)if(r[o]){var a=n-r[o].getElement().offsetTop;if(s===!1||Math.abs(a)<s)s=a,i=o;else break}r.forEach(l=>{l.deinitializeHeight()}),e&&e(),this.rows().length?this._virtualRenderFill(i===!1?this.rows.length-1:i,!0,s||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(t)}scrollColumns(e){this.table.rowManager.scrollHorizontal(e)}scrollRows(e,n){var i=e-this.vDomScrollPosTop,s=e-this.vDomScrollPosBottom,t=this.vDomWindowBuffer*2,r=this.rows();if(this.scrollTop=e,-i>t||s>t){var o=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*r.length)),this.scrollColumns(o)}else n?(i<0&&this._addTopRow(r,-i),s<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(r,-s):this.vDomScrollPosBottom=this.scrollTop)):(s>=0&&this._addBottomRow(r,s),i>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(r,i):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(e){var n=this.rows().indexOf(e);return!(Math.abs(this.vDomTop-n)>Math.abs(this.vDomBottom-n))}scrollToRow(e){var n=this.rows().indexOf(e);n>-1&&this._virtualRenderFill(n,!0)}visibleRows(e){var n=this.elementVertical.scrollTop,i=this.elementVertical.clientHeight+n,s=!1,t=0,r=0,o=this.rows();if(e)t=this.vDomTop,r=this.vDomBottom;else for(var a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a])if(s)if(i-o[a].getElement().offsetTop>=0)r=a;else break;else if(n-o[a].getElement().offsetTop>=0)t=a;else if(s=!0,i-o[a].getElement().offsetTop>=0)r=a;else break;return o.slice(t,r+1)}_virtualRenderFill(e,n,i){var s=this.tableElement,t=this.elementVertical,r=0,o=0,a=0,l=0,u=0,d=0,h=this.rows(),f=h.length,m=0,g,v,p=[],E=0,R=0,O=this.table.rowManager.fixedHeight,T=this.elementVertical.clientHeight,D=this.table.options.rowHeight,M=!0;if(e=e||0,i=i||0,!e)this.clear();else{for(;s.firstChild;)s.removeChild(s.firstChild);l=(f-e+1)*this.vDomRowHeight,l<T&&(e-=Math.ceil((T-l)/this.vDomRowHeight),e<0&&(e=0)),r=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e),e-=r}if(f&&Ee.elVisible(this.elementVertical)){for(this.vDomTop=e,this.vDomBottom=e-1,O||this.table.options.maxHeight?(D&&(R=T/D+this.vDomWindowBuffer/D),R=Math.max(this.vDomWindowMinTotalRows,Math.ceil(R))):R=f;(R==f||o<=T+this.vDomWindowBuffer||E<this.vDomWindowMinTotalRows)&&this.vDomBottom<f-1;){for(p=[],v=document.createDocumentFragment(),d=0;d<R&&this.vDomBottom<f-1;)m=this.vDomBottom+1,g=h[m],this.styleRow(g,m),g.initialize(!1,!0),!g.heightInitialized&&!this.table.options.rowHeight&&g.clearCellHeight(),v.appendChild(g.getElement()),p.push(g),this.vDomBottom++,d++;if(!p.length)break;s.appendChild(v),p.forEach(P=>{P.rendered(),P.heightInitialized||P.calcHeight(!0)}),p.forEach(P=>{P.heightInitialized||P.setCellHeight()}),p.forEach(P=>{a=P.getHeight(),E<r?u+=a:o+=a,a>this.vDomWindowBuffer&&(this.vDomWindowBuffer=a*2),E++}),M=this.table.rowManager.adjustTableSize(),T=this.elementVertical.clientHeight,M&&(O||this.table.options.maxHeight)&&(D=o/E,R=Math.max(this.vDomWindowMinTotalRows,Math.ceil(T/D+this.vDomWindowBuffer/D)))}e?(this.vDomTopPad=n?this.vDomRowHeight*this.vDomTop+i:this.scrollTop-u,this.vDomBottomPad=this.vDomBottom==f-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-o-u,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((o+u)/E),this.vDomBottomPad=this.vDomRowHeight*(f-this.vDomBottom-1),this.vDomScrollHeight=u+o+this.vDomBottomPad-T),s.style.paddingTop=this.vDomTopPad+"px",s.style.paddingBottom=this.vDomBottomPad+"px",n&&(this.scrollTop=this.vDomTopPad+u+i-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-T:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-T),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&n&&(this.scrollTop+=this.elementVertical.offsetHeight-T),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,t.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(e,n){for(var i=this.tableElement,s=[],t=0,r=this.vDomTop-1,o=0,a=!0;a;)if(this.vDomTop){let l=e[r],u,d;l&&o<this.vDomMaxRenderChain?(u=l.getHeight()||this.vDomRowHeight,d=l.initialized,n>=u?(this.styleRow(l,r),i.insertBefore(l.getElement(),i.firstChild),(!l.initialized||!l.heightInitialized)&&s.push(l),l.initialize(),d||(u=l.getElement().offsetHeight,u>this.vDomWindowBuffer&&(this.vDomWindowBuffer=u*2)),n-=u,t+=u,this.vDomTop--,r--,o++):a=!1):a=!1}else a=!1;for(let l of s)l.clearCellHeight();this._quickNormalizeRowHeight(s),t&&(this.vDomTopPad-=t,this.vDomTopPad<0&&(this.vDomTopPad=r*this.vDomRowHeight),r<1&&(this.vDomTopPad=0),i.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=t)}_removeTopRow(e,n){for(var i=[],s=0,t=0,r=!0;r;){let o=e[this.vDomTop],a;o&&t<this.vDomMaxRenderChain?(a=o.getHeight()||this.vDomRowHeight,n>=a?(this.vDomTop++,n-=a,s+=a,i.push(o),t++):r=!1):r=!1}for(let o of i){let a=o.getElement();a.parentNode&&a.parentNode.removeChild(a)}s&&(this.vDomTopPad+=s,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?s:s+this.vDomWindowBuffer)}_addBottomRow(e,n){for(var i=this.tableElement,s=[],t=0,r=this.vDomBottom+1,o=0,a=!0;a;){let l=e[r],u,d;l&&o<this.vDomMaxRenderChain?(u=l.getHeight()||this.vDomRowHeight,d=l.initialized,n>=u?(this.styleRow(l,r),i.appendChild(l.getElement()),(!l.initialized||!l.heightInitialized)&&s.push(l),l.initialize(),d||(u=l.getElement().offsetHeight,u>this.vDomWindowBuffer&&(this.vDomWindowBuffer=u*2)),n-=u,t+=u,this.vDomBottom++,r++,o++):a=!1):a=!1}for(let l of s)l.clearCellHeight();this._quickNormalizeRowHeight(s),t&&(this.vDomBottomPad-=t,(this.vDomBottomPad<0||r==e.length-1)&&(this.vDomBottomPad=0),i.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=t)}_removeBottomRow(e,n){for(var i=[],s=0,t=0,r=!0;r;){let o=e[this.vDomBottom],a;o&&t<this.vDomMaxRenderChain?(a=o.getHeight()||this.vDomRowHeight,n>=a?(this.vDomBottom--,n-=a,s+=a,i.push(o),t++):r=!1):r=!1}for(let o of i){let a=o.getElement();a.parentNode&&a.parentNode.removeChild(a)}s&&(this.vDomBottomPad+=s,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=s)}_quickNormalizeRowHeight(e){for(let n of e)n.calcHeight();for(let n of e)n.setCellHeight()}}class Yh extends Le{constructor(e){super(e),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var e=document.createElement("div");return e.classList.add("tabulator-tableholder"),e.setAttribute("tabindex",0),e}createTableElement(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e.setAttribute("role","rowgroup"),e}initializePlaceholder(){var e=this.table.options.placeholder;if(typeof e=="function"&&(e=e.call(this.table)),e=this.chain("placeholder",[e],e,e)||e,e){let n=document.createElement("div");if(n.classList.add("tabulator-placeholder"),typeof e=="string"){let i=document.createElement("div");i.classList.add("tabulator-placeholder-contents"),i.innerHTML=e,n.appendChild(i),this.placeholderContents=i}else typeof HTMLElement<"u"&&e instanceof HTMLElement?(n.appendChild(e),this.placeholderContents=e):(console.warn("Invalid placeholder provided, must be string or HTML Element",e),this.el=null);this.placeholder=n}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var e=this.element.scrollLeft,n=this.scrollLeft>e,i=this.element.scrollTop,s=this.scrollTop>i;this.scrollLeft!=e&&(this.scrollLeft=e,this.dispatch("scroll-horizontal",e,n),this.dispatchExternal("scrollHorizontal",e,n),this._positionPlaceholder()),this.scrollTop!=i&&(this.scrollTop=i,this.renderer.scrollRows(i,s),this.dispatch("scroll-vertical",i,s),this.dispatchExternal("scrollVertical",i,s))})}findRow(e){if(typeof e=="object"){if(e instanceof Be)return e;if(e instanceof yi)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return this.rows.find(i=>i.getElement()===e)||!1;if(e===null)return!1}else return typeof e>"u"?!1:this.rows.find(i=>i.data[this.table.options.index]==e)||!1;return!1}getRowFromDataObject(e){var n=this.rows.find(i=>i.data===e);return n||!1}getRowFromPosition(e){return this.getDisplayRows().find(n=>n.type==="row"&&n.getPosition()===e&&n.isDisplayed())}scrollToRow(e,n,i){return this.renderer.scrollToRowPosition(e,n,i)}setData(e,n,i){return new Promise((s,t)=>{n&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(e,!0):this.reRenderInPosition(()=>{this._setDataActual(e)}):(this.table.options.autoColumns&&i&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(e),this.resetScroll(),this._setDataActual(e)),s()})}_setDataActual(e,n){this.dispatchExternal("dataProcessing",e),this._wipeElements(),Array.isArray(e)?(this.dispatch("data-processing",e),e.forEach((i,s)=>{if(i&&typeof i=="object"){var t=new Be(i,this);this.rows.push(t)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",i)}),this.refreshActiveData(!1,!1,n),this.dispatch("data-processed",e),this.dispatchExternal("dataProcessed",e)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(e=>{e.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(e,n){var i=this.rows.indexOf(e),s=this.activeRows.indexOf(e);s>-1&&this.activeRows.splice(s,1),i>-1&&this.rows.splice(i,1),this.setActiveRows(this.activeRows),this.displayRowIterator(t=>{var r=t.indexOf(e);r>-1&&t.splice(r,1)}),n||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",e.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(e,n,i,s){var t=this.addRowActual(e,n,i,s);return t}addRows(e,n,i,s){var t=[];return new Promise((r,o)=>{n=this.findAddRowPos(n),Array.isArray(e)||(e=[e]),(typeof i>"u"&&n||typeof i<"u"&&!n)&&e.reverse(),e.forEach((a,l)=>{var u=this.addRow(a,n,i,!0);t.push(u),this.dispatch("row-added",u,a,n,i)}),this.refreshActiveData(s?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),r(t)})}findAddRowPos(e){return typeof e>"u"&&(e=this.table.options.addRowPos),e==="pos"&&(e=!0),e==="bottom"&&(e=!1),e}addRowActual(e,n,i,s){var t=e instanceof Be?e:new Be(e||{},this),r=this.findAddRowPos(n),o=-1,a,l;return i||(l=this.chain("row-adding-position",[t,r],null,{index:i,top:r}),i=l.index,r=l.top),typeof i<"u"&&(i=this.findRow(i)),i=this.chain("row-adding-index",[t,i,r],null,i),i&&(o=this.rows.indexOf(i)),i&&o>-1?(a=this.activeRows.indexOf(i),this.displayRowIterator(function(u){var d=u.indexOf(i);d>-1&&u.splice(r?d:d+1,0,t)}),a>-1&&this.activeRows.splice(r?a:a+1,0,t),this.rows.splice(r?o:o+1,0,t)):r?(this.displayRowIterator(function(u){u.unshift(t)}),this.activeRows.unshift(t),this.rows.unshift(t)):(this.displayRowIterator(function(u){u.push(t)}),this.activeRows.push(t),this.rows.push(t)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",t.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),s||this.reRenderInPosition(),t}moveRow(e,n,i){this.dispatch("row-move",e,n,i),this.moveRowActual(e,n,i),this.regenerateRowPositions(),this.dispatch("row-moved",e,n,i),this.dispatchExternal("rowMoved",e.getComponent())}moveRowActual(e,n,i){this.moveRowInArray(this.rows,e,n,i),this.moveRowInArray(this.activeRows,e,n,i),this.displayRowIterator(s=>{this.moveRowInArray(s,e,n,i)}),this.dispatch("row-moving",e,n,i)}moveRowInArray(e,n,i,s){var t,r,o,a;if(n!==i&&(t=e.indexOf(n),t>-1&&(e.splice(t,1),r=e.indexOf(i),r>-1?s?e.splice(r+1,0,n):e.splice(r,0,n):e.splice(t,0,n)),e===this.getDisplayRows())){o=t<r?t:r,a=r>t?r:t+1;for(let l=o;l<=a;l++)e[l]&&this.styleRow(e[l],l)}}clearData(){this.setData([])}getRowIndex(e){return this.findRowIndex(e,this.rows)}getDisplayRowIndex(e){var n=this.getDisplayRows().indexOf(e);return n>-1?n:!1}nextDisplayRow(e,n){var i=this.getDisplayRowIndex(e),s=!1;return i!==!1&&i<this.displayRowsCount-1&&(s=this.getDisplayRows()[i+1]),s&&(!(s instanceof Be)||s.type!="row")?this.nextDisplayRow(s,n):s}prevDisplayRow(e,n){var i=this.getDisplayRowIndex(e),s=!1;return i&&(s=this.getDisplayRows()[i-1]),n&&s&&(!(s instanceof Be)||s.type!="row")?this.prevDisplayRow(s,n):s}findRowIndex(e,n){var i;return e=this.findRow(e),e&&(i=n.indexOf(e),i>-1)?i:!1}getData(e,n){var i=[],s=this.getRows(e);return s.forEach(function(t){t.type=="row"&&i.push(t.getData(n||"data"))}),i}getComponents(e){var n=[],i=this.getRows(e);return i.forEach(function(s){n.push(s.getComponent())}),n}getDataCount(e){var n=this.getRows(e);return n.length}scrollHorizontal(e){this.scrollLeft=e,this.element.scrollLeft=e,this.dispatch("scroll-horizontal",e)}registerDataPipelineHandler(e,n){typeof n<"u"?(this.dataPipeline.push({handler:e,priority:n}),this.dataPipeline.sort((i,s)=>i.priority-s.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(e,n){typeof n<"u"?(this.displayPipeline.push({handler:e,priority:n}),this.displayPipeline.sort((i,s)=>i.priority-s.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(e,n,i){var s=this.table,t="",r=0,o=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof e=="function")if(r=this.dataPipeline.findIndex(a=>a.handler===e),r>-1)t="dataPipeline",n&&(r==this.dataPipeline.length-1?t="display":r++);else if(r=this.displayPipeline.findIndex(a=>a.handler===e),r>-1)t="displayPipeline",n&&(r==this.displayPipeline.length-1?t="end":r++);else{console.error("Unable to refresh data, invalid handler provided",e);return}else t=e||"all",r=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===t&&r<this.redrawBlockRestoreConfig.index||o.indexOf(t)<o.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:e,skipStage:n,renderInPosition:i,stage:t,index:r});return}else Ee.elVisible(this.element)?i?this.reRenderInPosition(this.refreshPipelines.bind(this,e,t,r,i)):(this.refreshPipelines(e,t,r,i),e||this.table.columnManager.renderer.renderColumns(),this.renderTable(),s.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(e,t,r,i),this.dispatch("data-refreshed")}}refreshPipelines(e,n,i,s){switch(this.dispatch("data-refreshing"),(!e||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),n){case"all":case"dataPipeline":for(let t=i;t<this.dataPipeline.length;t++){let r=this.dataPipeline[t].handler(this.activeRowsPipeline[t].slice(0));this.activeRowsPipeline[t+1]=r||this.activeRowsPipeline[t].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":i=0,this.resetDisplayRows();case"displayPipeline":for(let t=i;t<this.displayPipeline.length;t++){let r=this.displayPipeline[t].handler((t?this.getDisplayRows(t-1):this.activeRows).slice(0),s);this.setDisplayRows(r||this.getDisplayRows(t-1).slice(0),t)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var e=this.getDisplayRows(),n=1;e.forEach(i=>{i.type==="row"&&(i.setPosition(n),n++)})}setActiveRows(e){this.activeRows=this.activeRows=Object.assign([],e),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(e,n){this.displayRows[n]=e,n==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(e){return typeof e>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]}getVisibleRows(e,n){var i=Object.assign([],this.renderer.visibleRows(!n));return e&&(i=this.chain("rows-visible",[n],i,i)),i}displayRowIterator(e){this.activeRowsPipeline.forEach(e),this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(e){var n=[];switch(e){case"active":n=this.activeRows;break;case"display":n=this.table.rowManager.getDisplayRows();break;case"visible":n=this.getVisibleRows(!1,!0);break;default:n=this.chain("rows-retrieve",e,null,this.rows)||this.rows}return n}reRenderInPosition(e){this.redrawBlock?e?e():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(e),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var e=0;this.element.scrollHeight>this.element.clientHeight&&(e=this.element.offsetWidth-this.element.clientWidth),e!==this.scrollbarWidth&&(this.scrollbarWidth=e,this.dispatch("scrollbar-vertical",e))}initializeRenderer(){var e,n={virtual:Xh,basic:Qh};typeof this.table.options.renderVertical=="string"?e=n[this.table.options.renderVertical]:e=this.table.options.renderVertical,e?(this.renderMode=this.table.options.renderVertical,this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(e,n){var i=e.getElement();n%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))}normalizeHeight(e){this.activeRows.forEach(function(n){n.normalizeHeight(e)})}adjustTableSize(){let e=this.element.clientHeight,n,i=!1;if(this.renderer.verticalFillMode==="fill"){let s=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){n=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";const t="calc(100% - "+s+"px)";this.element.style.minHeight=n||"calc(100% - "+s+"px)",this.element.style.height=t,this.element.style.maxHeight=t}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-s+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&e!=this.element.clientHeight&&(i=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),i}reinitialize(){this.rows.forEach(function(e){e.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(e){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))}}class Zh extends Le{constructor(e){super(e),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e}createContainerElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer-contents"),this.element.appendChild(e),e}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(e){this.activate(),this.containerElement.appendChild(e),this.table.rowManager.adjustTableSize()}prepend(e){this.activate(),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(e){e.parentNode.removeChild(e),this.deactivate()}deactivate(e){(!this.element.firstChild||e)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}}class qh extends Le{constructor(e){super(e),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var e={};this.listeners.forEach(n=>{e[n]={handler:null,components:[]}}),this.listeners=e}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(e=>{this.pseudoTrackers[e].subscriber=this.pseudoMouseEnter.bind(this,e),this.subscribe(e+"-mouseover",this.pseudoTrackers[e].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(e,n,i){this.pseudoTrackers[e].target!==i&&(this.pseudoTrackers[e].target&&this.dispatch(e+"-mouseleave",n,this.pseudoTrackers[e].target),this.pseudoMouseLeave(e,n),this.pseudoTrackers[e].target=i,this.dispatch(e+"-mouseenter",n,i))}pseudoMouseLeave(e,n){var i=Object.keys(this.pseudoTrackers),s={row:["cell"],cell:["row"]};i=i.filter(t=>{var r=s[e];return t!==e&&(!r||r&&!r.includes(t))}),i.forEach(t=>{var r=this.pseudoTrackers[t].target;this.pseudoTrackers[t].target&&(this.dispatch(t+"-mouseleave",n,r),this.pseudoTrackers[t].target=null)})}bindSubscriptionWatchers(){var e=Object.keys(this.listeners),n=Object.values(this.componentMap);for(let i of n)for(let s of e){let t=i+"-"+s;this.subscriptionChange(t,this.subscriptionChanged.bind(this,i,s))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(e,n,i){var s=this.listeners[n].components,t=s.indexOf(e),r=!1;i?t===-1&&(s.push(e),r=!0):this.subscribed(e+"-"+n)||t>-1&&(s.splice(t,1),r=!0),(n==="mouseenter"||n==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),r&&this.updateEventListeners()}updateEventListeners(){for(let e in this.listeners){let n=this.listeners[e];n.components.length?n.handler||(n.handler=this.track.bind(this,e),this.el.addEventListener(e,n.handler)):n.handler&&(this.el.removeEventListener(e,n.handler),n.handler=null)}}track(e,n){var i=n.composedPath&&n.composedPath()||n.path,s=this.findTargets(i);s=this.bindComponents(e,s),this.triggerEvents(e,n,s),this.pseudoTracking&&(e=="mouseover"||e=="mouseleave")&&!Object.keys(s).length&&this.pseudoMouseLeave("none",n)}findTargets(e){var n={};let i=Object.keys(this.componentMap);for(let s of e){let t=s.classList?[...s.classList]:[];if(t.filter(a=>this.abortClasses.includes(a)).length)break;let o=t.filter(a=>i.includes(a));for(let a of o)n[this.componentMap[a]]||(n[this.componentMap[a]]=s)}return n.group&&n.group===n.row&&delete n.row,n}bindComponents(e,n){var i=Object.keys(n).reverse(),s=this.listeners[e],t={},r={},o={};for(let a of i){let l,u=n[a],d=this.previousTargets[a];if(d&&d.target===u)l=d.component;else switch(a){case"row":case"group":(s.components.includes("row")||s.components.includes("cell")||s.components.includes("group"))&&(l=this.table.rowManager.getVisibleRows(!0).find(f=>f.getElement()===u),n.row&&n.row.parentNode&&n.row.parentNode.closest(".tabulator-row")&&(n[a]=!1));break;case"column":s.components.includes("column")&&(l=this.table.columnManager.findColumn(u));break;case"cell":s.components.includes("cell")&&(t.row instanceof Be?l=t.row.findCell(u):n.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}l&&(t[a]=l,o[a]={target:u,component:l})}return this.previousTargets=o,Object.keys(n).forEach(a=>{let l=t[a];r[a]=l}),r}triggerEvents(e,n,i){var s=this.listeners[e];for(let t in i)i[t]&&s.components.includes(t)&&this.dispatch(t+"-"+e,n,i[t])}clearWatchers(){for(let e in this.listeners){let n=this.listeners[e];n.handler&&(this.el.removeEventListener(e,n.handler),n.handler=null)}}}class _h{constructor(e){this.table=e,this.bindings={}}bind(e,n,i){this.bindings[e]||(this.bindings[e]={}),this.bindings[e][n]?console.warn("Unable to bind component handler, a matching function name is already bound",e,n,i):this.bindings[e][n]=i}handle(e,n,i){if(this.bindings[e]&&this.bindings[e][i]&&typeof this.bindings[e][i].bind=="function")return this.bindings[e][i].bind(null,n);i!=="then"&&typeof i=="string"&&!i.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+e+" component does not have a "+i+" function, have you checked that you have the correct Tabulator module installed?")}}class ed extends Le{constructor(e){super(e),this.requestOrder=0,this.loading=!1}initialize(){}load(e,n,i,s,t,r){var o=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",e),e&&(e.indexOf("{")==0||e.indexOf("[")==0)&&(e=JSON.parse(e)),this.confirm("data-loading",[e,n,i,t])){this.loading=!0,t||this.alertLoader(),n=this.chain("data-params",[e,i,t],n||{},n||{}),n=this.mapParams(n,this.table.options.dataSendParams);var a=this.chain("data-load",[e,n,i,t],!1,Promise.resolve([]));return a.then(l=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(l)&&typeof l=="object"&&(l=this.mapParams(l,this.objectInvert(this.table.options.dataReceiveParams)));var u=this.chain("data-loaded",[l],null,l);o==this.requestOrder?(this.clearAlert(),u!==!1&&(this.dispatchExternal("dataLoaded",u),this.table.rowManager.setData(u,s,typeof r>"u"?!s:r))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(l=>{console.error("Data Load Error: ",l),this.dispatchExternal("dataLoadError",l),t||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",e),e||(e=[]),this.table.rowManager.setData(e,s,typeof r>"u"?!s:r),Promise.resolve()}mapParams(e,n){var i={};for(let s in e)i[n.hasOwnProperty(s)?n[s]:s]=e[s];return i}objectInvert(e){var n={};for(let i in e)n[e[i]]=i;return n}blockActiveLoad(){this.requestOrder++}alertLoader(){var e=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;e&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}}class td{constructor(e,n,i){this.table=e,this.events={},this.optionsList=n||{},this.subscriptionNotifiers={},this.dispatch=i?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=i}subscriptionChange(e,n){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(n),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n),this._notifySubscriptionChange(e,!0)}unsubscribe(e,n){var i;if(this.events[e])if(n)if(i=this.events[e].findIndex(s=>s===n),i>-1)this.events[e].splice(i,1);else{console.warn("Cannot remove event, no matching event found:",e,n);return}else delete this.events[e];else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_notifySubscriptionChange(e,n){var i=this.subscriptionNotifiers[e];i&&i.forEach(s=>{s(n)})}_dispatch(){var e=Array.from(arguments),n=e.shift(),i;return this.events[n]&&this.events[n].forEach((s,t)=>{let r=s.apply(this.table,e);t||(i=r)}),i}_debugDispatch(){var e=Array.from(arguments),n=e[0];return e[0]="ExternalEvent:"+e[0],(this.debug===!0||this.debug.includes(n))&&console.log(...e),this._dispatch(...arguments)}}class id{constructor(e){this.events={},this.subscriptionNotifiers={},this.dispatch=e?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=e?this._debugChain.bind(this):this._chain.bind(this),this.confirm=e?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=e}subscriptionChange(e,n){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(n),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,n,i=1e4){this.events[e]||(this.events[e]=[]),this.events[e].push({callback:n,priority:i}),this.events[e].sort((s,t)=>s.priority-t.priority),this._notifySubscriptionChange(e,!0)}unsubscribe(e,n){var i;if(this.events[e]){if(n)if(i=this.events[e].findIndex(s=>s.callback===n),i>-1)this.events[e].splice(i,1);else{console.warn("Cannot remove event, no matching event found:",e,n);return}}else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_chain(e,n,i,s){var t=i;return Array.isArray(n)||(n=[n]),this.subscribed(e)?(this.events[e].forEach((r,o)=>{t=r.callback.apply(this,n.concat([t]))}),t):typeof s=="function"?s():s}_confirm(e,n){var i=!1;return Array.isArray(n)||(n=[n]),this.subscribed(e)&&this.events[e].forEach((s,t)=>{s.callback.apply(this,n)&&(i=!0)}),i}_notifySubscriptionChange(e,n){var i=this.subscriptionNotifiers[e];i&&i.forEach(s=>{s(n)})}_dispatch(){var e=Array.from(arguments),n=e.shift();this.events[n]&&this.events[n].forEach(i=>{i.callback.apply(this,e)})}_debugDispatch(){var e=Array.from(arguments),n=e[0];return e[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...e),this._dispatch(...arguments)}_debugChain(){var e=Array.from(arguments),n=e[0];return e[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...e),this._chain(...arguments)}_debugConfirm(){var e=Array.from(arguments),n=e[0];return e[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...e),this._confirm(...arguments)}}class nd extends Le{constructor(e){super(e)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(e,n,i){var s="";return typeof this.options(e)<"u"?(s="Deprecated Setup Option - Use of the %c"+e+"%c option is now deprecated",n?(s=s+", Please use the %c"+n+"%c option instead",this._warnUser(s,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),i&&(this.table.options[n]=this.table.options[e])):this._warnUser(s,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(e,n){return typeof this.options(e)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+e+" %c option is now deprecated, "+n,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(e){this._warnUser(e)}}class sd extends Le{constructor(e){super(e),this.deps={},this.props={}}initialize(){this.deps=Object.assign({},this.options("dependencies"))}lookup(e,n,i){if(Array.isArray(e)){for(const t of e){var s=this.lookup(t,n,!0);if(s)break}if(s)return s;this.error(e)}else return n?this.lookupProp(e,n,i):this.lookupKey(e,i)}lookupProp(e,n,i){var s;if(this.props[e]&&this.props[e][n])return this.props[e][n];if(s=this.lookupKey(e,i),s)return this.props[e]||(this.props[e]={}),this.props[e][n]=s[n]||s,this.props[e][n]}lookupKey(e,n){var i;return this.deps[e]?i=this.deps[e]:window[e]?(this.deps[e]=window[e],i=this.deps[e]):n||this.error(e),i}error(e){console.error("Unable to find dependency",e,"Please check documentation and ensure you have imported the required library into your project")}}function rd(c,e){e&&this.table.columnManager.renderer.reinitializeColumnWidths(c),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function rs(c,e){c.forEach(function(n){n.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function od(c,e){var n=0,i=this.table.rowManager.element.clientWidth,s=0,t=!1;c.forEach((r,o)=>{r.widthFixed||r.reinitializeWidth(),(this.table.options.responsiveLayout?r.modules.responsive.visible:r.visible)&&(t=r),r.visible&&(n+=r.getWidth())}),t?(s=i-n+t.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(t.setWidth(0),this.table.modules.responsiveLayout.update()),s>0?t.setWidth(s):t.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function ad(c,e){var n=this.table.rowManager.element.getBoundingClientRect().width,i=0,s=0,t=0,r=0,o=[],a=[],l=0,u=0,d=0;function h(m){var g;return typeof m=="string"?m.indexOf("%")>-1?g=n/100*parseInt(m):g=parseInt(m):g=m,g}function f(m,g,v,p){var E=[],R=0,O=0,T=0,D=t,M=0,P=0,C=[];function y(w){return v*(w.column.definition.widthGrow||1)}function b(w){return h(w.width)-v*(w.column.definition.widthShrink||0)}return m.forEach(function(w,S){var L=p?b(w):y(w);w.column.minWidth>=L?E.push(w):w.column.maxWidth&&w.column.maxWidth<L?(w.width=w.column.maxWidth,g-=w.column.maxWidth,D-=p?w.column.definition.widthShrink||1:w.column.definition.widthGrow||1,D&&(v=Math.floor(g/D))):(C.push(w),P+=p?w.column.definition.widthShrink||1:w.column.definition.widthGrow||1)}),E.length?(E.forEach(function(w){R+=p?w.width-w.column.minWidth:w.column.minWidth,w.width=w.column.minWidth}),O=g-R,T=P?Math.floor(O/P):O,M=f(C,O,T,p)):(M=P?g-Math.floor(g/P)*P:g,C.forEach(function(w){w.width=p?b(w):y(w)})),M}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(n-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),c.forEach(function(m){var g,v,p;m.visible&&(g=m.definition.width,v=parseInt(m.minWidth),g?(p=h(g),i+=p>v?p:v,m.definition.widthShrink&&(a.push({column:m,width:p>v?p:v}),l+=m.definition.widthShrink)):(o.push({column:m,width:0}),t+=m.definition.widthGrow||1))}),s=n-i,r=Math.floor(s/t),d=f(o,s,r,!1),o.length&&d>0&&(o[o.length-1].width+=d),o.forEach(function(m){s-=m.width}),u=Math.abs(d)+s,u>0&&l&&(d=f(a,u,Math.floor(u/l),!0)),d&&a.length&&(a[a.length-1].width-=d),o.forEach(function(m){m.column.setWidth(m.width)}),a.forEach(function(m){m.column.setWidth(m.width)})}var ld={fitData:rd,fitDataFill:rs,fitDataTable:rs,fitDataStretch:od,fitColumns:ad};const Bt=class Bt extends he{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;Bt.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){e.definition.widthGrow&&(e.definition.widthGrow=Number(e.definition.widthGrow)),e.definition.widthShrink&&(e.definition.widthShrink=Number(e.definition.widthShrink))}getMode(){return this.mode}layout(e){var n=this.table.columnManager.columnsByIndex.find(i=>i.definition.variableHeight||i.definition.formatter==="textarea");this.dispatch("layout-refreshing"),Bt.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,e),n&&this.table.rowManager.normalizeHeight(!0),this.dispatch("layout-refreshed")}};X(Bt,"moduleName","layout"),X(Bt,"modes",ld);let mn=Bt;var ud={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}};const Qt=class Qt extends he{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Ee.deepClone(Qt.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}installLang(e,n){this.langList[e]?this._setLangProp(this.langList[e],n):this.langList[e]=n}_setLangProp(e,n){for(let i in n)e[i]&&typeof e[i]=="object"?this._setLangProp(e[i],n[i]):e[i]=n[i]}setLocale(e){e=e||"default";function n(i,s){for(var t in i)typeof i[t]=="object"?(s[t]||(s[t]={}),n(i[t],s[t])):s[t]=i[t]}if(e===!0&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let i=e.split("-")[0];this.langList[i]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,i),e=i):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=Ee.deepClone(this.langList.default||{}),e!="default"&&n(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,n){var i=n?e+"|"+n:e,s=i.split("|"),t=this._getLangElement(s,this.locale);return t||""}_getLangElement(e,n){var i=this.lang;return e.forEach(function(s){var t;i&&(t=i[s],typeof t<"u"?i=t:i=!1)}),i}bind(e,n){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(n),n(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(n=>{n(this.getText(e),this.lang)})}};X(Qt,"moduleName","localize"),X(Qt,"langs",ud);let gn=Qt;class Or extends he{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var n=[],i;return i=this.table.constructor.registry.lookupTable(e),i.forEach(s=>{this.table!==s&&n.push(s)}),n}send(e,n,i,s){var t=this.getConnections(e);t.forEach(r=>{r.tableComms(this.table.element,n,i,s)}),!t.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,n,i,s){if(this.table.modExists(n))return this.table.modules[n].commsReceived(e,i,s);console.warn("Inter-table Comms Error - no such module:",n)}}X(Or,"moduleName","comms");var hd=Object.freeze({__proto__:null,CommsModule:Or,LayoutModule:mn,LocalizeModule:gn});const Ve=class Ve{static findTable(e){var n=Ve.registry.lookupTable(e,!0);return Array.isArray(n)&&!n.length?!1:n}};X(Ve,"registry",{tables:[],register(e){Ve.registry.tables.push(e)},deregister(e){var n=Ve.registry.tables.indexOf(e);n>-1&&Ve.registry.tables.splice(n,1)},lookupTable(e,n){var i=[],s,t;if(typeof e=="string"){if(s=document.querySelectorAll(e),s.length)for(var r=0;r<s.length;r++)t=Ve.registry.matchElement(s[r]),t&&i.push(t)}else typeof HTMLElement<"u"&&e instanceof HTMLElement||e instanceof Ve?(t=Ve.registry.matchElement(e),t&&i.push(t)):Array.isArray(e)?e.forEach(function(o){i=i.concat(Ve.registry.lookupTable(o))}):n||console.warn("Table Connection Error - Invalid Selector",e);return i},matchElement(e){return Ve.registry.tables.find(function(n){return e instanceof Ve?n===e:n.element===e})}});let vn=Ve;const be=class be extends vn{constructor(){super()}static initializeModuleBinder(e){be.modulesRegistered||(be.modulesRegistered=!0,be._registerModules(hd,!0),e&&be._registerModules(e))}static _extendModule(e,n,i){if(be.moduleBindings[e]){var s=be.moduleBindings[e][n];if(s)if(typeof i=="object")for(let t in i)s[t]=i[t];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",n)}else console.warn("Module Error - module does not exist:",e)}static _registerModules(e,n){var i=Object.values(e);n&&i.forEach(s=>{s.prototype.moduleCore=!0}),be._registerModule(i)}static _registerModule(e){Array.isArray(e)||(e=[e]),e.forEach(n=>{be._registerModuleBinding(n),be._registerModuleExtensions(n)})}static _registerModuleBinding(e){e.moduleName?be.moduleBindings[e.moduleName]=e:console.error("Unable to bind module, no moduleName defined",e.moduleName)}static _registerModuleExtensions(e){var n=e.moduleExtensions;if(e.moduleExtensions)for(let i in n){let s=n[i];if(be.moduleBindings[i])for(let t in s)be._extendModule(i,t,s[t]);else{be.moduleExtensions[i]||(be.moduleExtensions[i]={});for(let t in s)be.moduleExtensions[i][t]||(be.moduleExtensions[i][t]={}),Object.assign(be.moduleExtensions[i][t],s[t])}}be._extendModuleFromQueue(e)}static _extendModuleFromQueue(e){var n=be.moduleExtensions[e.moduleName];if(n)for(let i in n)be._extendModule(e.moduleName,i,n[i])}_bindModules(){var e=[],n=[],i=[];this.modules={};for(var s in be.moduleBindings){let t=be.moduleBindings[s],r=new t(this);this.modules[s]=r,t.prototype.moduleCore?this.modulesCore.push(r):t.moduleInitOrder?t.moduleInitOrder<0?e.push(r):n.push(r):i.push(r)}e.sort((t,r)=>t.moduleInitOrder>r.moduleInitOrder?1:-1),n.sort((t,r)=>t.moduleInitOrder>r.moduleInitOrder?1:-1),this.modulesRegular=e.concat(i.concat(n))}};X(be,"moduleBindings",{}),X(be,"moduleExtensions",{}),X(be,"modulesRegistered",!1),X(be,"defaultModules",!1);let bn=be;class dd extends Le{constructor(e){super(e),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert"),e}_createMsgElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert-msg"),e.setAttribute("role","alert"),e}_typeClass(){return"tabulator-alert-state-"+this.type}alert(e,n="msg"){if(e){for(this.clear(),this.dispatch("alert-show",n),this.type=n;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof e=="function"&&(e=e()),e instanceof HTMLElement?this.msgElement.appendChild(e):this.msgElement.innerHTML=e,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}}const ut=class ut extends bn{static extendModule(){ut.initializeModuleBinder(),ut._extendModule(...arguments)}static registerModule(){ut.initializeModuleBinder(),ut._registerModule(...arguments)}constructor(e,n,i){super(),ut.initializeModuleBinder(i),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new _h(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new nd(this),this.optionsList=new Cr(this,"table constructor"),this.dependencyRegistry=new sd(this),this.initialized=!1,this.destroyed=!1,this.initializeElement(e)&&(this.initializeCoreSystems(n),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement?(this.element=e,!0):typeof e=="string"?(this.element=document.querySelector(e),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initializeCoreSystems(e){this.columnManager=new kh(this),this.rowManager=new Yh(this),this.footerManager=new Zh(this),this.dataLoader=new ed(this),this.alertManager=new dd(this),this._bindModules(),this.options=this.optionsList.generate(ut.defaultOptions,e),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new td(this,this.options,this.options.debugEventsExternal),this.eventBus=new id(this.options.debugEventsInternal),this.interactionMonitor=new qh(this),this.dataLoader.initialize(),this.footerManager.initialize(),this.dependencyRegistry.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(e.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var e=this.element,n=this.options,i;if(e.tagName==="TABLE"){this.originalElement=this.element,i=document.createElement("div");var s=e.attributes;for(var t in s)typeof s[t]=="object"&&i.setAttribute(s[t].name,s[t].value);e.parentNode.replaceChild(i,e),this.element=e=i}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",e.style.height=n.height),n.minHeight!==!1&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",e.style.minHeight=n.minHeight),n.maxHeight!==!1&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",e.style.maxHeight=n.maxHeight)}_initializeTable(){var e=this.element,n=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(i=>{i.initialize()}),e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),n.footerElement&&this.footerManager.activate(),n.autoColumns&&n.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(i=>{i.initialize()}),this.columnManager.setColumns(n.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var e=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):e.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.slice(0,4))}initGuard(e,n){var i,s;return this.options.debugInitialization&&!this.initialized&&(e||(i=new Error().stack.split(`
`),s=i[0]=="Error"?i[2]:i[1],s[0]==" "?e=s.trim().split(" ")[1].split(".")[1]:e=s.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+e+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(n?" "+n:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(e,n,i){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(e,n,i,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,n,i){return this.initGuard(),this.dataLoader.load(e,n,i,!0,!0)}updateData(e){var n=0;return this.initGuard(),new Promise((i,s)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(t=>{var r=this.rowManager.findRow(t[this.options.index]);r?(n++,r.updateData(t).then(()=>{n--,n||i()}).catch(o=>{s("Update Error - Unable to update row",t,o)})):s("Update Error - Unable to find row",t)}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})}addData(e,n,i){return this.initGuard(),new Promise((s,t)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,n,i).then(r=>{var o=[];r.forEach(function(a){o.push(a.getComponent())}),s(o)}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})}updateOrAddData(e){var n=[],i=0;return this.initGuard(),new Promise((s,t)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(r=>{var o=this.rowManager.findRow(r[this.options.index]);i++,o?o.updateData(r).then(()=>{i--,n.push(o.getComponent()),i||s(n)}):this.rowManager.addRows(r).then(a=>{i--,n.push(a[0].getComponent()),i||s(n)})}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})}getRow(e){var n=this.rowManager.findRow(e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e){var n=this.rowManager.getRowFromPosition(e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var n=[];this.initGuard(),Array.isArray(e)||(e=[e]);for(let i of e){let s=this.rowManager.findRow(i,!0);if(s)n.push(s);else return console.error("Delete Error - No matching row found:",i),Promise.reject("Delete Error - No matching row found")}return n.sort((i,s)=>this.rowManager.rows.indexOf(i)>this.rowManager.rows.indexOf(s)?1:-1),n.forEach(i=>{i.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,n,i){return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),this.rowManager.addRows(e,n,i,!0).then(s=>s[0].getComponent())}updateOrAddRow(e,n){var i=this.rowManager.findRow(e);return this.initGuard(),typeof n=="string"&&(n=JSON.parse(n)),i?i.updateData(n).then(()=>i.getComponent()):this.rowManager.addRows(n).then(s=>s[0].getComponent())}updateRow(e,n){var i=this.rowManager.findRow(e);return this.initGuard(),typeof n=="string"&&(n=JSON.parse(n)),i?i.updateData(n).then(()=>Promise.resolve(i.getComponent())):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,n,i){var s=this.rowManager.findRow(e);return s?this.rowManager.scrollToRow(s,n,i):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,n,i){var s=this.rowManager.findRow(e);this.initGuard(),s?s.moveToRow(n,i):console.warn("Move Error - No matching row found:",e)}getRows(e){return this.rowManager.getComponents(e)}getRowPosition(e){var n=this.rowManager.findRow(e);return n?n.getPosition():(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(e)}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var n=this.columnManager.findColumn(e);return n?n.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.show();else return console.warn("Column Show Error - No matching column found:",e),!1}hideColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.hide();else return console.warn("Column Hide Error - No matching column found:",e),!1}toggleColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.visible?n.hide():n.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1}addColumn(e,n,i){var s=this.columnManager.findColumn(i);return this.initGuard(),this.columnManager.addColumn(e,n,s).then(t=>t.getComponent())}deleteColumn(e){var n=this.columnManager.findColumn(e);return this.initGuard(),n?n.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,n){var i=this.columnManager.findColumn(e);return this.initGuard(),i?i.updateDefinition(n):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,n,i){var s=this.columnManager.findColumn(e),t=this.columnManager.findColumn(n);this.initGuard(),s?t?this.columnManager.moveColumn(s,t,i):console.warn("Move Error - No matching column found:",t):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,n,i){return new Promise((s,t)=>{var r=this.columnManager.findColumn(e);return r?this.columnManager.scrollToColumn(r,n,i):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initGuard(),this.columnManager.redraw(e),this.rowManager.redraw(e)}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(e,n){this.externalEvents.subscribe(e,n)}off(e,n){this.externalEvents.unsubscribe(e,n)}dispatchEvent(){var e=Array.from(arguments);e.shift(),this.externalEvents.dispatch(...arguments)}alert(e,n){this.initGuard(),this.alertManager.alert(e,n)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(e,n){return this.modules[e]?!0:(n&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var n=this.modules[e];return n||console.error("Tabulator module not installed: "+e),n}};X(ut,"defaultOptions",$h);let yn=ut;var zt=yn;class cd extends zt{static extendModule(){zt.initializeModuleBinder(ji),zt._extendModule(...arguments)}static registerModule(){zt.initializeModuleBinder(ji),zt._registerModule(...arguments)}constructor(e,n,i){super(e,n,ji)}}var fd=cd,ri={exports:{}},pd=ri.exports,os;function md(){return os||(os=1,function(c,e){var n={};(function(s,t){c.exports=t()})(typeof self<"u"?self:pd,function(){return function(i){var s={};function t(r){if(s[r])return s[r].exports;var o=s[r]={i:r,l:!1,exports:{}};return i[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=i,t.c=s,t.d=function(r,o,a){t.o(r,o)||Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:a})},t.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(o,"a",o),o},t.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},t.p="",t(t.s=245)}([function(i,s,t){var r=t(9),o=t(71),a=t(4),l=t(8),u=t(73).f,d=t(148),h=t(15),f=t(58),m=t(39),g=t(13),v=function(p){var E=function(R,O,T){if(this instanceof E){switch(arguments.length){case 0:return new p;case 1:return new p(R);case 2:return new p(R,O)}return new p(R,O,T)}return o(p,this,arguments)};return E.prototype=p.prototype,E};i.exports=function(p,E){var R=p.target,O=p.global,T=p.stat,D=p.proto,M=O?r:T?r[R]:(r[R]||{}).prototype,P=O?h:h[R]||m(h,R,{})[R],C=P.prototype,y,b,w,S,L,j,B,F,A;for(S in E)y=d(O?S:R+(T?".":"#")+S,p.forced),b=!y&&M&&g(M,S),j=P[S],b&&(p.dontCallGetSet?(A=u(M,S),B=A&&A.value):B=M[S]),L=b&&B?B:E[S],!(b&&typeof j==typeof L)&&(p.bind&&b?F=f(L,r):p.wrap&&b?F=v(L):D&&l(L)?F=a(L):F=L,(p.sham||L&&L.sham||j&&j.sham)&&m(F,"sham",!0),m(P,S,F),D&&(w=R+"Prototype",g(h,w)||m(h,w,{}),m(h[w],S,L),p.real&&C&&!C[S]&&m(C,S,L)))}},function(i,s){function t(r){return r&&r.__esModule?r:{default:r}}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){Object.defineProperty(s,"__esModule",{value:!0});var r=t(288);t.d(s,"default",function(){return r.a});var o=t(124);t.d(s,"VERSION",function(){return o.VERSION}),t.d(s,"restArguments",function(){return o.restArguments}),t.d(s,"isObject",function(){return o.isObject}),t.d(s,"isNull",function(){return o.isNull}),t.d(s,"isUndefined",function(){return o.isUndefined}),t.d(s,"isBoolean",function(){return o.isBoolean}),t.d(s,"isElement",function(){return o.isElement}),t.d(s,"isString",function(){return o.isString}),t.d(s,"isNumber",function(){return o.isNumber}),t.d(s,"isDate",function(){return o.isDate}),t.d(s,"isRegExp",function(){return o.isRegExp}),t.d(s,"isError",function(){return o.isError}),t.d(s,"isSymbol",function(){return o.isSymbol}),t.d(s,"isArrayBuffer",function(){return o.isArrayBuffer}),t.d(s,"isDataView",function(){return o.isDataView}),t.d(s,"isArray",function(){return o.isArray}),t.d(s,"isFunction",function(){return o.isFunction}),t.d(s,"isArguments",function(){return o.isArguments}),t.d(s,"isFinite",function(){return o.isFinite}),t.d(s,"isNaN",function(){return o.isNaN}),t.d(s,"isTypedArray",function(){return o.isTypedArray}),t.d(s,"isEmpty",function(){return o.isEmpty}),t.d(s,"isMatch",function(){return o.isMatch}),t.d(s,"isEqual",function(){return o.isEqual}),t.d(s,"isMap",function(){return o.isMap}),t.d(s,"isWeakMap",function(){return o.isWeakMap}),t.d(s,"isSet",function(){return o.isSet}),t.d(s,"isWeakSet",function(){return o.isWeakSet}),t.d(s,"keys",function(){return o.keys}),t.d(s,"allKeys",function(){return o.allKeys}),t.d(s,"values",function(){return o.values}),t.d(s,"pairs",function(){return o.pairs}),t.d(s,"invert",function(){return o.invert}),t.d(s,"functions",function(){return o.functions}),t.d(s,"methods",function(){return o.methods}),t.d(s,"extend",function(){return o.extend}),t.d(s,"extendOwn",function(){return o.extendOwn}),t.d(s,"assign",function(){return o.assign}),t.d(s,"defaults",function(){return o.defaults}),t.d(s,"create",function(){return o.create}),t.d(s,"clone",function(){return o.clone}),t.d(s,"tap",function(){return o.tap}),t.d(s,"get",function(){return o.get}),t.d(s,"has",function(){return o.has}),t.d(s,"mapObject",function(){return o.mapObject}),t.d(s,"identity",function(){return o.identity}),t.d(s,"constant",function(){return o.constant}),t.d(s,"noop",function(){return o.noop}),t.d(s,"toPath",function(){return o.toPath}),t.d(s,"property",function(){return o.property}),t.d(s,"propertyOf",function(){return o.propertyOf}),t.d(s,"matcher",function(){return o.matcher}),t.d(s,"matches",function(){return o.matches}),t.d(s,"times",function(){return o.times}),t.d(s,"random",function(){return o.random}),t.d(s,"now",function(){return o.now}),t.d(s,"escape",function(){return o.escape}),t.d(s,"unescape",function(){return o.unescape}),t.d(s,"templateSettings",function(){return o.templateSettings}),t.d(s,"template",function(){return o.template}),t.d(s,"result",function(){return o.result}),t.d(s,"uniqueId",function(){return o.uniqueId}),t.d(s,"chain",function(){return o.chain}),t.d(s,"iteratee",function(){return o.iteratee}),t.d(s,"partial",function(){return o.partial}),t.d(s,"bind",function(){return o.bind}),t.d(s,"bindAll",function(){return o.bindAll}),t.d(s,"memoize",function(){return o.memoize}),t.d(s,"delay",function(){return o.delay}),t.d(s,"defer",function(){return o.defer}),t.d(s,"throttle",function(){return o.throttle}),t.d(s,"debounce",function(){return o.debounce}),t.d(s,"wrap",function(){return o.wrap}),t.d(s,"negate",function(){return o.negate}),t.d(s,"compose",function(){return o.compose}),t.d(s,"after",function(){return o.after}),t.d(s,"before",function(){return o.before}),t.d(s,"once",function(){return o.once}),t.d(s,"findKey",function(){return o.findKey}),t.d(s,"findIndex",function(){return o.findIndex}),t.d(s,"findLastIndex",function(){return o.findLastIndex}),t.d(s,"sortedIndex",function(){return o.sortedIndex}),t.d(s,"indexOf",function(){return o.indexOf}),t.d(s,"lastIndexOf",function(){return o.lastIndexOf}),t.d(s,"find",function(){return o.find}),t.d(s,"detect",function(){return o.detect}),t.d(s,"findWhere",function(){return o.findWhere}),t.d(s,"each",function(){return o.each}),t.d(s,"forEach",function(){return o.forEach}),t.d(s,"map",function(){return o.map}),t.d(s,"collect",function(){return o.collect}),t.d(s,"reduce",function(){return o.reduce}),t.d(s,"foldl",function(){return o.foldl}),t.d(s,"inject",function(){return o.inject}),t.d(s,"reduceRight",function(){return o.reduceRight}),t.d(s,"foldr",function(){return o.foldr}),t.d(s,"filter",function(){return o.filter}),t.d(s,"select",function(){return o.select}),t.d(s,"reject",function(){return o.reject}),t.d(s,"every",function(){return o.every}),t.d(s,"all",function(){return o.all}),t.d(s,"some",function(){return o.some}),t.d(s,"any",function(){return o.any}),t.d(s,"contains",function(){return o.contains}),t.d(s,"includes",function(){return o.includes}),t.d(s,"include",function(){return o.include}),t.d(s,"invoke",function(){return o.invoke}),t.d(s,"pluck",function(){return o.pluck}),t.d(s,"where",function(){return o.where}),t.d(s,"max",function(){return o.max}),t.d(s,"min",function(){return o.min}),t.d(s,"shuffle",function(){return o.shuffle}),t.d(s,"sample",function(){return o.sample}),t.d(s,"sortBy",function(){return o.sortBy}),t.d(s,"groupBy",function(){return o.groupBy}),t.d(s,"indexBy",function(){return o.indexBy}),t.d(s,"countBy",function(){return o.countBy}),t.d(s,"partition",function(){return o.partition}),t.d(s,"toArray",function(){return o.toArray}),t.d(s,"size",function(){return o.size}),t.d(s,"pick",function(){return o.pick}),t.d(s,"omit",function(){return o.omit}),t.d(s,"first",function(){return o.first}),t.d(s,"head",function(){return o.head}),t.d(s,"take",function(){return o.take}),t.d(s,"initial",function(){return o.initial}),t.d(s,"last",function(){return o.last}),t.d(s,"rest",function(){return o.rest}),t.d(s,"tail",function(){return o.tail}),t.d(s,"drop",function(){return o.drop}),t.d(s,"compact",function(){return o.compact}),t.d(s,"flatten",function(){return o.flatten}),t.d(s,"without",function(){return o.without}),t.d(s,"uniq",function(){return o.uniq}),t.d(s,"unique",function(){return o.unique}),t.d(s,"union",function(){return o.union}),t.d(s,"intersection",function(){return o.intersection}),t.d(s,"difference",function(){return o.difference}),t.d(s,"unzip",function(){return o.unzip}),t.d(s,"transpose",function(){return o.transpose}),t.d(s,"zip",function(){return o.zip}),t.d(s,"object",function(){return o.object}),t.d(s,"range",function(){return o.range}),t.d(s,"chunk",function(){return o.chunk}),t.d(s,"mixin",function(){return o.mixin})},function(i,s){i.exports=function(t){try{return!!t()}catch{return!0}}},function(i,s,t){var r=t(72),o=Function.prototype,a=o.bind,l=o.call,u=r&&a.bind(l,l);i.exports=r?function(d){return d&&u(d)}:function(d){return d&&function(){return l.apply(d,arguments)}}},function(i,s,t){var r=t(9),o=t(75),a=t(13),l=t(112),u=t(55),d=t(146),h=o("wks"),f=r.Symbol,m=f&&f.for,g=d?f:f&&f.withoutSetter||l;i.exports=function(v){if(!a(h,v)||!(u||typeof h[v]=="string")){var p="Symbol."+v;u&&a(f,v)?h[v]=f[v]:d&&m?h[v]=m(p):h[v]=g(p)}return h[v]}},function(i,s,t){(function(r){t.d(s,"e",function(){return o}),t.d(s,"p",function(){return a}),t.d(s,"a",function(){return l}),t.d(s,"c",function(){return u}),t.d(s,"d",function(){return d}),t.d(s,"o",function(){return h}),t.d(s,"q",function(){return f}),t.d(s,"t",function(){return m}),t.d(s,"i",function(){return g}),t.d(s,"r",function(){return v}),t.d(s,"s",function(){return p}),t.d(s,"k",function(){return E}),t.d(s,"m",function(){return R}),t.d(s,"j",function(){return O}),t.d(s,"l",function(){return T}),t.d(s,"g",function(){return D}),t.d(s,"f",function(){return M}),t.d(s,"h",function(){return P}),t.d(s,"n",function(){return C}),t.d(s,"b",function(){return y});var o="1.12.1",a=typeof self=="object"&&self.self===self&&self||typeof r=="object"&&r.global===r&&r||Function("return this")()||{},l=Array.prototype,u=Object.prototype,d=typeof Symbol<"u"?Symbol.prototype:null,h=l.push,f=l.slice,m=u.toString,g=u.hasOwnProperty,v=typeof ArrayBuffer<"u",p=typeof DataView<"u",E=Array.isArray,R=Object.keys,O=Object.create,T=v&&ArrayBuffer.isView,D=isNaN,M=isFinite,P=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],y=Math.pow(2,53)-1}).call(s,t(108))},function(i,s,t){var r=t(15),o=t(13),a=t(142),l=t(34).f;i.exports=function(u){var d=r.Symbol||(r.Symbol={});o(d,u)||l(d,u,{value:a.f(u)})}},function(i,s){i.exports=function(t){return typeof t=="function"}},function(i,s,t){(function(r){var o=function(a){return a&&a.Math==Math&&a};i.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof r=="object"&&r)||function(){return this}()||Function("return this")()}).call(s,t(108))},function(i,s,t){i.exports=t(248)},function(i,s,t){var r=t(72),o=Function.prototype.call;i.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},function(i,s,t){var r=t(4);i.exports=r({}.isPrototypeOf)},function(i,s,t){var r=t(4),o=t(33),a=r({}.hasOwnProperty);i.exports=Object.hasOwn||function(u,d){return a(o(u),d)}},function(i,s,t){s.a=u;var r=t(50),o=t(6),a=t(41),l=t(177);function u(d){if(!Object(r.a)(d))return[];if(o.m)return Object(o.m)(d);var h=[];for(var f in d)Object(a.a)(d,f)&&h.push(f);return o.h&&Object(l.a)(d,h),h}},function(i,s){i.exports={}},function(i,s,t){s.a=o;var r=t(6);function o(a){var l="[object "+a+"]";return function(u){return r.t.call(u)===l}}},function(i,s,t){var r=t(8);i.exports=function(o){return typeof o=="object"?o!==null:r(o)}},function(i,s,t){var r=t(15),o=t(9),a=t(8),l=function(u){return a(u)?u:void 0};i.exports=function(u,d){return arguments.length<2?l(r[u])||l(o[u]):r[u]&&r[u][d]||o[u]&&o[u][d]}},function(i,s,t){s.a=l;var r=t(23),o=t(187),a=t(188);function l(u,d,h){return r.a.iteratee!==a.a?r.a.iteratee(u,d):Object(o.a)(u,d,h)}},function(i,s,t){var r=t(3);i.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(i,s,t){var r=t(17),o=String,a=TypeError;i.exports=function(l){if(r(l))return l;throw a(o(l)+" is not an object")}},function(i,s,t){s.a=r;function r(o,a){return a=a==null?o.length-1:+a,function(){for(var l=Math.max(arguments.length-a,0),u=Array(l),d=0;d<l;d++)u[d]=arguments[d+a];switch(a){case 0:return o.call(this,u);case 1:return o.call(this,arguments[0],u);case 2:return o.call(this,arguments[0],arguments[1],u)}var h=Array(a+1);for(d=0;d<a;d++)h[d]=arguments[d];return h[a]=u,o.apply(this,h)}}},function(i,s,t){s.a=o;var r=t(6);function o(a){if(a instanceof o)return a;if(!(this instanceof o))return new o(a);this._wrapped=a}o.VERSION=r.e,o.prototype.value=function(){return this._wrapped},o.prototype.valueOf=o.prototype.toJSON=o.prototype.value,o.prototype.toString=function(){return String(this._wrapped)}},function(i,s,t){var r=t(175),o=t(30);s.a=Object(r.a)(o.a)},function(i,s,t){i.exports=t(360)},function(i,s,t){var r=t(15);i.exports=function(o){return r[o+"Prototype"]}},function(i,s,t){var r=t(1),o=r(t(25)),a=r(t(10)),l=t(2),u=t(500),d=t(2),h=d.extend,f=t(67),m=t(43),g=t(31),v=g.getSessionToken,p=t(106),E=function(C,y){var b,w=new Date().getTime(),S=u(w+C);if(y){var L;return(0,o.default)(L="".concat(S,",")).call(L,w,",master")}return(0,o.default)(b="".concat(S,",")).call(b,w)},R=function(C,y){y?C["X-LC-Sign"]=E(f.applicationKey):C["X-LC-Key"]=f.applicationKey},O=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=arguments.length>1?arguments[1]:void 0,b={"X-LC-Id":f.applicationId,"Content-Type":"application/json;charset=UTF-8"},w=!1;return typeof C.useMasterKey=="boolean"?w=C.useMasterKey:typeof f._config.useMasterKey=="boolean"&&(w=f._config.useMasterKey),w?f.masterKey?y?b["X-LC-Sign"]=E(f.masterKey,!0):b["X-LC-Key"]="".concat(f.masterKey,",master"):(console.warn("masterKey is not set, fall back to use appKey"),R(b,y)):R(b,y),f.hookKey&&(b["X-LC-Hook-Key"]=f.hookKey),f._config.production!==null&&(b["X-LC-Prod"]=String(f._config.production)),b["X-LC-UA"]=f._sharedConfig.userAgent,a.default.resolve().then(function(){var S=v(C);if(S)b["X-LC-Session"]=S;else if(!f._config.disableCurrentUser)return f.User.currentAsync().then(function(L){return L&&L._sessionToken&&(b["X-LC-Session"]=L._sessionToken),b});return b})},T=function(C){var y=C.service,b=y===void 0?"api":y,w=C.version,S=w===void 0?"1.1":w,L=C.path,j=f._config.serverURLs[b];if(!j)throw new Error("undefined server URL for ".concat(b));return j.charAt(j.length-1)!=="/"&&(j+="/"),j+=S,L&&(j+=L),j},D=function(C){var y=C.service,b=C.version,w=C.method,S=C.path,L=C.query,j=C.data,B=C.authOptions,F=C.signKey,A=F===void 0?!0:F;if(!(f.applicationId&&(f.applicationKey||f.masterKey)))throw new Error("Not initialized");f._appRouter&&f._appRouter.refresh();var I=f._config.requestTimeout,x=T({service:y,path:S,version:b});return O(B,A).then(function(N){return p({method:w,url:x,query:L,data:j,headers:N,timeout:I}).catch(function(U){var W={code:U.code||-1,error:U.message||U.responseText};if(U.response&&U.response.code)W=U.response;else if(U.responseText)try{W=JSON.parse(U.responseText)}catch{}if(W.rawMessage=W.rawMessage||W.error,!f._sharedConfig.keepErrorRawMessage){var H,K;W.error+=(0,o.default)(H=(0,o.default)(K=" [".concat(U.statusCode||"N/A"," ")).call(K,w," ")).call(H,x,"]")}var Q=new m(W.code,W.error);throw delete W.error,l.extend(Q,W)})})},M=function(C,y,b,w,S,L,j){var B="";if(C&&(B+="/".concat(C)),y&&(B+="/".concat(y)),b&&(B+="/".concat(b)),S&&S._fetchWhenSave)throw new Error("_fetchWhenSave should be in the query");if(S&&S._where)throw new Error("_where should be in the query");return w&&w.toLowerCase()==="get"&&(j=h({},j,S),S=null),D({method:w,path:B,query:j,data:S,authOptions:L})};f.request=D,i.exports={_request:M,request:D}},function(i,s,t){var r=t(8),o=t(57),a=TypeError;i.exports=function(l){if(r(l))return l;throw a(o(l)+" is not a function")}},function(i,s,t){var r=t(16),o=t(6),a=Object(r.a)("Function"),l=o.p.document&&o.p.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof l!="function"&&(a=function(u){return typeof u=="function"||!1}),s.a=a},function(i,s,t){var r=t(176);s.a=Object(r.a)("length")},function(i,s,t){var r=t(1),o=r(t(53)),a=r(t(220)),l=r(t(10)),u=t(2),d=function(P){return u.isNull(P)||u.isUndefined(P)},h=function(P){return u.isArray(P)?P:P==null?[]:[P]},f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=(0,o.default)(P),y=P.include,b=P.includeACL,w={};return C&&(w.keys=h(C).join(",")),y&&(w.include=h(y).join(",")),b&&(w.returnACL=b),w},m=function(P){if(P.sessionToken)return P.sessionToken;if(P.user&&typeof P.user.getSessionToken=="function")return P.user.getSessionToken()},g=function(P){return function(C){return P(C),C}},v=function(){},p=function(P,C,y){var b;return C&&C.hasOwnProperty("constructor")?b=C.constructor:b=function(){P.apply(this,arguments)},u.extend(b,P),v.prototype=P.prototype,b.prototype=new v,C&&u.extend(b.prototype,C),y&&u.extend(b,y),b.prototype.constructor=b,b.__super__=P.prototype,b},E=typeof wx>"u"?function(M){return new Date(M)}:function(M){return new Date(Date.parse(M))},R=function(P,C,y){var b=C.split("."),w=b.pop(),S=P;return b.forEach(function(L){S[L]===void 0&&(S[L]={}),S=S[L]}),S[w]=y,P},O=function(P,C){for(var y=C.split("."),b=y[0],w=y.pop(),S=P,L=0;L<y.length;L++)if(S=S[y[L]],S===void 0)return[void 0,void 0,w];var j=S[w];return[j,S,w,b]},T=function(P){return u.isObject(P)&&(0,a.default)(P)===Object.prototype},D=function M(P,C){return P()?C().then(function(){return M(P,C)}):l.default.resolve()};i.exports={isNullOrUndefined:d,ensureArray:h,transformFetchOptions:f,getSessionToken:m,tap:g,inherits:p,parseDate:E,setValue:R,findValue:O,isPlainObject:T,continueWhile:D}},function(i,s){i.exports=!0},function(i,s,t){var r=t(74),o=Object;i.exports=function(a){return o(r(a))}},function(i,s,t){var r=t(20),o=t(147),a=t(149),l=t(21),u=t(88),d=TypeError,h=Object.defineProperty,f=Object.getOwnPropertyDescriptor,m="enumerable",g="configurable",v="writable";s.f=r?a?function(E,R,O){if(l(E),R=u(R),l(O),typeof E=="function"&&R==="prototype"&&"value"in O&&v in O&&!O[v]){var T=f(E,R);T&&T[v]&&(E[R]=O.value,O={configurable:g in O?O[g]:T[g],enumerable:m in O?O[m]:T[m],writable:!1})}return h(E,R,O)}:h:function(E,R,O){if(l(E),R=u(R),l(O),o)try{return h(E,R,O)}catch{}if("get"in O||"set"in O)throw d("Accessors not supported");return"value"in O&&(E[R]=O.value),E}},function(i,s,t){var r=t(109),o=t(74);i.exports=function(a){return r(o(a))}},function(i,s,t){var r=t(259);i.exports=function(o){return r(o.length)}},function(i,s,t){i.exports=t(372)},function(i,s,t){i.exports=t(227)},function(i,s,t){var r=t(20),o=t(34),a=t(44);i.exports=r?function(l,u,d){return o.f(l,u,a(1,d))}:function(l,u,d){return l[u]=d,l}},function(i,s,t){var r=t(47),o=String;i.exports=function(a){if(r(a)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return o(a)}},function(i,s,t){s.a=o;var r=t(6);function o(a,l){return a!=null&&r.i.call(a,l)}},function(i,s,t){i.exports=t(365)},function(i,s,t){var r=t(1),o=r(t(387)),a=r(t(220)),l=t(2);function u(d,h){if(this instanceof u&&this.constructor){var f=new Error(h);return(0,o.default)(f,(0,a.default)(this)),f.code=d,f}return new u(d,h)}u.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),(0,o.default)(u,Error),l.extend(u,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,X_DOMAIN_REQUEST:602}),i.exports=u},function(i,s){i.exports=function(t,r){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:r}}},function(i,s,t){var r=t(18);i.exports=r("navigator","userAgent")||""},function(i,s){i.exports={}},function(i,s,t){var r=t(121),o=t(8),a=t(54),l=t(5),u=l("toStringTag"),d=Object,h=a(function(){return arguments}())=="Arguments",f=function(m,g){try{return m[g]}catch{}};i.exports=r?a:function(m){var g,v,p;return m===void 0?"Undefined":m===null?"Null":typeof(v=f(g=d(m),u))=="string"?v:h?a(g):(p=a(g))=="Object"&&o(g.callee)?"Arguments":p}},function(i,s,t){var r=t(39);i.exports=function(o,a,l,u){return u&&u.enumerable?o[a]=l:r(o,a,l),o}},function(i,s,t){var r=t(28),o=function(a){var l,u;this.promise=new a(function(d,h){if(l!==void 0||u!==void 0)throw TypeError("Bad Promise constructor");l=d,u=h}),this.resolve=r(l),this.reject=r(u)};i.exports.f=function(a){return new o(a)}},function(i,s,t){s.a=r;function r(o){var a=typeof o;return a==="function"||a==="object"&&!!o}},function(i,s,t){var r=t(6),o=t(16);s.a=r.k||Object(o.a)("Array")},function(i,s,t){s.a=l;var r=t(83),o=t(24),a=t(14);function l(u,d,h){d=Object(r.a)(d,h);var f,m;if(Object(o.a)(u))for(f=0,m=u.length;f<m;f++)d(u[f],f,u);else{var g=Object(a.a)(u);for(f=0,m=g.length;f<m;f++)d(u[g[f]],g[f],u)}return u}},function(i,s,t){i.exports=t(378)},function(i,s,t){var r=t(4),o=r({}.toString),a=r("".slice);i.exports=function(l){return a(o(l),8,-1)}},function(i,s,t){var r=t(56),o=t(3);i.exports=!!Object.getOwnPropertySymbols&&!o(function(){var a=Symbol();return!String(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&r&&r<41})},function(i,s,t){var r=t(9),o=t(45),a=r.process,l=r.Deno,u=a&&a.versions||l&&l.version,d=u&&u.v8,h,f;d&&(h=d.split("."),f=h[0]>0&&h[0]<4?1:+(h[0]+h[1])),!f&&o&&(h=o.match(/Edge\/(\d+)/),(!h||h[1]>=74)&&(h=o.match(/Chrome\/(\d+)/),h&&(f=+h[1]))),i.exports=f},function(i,s){var t=String;i.exports=function(r){try{return t(r)}catch{return"Object"}}},function(i,s,t){var r=t(4),o=t(28),a=t(72),l=r(r.bind);i.exports=function(u,d){return o(u),d===void 0?u:a?l(u,d):function(){return u.apply(d,arguments)}}},function(i,s,t){var r=t(21),o=t(152),a=t(118),l=t(93),u=t(153),d=t(113),h=t(91),f=">",m="<",g="prototype",v="script",p=h("IE_PROTO"),E=function(){},R=function(P){return m+v+f+P+m+"/"+v+f},O=function(P){P.write(R("")),P.close();var C=P.parentWindow.Object;return P=null,C},T=function(){var P=d("iframe"),C="java"+v+":",y;return P.style.display="none",u.appendChild(P),P.src=String(C),y=P.contentWindow.document,y.open(),y.write(R("document.F=Object")),y.close(),y.F},D,M=function(){try{D=new ActiveXObject("htmlfile")}catch{}M=typeof document<"u"?document.domain&&D?O(D):T():O(D);for(var P=a.length;P--;)delete M[g][a[P]];return M()};l[p]=!0,i.exports=Object.create||function(C,y){var b;return C!==null?(E[g]=r(C),b=new E,E[g]=null,b[p]=C):b=M(),y===void 0?b:o.f(b,y)}},function(i,s,t){var r=t(35),o=t(122),a=t(46),l=t(95),u=t(34).f,d=t(157),h=t(32),f=t(20),m="Array Iterator",g=l.set,v=l.getterFor(m);i.exports=d(Array,"Array",function(E,R){g(this,{type:m,target:r(E),index:0,kind:R})},function(){var E=v(this),R=E.target,O=E.kind,T=E.index++;return!R||T>=R.length?(E.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:T,done:!1}:O=="values"?{value:R[T],done:!1}:{value:[T,R[T]],done:!1}},"values");var p=a.Arguments=a.Array;if(o("keys"),o("values"),o("entries"),!h&&f&&p.name!=="values")try{u(p,"name",{value:"values"})}catch{}},function(i,s,t){var r=t(121),o=t(34).f,a=t(39),l=t(13),u=t(266),d=t(5),h=d("toStringTag");i.exports=function(f,m,g,v){if(f){var p=g?f:f.prototype;l(p,h)||o(p,h,{configurable:!0,value:m}),v&&!r&&a(p,"toString",u)}}},function(i,s,t){var r=t(9);i.exports=r.Promise},function(i,s,t){t(60);var r=t(287),o=t(9),a=t(47),l=t(39),u=t(46),d=t(5),h=d("toStringTag");for(var f in r){var m=o[f],g=m&&m.prototype;g&&a(g)!==h&&l(g,h,f),u[f]=u.Array}},function(i,s,t){s.a=o;var r=t(14);function o(a){for(var l=Object(r.a)(a),u=l.length,d=Array(u),h=0;h<u;h++)d[h]=a[l[h]];return d}},function(i,s,t){s.a=u;var r=t(30),o=t(24),a=t(51),l=t(127);function u(d,h,f,m){if(m=m||[],!h&&h!==0)h=1/0;else if(h<=0)return m.concat(d);for(var g=m.length,v=0,p=Object(r.a)(d);v<p;v++){var E=d[v];if(Object(o.a)(E)&&(Object(a.a)(E)||Object(l.a)(E)))if(h>1)u(E,h-1,f,m),g=m.length;else for(var R=0,O=E.length;R<O;)m[g++]=E[R++];else f||(m[g++]=E)}return m}},function(i,s,t){s.a=l;var r=t(19),o=t(24),a=t(14);function l(u,d,h){d=Object(r.a)(d,h);for(var f=!Object(o.a)(u)&&Object(a.a)(u),m=(f||u).length,g=Array(m),v=0;v<m;v++){var p=f?f[v]:v;g[v]=d(u[p],p,u)}return g}},function(i,s,t){(function(r){var o=t(1),a=o(t(10)),l=o(t(25)),u=o(t(42)),d=o(t(217)),h=o(t(37)),f=o(t(68)),m=o(t(53)),g=t(2),v=t(219),p=t(69),E=t(31),R=E.inherits,O=E.parseDate,T=t(222),D=t(70),M=D.setAdapters,P=D.adapterManager,C=r.AV||{};C._config={serverURLs:{},useMasterKey:!1,production:null,realtime:null,requestTimeout:null};var y="LeanCloud-JS-SDK/".concat(T);C._sharedConfig={userAgent:y,liveQueryRealtime:null},P.on("platformInfo",function(b){var w=y;if(b)if(b.userAgent)w=b.userAgent;else{var S=b.name;b.version&&(S+="/".concat(b.version)),b.extra&&(S+="; ".concat(b.extra)),w+=" (".concat(S,")")}C._sharedConfig.userAgent=w}),C._getAVPath=function(b){if(!C.applicationId)throw new Error("You need to call AV.initialize before using AV.");if(b||(b=""),!g.isString(b))throw new Error("Tried to get a localStorage path that wasn't a String.");return b[0]==="/"&&(b=b.substring(1)),"AV/"+C.applicationId+"/"+b},C._installationId=null,C._getInstallationId=function(){if(C._installationId)return a.default.resolve(C._installationId);var b=C._getAVPath("installationId");return C.localStorage.getItemAsync(b).then(function(w){return C._installationId=w,C._installationId?w:(C._installationId=w=v(),C.localStorage.setItemAsync(b,w).then(function(){return w}))})},C._subscriptionId=null,C._refreshSubscriptionId=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C._getAVPath("subscriptionId"),w=C._subscriptionId=v();return C.localStorage.setItemAsync(b,w).then(function(){return w})},C._getSubscriptionId=function(){if(C._subscriptionId)return a.default.resolve(C._subscriptionId);var b=C._getAVPath("subscriptionId");return C.localStorage.getItemAsync(b).then(function(w){return C._subscriptionId=w,C._subscriptionId||(w=C._refreshSubscriptionId(b)),w})},C._parseDate=O,C._extend=function(b,w){var S=R(this,b,w);return S.extend=this.extend,S},C._encode=function(b,w,S){var L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(b instanceof C.Object){if(S)throw new Error("AV.Objects not allowed here");return!w||g.include(w,b)||!b._hasData?b._toPointer():b._toFullJSON((0,l.default)(w).call(w,b),L)}if(b instanceof C.ACL)return b.toJSON();if(g.isDate(b))return L?{__type:"Date",iso:b.toJSON()}:b.toJSON();if(b instanceof C.GeoPoint)return b.toJSON();if(g.isArray(b))return(0,u.default)(g).call(g,b,function(j){return C._encode(j,w,S,L)});if(g.isRegExp(b))return b.source;if(b instanceof C.Relation||b instanceof C.Op)return b.toJSON();if(b instanceof C.File){if(!b.url()&&!b.id)throw new Error("Tried to save an object containing an unsaved file.");return b._toFullJSON(w,L)}return g.isObject(b)?g.mapObject(b,function(j,B){return C._encode(j,w,S,L)}):b},C._decode=function(b,w){if(!g.isObject(b)||g.isDate(b))return b;if(g.isArray(b))return(0,u.default)(g).call(g,b,function(N){return C._decode(N)});if(b instanceof C.Object||b instanceof C.File||b instanceof C.Op||b instanceof C.GeoPoint||b instanceof C.ACL)return b;if(w==="ACL")return new C.ACL(b);if(b.__op)return C.Op._decode(b);var S;if(b.__type==="Pointer"){S=b.className;var L=C.Object._create(S);if((0,d.default)(b).length>3){var j=g.clone(b);delete j.__type,delete j.className,L._finishFetch(j,!0)}else L._finishFetch({objectId:b.objectId},!1);return L}if(b.__type==="Object"){S=b.className;var B=g.clone(b);delete B.__type,delete B.className;var F=C.Object._create(S);return F._finishFetch(B,!0),F}if(b.__type==="Date")return C._parseDate(b.iso);if(b.__type==="GeoPoint")return new C.GeoPoint({latitude:b.latitude,longitude:b.longitude});if(b.__type==="Relation"){if(!w)throw new Error("key missing decoding a Relation");var A=new C.Relation(null,w);return A.targetClassName=b.className,A}if(b.__type==="File"){var I=new C.File(b.name),x=g.clone(b);return delete x.__type,I._finishFetch(x),I}return g.mapObject(b,C._decode)},C.parseJSON=C._decode,C.parse=function(b){return C.parseJSON(JSON.parse(b))},C.stringify=function(b){return(0,h.default)(C._encode(b,[],!1,!0))},C._encodeObjectOrArray=function(b){var w=function(L){return L&&L._toFullJSON&&(L=L._toFullJSON([])),g.mapObject(L,function(j){return C._encode(j,[])})};return g.isArray(b)?(0,u.default)(b).call(b,function(S){return w(S)}):w(b)},C._arrayEach=g.each,C._traverse=function(b,w,S){return b instanceof C.Object?(S=S||[],(0,f.default)(g).call(g,S,b)>=0?void 0:(S.push(b),C._traverse(b.attributes,w,S),w(b))):b instanceof C.Relation||b instanceof C.File?w(b):g.isArray(b)?(g.each(b,function(L,j){var B=C._traverse(L,w,S);B&&(b[j]=B)}),w(b)):(g.isObject(b)&&C._each(b,function(L,j){var B=C._traverse(L,w,S);B&&(b[j]=B)}),w(b))},C._objectEach=C._each=function(b,w){g.isObject(b)?g.each((0,m.default)(g).call(g,b),function(S){w(b[S],S)}):g.each(b,w)},C.debug={enable:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"leancloud*";return p.enable(w)},disable:p.disable},C.setAdapters=M,i.exports=C}).call(s,t(108))},function(i,s,t){i.exports=t(374)},function(i,s,t){function r(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(v){return typeof v}:r=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},r(m)}s.log=l,s.formatArgs=a,s.save=u,s.load=d,s.useColors=o,s.storage=h(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!!this.useColors){var g="color: "+this.color;m.splice(1,0,g,"color: inherit");var v=0,p=0;m[0].replace(/%[a-zA-Z%]/g,function(E){E!=="%%"&&(v++,E==="%c"&&(p=v))}),m.splice(p,0,g)}}function l(){var m;return(typeof console>"u"?"undefined":r(console))==="object"&&console.log&&(m=console).log.apply(m,arguments)}function u(m){try{m?s.storage.setItem("debug",m):s.storage.removeItem("debug")}catch{}}function d(){var m;try{m=s.storage.getItem("debug")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=n.DEBUG),m}function h(){try{return localStorage}catch{}}i.exports=t(383)(s);var f=i.exports.formatters;f.j=function(m){try{return JSON.stringify(m)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}},function(i,s,t){var r=t(1),o=r(t(53)),a=t(2),l=t(223),u=t(31),d=u.inherits,h=d(l,{constructor:function(){l.apply(this),this._adapters={}},getAdapter:function(g){var v=this._adapters[g];if(v===void 0)throw new Error("".concat(g," adapter is not configured"));return v},setAdapters:function(g){var v=this;a.extend(this._adapters,g),(0,o.default)(a).call(a,g).forEach(function(p){return v.emit(p,g[p])})}}),f=new h;i.exports={getAdapter:f.getAdapter.bind(f),setAdapters:f.setAdapters.bind(f),adapterManager:f}},function(i,s,t){var r=t(72),o=Function.prototype,a=o.apply,l=o.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(r?l.bind(a):function(){return l.apply(a,arguments)})},function(i,s,t){var r=t(3);i.exports=!r(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},function(i,s,t){var r=t(20),o=t(11),a=t(145),l=t(44),u=t(35),d=t(88),h=t(13),f=t(147),m=Object.getOwnPropertyDescriptor;s.f=r?m:function(v,p){if(v=u(v),p=d(p),f)try{return m(v,p)}catch{}if(h(v,p))return l(!o(a.f,v,p),v[p])}},function(i,s){var t=TypeError;i.exports=function(r){if(r==null)throw t("Can't call method on "+r);return r}},function(i,s,t){var r=t(32),o=t(111);(i.exports=function(a,l){return o[a]||(o[a]=l!==void 0?l:{})})("versions",[]).push({version:"3.23.3",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE",source:"https://github.com/zloirock/core-js"})},function(i,s,t){var r=t(58),o=t(11),a=t(21),l=t(57),u=t(154),d=t(36),h=t(12),f=t(155),m=t(94),g=t(156),v=TypeError,p=function(R,O){this.stopped=R,this.result=O},E=p.prototype;i.exports=function(R,O,T){var D=T&&T.that,M=!!(T&&T.AS_ENTRIES),P=!!(T&&T.IS_ITERATOR),C=!!(T&&T.INTERRUPTED),y=r(O,D),b,w,S,L,j,B,F,A=function(x){return b&&g(b,"normal",x),new p(!0,x)},I=function(x){return M?(a(x),C?y(x[0],x[1],A):y(x[0],x[1])):C?y(x,A):y(x)};if(P)b=R;else{if(w=m(R),!w)throw v(l(R)+" is not iterable");if(u(w)){for(S=0,L=d(R);L>S;S++)if(j=I(R[S]),j&&h(E,j))return j;return new p(!1)}b=f(R,w)}for(B=b.next;!(F=o(B,b)).done;){try{j=I(F.value)}catch(x){g(b,"throw",x)}if(typeof j=="object"&&j&&h(E,j))return j}return new p(!1)}},function(i,s){i.exports=function(t){try{return{error:!1,value:t()}}catch(r){return{error:!0,value:r}}}},function(i,s,t){var r=t(9),o=t(62),a=t(8),l=t(148),u=t(123),d=t(5),h=t(277),f=t(32),m=t(56),g=o&&o.prototype,v=d("species"),p=!1,E=a(r.PromiseRejectionEvent),R=l("Promise",function(){var O=u(o),T=O!==String(o);if(!T&&m===66||f&&!(g.catch&&g.finally))return!0;if(m>=51&&/native code/.test(O))return!1;var D=new o(function(C){C(1)}),M=function(C){C(function(){},function(){})},P=D.constructor={};return P[v]=M,p=D.then(function(){})instanceof M,p?!T&&h&&!E:!0});i.exports={CONSTRUCTOR:R,REJECTION_EVENT:E,SUBCLASSING:p}},function(i,s,t){var r=t(286).charAt,o=t(40),a=t(95),l=t(157),u="String Iterator",d=a.set,h=a.getterFor(u);l(String,"String",function(f){d(this,{type:u,string:o(f),index:0})},function(){var m=h(this),g=m.string,v=m.index,p;return v>=g.length?{value:void 0,done:!0}:(p=r(g,v),m.index+=p.length,{value:p,done:!1})})},function(i,s,t){t.d(s,"a",function(){return a}),t.d(s,"b",function(){return l});var r=t(6),o=t(294),a=r.s&&Object(o.a)(new DataView(new ArrayBuffer(8))),l=typeof Map<"u"&&Object(o.a)(new Map)},function(i,s,t){s.a=l;var r=t(50),o=t(6),a=t(177);function l(u){if(!Object(r.a)(u))return[];var d=[];for(var h in u)d.push(h);return o.h&&Object(a.a)(u,d),d}},function(i,s,t){s.a=o;var r=t(23);t(186);function o(a){return r.a.toPath(a)}},function(i,s,t){s.a=r;function r(o,a,l){if(a===void 0)return o;switch(l??3){case 1:return function(u){return o.call(a,u)};case 3:return function(u,d,h){return o.call(a,u,d,h)};case 4:return function(u,d,h,f){return o.call(a,u,d,h,f)}}return function(){return o.apply(a,arguments)}}},function(i,s,t){s.a=a;var r=t(19),o=t(52);function a(l,u,d){var h=[];return u=Object(r.a)(u,d),Object(o.a)(l,function(f,m,g){u(f,m,g)&&h.push(f)}),h}},function(i,s,t){s.a=l;var r=t(24),o=t(64),a=t(202);function l(u,d,h,f){return Object(r.a)(u)||(u=Object(o.a)(u)),(typeof h!="number"||f)&&(h=0),Object(a.a)(u,d,h)>=0}},function(i,s,t){var r=t(54);i.exports=Array.isArray||function(a){return r(a)=="Array"}},function(i,s,t){i.exports=t(230)},function(i,s,t){var r=t(252),o=t(89);i.exports=function(a){var l=r(a,"string");return o(l)?l:l+""}},function(i,s,t){var r=t(18),o=t(8),a=t(12),l=t(146),u=Object;i.exports=l?function(d){return typeof d=="symbol"}:function(d){var h=r("Symbol");return o(h)&&a(h.prototype,u(d))}},function(i,s,t){var r=t(13),o=t(8),a=t(33),l=t(91),u=t(150),d=l("IE_PROTO"),h=Object,f=h.prototype;i.exports=u?h.getPrototypeOf:function(m){var g=a(m);if(r(g,d))return g[d];var v=g.constructor;return o(v)&&g instanceof v?v.prototype:g instanceof h?f:null}},function(i,s,t){var r=t(75),o=t(112),a=r("keys");i.exports=function(l){return a[l]||(a[l]=o(l))}},function(i,s,t){var r=t(4),o=t(21),a=t(255);i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l=!1,u={},d;try{d=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),d(u,[]),l=u instanceof Array}catch{}return function(f,m){return o(f),a(m),l?d(f,m):f.__proto__=m,f}}():void 0)},function(i,s){i.exports={}},function(i,s,t){var r=t(47),o=t(110),a=t(46),l=t(5),u=l("iterator");i.exports=function(d){if(d!=null)return o(d,u)||o(d,"@@iterator")||a[r(d)]}},function(i,s,t){var r=t(264),o=t(9),a=t(4),l=t(17),u=t(39),d=t(13),h=t(111),f=t(91),m=t(93),g="Object already initialized",v=o.TypeError,p=o.WeakMap,E,R,O,T=function(w){return O(w)?R(w):E(w,{})},D=function(w){return function(S){var L;if(!l(S)||(L=R(S)).type!==w)throw v("Incompatible receiver, "+w+" required");return L}};if(r||h.state){var M=h.state||(h.state=new p),P=a(M.get),C=a(M.has),y=a(M.set);E=function(w,S){if(C(M,w))throw new v(g);return S.facade=w,y(M,w,S),S},R=function(w){return P(M,w)||{}},O=function(w){return C(M,w)}}else{var b=f("state");m[b]=!0,E=function(w,S){if(d(w,b))throw new v(g);return S.facade=w,u(w,b,S),S},R=function(w){return d(w,b)?w[b]:{}},O=function(w){return d(w,b)}}i.exports={set:E,get:R,has:O,enforce:T,getterFor:D}},function(i,s){},function(i,s,t){var r=t(54),o=t(9);i.exports=r(o.process)=="process"},function(i,s,t){var r=t(4),o=t(3),a=t(8),l=t(47),u=t(18),d=t(123),h=function(){},f=[],m=u("Reflect","construct"),g=/^\s*(?:class|function)\b/,v=r(g.exec),p=!g.exec(h),E=function(T){if(!a(T))return!1;try{return m(h,f,T),!0}catch{return!1}},R=function(T){if(!a(T))return!1;switch(l(T)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!v(g,d(T))}catch{return!0}};R.sham=!0,i.exports=!m||o(function(){var O;return E(E.call)||!E(Object)||!E(function(){O=!0})||O})?R:E},function(i,s,t){var r=t(4);i.exports=r([].slice)},function(i,s,t){s.a=a;var r=t(131),o=t(178);function a(l){return l=Object(r.a)({},l),function(u){return Object(o.a)(u,l)}}},function(i,s,t){var r=t(22),o=t(194),a=t(23),l=Object(r.a)(function(u,d){var h=l.placeholder,f=function(){for(var m=0,g=d.length,v=Array(g),p=0;p<g;p++)v[p]=d[p]===h?arguments[m++]:d[p];for(;m<arguments.length;)v.push(arguments[m++]);return Object(o.a)(u,f,this,this,v)};return f});l.placeholder=a.a,s.a=l},function(i,s,t){s.a=a;var r=t(19),o=t(52);function a(l,u){return function(d,h,f){var m=u?[[],[]]:{};return h=Object(r.a)(h,f),Object(o.a)(d,function(g,v){var p=h(g,v,d);l(m,g,p)}),m}}},function(i,s,t){var r=t(88),o=t(34),a=t(44);i.exports=function(l,u,d){var h=r(u);h in l?o.f(l,h,a(0,d)):l[h]=d}},function(i,s,t){var r=t(3),o=t(5),a=t(56),l=o("species");i.exports=function(u){return a>=51||!r(function(){var d=[],h=d.constructor={};return h[l]=function(){return{foo:1}},d[u](Boolean).foo!==1})}},function(i,s,t){var r=t(58),o=t(4),a=t(109),l=t(33),u=t(36),d=t(216),h=o([].push),f=function(m){var g=m==1,v=m==2,p=m==3,E=m==4,R=m==6,O=m==7,T=m==5||R;return function(D,M,P,C){for(var y=l(D),b=a(y),w=r(M,P),S=u(b),L=0,j=C||d,B=g?j(D,S):v||O?j(D,0):void 0,F,A;S>L;L++)if((T||L in b)&&(F=b[L],A=w(F,L,y),m))if(g)B[L]=A;else if(A)switch(m){case 3:return!0;case 5:return F;case 6:return L;case 2:h(B,F)}else switch(m){case 4:return!1;case 7:h(B,F)}return R?-1:p||E?E:B}};i.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},function(i,s,t){var r=t(1),o=r(t(141)),a=r(t(436)),l=r(t(42)),u=r(t(217)),d=r(t(37)),h=r(t(25));t(2);var f=t(441),m=f.timeout,g=t(69),v=g("leancloud:request"),p=g("leancloud:request:error"),E=t(70),R=E.getAdapter,O=0,T=function(M){var P=M.method,C=M.url,y=M.query,b=M.data,w=M.headers,S=w===void 0?{}:w,L=M.timeout,j=M.onprogress;if(y){var B,F,A,I=(0,a.default)(B=(0,l.default)(F=(0,u.default)(y)).call(F,function(W){var H,K=y[W];if(K!==void 0){var Q=(0,o.default)(K)==="object"?(0,d.default)(K):K;return(0,h.default)(H="".concat(encodeURIComponent(W),"=")).call(H,encodeURIComponent(Q))}})).call(B,function(W){return W}).join("&");C=(0,h.default)(A="".concat(C,"?")).call(A,I)}var x=O++;v("request(%d) %s %s %o %o %o",x,P,C,y,b,S);var N=R("request"),U=N(C,{method:P,headers:S,data:b,onprogress:j}).then(function(W){if(v("response(%d) %d %O %o",x,W.status,W.data||W.text,W.header),W.ok===!1){var H=new Error;throw H.response=W,H}return W.data}).catch(function(W){throw W.response&&(g.enabled("leancloud:request")||p("request(%d) %s %s %o %o %o",x,P,C,y,b,S),p("response(%d) %d %O %o",x,W.response.status,W.response.data||W.response.text,W.response.header),W.statusCode=W.response.status,W.responseText=W.response.text,W.response=W.response.data),W});return L?m(U,L):U};i.exports=T},function(i,s,t){i.exports=t(446)},function(i,s){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(t=window)}i.exports=t},function(i,s,t){var r=t(4),o=t(3),a=t(54),l=Object,u=r("".split);i.exports=o(function(){return!l("z").propertyIsEnumerable(0)})?function(d){return a(d)=="String"?u(d,""):l(d)}:l},function(i,s,t){var r=t(28);i.exports=function(o,a){var l=o[a];return l==null?void 0:r(l)}},function(i,s,t){var r=t(9),o=t(254),a="__core-js_shared__",l=r[a]||o(a,{});i.exports=l},function(i,s,t){var r=t(4),o=0,a=Math.random(),l=r(1 .toString);i.exports=function(u){return"Symbol("+(u===void 0?"":u)+")_"+l(++o+a,36)}},function(i,s,t){var r=t(9),o=t(17),a=r.document,l=o(a)&&o(a.createElement);i.exports=function(u){return l?a.createElement(u):{}}},function(i,s,t){var r=t(151),o=t(118),a=o.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(u){return r(u,a)}},function(i,s,t){var r=t(35),o=t(116),a=t(36),l=function(u){return function(d,h,f){var m=r(d),g=a(m),v=o(f,g),p;if(u&&h!=h){for(;g>v;)if(p=m[v++],p!=p)return!0}else for(;g>v;v++)if((u||v in m)&&m[v]===h)return u||v||0;return!u&&-1}};i.exports={includes:l(!0),indexOf:l(!1)}},function(i,s,t){var r=t(117),o=Math.max,a=Math.min;i.exports=function(l,u){var d=r(l);return d<0?o(d+u,0):a(d,u)}},function(i,s,t){var r=t(258);i.exports=function(o){var a=+o;return a!==a||a===0?0:r(a)}},function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(i,s){s.f=Object.getOwnPropertySymbols},function(i,s,t){var r=t(151),o=t(118);i.exports=Object.keys||function(l){return r(l,o)}},function(i,s,t){var r=t(5),o=r("toStringTag"),a={};a[o]="z",i.exports=String(a)==="[object z]"},function(i,s){i.exports=function(){}},function(i,s,t){var r=t(4),o=t(8),a=t(111),l=r(Function.toString);o(a.inspectSource)||(a.inspectSource=function(u){return l(u)}),i.exports=a.inspectSource},function(i,s,t){Object.defineProperty(s,"__esModule",{value:!0});var r=t(6);t.d(s,"VERSION",function(){return r.e});var o=t(22);t.d(s,"restArguments",function(){return o.a});var a=t(50);t.d(s,"isObject",function(){return a.a});var l=t(289);t.d(s,"isNull",function(){return l.a});var u=t(167);t.d(s,"isUndefined",function(){return u.a});var d=t(168);t.d(s,"isBoolean",function(){return d.a});var h=t(290);t.d(s,"isElement",function(){return h.a});var f=t(125);t.d(s,"isString",function(){return f.a});var m=t(169);t.d(s,"isNumber",function(){return m.a});var g=t(291);t.d(s,"isDate",function(){return g.a});var v=t(292);t.d(s,"isRegExp",function(){return v.a});var p=t(293);t.d(s,"isError",function(){return p.a});var E=t(170);t.d(s,"isSymbol",function(){return E.a});var R=t(171);t.d(s,"isArrayBuffer",function(){return R.a});var O=t(126);t.d(s,"isDataView",function(){return O.a});var T=t(51);t.d(s,"isArray",function(){return T.a});var D=t(29);t.d(s,"isFunction",function(){return D.a});var M=t(127);t.d(s,"isArguments",function(){return M.a});var P=t(295);t.d(s,"isFinite",function(){return P.a});var C=t(172);t.d(s,"isNaN",function(){return C.a});var y=t(173);t.d(s,"isTypedArray",function(){return y.a});var b=t(297);t.d(s,"isEmpty",function(){return b.a});var w=t(178);t.d(s,"isMatch",function(){return w.a});var S=t(298);t.d(s,"isEqual",function(){return S.a});var L=t(300);t.d(s,"isMap",function(){return L.a});var j=t(301);t.d(s,"isWeakMap",function(){return j.a});var B=t(302);t.d(s,"isSet",function(){return B.a});var F=t(303);t.d(s,"isWeakSet",function(){return F.a});var A=t(14);t.d(s,"keys",function(){return A.a});var I=t(81);t.d(s,"allKeys",function(){return I.a});var x=t(64);t.d(s,"values",function(){return x.a});var N=t(304);t.d(s,"pairs",function(){return N.a});var U=t(179);t.d(s,"invert",function(){return U.a});var W=t(180);t.d(s,"functions",function(){return W.a}),t.d(s,"methods",function(){return W.a});var H=t(181);t.d(s,"extend",function(){return H.a});var K=t(131);t.d(s,"extendOwn",function(){return K.a}),t.d(s,"assign",function(){return K.a});var Q=t(182);t.d(s,"defaults",function(){return Q.a});var J=t(305);t.d(s,"create",function(){return J.a});var Y=t(184);t.d(s,"clone",function(){return Y.a});var ee=t(306);t.d(s,"tap",function(){return ee.a});var ae=t(185);t.d(s,"get",function(){return ae.a});var Z=t(307);t.d(s,"has",function(){return Z.a});var se=t(308);t.d(s,"mapObject",function(){return se.a});var de=t(133);t.d(s,"identity",function(){return de.a});var De=t(174);t.d(s,"constant",function(){return De.a});var Se=t(189);t.d(s,"noop",function(){return Se.a});var we=t(186);t.d(s,"toPath",function(){return we.a});var Ae=t(134);t.d(s,"property",function(){return Ae.a});var Ue=t(309);t.d(s,"propertyOf",function(){return Ue.a});var Ge=t(100);t.d(s,"matcher",function(){return Ge.a}),t.d(s,"matches",function(){return Ge.a});var Fe=t(310);t.d(s,"times",function(){return Fe.a});var Ie=t(190);t.d(s,"random",function(){return Ie.a});var ke=t(135);t.d(s,"now",function(){return ke.a});var Ct=t(311);t.d(s,"escape",function(){return Ct.a});var it=t(312);t.d(s,"unescape",function(){return it.a});var Ye=t(193);t.d(s,"templateSettings",function(){return Ye.a});var We=t(314);t.d(s,"template",function(){return We.a});var Ne=t(315);t.d(s,"result",function(){return Ne.a});var Ze=t(316);t.d(s,"uniqueId",function(){return Ze.a});var q=t(317);t.d(s,"chain",function(){return q.a});var ne=t(188);t.d(s,"iteratee",function(){return ne.a});var me=t(101);t.d(s,"partial",function(){return me.a});var ce=t(195);t.d(s,"bind",function(){return ce.a});var ge=t(318);t.d(s,"bindAll",function(){return ge.a});var G=t(319);t.d(s,"memoize",function(){return G.a});var V=t(196);t.d(s,"delay",function(){return V.a});var k=t(320);t.d(s,"defer",function(){return k.a});var _=t(321);t.d(s,"throttle",function(){return _.a});var ue=t(322);t.d(s,"debounce",function(){return ue.a});var Ce=t(323);t.d(s,"wrap",function(){return Ce.a});var $e=t(136);t.d(s,"negate",function(){return $e.a});var Xr=t(324);t.d(s,"compose",function(){return Xr.a});var Yr=t(325);t.d(s,"after",function(){return Yr.a});var Zr=t(197);t.d(s,"before",function(){return Zr.a});var qr=t(326);t.d(s,"once",function(){return qr.a});var _r=t(198);t.d(s,"findKey",function(){return _r.a});var eo=t(137);t.d(s,"findIndex",function(){return eo.a});var to=t(200);t.d(s,"findLastIndex",function(){return to.a});var io=t(201);t.d(s,"sortedIndex",function(){return io.a});var no=t(202);t.d(s,"indexOf",function(){return no.a});var so=t(327);t.d(s,"lastIndexOf",function(){return so.a});var jn=t(204);t.d(s,"find",function(){return jn.a}),t.d(s,"detect",function(){return jn.a});var ro=t(328);t.d(s,"findWhere",function(){return ro.a});var Fn=t(52);t.d(s,"each",function(){return Fn.a}),t.d(s,"forEach",function(){return Fn.a});var Nn=t(66);t.d(s,"map",function(){return Nn.a}),t.d(s,"collect",function(){return Nn.a});var Si=t(329);t.d(s,"reduce",function(){return Si.a}),t.d(s,"foldl",function(){return Si.a}),t.d(s,"inject",function(){return Si.a});var Un=t(330);t.d(s,"reduceRight",function(){return Un.a}),t.d(s,"foldr",function(){return Un.a});var Wn=t(84);t.d(s,"filter",function(){return Wn.a}),t.d(s,"select",function(){return Wn.a});var oo=t(331);t.d(s,"reject",function(){return oo.a});var zn=t(332);t.d(s,"every",function(){return zn.a}),t.d(s,"all",function(){return zn.a});var Hn=t(333);t.d(s,"some",function(){return Hn.a}),t.d(s,"any",function(){return Hn.a});var xi=t(85);t.d(s,"contains",function(){return xi.a}),t.d(s,"includes",function(){return xi.a}),t.d(s,"include",function(){return xi.a});var ao=t(334);t.d(s,"invoke",function(){return ao.a});var lo=t(138);t.d(s,"pluck",function(){return lo.a});var uo=t(335);t.d(s,"where",function(){return uo.a});var ho=t(206);t.d(s,"max",function(){return ho.a});var co=t(336);t.d(s,"min",function(){return co.a});var fo=t(337);t.d(s,"shuffle",function(){return fo.a});var po=t(207);t.d(s,"sample",function(){return po.a});var mo=t(338);t.d(s,"sortBy",function(){return mo.a});var go=t(339);t.d(s,"groupBy",function(){return go.a});var vo=t(340);t.d(s,"indexBy",function(){return vo.a});var bo=t(341);t.d(s,"countBy",function(){return bo.a});var yo=t(342);t.d(s,"partition",function(){return yo.a});var Eo=t(343);t.d(s,"toArray",function(){return Eo.a});var Co=t(344);t.d(s,"size",function(){return Co.a});var Oo=t(208);t.d(s,"pick",function(){return Oo.a});var Ro=t(346);t.d(s,"omit",function(){return Ro.a});var Li=t(347);t.d(s,"first",function(){return Li.a}),t.d(s,"head",function(){return Li.a}),t.d(s,"take",function(){return Li.a});var wo=t(209);t.d(s,"initial",function(){return wo.a});var To=t(348);t.d(s,"last",function(){return To.a});var Ai=t(210);t.d(s,"rest",function(){return Ai.a}),t.d(s,"tail",function(){return Ai.a}),t.d(s,"drop",function(){return Ai.a});var Mo=t(349);t.d(s,"compact",function(){return Mo.a});var Po=t(350);t.d(s,"flatten",function(){return Po.a});var Do=t(351);t.d(s,"without",function(){return Do.a});var Kn=t(212);t.d(s,"uniq",function(){return Kn.a}),t.d(s,"unique",function(){return Kn.a});var So=t(352);t.d(s,"union",function(){return So.a});var xo=t(353);t.d(s,"intersection",function(){return xo.a});var Lo=t(211);t.d(s,"difference",function(){return Lo.a});var Gn=t(213);t.d(s,"unzip",function(){return Gn.a}),t.d(s,"transpose",function(){return Gn.a});var Ao=t(354);t.d(s,"zip",function(){return Ao.a});var Io=t(355);t.d(s,"object",function(){return Io.a});var Bo=t(356);t.d(s,"range",function(){return Bo.a});var jo=t(357);t.d(s,"chunk",function(){return jo.a});var Fo=t(358);t.d(s,"mixin",function(){return Fo.a});var No=t(359);t.d(s,"default",function(){return No.a})},function(i,s,t){var r=t(16);s.a=Object(r.a)("String")},function(i,s,t){var r=t(16),o=t(29),a=t(171),l=t(80),u=Object(r.a)("DataView");function d(h){return h!=null&&Object(o.a)(h.getInt8)&&Object(a.a)(h.buffer)}s.a=l.a?d:u},function(i,s,t){var r=t(16),o=t(41),a=Object(r.a)("Arguments");(function(){a(arguments)||(a=function(l){return Object(o.a)(l,"callee")})})(),s.a=a},function(i,s,t){var r=t(176);s.a=Object(r.a)("byteLength")},function(i,s,t){s.a=l,t.d(s,"b",function(){return m}),t.d(s,"d",function(){return g}),t.d(s,"c",function(){return v});var r=t(30),o=t(29),a=t(81);function l(p){var E=Object(r.a)(p);return function(R){if(R==null)return!1;var O=Object(a.a)(R);if(Object(r.a)(O))return!1;for(var T=0;T<E;T++)if(!Object(o.a)(R[p[T]]))return!1;return p!==g||!Object(o.a)(R[u])}}var u="forEach",d="has",h=["clear","delete"],f=["get",d,"set"],m=h.concat(u,f),g=h.concat(f),v=["add"].concat(h,u,d)},function(i,s,t){s.a=r;function r(o,a){return function(l){var u=arguments.length;if(a&&(l=Object(l)),u<2||l==null)return l;for(var d=1;d<u;d++)for(var h=arguments[d],f=o(h),m=f.length,g=0;g<m;g++){var v=f[g];(!a||l[v]===void 0)&&(l[v]=h[v])}return l}}},function(i,s,t){var r=t(130),o=t(14);s.a=Object(r.a)(o.a)},function(i,s,t){s.a=r;function r(o,a){for(var l=a.length,u=0;u<l;u++){if(o==null)return;o=o[a[u]]}return l?o:void 0}},function(i,s,t){s.a=r;function r(o){return o}},function(i,s,t){s.a=a;var r=t(132),o=t(82);function a(l){return l=Object(o.a)(l),function(u){return Object(r.a)(u,l)}}},function(i,s,t){s.a=Date.now||function(){return new Date().getTime()}},function(i,s,t){s.a=r;function r(o){return function(){return!o.apply(this,arguments)}}},function(i,s,t){var r=t(199);s.a=Object(r.a)(1)},function(i,s,t){s.a=a;var r=t(66),o=t(134);function a(l,u){return Object(r.a)(l,Object(o.a)(u))}},function(i,s,t){var r=t(3);i.exports=function(o,a){var l=[][o];return!!l&&r(function(){l.call(null,a||function(){return 1},1)})}},function(i,s,t){i.exports=t(228)},function(i,s,t){var r=t(229),o=t(431);function a(l){"@babel/helpers - typeof";return i.exports=a=typeof r=="function"&&typeof o=="symbol"?function(u){return typeof u}:function(u){return u&&typeof r=="function"&&u.constructor===r&&u!==r.prototype?"symbol":typeof u},i.exports.__esModule=!0,i.exports.default=i.exports,a(l)}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){var r=t(5);s.f=r},function(i,s,t){i.exports=t(475)},function(i,s,t){i.exports=t(235)},function(i,s,t){var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!r.call({1:2},1);s.f=a?function(u){var d=o(this,u);return!!d&&d.enumerable}:r},function(i,s,t){var r=t(55);i.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(i,s,t){var r=t(20),o=t(3),a=t(113);i.exports=!r&&!o(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},function(i,s,t){var r=t(3),o=t(8),a=/#|\.prototype\./,l=function(m,g){var v=d[u(m)];return v==f?!0:v==h?!1:o(g)?r(g):!!g},u=l.normalize=function(m){return String(m).replace(a,".").toLowerCase()},d=l.data={},h=l.NATIVE="N",f=l.POLYFILL="P";i.exports=l},function(i,s,t){var r=t(20),o=t(3);i.exports=r&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(i,s,t){var r=t(3);i.exports=!r(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},function(i,s,t){var r=t(4),o=t(13),a=t(35),l=t(115).indexOf,u=t(93),d=r([].push);i.exports=function(h,f){var m=a(h),g=0,v=[],p;for(p in m)!o(u,p)&&o(m,p)&&d(v,p);for(;f.length>g;)o(m,p=f[g++])&&(~l(v,p)||d(v,p));return v}},function(i,s,t){var r=t(20),o=t(149),a=t(34),l=t(21),u=t(35),d=t(120);s.f=r&&!o?Object.defineProperties:function(f,m){l(f);for(var g=u(m),v=d(m),p=v.length,E=0,R;p>E;)a.f(f,R=v[E++],g[R]);return f}},function(i,s,t){var r=t(18);i.exports=r("document","documentElement")},function(i,s,t){var r=t(5),o=t(46),a=r("iterator"),l=Array.prototype;i.exports=function(u){return u!==void 0&&(o.Array===u||l[a]===u)}},function(i,s,t){var r=t(11),o=t(28),a=t(21),l=t(57),u=t(94),d=TypeError;i.exports=function(h,f){var m=arguments.length<2?u(h):f;if(o(m))return a(r(m,h));throw d(l(h)+" is not iterable")}},function(i,s,t){var r=t(11),o=t(21),a=t(110);i.exports=function(l,u,d){var h,f;o(l);try{if(h=a(l,"return"),!h){if(u==="throw")throw d;return d}h=r(h,l)}catch(m){f=!0,h=m}if(u==="throw")throw d;if(f)throw h;return o(h),d}},function(i,s,t){var r=t(0),o=t(11),a=t(32),l=t(158),u=t(8),d=t(265),h=t(90),f=t(92),m=t(61),g=t(39),v=t(48),p=t(5),E=t(46),R=t(159),O=l.PROPER,T=l.CONFIGURABLE,D=R.IteratorPrototype,M=R.BUGGY_SAFARI_ITERATORS,P=p("iterator"),C="keys",y="values",b="entries",w=function(){return this};i.exports=function(S,L,j,B,F,A,I){d(j,L,B);var x=function(ae){if(ae===F&&K)return K;if(!M&&ae in W)return W[ae];switch(ae){case C:return function(){return new j(this,ae)};case y:return function(){return new j(this,ae)};case b:return function(){return new j(this,ae)}}return function(){return new j(this)}},N=L+" Iterator",U=!1,W=S.prototype,H=W[P]||W["@@iterator"]||F&&W[F],K=!M&&H||x(F),Q=L=="Array"&&W.entries||H,J,Y,ee;if(Q&&(J=h(Q.call(new S)),J!==Object.prototype&&J.next&&(!a&&h(J)!==D&&(f?f(J,D):u(J[P])||v(J,P,w)),m(J,N,!0,!0),a&&(E[N]=w))),O&&F==y&&H&&H.name!==y&&(!a&&T?g(W,"name",y):(U=!0,K=function(){return o(H,this)})),F)if(Y={values:x(y),keys:A?K:x(C),entries:x(b)},I)for(ee in Y)(M||U||!(ee in W))&&v(W,ee,Y[ee]);else r({target:L,proto:!0,forced:M||U},Y);return(!a||I)&&W[P]!==K&&v(W,P,K,{name:F}),E[L]=K,Y}},function(i,s,t){var r=t(20),o=t(13),a=Function.prototype,l=r&&Object.getOwnPropertyDescriptor,u=o(a,"name"),d=u&&(function(){}).name==="something",h=u&&(!r||r&&l(a,"name").configurable);i.exports={EXISTS:u,PROPER:d,CONFIGURABLE:h}},function(i,s,t){var r=t(3),o=t(8),a=t(59),l=t(90),u=t(48),d=t(5),h=t(32),f=d("iterator"),m=!1,g,v,p;[].keys&&(p=[].keys(),"next"in p?(v=l(l(p)),v!==Object.prototype&&(g=v)):m=!0);var E=g==null||r(function(){var R={};return g[f].call(R)!==R});E?g={}:h&&(g=a(g)),o(g[f])||u(g,f,function(){return this}),i.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:m}},function(i,s,t){var r=t(21),o=t(161),a=t(5),l=a("species");i.exports=function(u,d){var h=r(u).constructor,f;return h===void 0||(f=r(h)[l])==null?d:o(f)}},function(i,s,t){var r=t(98),o=t(57),a=TypeError;i.exports=function(l){if(r(l))return l;throw a(o(l)+" is not a constructor")}},function(i,s,t){var r=t(9),o=t(71),a=t(58),l=t(8),u=t(13),d=t(3),h=t(153),f=t(99),m=t(113),g=t(271),v=t(163),p=t(97),E=r.setImmediate,R=r.clearImmediate,O=r.process,T=r.Dispatch,D=r.Function,M=r.MessageChannel,P=r.String,C=0,y={},b="onreadystatechange",w,S,L,j;try{w=r.location}catch{}var B=function(x){if(u(y,x)){var N=y[x];delete y[x],N()}},F=function(x){return function(){B(x)}},A=function(x){B(x.data)},I=function(x){r.postMessage(P(x),w.protocol+"//"+w.host)};(!E||!R)&&(E=function(N){g(arguments.length,1);var U=l(N)?N:D(N),W=f(arguments,1);return y[++C]=function(){o(U,void 0,W)},S(C),C},R=function(N){delete y[N]},p?S=function(x){O.nextTick(F(x))}:T&&T.now?S=function(x){T.now(F(x))}:M&&!v?(L=new M,j=L.port2,L.port1.onmessage=A,S=a(j.postMessage,j)):r.addEventListener&&l(r.postMessage)&&!r.importScripts&&w&&w.protocol!=="file:"&&!d(I)?(S=I,r.addEventListener("message",A,!1)):b in m("script")?S=function(x){h.appendChild(m("script"))[b]=function(){h.removeChild(this),B(x)}}:S=function(x){setTimeout(F(x),0)}),i.exports={set:E,clear:R}},function(i,s,t){var r=t(45);i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(i,s,t){var r=t(62),o=t(165),a=t(78).CONSTRUCTOR;i.exports=a||!o(function(l){r.all(l).then(void 0,function(){})})},function(i,s,t){var r=t(5),o=r("iterator"),a=!1;try{var l=0,u={next:function(){return{done:!!l++}},return:function(){a=!0}};u[o]=function(){return this},Array.from(u,function(){throw 2})}catch{}i.exports=function(d,h){if(!h&&!a)return!1;var f=!1;try{var m={};m[o]=function(){return{next:function(){return{done:f=!0}}}},d(m)}catch{}return f}},function(i,s,t){var r=t(21),o=t(17),a=t(49);i.exports=function(l,u){if(r(l),o(u)&&u.constructor===l)return u;var d=a.f(l),h=d.resolve;return h(u),d.promise}},function(i,s,t){s.a=r;function r(o){return o===void 0}},function(i,s,t){s.a=o;var r=t(6);function o(a){return a===!0||a===!1||r.t.call(a)==="[object Boolean]"}},function(i,s,t){var r=t(16);s.a=Object(r.a)("Number")},function(i,s,t){var r=t(16);s.a=Object(r.a)("Symbol")},function(i,s,t){var r=t(16);s.a=Object(r.a)("ArrayBuffer")},function(i,s,t){s.a=a;var r=t(6),o=t(169);function a(l){return Object(o.a)(l)&&Object(r.g)(l)}},function(i,s,t){var r=t(6),o=t(126),a=t(174),l=t(296),u=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function d(h){return r.l?Object(r.l)(h)&&!Object(o.a)(h):Object(l.a)(h)&&u.test(r.t.call(h))}s.a=r.r?d:Object(a.a)(!1)},function(i,s,t){s.a=r;function r(o){return function(){return o}}},function(i,s,t){s.a=o;var r=t(6);function o(a){return function(l){var u=a(l);return typeof u=="number"&&u>=0&&u<=r.b}}},function(i,s,t){s.a=r;function r(o){return function(a){return a==null?void 0:a[o]}}},function(i,s,t){s.a=u;var r=t(6),o=t(29),a=t(41);function l(d){for(var h={},f=d.length,m=0;m<f;++m)h[d[m]]=!0;return{contains:function(g){return h[g]},push:function(g){return h[g]=!0,d.push(g)}}}function u(d,h){h=l(h);var f=r.n.length,m=d.constructor,g=Object(o.a)(m)&&m.prototype||r.c,v="constructor";for(Object(a.a)(d,v)&&!h.contains(v)&&h.push(v);f--;)v=r.n[f],v in d&&d[v]!==g[v]&&!h.contains(v)&&h.push(v)}},function(i,s,t){s.a=o;var r=t(14);function o(a,l){var u=Object(r.a)(l),d=u.length;if(a==null)return!d;for(var h=Object(a),f=0;f<d;f++){var m=u[f];if(l[m]!==h[m]||!(m in h))return!1}return!0}},function(i,s,t){s.a=o;var r=t(14);function o(a){for(var l={},u=Object(r.a)(a),d=0,h=u.length;d<h;d++)l[a[u[d]]]=u[d];return l}},function(i,s,t){s.a=o;var r=t(29);function o(a){var l=[];for(var u in a)Object(r.a)(a[u])&&l.push(u);return l.sort()}},function(i,s,t){var r=t(130),o=t(81);s.a=Object(r.a)(o.a)},function(i,s,t){var r=t(130),o=t(81);s.a=Object(r.a)(o.a,!0)},function(i,s,t){s.a=l;var r=t(50),o=t(6);function a(){return function(){}}function l(u){if(!Object(r.a)(u))return{};if(o.j)return Object(o.j)(u);var d=a();d.prototype=u;var h=new d;return d.prototype=null,h}},function(i,s,t){s.a=l;var r=t(50),o=t(51),a=t(181);function l(u){return Object(r.a)(u)?Object(o.a)(u)?u.slice():Object(a.a)({},u):u}},function(i,s,t){s.a=l;var r=t(82),o=t(132),a=t(167);function l(u,d,h){var f=Object(o.a)(u,Object(r.a)(d));return Object(a.a)(f)?h:f}},function(i,s,t){s.a=a;var r=t(23),o=t(51);function a(l){return Object(o.a)(l)?l:[l]}r.a.toPath=a},function(i,s,t){s.a=f;var r=t(133),o=t(29),a=t(50),l=t(51),u=t(100),d=t(134),h=t(83);function f(m,g,v){return m==null?r.a:Object(o.a)(m)?Object(h.a)(m,g,v):Object(a.a)(m)&&!Object(l.a)(m)?Object(u.a)(m):Object(d.a)(m)}},function(i,s,t){s.a=a;var r=t(23),o=t(187);function a(l,u){return Object(o.a)(l,u,1/0)}r.a.iteratee=a},function(i,s,t){s.a=r;function r(){}},function(i,s,t){s.a=r;function r(o,a){return a==null&&(a=o,o=0),o+Math.floor(Math.random()*(a-o+1))}},function(i,s,t){s.a=o;var r=t(14);function o(a){var l=function(f){return a[f]},u="(?:"+Object(r.a)(a).join("|")+")",d=RegExp(u),h=RegExp(u,"g");return function(f){return f=f==null?"":""+f,d.test(f)?f.replace(h,l):f}}},function(i,s,t){s.a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}},function(i,s,t){var r=t(23);s.a=r.a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}},function(i,s,t){s.a=a;var r=t(183),o=t(50);function a(l,u,d,h,f){if(!(h instanceof u))return l.apply(d,f);var m=Object(r.a)(l.prototype),g=l.apply(m,f);return Object(o.a)(g)?g:m}},function(i,s,t){var r=t(22),o=t(29),a=t(194);s.a=Object(r.a)(function(l,u,d){if(!Object(o.a)(l))throw new TypeError("Bind must be called on a function");var h=Object(r.a)(function(f){return Object(a.a)(l,h,u,this,d.concat(f))});return h})},function(i,s,t){var r=t(22);s.a=Object(r.a)(function(o,a,l){return setTimeout(function(){return o.apply(null,l)},a)})},function(i,s,t){s.a=r;function r(o,a){var l;return function(){return--o>0&&(l=a.apply(this,arguments)),o<=1&&(a=null),l}}},function(i,s,t){s.a=a;var r=t(19),o=t(14);function a(l,u,d){u=Object(r.a)(u,d);for(var h=Object(o.a)(l),f,m=0,g=h.length;m<g;m++)if(f=h[m],u(l[f],f,l))return f}},function(i,s,t){s.a=a;var r=t(19),o=t(30);function a(l){return function(u,d,h){d=Object(r.a)(d,h);for(var f=Object(o.a)(u),m=l>0?0:f-1;m>=0&&m<f;m+=l)if(d(u[m],m,u))return m;return-1}}},function(i,s,t){var r=t(199);s.a=Object(r.a)(-1)},function(i,s,t){s.a=a;var r=t(19),o=t(30);function a(l,u,d,h){d=Object(r.a)(d,h,1);for(var f=d(u),m=0,g=Object(o.a)(l);m<g;){var v=Math.floor((m+g)/2);d(l[v])<f?m=v+1:g=v}return m}},function(i,s,t){var r=t(201),o=t(137),a=t(203);s.a=Object(a.a)(1,o.a,r.a)},function(i,s,t){s.a=l;var r=t(30),o=t(6),a=t(172);function l(u,d,h){return function(f,m,g){var v=0,p=Object(r.a)(f);if(typeof g=="number")u>0?v=g>=0?g:Math.max(g+p,v):p=g>=0?Math.min(g+1,p):g+p+1;else if(h&&g&&p)return g=h(f,m),f[g]===m?g:-1;if(m!==m)return g=d(o.q.call(f,v,p),a.a),g>=0?g+v:-1;for(g=u>0?v:p-1;g>=0&&g<p;g+=u)if(f[g]===m)return g;return-1}}},function(i,s,t){s.a=l;var r=t(24),o=t(137),a=t(198);function l(u,d,h){var f=Object(r.a)(u)?o.a:a.a,m=f(u,d,h);if(m!==void 0&&m!==-1)return u[m]}},function(i,s,t){s.a=l;var r=t(24),o=t(14),a=t(83);function l(u){var d=function(h,f,m,g){var v=!Object(r.a)(h)&&Object(o.a)(h),p=(v||h).length,E=u>0?0:p-1;for(g||(m=h[v?v[E]:E],E+=u);E>=0&&E<p;E+=u){var R=v?v[E]:E;m=f(m,h[R],R,h)}return m};return function(h,f,m,g){var v=arguments.length>=3;return d(h,Object(a.a)(f,g,4),m,v)}}},function(i,s,t){s.a=u;var r=t(24),o=t(64),a=t(19),l=t(52);function u(d,h,f){var m=-1/0,g=-1/0,v,p;if(h==null||typeof h=="number"&&typeof d[0]!="object"&&d!=null){d=Object(r.a)(d)?d:Object(o.a)(d);for(var E=0,R=d.length;E<R;E++)v=d[E],v!=null&&v>m&&(m=v)}else h=Object(a.a)(h,f),Object(l.a)(d,function(O,T,D){p=h(O,T,D),(p>g||p===-1/0&&m===-1/0)&&(m=O,g=p)});return m}},function(i,s,t){s.a=d;var r=t(24),o=t(184),a=t(64),l=t(30),u=t(190);function d(h,f,m){if(f==null||m)return Object(r.a)(h)||(h=Object(a.a)(h)),h[Object(u.a)(h.length-1)];var g=Object(r.a)(h)?Object(o.a)(h):Object(a.a)(h),v=Object(l.a)(g);f=Math.max(Math.min(f,v),0);for(var p=v-1,E=0;E<f;E++){var R=Object(u.a)(E,p),O=g[E];g[E]=g[R],g[R]=O}return g.slice(0,f)}},function(i,s,t){var r=t(22),o=t(29),a=t(83),l=t(81),u=t(345),d=t(65);s.a=Object(r.a)(function(h,f){var m={},g=f[0];if(h==null)return m;Object(o.a)(g)?(f.length>1&&(g=Object(a.a)(g,f[1])),f=Object(l.a)(h)):(g=u.a,f=Object(d.a)(f,!1,!1),h=Object(h));for(var v=0,p=f.length;v<p;v++){var E=f[v],R=h[E];g(R,E,h)&&(m[E]=R)}return m})},function(i,s,t){s.a=o;var r=t(6);function o(a,l,u){return r.q.call(a,0,Math.max(0,a.length-(l==null||u?1:l)))}},function(i,s,t){s.a=o;var r=t(6);function o(a,l,u){return r.q.call(a,l==null||u?1:l)}},function(i,s,t){var r=t(22),o=t(65),a=t(84),l=t(85);s.a=Object(r.a)(function(u,d){return d=Object(o.a)(d,!0,!0),Object(a.a)(u,function(h){return!Object(l.a)(d,h)})})},function(i,s,t){s.a=u;var r=t(168),o=t(19),a=t(30),l=t(85);function u(d,h,f,m){Object(r.a)(h)||(m=f,f=h,h=!1),f!=null&&(f=Object(o.a)(f,m));for(var g=[],v=[],p=0,E=Object(a.a)(d);p<E;p++){var R=d[p],O=f?f(R,p,d):R;h&&!f?((!p||v!==O)&&g.push(R),v=O):f?Object(l.a)(v,O)||(v.push(O),g.push(R)):Object(l.a)(g,R)||g.push(R)}return g}},function(i,s,t){s.a=l;var r=t(206),o=t(30),a=t(138);function l(u){for(var d=u&&Object(r.a)(u,o.a).length||0,h=Array(d),f=0;f<d;f++)h[f]=Object(a.a)(u,f);return h}},function(i,s,t){s.a=o;var r=t(23);function o(a,l){return a._chain?Object(r.a)(l).chain():l}},function(i,s,t){var r=t(0),o=t(3),a=t(86),l=t(17),u=t(33),d=t(36),h=t(363),f=t(103),m=t(216),g=t(104),v=t(5),p=t(56),E=v("isConcatSpreadable"),R=p>=51||!o(function(){var M=[];return M[E]=!1,M.concat()[0]!==M}),O=g("concat"),T=function(M){if(!l(M))return!1;var P=M[E];return P!==void 0?!!P:a(M)},D=!R||!O;r({target:"Array",proto:!0,arity:1,forced:D},{concat:function(P){var C=u(this),y=m(C,0),b=0,w,S,L,j,B;for(w=-1,L=arguments.length;w<L;w++)if(B=w===-1?C:arguments[w],T(B))for(j=d(B),h(b+j),S=0;S<j;S++,b++)S in B&&f(y,b,B[S]);else h(b+1),f(y,b++,B);return y.length=b,y}})},function(i,s,t){var r=t(364);i.exports=function(o,a){return new(r(o))(a===0?0:a)}},function(i,s,t){i.exports=t(369)},function(i,s,t){var r=t(0),o=t(18),a=t(71),l=t(11),u=t(4),d=t(3),h=t(86),f=t(8),m=t(17),g=t(89),v=t(99),p=t(55),E=o("JSON","stringify"),R=u(/./.exec),O=u("".charAt),T=u("".charCodeAt),D=u("".replace),M=u(1 .toString),P=/[\uD800-\uDFFF]/g,C=/^[\uD800-\uDBFF]$/,y=/^[\uDC00-\uDFFF]$/,b=!p||d(function(){var j=o("Symbol")();return E([j])!="[null]"||E({a:j})!="{}"||E(Object(j))!="{}"}),w=d(function(){return E("\uDF06\uD834")!=='"\\udf06\\ud834"'||E("\uDEAD")!=='"\\udead"'}),S=function(j,B){var F=v(arguments),A=B;if(!(!m(B)&&j===void 0||g(j)))return h(B)||(B=function(I,x){if(f(A)&&(x=l(A,this,I,x)),!g(x))return x}),F[1]=B,a(E,null,F)},L=function(j,B,F){var A=O(F,B-1),I=O(F,B+1);return R(C,j)&&!R(y,I)||R(y,j)&&!R(C,A)?"\\u"+M(T(j,0),16):j};E&&r({target:"JSON",stat:!0,arity:3,forced:b||w},{stringify:function(B,F,A){var I=v(arguments),x=a(b?S:E,null,I);return w&&typeof x=="string"?D(x,P,L):x}})},function(i,s,t){var r=t(381),o=t(382);function a(l,u,d){var h=u&&d||0;typeof l=="string"&&(u=l==="binary"?new Array(16):null,l=null),l=l||{};var f=l.random||(l.rng||r)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,u)for(var m=0;m<16;++m)u[h+m]=f[m];return u||o(f)}i.exports=a},function(i,s,t){i.exports=t(221)},function(i,s,t){var r=t(385);i.exports=r},function(i,s,t){i.exports="4.15.2"},function(i,s,t){var r=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function l(d,h,f){this.fn=d,this.context=h,this.once=f||!1}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],f,m;if(this._eventsCount===0)return h;for(m in f=this._events)r.call(f,m)&&h.push(o?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},u.prototype.listeners=function(h,f){var m=o?o+h:h,g=this._events[m];if(f)return!!g;if(!g)return[];if(g.fn)return[g.fn];for(var v=0,p=g.length,E=new Array(p);v<p;v++)E[v]=g[v].fn;return E},u.prototype.emit=function(h,f,m,g,v,p){var E=o?o+h:h;if(!this._events[E])return!1;var R=this._events[E],O=arguments.length,T,D;if(R.fn){switch(R.once&&this.removeListener(h,R.fn,void 0,!0),O){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,f),!0;case 3:return R.fn.call(R.context,f,m),!0;case 4:return R.fn.call(R.context,f,m,g),!0;case 5:return R.fn.call(R.context,f,m,g,v),!0;case 6:return R.fn.call(R.context,f,m,g,v,p),!0}for(D=1,T=new Array(O-1);D<O;D++)T[D-1]=arguments[D];R.fn.apply(R.context,T)}else{var M=R.length,P;for(D=0;D<M;D++)switch(R[D].once&&this.removeListener(h,R[D].fn,void 0,!0),O){case 1:R[D].fn.call(R[D].context);break;case 2:R[D].fn.call(R[D].context,f);break;case 3:R[D].fn.call(R[D].context,f,m);break;case 4:R[D].fn.call(R[D].context,f,m,g);break;default:if(!T)for(P=1,T=new Array(O-1);P<O;P++)T[P-1]=arguments[P];R[D].fn.apply(R[D].context,T)}}return!0},u.prototype.on=function(h,f,m){var g=new l(f,m||this),v=o?o+h:h;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],g]:this._events[v].push(g):(this._events[v]=g,this._eventsCount++),this},u.prototype.once=function(h,f,m){var g=new l(f,m||this,!0),v=o?o+h:h;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],g]:this._events[v].push(g):(this._events[v]=g,this._eventsCount++),this},u.prototype.removeListener=function(h,f,m,g){var v=o?o+h:h;if(!this._events[v])return this;if(!f)return--this._eventsCount===0?this._events=new a:delete this._events[v],this;var p=this._events[v];if(p.fn)p.fn===f&&(!g||p.once)&&(!m||p.context===m)&&(--this._eventsCount===0?this._events=new a:delete this._events[v]);else{for(var E=0,R=[],O=p.length;E<O;E++)(p[E].fn!==f||g&&!p[E].once||m&&p[E].context!==m)&&R.push(p[E]);R.length?this._events[v]=R.length===1?R[0]:R:--this._eventsCount===0?this._events=new a:delete this._events[v]}return this},u.prototype.removeAllListeners=function(h){var f;return h?(f=o?o+h:h,this._events[f]&&(--this._eventsCount===0?this._events=new a:delete this._events[f])):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=o,u.EventEmitter=u,i.exports=u},function(i,s,t){var r=t(1),o=r(t(10)),a=t(70),l=a.getAdapter,u=["getItem","setItem","removeItem","clear"],d={get async(){return l("storage").async}};u.forEach(function(h){d[h+"Async"]=function(){var f=l("storage");return o.default.resolve(f[h].apply(f,arguments))},d[h]=function(){var f=l("storage");if(!f.async)return f[h].apply(f,arguments);var m=new Error("Synchronous API ["+h+"] is not available in this runtime.");throw m.code="SYNC_API_NOT_AVAILABLE",m}}),i.exports=d},function(i,s,t){var r=t(1),o=r(t(25)),a=r(t(37)),l=t(224),u=t(67),d=s.removeAsync=l.removeItemAsync.bind(l),h=function(m,g){try{m=JSON.parse(m)}catch{return null}if(m){var v=m.expiredAt&&m.expiredAt<Date.now();return v?d(g).then(function(){return null}):m.value}return null};s.getAsync=function(f){var m;return f=(0,o.default)(m="AV/".concat(u.applicationId,"/")).call(m,f),l.getItemAsync(f).then(function(g){return h(g,f)})},s.setAsync=function(f,m,g){var v,p={value:m};return typeof g=="number"&&(p.expiredAt=Date.now()+g),l.setItemAsync((0,o.default)(v="AV/".concat(u.applicationId,"/")).call(v,f),(0,a.default)(p))}},function(i,s,t){var r=t(388);i.exports=r},function(i,s,t){var r=t(391);i.exports=r},function(i,s,t){var r=t(394);i.exports=r},function(i,s,t){i.exports=t(397)},function(i,s,t){var r=t(400);t(63),i.exports=r},function(i,s,t){var r=t(116),o=t(36),a=t(103),l=Array,u=Math.max;i.exports=function(d,h,f){for(var m=o(d),g=r(h,m),v=r(f===void 0?m:f,m),p=l(u(v-g,0)),E=0;g<v;g++,E++)a(p,E,d[g]);return p.length=E,p}},function(i,s,t){var r=t(11),o=t(18),a=t(5),l=t(48);i.exports=function(){var u=o("Symbol"),d=u&&u.prototype,h=d&&d.valueOf,f=a("toPrimitive");d&&!d[f]&&l(d,f,function(m){return r(h,this)},{arity:1})}},function(i,s,t){var r=t(55);i.exports=r&&!!Symbol.for&&!!Symbol.keyFor},function(i,s,t){var r=t(7);r("iterator")},function(i,s,t){var r=t(435);t(63),i.exports=r},function(i,s,t){i.exports=t(237)},function(i,s,t){var r=t(454);i.exports=r},function(i,s,t){i.exports=t(458)},function(i,s,t){var r=t(4),o=t(28),a=t(17),l=t(13),u=t(99),d=t(72),h=Function,f=r([].concat),m=r([].join),g={},v=function(p,E,R){if(!l(g,E)){for(var O=[],T=0;T<E;T++)O[T]="a["+T+"]";g[E]=h("C,a","return new C("+m(O,",")+")")}return g[E](p,R)};i.exports=d?h.bind:function(E){var R=o(this),O=R.prototype,T=u(arguments,1),D=function(){var P=f(T,u(arguments));return this instanceof D?v(R,P.length,P):R.apply(E,P)};return a(O)&&(D.prototype=O),D}},function(i,s,t){i.exports=t(479)},function(i,s,t){i.exports=t(482)},function(i,s){var t={utf8:{stringToBytes:function(r){return t.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(t.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var o=[],a=0;a<r.length;a++)o.push(r.charCodeAt(a)&255);return o},bytesToString:function(r){for(var o=[],a=0;a<r.length;a++)o.push(String.fromCharCode(r[a]));return o.join("")}}};i.exports=t},function(i,s){i.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(i,s,t){var r=t(1),o=r(t(87)),a=r(t(144));function l(d){"@babel/helpers - typeof";return typeof o.default=="function"&&typeof a.default=="symbol"?l=function(f){return typeof f}:l=function(f){return f&&typeof o.default=="function"&&f.constructor===o.default&&f!==o.default.prototype?"symbol":typeof f},l(d)}function u(d){return d!==null&&l(d)==="object"}i.exports=u},function(i,s,t){var r=t(246),o=t(544);i.exports=o(r)},function(i,s,t){i.exports=t(247)},function(i,s,t){var r=t(1),o=r(t(10));/*!
 * LeanCloud JavaScript SDK
 * https://leancloud.cn
 *
 * Copyright 2016 LeanCloud.cn, Inc.
 * The LeanCloud JavaScript SDK is freely distributable under the MIT license.
 */var a=t(2),l=t(67);l._=a,l.version=t(222),l.Promise=o.default,l.localStorage=t(224),l.Cache=t(225),l.Error=t(43),t(390),t(442)(l),t(443)(l),t(444)(l),t(445)(l),t(450)(l),t(451)(l),t(504)(l),t(530)(l),t(531)(l),t(533)(l),t(534)(l),t(535)(l),t(536)(l),t(537)(l),t(538)(l),t(539)(l),t(540)(l),t(541)(l),l.Conversation=t(542),t(543),i.exports=l},function(i,s,t){var r=t(249);t(63),i.exports=r},function(i,s,t){t(250),t(60),t(96),t(267),t(283),t(284),t(285),t(79);var r=t(15);i.exports=r.Promise},function(i,s,t){t(251)},function(i,s,t){var r=t(0),o=t(12),a=t(90),l=t(92),u=t(256),d=t(59),h=t(39),f=t(44),m=t(260),g=t(261),v=t(76),p=t(262),E=t(5),R=t(263),O=E("toStringTag"),T=Error,D=[].push,M=function(y,b){var w=arguments.length>2?arguments[2]:void 0,S=o(P,this),L;l?L=l(new T,S?a(this):P):(L=S?this:d(P),h(L,O,"Error")),b!==void 0&&h(L,"message",p(b)),R&&h(L,"stack",m(L.stack,1)),g(L,w);var j=[];return v(y,D,{that:j}),h(L,"errors",j),L};l?l(M,T):u(M,T,{name:!0});var P=M.prototype=d(T.prototype,{constructor:f(1,M),message:f(1,""),name:f(1,"AggregateError")});r({global:!0,constructor:!0,arity:2},{AggregateError:M})},function(i,s,t){var r=t(11),o=t(17),a=t(89),l=t(110),u=t(253),d=t(5),h=TypeError,f=d("toPrimitive");i.exports=function(m,g){if(!o(m)||a(m))return m;var v=l(m,f),p;if(v){if(g===void 0&&(g="default"),p=r(v,m,g),!o(p)||a(p))return p;throw h("Can't convert object to primitive value")}return g===void 0&&(g="number"),u(m,g)}},function(i,s,t){var r=t(11),o=t(8),a=t(17),l=TypeError;i.exports=function(u,d){var h,f;if(d==="string"&&o(h=u.toString)&&!a(f=r(h,u))||o(h=u.valueOf)&&!a(f=r(h,u))||d!=="string"&&o(h=u.toString)&&!a(f=r(h,u)))return f;throw l("Can't convert object to primitive value")}},function(i,s,t){var r=t(9),o=Object.defineProperty;i.exports=function(a,l){try{o(r,a,{value:l,configurable:!0,writable:!0})}catch{r[a]=l}return l}},function(i,s,t){var r=t(8),o=String,a=TypeError;i.exports=function(l){if(typeof l=="object"||r(l))return l;throw a("Can't set "+o(l)+" as a prototype")}},function(i,s,t){var r=t(13),o=t(257),a=t(73),l=t(34);i.exports=function(u,d,h){for(var f=o(d),m=l.f,g=a.f,v=0;v<f.length;v++){var p=f[v];!r(u,p)&&!(h&&r(h,p))&&m(u,p,g(d,p))}}},function(i,s,t){var r=t(18),o=t(4),a=t(114),l=t(119),u=t(21),d=o([].concat);i.exports=r("Reflect","ownKeys")||function(f){var m=a.f(u(f)),g=l.f;return g?d(m,g(f)):m}},function(i,s){var t=Math.ceil,r=Math.floor;i.exports=Math.trunc||function(a){var l=+a;return(l>0?r:t)(l)}},function(i,s,t){var r=t(117),o=Math.min;i.exports=function(a){return a>0?o(r(a),9007199254740991):0}},function(i,s,t){var r=t(4),o=Error,a=r("".replace),l=function(h){return String(o(h).stack)}("zxcasd"),u=/\n\s*at [^:]*:[^\n]*/,d=u.test(l);i.exports=function(h,f){if(d&&typeof h=="string"&&!o.prepareStackTrace)for(;f--;)h=a(h,u,"");return h}},function(i,s,t){var r=t(17),o=t(39);i.exports=function(a,l){r(l)&&"cause"in l&&o(a,"cause",l.cause)}},function(i,s,t){var r=t(40);i.exports=function(o,a){return o===void 0?arguments.length<2?"":a:r(o)}},function(i,s,t){var r=t(3),o=t(44);i.exports=!r(function(){var a=Error("a");return"stack"in a?(Object.defineProperty(a,"stack",o(1,7)),a.stack!==7):!0})},function(i,s,t){var r=t(9),o=t(8),a=t(123),l=r.WeakMap;i.exports=o(l)&&/native code/.test(a(l))},function(i,s,t){var r=t(159).IteratorPrototype,o=t(59),a=t(44),l=t(61),u=t(46),d=function(){return this};i.exports=function(h,f,m,g){var v=f+" Iterator";return h.prototype=o(r,{next:a(+!g,m)}),l(h,v,!1,!0),u[v]=d,h}},function(i,s,t){var r=t(121),o=t(47);i.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(i,s,t){t(268),t(278),t(279),t(280),t(281),t(282)},function(i,s,t){var r=t(0),o=t(32),a=t(97),l=t(9),u=t(11),d=t(48),h=t(92),f=t(61),m=t(269),g=t(28),v=t(8),p=t(17),E=t(270),R=t(160),O=t(162).set,T=t(272),D=t(275),M=t(77),P=t(276),C=t(95),y=t(62),b=t(78),w=t(49),S="Promise",L=b.CONSTRUCTOR,j=b.REJECTION_EVENT,B=b.SUBCLASSING,F=C.getterFor(S),A=C.set,I=y&&y.prototype,x=y,N=I,U=l.TypeError,W=l.document,H=l.process,K=w.f,Q=K,J=!!(W&&W.createEvent&&l.dispatchEvent),Y="unhandledrejection",ee="rejectionhandled",ae=0,Z=1,se=2,de=1,De=2,Se,we,Ae,Ue,Ge=function(q){var ne;return p(q)&&v(ne=q.then)?ne:!1},Fe=function(q,ne){var me=ne.value,ce=ne.state==Z,ge=ce?q.ok:q.fail,G=q.resolve,V=q.reject,k=q.domain,_,ue,Ce;try{ge?(ce||(ne.rejection===De&&Ye(ne),ne.rejection=de),ge===!0?_=me:(k&&k.enter(),_=ge(me),k&&(k.exit(),Ce=!0)),_===q.promise?V(U("Promise-chain cycle")):(ue=Ge(_))?u(ue,_,G,V):G(_)):V(me)}catch($e){k&&!Ce&&k.exit(),V($e)}},Ie=function(q,ne){q.notified||(q.notified=!0,T(function(){for(var me=q.reactions,ce;ce=me.get();)Fe(ce,q);q.notified=!1,ne&&!q.rejection&&Ct(q)}))},ke=function(q,ne,me){var ce,ge;J?(ce=W.createEvent("Event"),ce.promise=ne,ce.reason=me,ce.initEvent(q,!1,!0),l.dispatchEvent(ce)):ce={promise:ne,reason:me},!j&&(ge=l["on"+q])?ge(ce):q===Y&&D("Unhandled promise rejection",me)},Ct=function(q){u(O,l,function(){var ne=q.facade,me=q.value,ce=it(q),ge;if(ce&&(ge=M(function(){a?H.emit("unhandledRejection",me,ne):ke(Y,ne,me)}),q.rejection=a||it(q)?De:de,ge.error))throw ge.value})},it=function(q){return q.rejection!==de&&!q.parent},Ye=function(q){u(O,l,function(){var ne=q.facade;a?H.emit("rejectionHandled",ne):ke(ee,ne,q.value)})},We=function(q,ne,me){return function(ce){q(ne,ce,me)}},Ne=function(q,ne,me){q.done||(q.done=!0,me&&(q=me),q.value=ne,q.state=se,Ie(q,!0))},Ze=function(q,ne,me){if(!q.done){q.done=!0,me&&(q=me);try{if(q.facade===ne)throw U("Promise can't be resolved itself");var ce=Ge(ne);ce?T(function(){var ge={done:!1};try{u(ce,ne,We(Ze,ge,q),We(Ne,ge,q))}catch(G){Ne(ge,G,q)}}):(q.value=ne,q.state=Z,Ie(q,!1))}catch(ge){Ne({done:!1},ge,q)}}};if(L&&(x=function(ne){E(this,N),g(ne),u(Se,this);var me=F(this);try{ne(We(Ze,me),We(Ne,me))}catch(ce){Ne(me,ce)}},N=x.prototype,Se=function(ne){A(this,{type:S,done:!1,notified:!1,parent:!1,reactions:new P,rejection:!1,state:ae,value:void 0})},Se.prototype=d(N,"then",function(ne,me){var ce=F(this),ge=K(R(this,x));return ce.parent=!0,ge.ok=v(ne)?ne:!0,ge.fail=v(me)&&me,ge.domain=a?H.domain:void 0,ce.state==ae?ce.reactions.add(ge):T(function(){Fe(ge,ce)}),ge.promise}),we=function(){var q=new Se,ne=F(q);this.promise=q,this.resolve=We(Ze,ne),this.reject=We(Ne,ne)},w.f=K=function(q){return q===x||q===Ae?new we(q):Q(q)},!o&&v(y)&&I!==Object.prototype)){Ue=I.then,B||d(I,"then",function(ne,me){var ce=this;return new x(function(ge,G){u(Ue,ce,ge,G)}).then(ne,me)},{unsafe:!0});try{delete I.constructor}catch{}h&&h(I,N)}r({global:!0,constructor:!0,wrap:!0,forced:L},{Promise:x}),f(x,S,!1,!0),m(S)},function(i,s,t){var r=t(18),o=t(34),a=t(5),l=t(20),u=a("species");i.exports=function(d){var h=r(d),f=o.f;l&&h&&!h[u]&&f(h,u,{configurable:!0,get:function(){return this}})}},function(i,s,t){var r=t(12),o=TypeError;i.exports=function(a,l){if(r(l,a))return a;throw o("Incorrect invocation")}},function(i,s){var t=TypeError;i.exports=function(r,o){if(r<o)throw t("Not enough arguments");return r}},function(i,s,t){var r=t(9),o=t(58),a=t(73).f,l=t(162).set,u=t(163),d=t(273),h=t(274),f=t(97),m=r.MutationObserver||r.WebKitMutationObserver,g=r.document,v=r.process,p=r.Promise,E=a(r,"queueMicrotask"),R=E&&E.value,O,T,D,M,P,C,y,b;R||(O=function(){var w,S;for(f&&(w=v.domain)&&w.exit();T;){S=T.fn,T=T.next;try{S()}catch(L){throw T?M():D=void 0,L}}D=void 0,w&&w.enter()},!u&&!f&&!h&&m&&g?(P=!0,C=g.createTextNode(""),new m(O).observe(C,{characterData:!0}),M=function(){C.data=P=!P}):!d&&p&&p.resolve?(y=p.resolve(void 0),y.constructor=p,b=o(y.then,y),M=function(){b(O)}):f?M=function(){v.nextTick(O)}:(l=o(l,r),M=function(){l(O)})),i.exports=R||function(w){var S={fn:w,next:void 0};D&&(D.next=S),T||(T=S,M()),D=S}},function(i,s,t){var r=t(45),o=t(9);i.exports=/ipad|iphone|ipod/i.test(r)&&o.Pebble!==void 0},function(i,s,t){var r=t(45);i.exports=/web0s(?!.*chrome)/i.test(r)},function(i,s,t){var r=t(9);i.exports=function(o,a){var l=r.console;l&&l.error&&(arguments.length==1?l.error(o):l.error(o,a))}},function(i,s){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(r){var o={item:r,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var r=this.head;if(r)return this.head=r.next,this.tail===r&&(this.tail=null),r.item}},i.exports=t},function(i,s){i.exports=typeof window=="object"&&typeof Deno!="object"},function(i,s,t){var r=t(0),o=t(11),a=t(28),l=t(49),u=t(77),d=t(76),h=t(164);r({target:"Promise",stat:!0,forced:h},{all:function(m){var g=this,v=l.f(g),p=v.resolve,E=v.reject,R=u(function(){var O=a(g.resolve),T=[],D=0,M=1;d(m,function(P){var C=D++,y=!1;M++,o(O,g,P).then(function(b){y||(y=!0,T[C]=b,--M||p(T))},E)}),--M||p(T)});return R.error&&E(R.value),v.promise}})},function(i,s,t){var r=t(0),o=t(32),a=t(78).CONSTRUCTOR,l=t(62),u=t(18),d=t(8),h=t(48),f=l&&l.prototype;if(r({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(g){return this.then(void 0,g)}}),!o&&d(l)){var m=u("Promise").prototype.catch;f.catch!==m&&h(f,"catch",m,{unsafe:!0})}},function(i,s,t){var r=t(0),o=t(11),a=t(28),l=t(49),u=t(77),d=t(76),h=t(164);r({target:"Promise",stat:!0,forced:h},{race:function(m){var g=this,v=l.f(g),p=v.reject,E=u(function(){var R=a(g.resolve);d(m,function(O){o(R,g,O).then(v.resolve,p)})});return E.error&&p(E.value),v.promise}})},function(i,s,t){var r=t(0),o=t(11),a=t(49),l=t(78).CONSTRUCTOR;r({target:"Promise",stat:!0,forced:l},{reject:function(d){var h=a.f(this);return o(h.reject,void 0,d),h.promise}})},function(i,s,t){var r=t(0),o=t(18),a=t(32),l=t(62),u=t(78).CONSTRUCTOR,d=t(166),h=o("Promise"),f=a&&!u;r({target:"Promise",stat:!0,forced:a||u},{resolve:function(g){return d(f&&this===h?l:this,g)}})},function(i,s,t){var r=t(0),o=t(11),a=t(28),l=t(49),u=t(77),d=t(76);r({target:"Promise",stat:!0},{allSettled:function(f){var m=this,g=l.f(m),v=g.resolve,p=g.reject,E=u(function(){var R=a(m.resolve),O=[],T=0,D=1;d(f,function(M){var P=T++,C=!1;D++,o(R,m,M).then(function(y){C||(C=!0,O[P]={status:"fulfilled",value:y},--D||v(O))},function(y){C||(C=!0,O[P]={status:"rejected",reason:y},--D||v(O))})}),--D||v(O)});return E.error&&p(E.value),g.promise}})},function(i,s,t){var r=t(0),o=t(11),a=t(28),l=t(18),u=t(49),d=t(77),h=t(76),f="No one promise resolved";r({target:"Promise",stat:!0},{any:function(g){var v=this,p=l("AggregateError"),E=u.f(v),R=E.resolve,O=E.reject,T=d(function(){var D=a(v.resolve),M=[],P=0,C=1,y=!1;h(g,function(b){var w=P++,S=!1;C++,o(D,v,b).then(function(L){S||y||(y=!0,R(L))},function(L){S||y||(S=!0,M[w]=L,--C||O(new p(M,f)))})}),--C||O(new p(M,f))});return T.error&&O(T.value),E.promise}})},function(i,s,t){var r=t(0),o=t(32),a=t(62),l=t(3),u=t(18),d=t(8),h=t(160),f=t(166),m=t(48),g=a&&a.prototype,v=!!a&&l(function(){g.finally.call({then:function(){}},function(){})});if(r({target:"Promise",proto:!0,real:!0,forced:v},{finally:function(E){var R=h(this,u("Promise")),O=d(E);return this.then(O?function(T){return f(R,E()).then(function(){return T})}:E,O?function(T){return f(R,E()).then(function(){throw T})}:E)}}),!o&&d(a)){var p=u("Promise").prototype.finally;g.finally!==p&&m(g,"finally",p,{unsafe:!0})}},function(i,s,t){var r=t(4),o=t(117),a=t(40),l=t(74),u=r("".charAt),d=r("".charCodeAt),h=r("".slice),f=function(m){return function(g,v){var p=a(l(g)),E=o(v),R=p.length,O,T;return E<0||E>=R?m?"":void 0:(O=d(p,E),O<55296||O>56319||E+1===R||(T=d(p,E+1))<56320||T>57343?m?u(p,E):O:m?h(p,E,E+2):(O-55296<<10)+(T-56320)+65536)}};i.exports={codeAt:f(!1),charAt:f(!0)}},function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(i,s,t){var r=t(124),o=Object(r.mixin)(r);o._=o,s.a=o},function(i,s,t){s.a=r;function r(o){return o===null}},function(i,s,t){s.a=r;function r(o){return!!(o&&o.nodeType===1)}},function(i,s,t){var r=t(16);s.a=Object(r.a)("Date")},function(i,s,t){var r=t(16);s.a=Object(r.a)("RegExp")},function(i,s,t){var r=t(16);s.a=Object(r.a)("Error")},function(i,s,t){var r=t(16);s.a=Object(r.a)("Object")},function(i,s,t){s.a=a;var r=t(6),o=t(170);function a(l){return!Object(o.a)(l)&&Object(r.f)(l)&&!isNaN(parseFloat(l))}},function(i,s,t){var r=t(175),o=t(128);s.a=Object(r.a)(o.a)},function(i,s,t){s.a=d;var r=t(30),o=t(51),a=t(125),l=t(127),u=t(14);function d(h){if(h==null)return!0;var f=Object(r.a)(h);return typeof f=="number"&&(Object(o.a)(h)||Object(a.a)(h)||Object(l.a)(h))?f===0:Object(r.a)(Object(u.a)(h))===0}},function(i,s,t){s.a=R;var r=t(23),o=t(6),a=t(128),l=t(173),u=t(29),d=t(80),h=t(126),f=t(14),m=t(41),g=t(299),v="[object DataView]";function p(O,T,D,M){if(O===T)return O!==0||1/O===1/T;if(O==null||T==null)return!1;if(O!==O)return T!==T;var P=typeof O;return P!=="function"&&P!=="object"&&typeof T!="object"?!1:E(O,T,D,M)}function E(O,T,D,M){O instanceof r.a&&(O=O._wrapped),T instanceof r.a&&(T=T._wrapped);var P=o.t.call(O);if(P!==o.t.call(T))return!1;if(d.a&&P=="[object Object]"&&Object(h.a)(O)){if(!Object(h.a)(T))return!1;P=v}switch(P){case"[object RegExp]":case"[object String]":return""+O==""+T;case"[object Number]":return+O!=+O?+T!=+T:+O==0?1/+O===1/T:+O==+T;case"[object Date]":case"[object Boolean]":return+O==+T;case"[object Symbol]":return o.d.valueOf.call(O)===o.d.valueOf.call(T);case"[object ArrayBuffer]":case v:return E(Object(g.a)(O),Object(g.a)(T),D,M)}var C=P==="[object Array]";if(!C&&Object(l.a)(O)){var y=Object(a.a)(O);if(y!==Object(a.a)(T))return!1;if(O.buffer===T.buffer&&O.byteOffset===T.byteOffset)return!0;C=!0}if(!C){if(typeof O!="object"||typeof T!="object")return!1;var b=O.constructor,w=T.constructor;if(b!==w&&!(Object(u.a)(b)&&b instanceof b&&Object(u.a)(w)&&w instanceof w)&&"constructor"in O&&"constructor"in T)return!1}D=D||[],M=M||[];for(var S=D.length;S--;)if(D[S]===O)return M[S]===T;if(D.push(O),M.push(T),C){if(S=O.length,S!==T.length)return!1;for(;S--;)if(!p(O[S],T[S],D,M))return!1}else{var L=Object(f.a)(O),j;if(S=L.length,Object(f.a)(T).length!==S)return!1;for(;S--;)if(j=L[S],!(Object(m.a)(T,j)&&p(O[j],T[j],D,M)))return!1}return D.pop(),M.pop(),!0}function R(O,T){return p(O,T)}},function(i,s,t){s.a=o;var r=t(128);function o(a){return new Uint8Array(a.buffer||a,a.byteOffset||0,Object(r.a)(a))}},function(i,s,t){var r=t(16),o=t(80),a=t(129);s.a=o.b?Object(a.a)(a.b):Object(r.a)("Map")},function(i,s,t){var r=t(16),o=t(80),a=t(129);s.a=o.b?Object(a.a)(a.d):Object(r.a)("WeakMap")},function(i,s,t){var r=t(16),o=t(80),a=t(129);s.a=o.b?Object(a.a)(a.c):Object(r.a)("Set")},function(i,s,t){var r=t(16);s.a=Object(r.a)("WeakSet")},function(i,s,t){s.a=o;var r=t(14);function o(a){for(var l=Object(r.a)(a),u=l.length,d=Array(u),h=0;h<u;h++)d[h]=[l[h],a[l[h]]];return d}},function(i,s,t){s.a=a;var r=t(183),o=t(131);function a(l,u){var d=Object(r.a)(l);return u&&Object(o.a)(d,u),d}},function(i,s,t){s.a=r;function r(o,a){return a(o),o}},function(i,s,t){s.a=a;var r=t(41),o=t(82);function a(l,u){u=Object(o.a)(u);for(var d=u.length,h=0;h<d;h++){var f=u[h];if(!Object(r.a)(l,f))return!1;l=l[f]}return!!d}},function(i,s,t){s.a=a;var r=t(19),o=t(14);function a(l,u,d){u=Object(r.a)(u,d);for(var h=Object(o.a)(l),f=h.length,m={},g=0;g<f;g++){var v=h[g];m[v]=u(l[v],v,l)}return m}},function(i,s,t){s.a=a;var r=t(189),o=t(185);function a(l){return l==null?r.a:function(u){return Object(o.a)(l,u)}}},function(i,s,t){s.a=o;var r=t(83);function o(a,l,u){var d=Array(Math.max(0,a));l=Object(r.a)(l,u,1);for(var h=0;h<a;h++)d[h]=l(h);return d}},function(i,s,t){var r=t(191),o=t(192);s.a=Object(r.a)(o.a)},function(i,s,t){var r=t(191),o=t(313);s.a=Object(r.a)(o.a)},function(i,s,t){var r=t(179),o=t(192);s.a=Object(r.a)(o.a)},function(i,s,t){s.a=f;var r=t(182),o=t(23);t(193);var a=/(.)^/,l={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},u=/\\|'|\r|\n|\u2028|\u2029/g;function d(m){return"\\"+l[m]}var h=/^\s*(\w|\$)+\s*$/;function f(m,g,v){!g&&v&&(g=v),g=Object(r.a)({},g,o.a.templateSettings);var p=RegExp([(g.escape||a).source,(g.interpolate||a).source,(g.evaluate||a).source].join("|")+"|$","g"),E=0,R="__p+='";m.replace(p,function(M,P,C,y,b){return R+=m.slice(E,b).replace(u,d),E=b+M.length,P?R+=`'+
((__t=(`+P+`))==null?'':_.escape(__t))+
'`:C?R+=`'+
((__t=(`+C+`))==null?'':__t)+
'`:y&&(R+=`';
`+y+`
__p+='`),M}),R+=`';
`;var O=g.variable;if(O){if(!h.test(O))throw new Error(O)}else R=`with(obj||{}){
`+R+`}
`,O="obj";R=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+R+`return __p;
`;var T;try{T=new Function(O,"_",R)}catch(M){throw M.source=R,M}var D=function(M){return T.call(this,M,o.a)};return D.source="function("+O+`){
`+R+"}",D}},function(i,s,t){s.a=a;var r=t(29),o=t(82);function a(l,u,d){u=Object(o.a)(u);var h=u.length;if(!h)return Object(r.a)(d)?d.call(l):d;for(var f=0;f<h;f++){var m=l==null?void 0:l[u[f]];m===void 0&&(m=d,f=h),l=Object(r.a)(m)?m.call(l):m}return l}},function(i,s,t){s.a=o;var r=0;function o(a){var l=++r+"";return a?a+l:l}},function(i,s,t){s.a=o;var r=t(23);function o(a){var l=Object(r.a)(a);return l._chain=!0,l}},function(i,s,t){var r=t(22),o=t(65),a=t(195);s.a=Object(r.a)(function(l,u){u=Object(o.a)(u,!1,!1);var d=u.length;if(d<1)throw new Error("bindAll must be passed function names");for(;d--;){var h=u[d];l[h]=Object(a.a)(l[h],l)}return l})},function(i,s,t){s.a=o;var r=t(41);function o(a,l){var u=function(d){var h=u.cache,f=""+(l?l.apply(this,arguments):d);return Object(r.a)(h,f)||(h[f]=a.apply(this,arguments)),h[f]};return u.cache={},u}},function(i,s,t){var r=t(101),o=t(196),a=t(23);s.a=Object(r.a)(o.a,a.a,1)},function(i,s,t){s.a=o;var r=t(135);function o(a,l,u){var d,h,f,m,g=0;u||(u={});var v=function(){g=u.leading===!1?0:Object(r.a)(),d=null,m=a.apply(h,f),d||(h=f=null)},p=function(){var E=Object(r.a)();!g&&u.leading===!1&&(g=E);var R=l-(E-g);return h=this,f=arguments,R<=0||R>l?(d&&(clearTimeout(d),d=null),g=E,m=a.apply(h,f),d||(h=f=null)):!d&&u.trailing!==!1&&(d=setTimeout(v,R)),m};return p.cancel=function(){clearTimeout(d),g=0,d=h=f=null},p}},function(i,s,t){s.a=a;var r=t(22),o=t(135);function a(l,u,d){var h,f,m,g,v,p=function(){var R=Object(o.a)()-f;u>R?h=setTimeout(p,u-R):(h=null,d||(g=l.apply(v,m)),h||(m=v=null))},E=Object(r.a)(function(R){return v=this,m=R,f=Object(o.a)(),h||(h=setTimeout(p,u),d&&(g=l.apply(v,m))),g});return E.cancel=function(){clearTimeout(h),h=m=v=null},E}},function(i,s,t){s.a=o;var r=t(101);function o(a,l){return Object(r.a)(l,a)}},function(i,s,t){s.a=r;function r(){var o=arguments,a=o.length-1;return function(){for(var l=a,u=o[a].apply(this,arguments);l--;)u=o[l].call(this,u);return u}}},function(i,s,t){s.a=r;function r(o,a){return function(){if(--o<1)return a.apply(this,arguments)}}},function(i,s,t){var r=t(101),o=t(197);s.a=Object(r.a)(o.a,2)},function(i,s,t){var r=t(200),o=t(203);s.a=Object(o.a)(-1,r.a)},function(i,s,t){s.a=a;var r=t(204),o=t(100);function a(l,u){return Object(r.a)(l,Object(o.a)(u))}},function(i,s,t){var r=t(205);s.a=Object(r.a)(1)},function(i,s,t){var r=t(205);s.a=Object(r.a)(-1)},function(i,s,t){s.a=l;var r=t(84),o=t(136),a=t(19);function l(u,d,h){return Object(r.a)(u,Object(o.a)(Object(a.a)(d)),h)}},function(i,s,t){s.a=l;var r=t(19),o=t(24),a=t(14);function l(u,d,h){d=Object(r.a)(d,h);for(var f=!Object(o.a)(u)&&Object(a.a)(u),m=(f||u).length,g=0;g<m;g++){var v=f?f[g]:g;if(!d(u[v],v,u))return!1}return!0}},function(i,s,t){s.a=l;var r=t(19),o=t(24),a=t(14);function l(u,d,h){d=Object(r.a)(d,h);for(var f=!Object(o.a)(u)&&Object(a.a)(u),m=(f||u).length,g=0;g<m;g++){var v=f?f[g]:g;if(d(u[v],v,u))return!0}return!1}},function(i,s,t){var r=t(22),o=t(29),a=t(66),l=t(132),u=t(82);s.a=Object(r.a)(function(d,h,f){var m,g;return Object(o.a)(h)?g=h:(h=Object(u.a)(h),m=h.slice(0,-1),h=h[h.length-1]),Object(a.a)(d,function(v){var p=g;if(!p){if(m&&m.length&&(v=Object(l.a)(v,m)),v==null)return;p=v[h]}return p==null?p:p.apply(v,f)})})},function(i,s,t){s.a=a;var r=t(84),o=t(100);function a(l,u){return Object(r.a)(l,Object(o.a)(u))}},function(i,s,t){s.a=u;var r=t(24),o=t(64),a=t(19),l=t(52);function u(d,h,f){var m=1/0,g=1/0,v,p;if(h==null||typeof h=="number"&&typeof d[0]!="object"&&d!=null){d=Object(r.a)(d)?d:Object(o.a)(d);for(var E=0,R=d.length;E<R;E++)v=d[E],v!=null&&v<m&&(m=v)}else h=Object(a.a)(h,f),Object(l.a)(d,function(O,T,D){p=h(O,T,D),(p<g||p===1/0&&m===1/0)&&(m=O,g=p)});return m}},function(i,s,t){s.a=o;var r=t(207);function o(a){return Object(r.a)(a,1/0)}},function(i,s,t){s.a=l;var r=t(19),o=t(138),a=t(66);function l(u,d,h){var f=0;return d=Object(r.a)(d,h),Object(o.a)(Object(a.a)(u,function(m,g,v){return{value:m,index:f++,criteria:d(m,g,v)}}).sort(function(m,g){var v=m.criteria,p=g.criteria;if(v!==p){if(v>p||v===void 0)return 1;if(v<p||p===void 0)return-1}return m.index-g.index}),"value")}},function(i,s,t){var r=t(102),o=t(41);s.a=Object(r.a)(function(a,l,u){Object(o.a)(a,u)?a[u].push(l):a[u]=[l]})},function(i,s,t){var r=t(102);s.a=Object(r.a)(function(o,a,l){o[l]=a})},function(i,s,t){var r=t(102),o=t(41);s.a=Object(r.a)(function(a,l,u){Object(o.a)(a,u)?a[u]++:a[u]=1})},function(i,s,t){var r=t(102);s.a=Object(r.a)(function(o,a,l){o[l?0:1].push(a)},!0)},function(i,s,t){s.a=m;var r=t(51),o=t(6),a=t(125),l=t(24),u=t(66),d=t(133),h=t(64),f=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function m(g){return g?Object(r.a)(g)?o.q.call(g):Object(a.a)(g)?g.match(f):Object(l.a)(g)?Object(u.a)(g,d.a):Object(h.a)(g):[]}},function(i,s,t){s.a=a;var r=t(24),o=t(14);function a(l){return l==null?0:Object(r.a)(l)?l.length:Object(o.a)(l).length}},function(i,s,t){s.a=r;function r(o,a,l){return a in l}},function(i,s,t){var r=t(22),o=t(29),a=t(136),l=t(66),u=t(65),d=t(85),h=t(208);s.a=Object(r.a)(function(f,m){var g=m[0],v;return Object(o.a)(g)?(g=Object(a.a)(g),m.length>1&&(v=m[1])):(m=Object(l.a)(Object(u.a)(m,!1,!1),String),g=function(p,E){return!Object(d.a)(m,E)}),Object(h.a)(f,g,v)})},function(i,s,t){s.a=o;var r=t(209);function o(a,l,u){return a==null||a.length<1?l==null||u?void 0:[]:l==null||u?a[0]:Object(r.a)(a,a.length-l)}},function(i,s,t){s.a=o;var r=t(210);function o(a,l,u){return a==null||a.length<1?l==null||u?void 0:[]:l==null||u?a[a.length-1]:Object(r.a)(a,Math.max(0,a.length-l))}},function(i,s,t){s.a=o;var r=t(84);function o(a){return Object(r.a)(a,Boolean)}},function(i,s,t){s.a=o;var r=t(65);function o(a,l){return Object(r.a)(a,l,!1)}},function(i,s,t){var r=t(22),o=t(211);s.a=Object(r.a)(function(a,l){return Object(o.a)(a,l)})},function(i,s,t){var r=t(22),o=t(212),a=t(65);s.a=Object(r.a)(function(l){return Object(o.a)(Object(a.a)(l,!0,!0))})},function(i,s,t){s.a=a;var r=t(30),o=t(85);function a(l){for(var u=[],d=arguments.length,h=0,f=Object(r.a)(l);h<f;h++){var m=l[h];if(!Object(o.a)(u,m)){var g;for(g=1;g<d&&Object(o.a)(arguments[g],m);g++);g===d&&u.push(m)}}return u}},function(i,s,t){var r=t(22),o=t(213);s.a=Object(r.a)(o.a)},function(i,s,t){s.a=o;var r=t(30);function o(a,l){for(var u={},d=0,h=Object(r.a)(a);d<h;d++)l?u[a[d]]=l[d]:u[a[d][0]]=a[d][1];return u}},function(i,s,t){s.a=r;function r(o,a,l){a==null&&(a=o||0,o=0),l||(l=a<o?-1:1);for(var u=Math.max(Math.ceil((a-o)/l),0),d=Array(u),h=0;h<u;h++,o+=l)d[h]=o;return d}},function(i,s,t){s.a=o;var r=t(6);function o(a,l){if(l==null||l<1)return[];for(var u=[],d=0,h=a.length;d<h;)u.push(r.q.call(a,d,d+=l));return u}},function(i,s,t){s.a=d;var r=t(23),o=t(52),a=t(180),l=t(6),u=t(214);function d(h){return Object(o.a)(Object(a.a)(h),function(f){var m=r.a[f]=h[f];r.a.prototype[f]=function(){var g=[this._wrapped];return l.o.apply(g,arguments),Object(u.a)(this,m.apply(r.a,g))}}),r.a}},function(i,s,t){var r=t(23),o=t(52),a=t(6),l=t(214);Object(o.a)(["pop","push","reverse","shift","sort","splice","unshift"],function(u){var d=a.a[u];r.a.prototype[u]=function(){var h=this._wrapped;return h!=null&&(d.apply(h,arguments),(u==="shift"||u==="splice")&&h.length===0&&delete h[0]),Object(l.a)(this,h)}}),Object(o.a)(["concat","join","slice"],function(u){var d=a.a[u];r.a.prototype[u]=function(){var h=this._wrapped;return h!=null&&(h=d.apply(h,arguments)),Object(l.a)(this,h)}}),s.a=r.a},function(i,s,t){var r=t(361);i.exports=r},function(i,s,t){var r=t(12),o=t(362),a=Array.prototype;i.exports=function(l){var u=l.concat;return l===a||r(a,l)&&u===a.concat?o:u}},function(i,s,t){t(215);var r=t(26);i.exports=r("Array").concat},function(i,s){var t=TypeError,r=9007199254740991;i.exports=function(o){if(o>r)throw t("Maximum allowed index exceeded");return o}},function(i,s,t){var r=t(86),o=t(98),a=t(17),l=t(5),u=l("species"),d=Array;i.exports=function(h){var f;return r(h)&&(f=h.constructor,o(f)&&(f===d||r(f.prototype))?f=void 0:a(f)&&(f=f[u],f===null&&(f=void 0))),f===void 0?d:f}},function(i,s,t){var r=t(366);i.exports=r},function(i,s,t){var r=t(12),o=t(367),a=Array.prototype;i.exports=function(l){var u=l.map;return l===a||r(a,l)&&u===a.map?o:u}},function(i,s,t){t(368);var r=t(26);i.exports=r("Array").map},function(i,s,t){var r=t(0),o=t(105).map,a=t(104),l=a("map");r({target:"Array",proto:!0,forced:!l},{map:function(d){return o(this,d,arguments.length>1?arguments[1]:void 0)}})},function(i,s,t){var r=t(370);i.exports=r},function(i,s,t){t(371);var r=t(15);i.exports=r.Object.keys},function(i,s,t){var r=t(0),o=t(33),a=t(120),l=t(3),u=l(function(){a(1)});r({target:"Object",stat:!0,forced:u},{keys:function(h){return a(o(h))}})},function(i,s,t){var r=t(373);i.exports=r},function(i,s,t){t(218);var r=t(15),o=t(71);r.JSON||(r.JSON={stringify:JSON.stringify}),i.exports=function(l,u,d){return o(r.JSON.stringify,null,arguments)}},function(i,s,t){var r=t(375);i.exports=r},function(i,s,t){var r=t(12),o=t(376),a=Array.prototype;i.exports=function(l){var u=l.indexOf;return l===a||r(a,l)&&u===a.indexOf?o:u}},function(i,s,t){t(377);var r=t(26);i.exports=r("Array").indexOf},function(i,s,t){var r=t(0),o=t(4),a=t(115).indexOf,l=t(139),u=o([].indexOf),d=!!u&&1/u([1],1,-0)<0,h=l("indexOf");r({target:"Array",proto:!0,forced:d||!h},{indexOf:function(m){var g=arguments.length>1?arguments[1]:void 0;return d?u(this,m,g)||0:a(this,m,g)}})},function(i,s,t){t(63);var r=t(47),o=t(13),a=t(12),l=t(379),u=Array.prototype,d={DOMTokenList:!0,NodeList:!0};i.exports=function(h){var f=h.keys;return h===u||a(u,h)&&f===u.keys||o(d,r(h))?l:f}},function(i,s,t){var r=t(380);i.exports=r},function(i,s,t){t(60),t(96);var r=t(26);i.exports=r("Array").keys},function(i,s){var t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);i.exports=function(){return t(r),r}}else{var o=new Array(16);i.exports=function(){for(var l=0,u;l<16;l++)(l&3)===0&&(u=Math.random()*4294967296),o[l]=u>>>((l&3)<<3)&255;return o}}},function(i,s){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);function o(a,l){var u=l||0,d=t;return[d[a[u++]],d[a[u++]],d[a[u++]],d[a[u++]],"-",d[a[u++]],d[a[u++]],"-",d[a[u++]],d[a[u++]],"-",d[a[u++]],d[a[u++]],"-",d[a[u++]],d[a[u++]],d[a[u++]],d[a[u++]],d[a[u++]],d[a[u++]]].join("")}i.exports=o},function(i,s,t){function r(o){l.debug=l,l.default=l,l.coerce=g,l.disable=f,l.enable=h,l.enabled=m,l.humanize=t(384),Object.keys(o).forEach(function(v){l[v]=o[v]}),l.instances=[],l.names=[],l.skips=[],l.formatters={};function a(v){for(var p=0,E=0;E<v.length;E++)p=(p<<5)-p+v.charCodeAt(E),p|=0;return l.colors[Math.abs(p)%l.colors.length]}l.selectColor=a;function l(v){var p;function E(){if(E.enabled){for(var R=arguments.length,O=new Array(R),T=0;T<R;T++)O[T]=arguments[T];var D=E,M=Number(new Date),P=M-(p||M);D.diff=P,D.prev=p,D.curr=M,p=M,O[0]=l.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");var C=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,function(b,w){if(b==="%%")return b;C++;var S=l.formatters[w];if(typeof S=="function"){var L=O[C];b=S.call(D,L),O.splice(C,1),C--}return b}),l.formatArgs.call(D,O);var y=D.log||l.log;y.apply(D,O)}}return E.namespace=v,E.enabled=l.enabled(v),E.useColors=l.useColors(),E.color=a(v),E.destroy=u,E.extend=d,typeof l.init=="function"&&l.init(E),l.instances.push(E),E}function u(){var v=l.instances.indexOf(this);return v!==-1?(l.instances.splice(v,1),!0):!1}function d(v,p){return l(this.namespace+(typeof p>"u"?":":p)+v)}function h(v){l.save(v),l.names=[],l.skips=[];var p,E=(typeof v=="string"?v:"").split(/[\s,]+/),R=E.length;for(p=0;p<R;p++)E[p]&&(v=E[p].replace(/\*/g,".*?"),v[0]==="-"?l.skips.push(new RegExp("^"+v.substr(1)+"$")):l.names.push(new RegExp("^"+v+"$")));for(p=0;p<l.instances.length;p++){var O=l.instances[p];O.enabled=l.enabled(O.namespace)}}function f(){l.enable("")}function m(v){if(v[v.length-1]==="*")return!0;var p,E;for(p=0,E=l.skips.length;p<E;p++)if(l.skips[p].test(v))return!1;for(p=0,E=l.names.length;p<E;p++)if(l.names[p].test(v))return!0;return!1}function g(v){return v instanceof Error?v.stack||v.message:v}return l.enable(l.load()),l}i.exports=r},function(i,s){var t=1e3,r=t*60,o=r*60,a=o*24,l=a*7,u=a*365.25;i.exports=function(g,v){v=v||{};var p=typeof g;if(p==="string"&&g.length>0)return d(g);if(p==="number"&&isFinite(g))return v.long?f(g):h(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function d(g){if(g=String(g),!(g.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(v){var p=parseFloat(v[1]),E=(v[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return p*u;case"weeks":case"week":case"w":return p*l;case"days":case"day":case"d":return p*a;case"hours":case"hour":case"hrs":case"hr":case"h":return p*o;case"minutes":case"minute":case"mins":case"min":case"m":return p*r;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function h(g){var v=Math.abs(g);return v>=a?Math.round(g/a)+"d":v>=o?Math.round(g/o)+"h":v>=r?Math.round(g/r)+"m":v>=t?Math.round(g/t)+"s":g+"ms"}function f(g){var v=Math.abs(g);return v>=a?m(g,v,a,"day"):v>=o?m(g,v,o,"hour"):v>=r?m(g,v,r,"minute"):v>=t?m(g,v,t,"second"):g+" ms"}function m(g,v,p,E){var R=v>=p*1.5;return Math.round(g/p)+" "+E+(R?"s":"")}},function(i,s,t){t(386);var r=t(15);i.exports=r.Object.getPrototypeOf},function(i,s,t){var r=t(0),o=t(3),a=t(33),l=t(90),u=t(150),d=o(function(){l(1)});r({target:"Object",stat:!0,forced:d,sham:!u},{getPrototypeOf:function(f){return l(a(f))}})},function(i,s,t){i.exports=t(226)},function(i,s,t){t(389);var r=t(15);i.exports=r.Object.setPrototypeOf},function(i,s,t){var r=t(0),o=t(92);r({target:"Object",stat:!0},{setPrototypeOf:o})},function(i,s,t){var r=t(1),o=r(t(38)),a=r(t(25)),l=r(t(140)),u=t(67),d=t(396),h=t(31),f=h.isNullOrUndefined,m=t(2),g=m.extend,v=m.isObject,p=m.isEmpty,E=function(C){return(0,o.default)(C).call(C,-9)!=="-MdYXbMMI"},R=function(C){return{push:C,stats:C,engine:C,api:C,rtm:C}};function O(P){var C,y,b,w,S;if(E(P))return{};var L=(0,o.default)(P).call(P,0,8).toLowerCase(),j="lncldglobal.com";return{push:(0,a.default)(C="https://".concat(L,".push.")).call(C,j),stats:(0,a.default)(y="https://".concat(L,".stats.")).call(y,j),engine:(0,a.default)(b="https://".concat(L,".engine.")).call(b,j),api:(0,a.default)(w="https://".concat(L,".api.")).call(w,j),rtm:(0,a.default)(S="https://".concat(L,".rtm.")).call(S,j)}}var T=!1,D=!1;u.init=function(C){if(!v(C))return u.init({appId:C,appKey:arguments.length<=1?void 0:arguments[1],masterKey:arguments.length<=2?void 0:arguments[2]});var y=C.appId,b=C.appKey,w=C.masterKey,S=C.hookKey,L=C.serverURL,j=C.serverURLs,B=j===void 0?L:j,F=C.disableCurrentUser,A=C.production,I=C.realtime;if(D&&console.warn("Initializing LeanCloud Storage SDK which has already been initialized. Reinitializing the SDK might cause problems like unexpected cross-app data writing and invalid relations."),!y)throw new TypeError("appId must be a string");if(!b)throw new TypeError("appKey must be a string");if(w&&console.warn("MasterKey is not supposed to be used at client side."),E(y)&&!B&&p(u._config.serverURLs))throw new TypeError("serverURL option is required for apps from CN region");y!==u._config.applicationId?(u._config.masterKey=w,u._config.hookKey=S):(w&&(u._config.masterKey=w),S&&(u._config.hookKey=S)),u._config.applicationId=y,u._config.applicationKey=b,f(A)||u.setProduction(A),typeof F<"u"&&(u._config.disableCurrentUser=F);var x=T||typeof B<"u";if(x||(u._appRouter=new d(u)),u._setServerURLs(g({},O(y),u._config.serverURLs,typeof B=="string"?R(B):B),x),I)u._config.realtime=I;else if(u._sharedConfig.liveQueryRealtime){var N=u._config.serverURLs,U=N.api,W=N.rtm;u._config.realtime=new u._sharedConfig.liveQueryRealtime({appId:y,appKey:b,server:{api:U,RTMRouter:W}})}D=!0},u.setProduction=function(P){f(P)?u._config.production=null:u._config.production=P?1:0},u._setServerURLs=function(P){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;typeof P!="string"?g(u._config.serverURLs,P):u._config.serverURLs=R(P),C&&(u._appRouter?u._appRouter.disable():T=!0)},u.setServerURL=function(P){return u._setServerURLs(P)},u.setServerURLs=u.setServerURL,u.keepErrorRawMessage=function(P){u._sharedConfig.keepErrorRawMessage=P},u.setRequestTimeout=function(P){u._config.requestTimeout=P},u.initialize=u.init;var M=function(C){return(0,l.default)(u,C,{get:function(){return u._config[C]},set:function(b){u._config[C]=b}})};["applicationId","applicationKey","masterKey","hookKey"].forEach(M)},function(i,s,t){var r=t(12),o=t(392),a=Array.prototype;i.exports=function(l){var u=l.slice;return l===a||r(a,l)&&u===a.slice?o:u}},function(i,s,t){t(393);var r=t(26);i.exports=r("Array").slice},function(i,s,t){var r=t(0),o=t(86),a=t(98),l=t(17),u=t(116),d=t(36),h=t(35),f=t(103),m=t(5),g=t(104),v=t(99),p=g("slice"),E=m("species"),R=Array,O=Math.max;r({target:"Array",proto:!0,forced:!p},{slice:function(D,M){var P=h(this),C=d(P),y=u(D,C),b=u(M===void 0?C:M,C),w,S,L;if(o(P)&&(w=P.constructor,a(w)&&(w===R||o(w.prototype))?w=void 0:l(w)&&(w=w[E],w===null&&(w=void 0)),w===R||w===void 0))return v(P,y,b);for(S=new(w===void 0?R:w)(O(b-y,0)),L=0;y<b;y++,L++)y in P&&f(S,L,P[y]);return S.length=L,S}})},function(i,s,t){t(395);var r=t(15),o=r.Object,a=i.exports=function(u,d,h){return o.defineProperty(u,d,h)};o.defineProperty.sham&&(a.sham=!0)},function(i,s,t){var r=t(0),o=t(20),a=t(34).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==a,sham:!o},{defineProperty:a})},function(i,s,t){var r=t(106),o=t(225);function a(l){var u=this;this.AV=l,this.lockedUntil=0,o.getAsync("serverURLs").then(function(d){if(!u.disabled){if(!d)return u.lock(0);var h=d.serverURLs,f=d.lockedUntil;u.AV._setServerURLs(h,!1),u.lockedUntil=f}}).catch(function(){return u.lock(0)})}a.prototype.disable=function(){this.disabled=!0},a.prototype.lock=function(u){this.lockedUntil=Date.now()+u},a.prototype.refresh=function(){var u=this;if(!this.disabled&&!(Date.now()<this.lockedUntil)){this.lock(10);var d="https://app-router.com/2/route";return r({method:"get",url:d,query:{appId:this.AV.applicationId}}).then(function(h){if(!u.disabled){var f=h.ttl;if(!f)throw new Error("missing ttl");f=f*1e3;var m="https://",g={push:m+h.push_server,stats:m+h.stats_server,engine:m+h.engine_server,api:m+h.api_server};return u.AV._setServerURLs(g,!1),u.lock(f),o.setAsync("serverURLs",{serverURLs:g,lockedUntil:u.lockedUntil},f)}}).catch(function(h){console.warn("refresh server URLs failed: ".concat(h.message)),u.lock(600)})}},i.exports=a},function(i,s,t){i.exports=t(398)},function(i,s,t){var r=t(399);t(423),t(424),t(425),t(426),t(427),t(428),t(429),t(430),i.exports=r},function(i,s,t){var r=t(230);i.exports=r},function(i,s,t){t(215),t(96),t(401),t(407),t(408),t(409),t(410),t(234),t(411),t(412),t(413),t(414),t(415),t(416),t(417),t(418),t(419),t(420),t(421),t(422);var r=t(15);i.exports=r.Symbol},function(i,s,t){t(402),t(404),t(405),t(218),t(406)},function(i,s,t){var r=t(0),o=t(9),a=t(11),l=t(4),u=t(32),d=t(20),h=t(55),f=t(3),m=t(13),g=t(12),v=t(21),p=t(35),E=t(88),R=t(40),O=t(44),T=t(59),D=t(120),M=t(114),P=t(403),C=t(119),y=t(73),b=t(34),w=t(152),S=t(145),L=t(48),j=t(75),B=t(91),F=t(93),A=t(112),I=t(5),x=t(142),N=t(7),U=t(232),W=t(61),H=t(95),K=t(105).forEach,Q=B("hidden"),J="Symbol",Y="prototype",ee=H.set,ae=H.getterFor(J),Z=Object[Y],se=o.Symbol,de=se&&se[Y],De=o.TypeError,Se=o.QObject,we=y.f,Ae=b.f,Ue=P.f,Ge=S.f,Fe=l([].push),Ie=j("symbols"),ke=j("op-symbols"),Ct=j("wks"),it=!Se||!Se[Y]||!Se[Y].findChild,Ye=d&&f(function(){return T(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a!=7})?function(G,V,k){var _=we(Z,V);_&&delete Z[V],Ae(G,V,k),_&&G!==Z&&Ae(Z,V,_)}:Ae,We=function(G,V){var k=Ie[G]=T(de);return ee(k,{type:J,tag:G,description:V}),d||(k.description=V),k},Ne=function(V,k,_){V===Z&&Ne(ke,k,_),v(V);var ue=E(k);return v(_),m(Ie,ue)?(_.enumerable?(m(V,Q)&&V[Q][ue]&&(V[Q][ue]=!1),_=T(_,{enumerable:O(0,!1)})):(m(V,Q)||Ae(V,Q,O(1,{})),V[Q][ue]=!0),Ye(V,ue,_)):Ae(V,ue,_)},Ze=function(V,k){v(V);var _=p(k),ue=D(_).concat(ge(_));return K(ue,function(Ce){(!d||a(ne,_,Ce))&&Ne(V,Ce,_[Ce])}),V},q=function(V,k){return k===void 0?T(V):Ze(T(V),k)},ne=function(V){var k=E(V),_=a(Ge,this,k);return this===Z&&m(Ie,k)&&!m(ke,k)?!1:_||!m(this,k)||!m(Ie,k)||m(this,Q)&&this[Q][k]?_:!0},me=function(V,k){var _=p(V),ue=E(k);if(!(_===Z&&m(Ie,ue)&&!m(ke,ue))){var Ce=we(_,ue);return Ce&&m(Ie,ue)&&!(m(_,Q)&&_[Q][ue])&&(Ce.enumerable=!0),Ce}},ce=function(V){var k=Ue(p(V)),_=[];return K(k,function(ue){!m(Ie,ue)&&!m(F,ue)&&Fe(_,ue)}),_},ge=function(G){var V=G===Z,k=Ue(V?ke:p(G)),_=[];return K(k,function(ue){m(Ie,ue)&&(!V||m(Z,ue))&&Fe(_,Ie[ue])}),_};h||(se=function(){if(g(de,this))throw De("Symbol is not a constructor");var V=!arguments.length||arguments[0]===void 0?void 0:R(arguments[0]),k=A(V),_=function(ue){this===Z&&a(_,ke,ue),m(this,Q)&&m(this[Q],k)&&(this[Q][k]=!1),Ye(this,k,O(1,ue))};return d&&it&&Ye(Z,k,{configurable:!0,set:_}),We(k,V)},de=se[Y],L(de,"toString",function(){return ae(this).tag}),L(se,"withoutSetter",function(G){return We(A(G),G)}),S.f=ne,b.f=Ne,w.f=Ze,y.f=me,M.f=P.f=ce,C.f=ge,x.f=function(G){return We(I(G),G)},d&&(Ae(de,"description",{configurable:!0,get:function(){return ae(this).description}}),u||L(Z,"propertyIsEnumerable",ne,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!h,sham:!h},{Symbol:se}),K(D(Ct),function(G){N(G)}),r({target:J,stat:!0,forced:!h},{useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!h,sham:!d},{create:q,defineProperty:Ne,defineProperties:Ze,getOwnPropertyDescriptor:me}),r({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:ce}),U(),W(se,J),F[Q]=!0},function(i,s,t){var r=t(54),o=t(35),a=t(114).f,l=t(231),u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(h){try{return a(h)}catch{return l(u)}};i.exports.f=function(f){return u&&r(f)=="Window"?d(f):a(o(f))}},function(i,s,t){var r=t(0),o=t(18),a=t(13),l=t(40),u=t(75),d=t(233),h=u("string-to-symbol-registry"),f=u("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!d},{for:function(m){var g=l(m);if(a(h,g))return h[g];var v=o("Symbol")(g);return h[g]=v,f[v]=g,v}})},function(i,s,t){var r=t(0),o=t(13),a=t(89),l=t(57),u=t(75),d=t(233),h=u("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!d},{keyFor:function(m){if(!a(m))throw TypeError(l(m)+" is not a symbol");if(o(h,m))return h[m]}})},function(i,s,t){var r=t(0),o=t(55),a=t(3),l=t(119),u=t(33),d=!o||a(function(){l.f(1)});r({target:"Object",stat:!0,forced:d},{getOwnPropertySymbols:function(f){var m=l.f;return m?m(u(f)):[]}})},function(i,s,t){var r=t(7);r("asyncIterator")},function(i,s){},function(i,s,t){var r=t(7);r("hasInstance")},function(i,s,t){var r=t(7);r("isConcatSpreadable")},function(i,s,t){var r=t(7);r("match")},function(i,s,t){var r=t(7);r("matchAll")},function(i,s,t){var r=t(7);r("replace")},function(i,s,t){var r=t(7);r("search")},function(i,s,t){var r=t(7);r("species")},function(i,s,t){var r=t(7);r("split")},function(i,s,t){var r=t(7),o=t(232);r("toPrimitive"),o()},function(i,s,t){var r=t(18),o=t(7),a=t(61);o("toStringTag"),a(r("Symbol"),"Symbol")},function(i,s,t){var r=t(7);r("unscopables")},function(i,s,t){var r=t(9),o=t(61);o(r.JSON,"JSON",!0)},function(i,s){},function(i,s){},function(i,s,t){var r=t(7);r("asyncDispose")},function(i,s,t){var r=t(7);r("dispose")},function(i,s,t){var r=t(7);r("matcher")},function(i,s,t){var r=t(7);r("metadataKey")},function(i,s,t){var r=t(7);r("observable")},function(i,s,t){var r=t(7);r("metadata")},function(i,s,t){var r=t(7);r("patternMatch")},function(i,s,t){var r=t(7);r("replaceAll")},function(i,s,t){i.exports=t(432)},function(i,s,t){i.exports=t(433)},function(i,s,t){var r=t(434);i.exports=r},function(i,s,t){var r=t(235);i.exports=r},function(i,s,t){t(60),t(96),t(79),t(234);var r=t(142);i.exports=r.f("iterator")},function(i,s,t){i.exports=t(437)},function(i,s,t){var r=t(438);i.exports=r},function(i,s,t){var r=t(12),o=t(439),a=Array.prototype;i.exports=function(l){var u=l.filter;return l===a||r(a,l)&&u===a.filter?o:u}},function(i,s,t){t(440);var r=t(26);i.exports=r("Array").filter},function(i,s,t){var r=t(0),o=t(105).filter,a=t(104),l=a("filter");r({target:"Array",proto:!0,forced:!l},{filter:function(d){return o(this,d,arguments.length>1?arguments[1]:void 0)}})},function(i,s,t){var r;i.exports.timeout=function(o,a){var l=new r,u;return Promise.race([o,new Promise(function(d,h){u=setTimeout(function(){h(l)},a)})]).then(function(d){return clearTimeout(u),d},function(d){throw clearTimeout(u),d})},r=i.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"},r.prototype=Object.create(Error.prototype),r.prototype.name="TimeoutError"},function(i,s,t){var r=t(1),o=r(t(38)),a=r(t(53)),l=r(t(25)),u=t(2);i.exports=function(d){var h=/\s+/,f=(0,o.default)(Array.prototype);d.Events={on:function(g,v,p){var E,R,O,T,D;if(!v)return this;for(g=g.split(h),E=this._callbacks||(this._callbacks={}),R=g.shift();R;)D=E[R],O=D?D.tail:{},O.next=T={},O.context=p,O.callback=v,E[R]={tail:T,next:D?D.next:O},R=g.shift();return this},off:function(g,v,p){var E,R,O,T,D,M;if(R=this._callbacks){if(!(g||v||p))return delete this._callbacks,this;for(g=g?g.split(h):(0,a.default)(u).call(u,R),E=g.shift();E;)if(O=R[E],delete R[E],!(!O||!(v||p))){for(T=O.tail,O=O.next;O!==T;)D=O.callback,M=O.context,(v&&D!==v||p&&M!==p)&&this.on(E,D,M),O=O.next;E=g.shift()}return this}},trigger:function(g){var v,p,E,R,O,T,D;if(!(E=this._callbacks))return this;for(T=E.all,g=g.split(h),D=f.call(arguments,1),v=g.shift();v;){if(p=E[v],p)for(R=p.tail;(p=p.next)!==R;)p.callback.apply(p.context||this,D);if(p=T,p){var M;for(R=p.tail,O=(0,l.default)(M=[v]).call(M,D);(p=p.next)!==R;)p.callback.apply(p.context||this,O)}v=g.shift()}return this}},d.Events.bind=d.Events.on,d.Events.unbind=d.Events.off}},function(i,s,t){var r=t(1),o=r(t(10)),a=t(2);i.exports=function(l){l.GeoPoint=function(u,d){a.isArray(u)?(l.GeoPoint._validate(u[0],u[1]),this.latitude=u[0],this.longitude=u[1]):a.isObject(u)?(l.GeoPoint._validate(u.latitude,u.longitude),this.latitude=u.latitude,this.longitude=u.longitude):a.isNumber(u)&&a.isNumber(d)?(l.GeoPoint._validate(u,d),this.latitude=u,this.longitude=d):(this.latitude=0,this.longitude=0);var h=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return h._latitude}),this.__defineGetter__("longitude",function(){return h._longitude}),this.__defineSetter__("latitude",function(f){l.GeoPoint._validate(f,h.longitude),h._latitude=f}),this.__defineSetter__("longitude",function(f){l.GeoPoint._validate(h.latitude,f),h._longitude=f}))},l.GeoPoint._validate=function(u,d){if(u<-90)throw new Error("AV.GeoPoint latitude "+u+" < -90.0.");if(u>90)throw new Error("AV.GeoPoint latitude "+u+" > 90.0.");if(d<-180)throw new Error("AV.GeoPoint longitude "+d+" < -180.0.");if(d>180)throw new Error("AV.GeoPoint longitude "+d+" > 180.0.")},l.GeoPoint.current=function(){return new o.default(function(u,d){navigator.geolocation.getCurrentPosition(function(h){u(new l.GeoPoint({latitude:h.coords.latitude,longitude:h.coords.longitude}))},d)})},a.extend(l.GeoPoint.prototype,{toJSON:function(){return l.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(d){var h=Math.PI/180,f=this.latitude*h,m=this.longitude*h,g=d.latitude*h,v=d.longitude*h,p=f-g,E=m-v,R=Math.sin(p/2),O=Math.sin(E/2),T=R*R+Math.cos(f)*Math.cos(g)*O*O;return T=Math.min(1,T),2*Math.asin(Math.sqrt(T))},kilometersTo:function(d){return this.radiansTo(d)*6371},milesTo:function(d){return this.radiansTo(d)*3958.8}})}},function(i,s,t){var r=t(2);i.exports=function(o){var a="*";o.ACL=function(l){var u=this;if(u.permissionsById={},r.isObject(l))if(l instanceof o.User)u.setReadAccess(l,!0),u.setWriteAccess(l,!0);else{if(r.isFunction(l))throw new Error("AV.ACL() called with a function.  Did you forget ()?");o._objectEach(l,function(d,h){if(!r.isString(h))throw new Error("Tried to create an ACL with an invalid userId.");u.permissionsById[h]={},o._objectEach(d,function(f,m){if(m!=="read"&&m!=="write")throw new Error("Tried to create an ACL with an invalid permission type.");if(!r.isBoolean(f))throw new Error("Tried to create an ACL with an invalid permission value.");u.permissionsById[h][m]=f})})}},o.ACL.prototype.toJSON=function(){return r.clone(this.permissionsById)},o.ACL.prototype._setAccess=function(l,u,d){if(u instanceof o.User?u=u.id:u instanceof o.Role&&(u="role:"+u.getName()),!r.isString(u))throw new Error("userId must be a string.");if(!r.isBoolean(d))throw new Error("allowed must be either true or false.");var h=this.permissionsById[u];if(!h)if(d)h={},this.permissionsById[u]=h;else return;d?this.permissionsById[u][l]=!0:(delete h[l],r.isEmpty(h)&&delete this.permissionsById[u])},o.ACL.prototype._getAccess=function(l,u){u instanceof o.User?u=u.id:u instanceof o.Role&&(u="role:"+u.getName());var d=this.permissionsById[u];return d?!!d[l]:!1},o.ACL.prototype.setReadAccess=function(l,u){this._setAccess("read",l,u)},o.ACL.prototype.getReadAccess=function(l){return this._getAccess("read",l)},o.ACL.prototype.setWriteAccess=function(l,u){this._setAccess("write",l,u)},o.ACL.prototype.getWriteAccess=function(l){return this._getAccess("write",l)},o.ACL.prototype.setPublicReadAccess=function(l){this.setReadAccess(a,l)},o.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(a)},o.ACL.prototype.setPublicWriteAccess=function(l){this.setWriteAccess(a,l)},o.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(a)},o.ACL.prototype.getRoleReadAccess=function(l){if(l instanceof o.Role&&(l=l.getName()),r.isString(l))return this.getReadAccess("role:"+l);throw new Error("role must be a AV.Role or a String")},o.ACL.prototype.getRoleWriteAccess=function(l){if(l instanceof o.Role&&(l=l.getName()),r.isString(l))return this.getWriteAccess("role:"+l);throw new Error("role must be a AV.Role or a String")},o.ACL.prototype.setRoleReadAccess=function(l,u){if(l instanceof o.Role&&(l=l.getName()),r.isString(l)){this.setReadAccess("role:"+l,u);return}throw new Error("role must be a AV.Role or a String")},o.ACL.prototype.setRoleWriteAccess=function(l,u){if(l instanceof o.Role&&(l=l.getName()),r.isString(l)){this.setWriteAccess("role:"+l,u);return}throw new Error("role must be a AV.Role or a String")}}},function(i,s,t){var r=t(1),o=r(t(25)),a=r(t(107)),l=r(t(68)),u=r(t(42)),d=t(2);i.exports=function(h){h.Op=function(){this._initialize.apply(this,arguments)},d.extend(h.Op.prototype,{_initialize:function(){}}),d.extend(h.Op,{_extend:h._extend,_opDecoderMap:{},_registerDecoder:function(m,g){h.Op._opDecoderMap[m]=g},_decode:function(m){var g=h.Op._opDecoderMap[m.__op];if(g)return g(m)}}),h.Op._registerDecoder("Batch",function(f){var m=null;return h._arrayEach(f.ops,function(g){g=h.Op._decode(g),m=g._mergeWithPrevious(m)}),m}),h.Op.Set=h.Op._extend({_initialize:function(m){this._value=m},value:function(){return this._value},toJSON:function(){return h._encode(this.value())},_mergeWithPrevious:function(m){return this},_estimate:function(m){return this.value()}}),h.Op._UNSET={},h.Op.Unset=h.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(m){return this},_estimate:function(m){return h.Op._UNSET}}),h.Op._registerDecoder("Delete",function(f){return new h.Op.Unset}),h.Op.Increment=h.Op._extend({_initialize:function(m){this._amount=m},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(m){if(m){if(m instanceof h.Op.Unset)return new h.Op.Set(this.amount());if(m instanceof h.Op.Set)return new h.Op.Set(m.value()+this.amount());if(m instanceof h.Op.Increment)return new h.Op.Increment(this.amount()+m.amount());throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m?m+this.amount():this.amount()}}),h.Op._registerDecoder("Increment",function(f){return new h.Op.Increment(f.amount)}),h.Op.BitAnd=h.Op._extend({_initialize:function(m){this._value=m},value:function(){return this._value},toJSON:function(){return{__op:"BitAnd",value:this.value()}},_mergeWithPrevious:function(m){if(m){if(m instanceof h.Op.Unset)return new h.Op.Set(0);if(m instanceof h.Op.Set)return new h.Op.Set(m.value()&this.value());throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m&this.value()}}),h.Op._registerDecoder("BitAnd",function(f){return new h.Op.BitAnd(f.value)}),h.Op.BitOr=h.Op._extend({_initialize:function(m){this._value=m},value:function(){return this._value},toJSON:function(){return{__op:"BitOr",value:this.value()}},_mergeWithPrevious:function(m){if(m){if(m instanceof h.Op.Unset)return new h.Op.Set(this.value());if(m instanceof h.Op.Set)return new h.Op.Set(m.value()|this.value());throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m|this.value()}}),h.Op._registerDecoder("BitOr",function(f){return new h.Op.BitOr(f.value)}),h.Op.BitXor=h.Op._extend({_initialize:function(m){this._value=m},value:function(){return this._value},toJSON:function(){return{__op:"BitXor",value:this.value()}},_mergeWithPrevious:function(m){if(m){if(m instanceof h.Op.Unset)return new h.Op.Set(this.value());if(m instanceof h.Op.Set)return new h.Op.Set(m.value()^this.value());throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m^this.value()}}),h.Op._registerDecoder("BitXor",function(f){return new h.Op.BitXor(f.value)}),h.Op.Add=h.Op._extend({_initialize:function(m){this._objects=m},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:h._encode(this.objects())}},_mergeWithPrevious:function(m){if(m){if(m instanceof h.Op.Unset)return new h.Op.Set(this.objects());if(m instanceof h.Op.Set)return new h.Op.Set(this._estimate(m.value()));if(m instanceof h.Op.Add){var g;return new h.Op.Add((0,o.default)(g=m.objects()).call(g,this.objects()))}else throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m?(0,o.default)(m).call(m,this.objects()):d.clone(this.objects())}}),h.Op._registerDecoder("Add",function(f){return new h.Op.Add(h._decode(f.objects))}),h.Op.AddUnique=h.Op._extend({_initialize:function(m){this._objects=d.uniq(m)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:h._encode(this.objects())}},_mergeWithPrevious:function(m){if(m){if(m instanceof h.Op.Unset)return new h.Op.Set(this.objects());if(m instanceof h.Op.Set)return new h.Op.Set(this._estimate(m.value()));if(m instanceof h.Op.AddUnique)return new h.Op.AddUnique(this._estimate(m.objects()));throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){if(m){var g=d.clone(m);return h._arrayEach(this.objects(),function(v){if(v instanceof h.Object&&v.id){var p=(0,a.default)(d).call(d,g,function(R){return R instanceof h.Object&&R.id===v.id});if(!p)g.push(v);else{var E=(0,l.default)(d).call(d,g,p);g[E]=v}}else d.contains(g,v)||g.push(v)}),g}else return d.clone(this.objects())}}),h.Op._registerDecoder("AddUnique",function(f){return new h.Op.AddUnique(h._decode(f.objects))}),h.Op.Remove=h.Op._extend({_initialize:function(m){this._objects=d.uniq(m)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:h._encode(this.objects())}},_mergeWithPrevious:function(m){if(m){if(m instanceof h.Op.Unset)return m;if(m instanceof h.Op.Set)return new h.Op.Set(this._estimate(m.value()));if(m instanceof h.Op.Remove)return new h.Op.Remove(d.union(m.objects(),this.objects()));throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){if(m){var g=d.difference(m,this.objects());return h._arrayEach(this.objects(),function(v){v instanceof h.Object&&v.id&&(g=d.reject(g,function(p){return p instanceof h.Object&&p.id===v.id}))}),g}else return[]}}),h.Op._registerDecoder("Remove",function(f){return new h.Op.Remove(h._decode(f.objects))}),h.Op.Relation=h.Op._extend({_initialize:function(m,g){this._targetClassName=null;var v=this,p=function(R){if(R instanceof h.Object){if(!R.id)throw new Error("You can't add an unsaved AV.Object to a relation.");if(v._targetClassName||(v._targetClassName=R.className),v._targetClassName!==R.className)throw new Error("Tried to create a AV.Relation with 2 different types: "+v._targetClassName+" and "+R.className+".");return R.id}return R};this.relationsToAdd=d.uniq((0,u.default)(d).call(d,m,p)),this.relationsToRemove=d.uniq((0,u.default)(d).call(d,g,p))},added:function(){var m=this;return(0,u.default)(d).call(d,this.relationsToAdd,function(g){var v=h.Object._create(m._targetClassName);return v.id=g,v})},removed:function(){var m=this;return(0,u.default)(d).call(d,this.relationsToRemove,function(g){var v=h.Object._create(m._targetClassName);return v.id=g,v})},toJSON:function(){var m=null,g=null,v=this,p=function(O){return{__type:"Pointer",className:v._targetClassName,objectId:O}},E=null;return this.relationsToAdd.length>0&&(E=(0,u.default)(d).call(d,this.relationsToAdd,p),m={__op:"AddRelation",objects:E}),this.relationsToRemove.length>0&&(E=(0,u.default)(d).call(d,this.relationsToRemove,p),g={__op:"RemoveRelation",objects:E}),m&&g?{__op:"Batch",ops:[m,g]}:m||g||{}},_mergeWithPrevious:function(m){if(m){if(m instanceof h.Op.Unset)throw new Error("You can't modify a relation after deleting it.");if(m instanceof h.Op.Relation){if(m._targetClassName&&m._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+m._targetClassName+", but "+this._targetClassName+" was passed in.");var g=d.union(d.difference(m.relationsToAdd,this.relationsToRemove),this.relationsToAdd),v=d.union(d.difference(m.relationsToRemove,this.relationsToAdd),this.relationsToRemove),p=new h.Op.Relation(g,v);return p._targetClassName=this._targetClassName,p}else throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m,g,v){if(m)if(m instanceof h.Relation){if(this._targetClassName)if(m.targetClassName){if(m.targetClassName!==this._targetClassName)throw new Error("Related object must be a "+m.targetClassName+", but a "+this._targetClassName+" was passed in.")}else m.targetClassName=this._targetClassName;return m}else throw new Error("Op is invalid after previous op.");else{var p=new h.Relation(g,v);p.targetClassName=this._targetClassName}}}),h.Op._registerDecoder("AddRelation",function(f){return new h.Op.Relation(h._decode(f.objects),[])}),h.Op._registerDecoder("RemoveRelation",function(f){return new h.Op.Relation([],h._decode(f.objects))})}},function(i,s,t){var r=t(447);i.exports=r},function(i,s,t){var r=t(12),o=t(448),a=Array.prototype;i.exports=function(l){var u=l.find;return l===a||r(a,l)&&u===a.find?o:u}},function(i,s,t){t(449);var r=t(26);i.exports=r("Array").find},function(i,s,t){var r=t(0),o=t(105).find,a=t(122),l="find",u=!0;l in[]&&Array(1)[l](function(){u=!1}),r({target:"Array",proto:!0,forced:u},{find:function(h){return o(this,h,arguments.length>1?arguments[1]:void 0)}}),a(l)},function(i,s,t){var r=t(2);i.exports=function(o){o.Relation=function(a,l){if(!r.isString(l))throw new TypeError("key must be a string");this.parent=a,this.key=l,this.targetClassName=null},o.Relation.reverseQuery=function(a,l,u){var d=new o.Query(a);return d.equalTo(l,u._toPointer()),d},r.extend(o.Relation.prototype,{_ensureParentAndKey:function(l,u){if(this.parent=this.parent||l,this.key=this.key||u,this.parent!==l)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.key!==u)throw new Error("Internal Error. Relation retrieved from two different keys.")},add:function(l){r.isArray(l)||(l=[l]);var u=new o.Op.Relation(l,[]);this.parent.set(this.key,u),this.targetClassName=u._targetClassName},remove:function(l){r.isArray(l)||(l=[l]);var u=new o.Op.Relation([],l);this.parent.set(this.key,u),this.targetClassName=u._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var l,u;return this.targetClassName?(l=o.Object._getSubclass(this.targetClassName),u=new o.Query(l)):(l=o.Object._getSubclass(this.parent.className),u=new o.Query(l),u._defaultParams.redirectClassNameForKey=this.key),u._addCondition("$relatedTo","object",this.parent._toPointer()),u._addCondition("$relatedTo","key",this.key),u}})}},function(i,s,t){var r=t(1),o=r(t(10)),a=t(2),l=t(452),u=t(453),d=t(499),h=t(43),f=t(27),m=f.request,g=f._request,v=t(31),p=v.tap,E=v.transformFetchOptions,R=t(69)("leancloud:file"),O=t(503);i.exports=function(T){var D=function(y){return a.isString(y)?y.match(/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/)[4]:""},M=function(y){if(y<26)return String.fromCharCode(65+y);if(y<52)return String.fromCharCode(97+(y-26));if(y<62)return String.fromCharCode(48+(y-52));if(y===62)return"+";if(y===63)return"/";throw new Error("Tried to encode large digit "+y+" in base64.")},P=function(y){var b=[];return b.length=Math.ceil(y.length/3),a.times(b.length,function(w){var S=y[w*3],L=y[w*3+1]||0,j=y[w*3+2]||0,B=w*3+1<y.length,F=w*3+2<y.length;b[w]=[M(S>>2&63),M(S<<4&48|L>>4&15),B?M(L<<2&60|j>>6&3):"=",F?M(j&63):"="].join("")}),b.join("")};T.File=function(C,y,b){if(this.attributes={name:C,url:"",metaData:{},base64:""},a.isString(y))throw new TypeError("Creating an AV.File from a String is not yet supported.");a.isArray(y)&&(this.attributes.metaData.size=y.length,y={base64:P(y)}),this._extName="",this._data=y,this._uploadHeaders={},y&&y.blob&&typeof y.blob.uri=="string"&&(this._extName=D(y.blob.uri)),typeof Blob<"u"&&y instanceof Blob&&(y.size&&(this.attributes.metaData.size=y.size),y.name&&(this._extName=D(y.name)));var w;if(y&&y.owner)w=y.owner;else if(!T._config.disableCurrentUser)try{w=T.User.current()}catch(S){if(S.code!=="SYNC_API_NOT_AVAILABLE")throw S}this.attributes.metaData.owner=w?w.id:"unknown",this.set("mime_type",b)},T.File.withURL=function(C,y,b,w){if(!C||!y)throw new Error("Please provide file name and url");var S=new T.File(C,null,w);if(b)for(var L in b)S.attributes.metaData[L]||(S.attributes.metaData[L]=b[L]);return S.attributes.url=y,S.attributes.metaData.__source="external",S.attributes.metaData.size=0,S},T.File.createWithoutData=function(C){if(!C)throw new TypeError("The objectId must be provided");var y=new T.File;return y.id=C,y},T.File.censor=function(C){if(!T._config.masterKey)throw new Error("Cannot censor a file without masterKey");return m({method:"POST",path:"/files/".concat(C,"/censor"),authOptions:{useMasterKey:!0}}).then(function(y){return y.censorResult})},a.extend(T.File.prototype,{className:"_File",_toFullJSON:function(y){var b=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=a.clone(this.attributes);return T._objectEach(S,function(L,j){S[j]=T._encode(L,y,void 0,w)}),T._objectEach(this._operations,function(L,j){S[j]=L}),a.has(this,"id")&&(S.objectId=this.id),["createdAt","updatedAt"].forEach(function(L){if(a.has(b,L)){var j=b[L];S[L]=a.isDate(j)?j.toJSON():j}}),w&&(S.__type="File"),S},toFullJSON:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this._toFullJSON(y)},toJSON:function(y,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[this];return this._toFullJSON(w,!1)},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},getACL:function(){return this._acl},setACL:function(y){return y instanceof T.ACL?(this._acl=y,this):new h(h.OTHER_CAUSE,"ACL must be a AV.ACL.")},name:function(){return this.get("name")},url:function(){return this.get("url")},get:function(y){switch(y){case"objectId":return this.id;case"url":case"name":case"mime_type":case"metaData":case"createdAt":case"updatedAt":return this.attributes[y];default:return this.attributes.metaData[y]}},set:function(){for(var y=this,b=function(F,A){switch(F){case"name":case"url":case"mime_type":case"base64":case"metaData":y.attributes[F]=A;break;default:y.attributes.metaData[F]=A;break}},w=arguments.length,S=new Array(w),L=0;L<w;L++)S[L]=arguments[L];switch(S.length){case 1:for(var j in S[0])b(j,S[0][j]);break;case 2:b(S[0],S[1]);break}return this},setUploadHeader:function(y,b){return this._uploadHeaders[y]=b,this},metaData:function(y,b){return y&&b?(this.attributes.metaData[y]=b,this):y&&!b?this.attributes.metaData[y]:this.attributes.metaData},thumbnailURL:function(y,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"png",j=this.attributes.url;if(!j)throw new Error("Invalid url.");if(!y||!b||y<=0||b<=0)throw new Error("Invalid width or height value.");if(w<=0||w>100)throw new Error("Invalid quality value.");var B=S?2:1;return j+"?imageView/"+B+"/w/"+y+"/h/"+b+"/q/"+w+"/format/"+L},size:function(){return this.metaData().size},ownerId:function(){return this.metaData().owner},destroy:function(y){if(!this.id)return o.default.reject(new Error("The file id does not eixst."));var b=g("files",null,this.id,"DELETE",null,y);return b},_fileToken:function(y,b){var w=this.attributes.name,S=D(w);!S&&this._extName&&(w+=this._extName,S=this._extName);var L={name:w,keep_file_name:b.keepFileName,key:b.key,ACL:this._acl,mime_type:y,metaData:this.attributes.metaData};return g("fileTokens",null,null,"POST",L,b)},save:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.id)throw new Error("File is already saved.");if(!this._previousSave){if(this._data){var w=this.get("mime_type");this._previousSave=this._fileToken(w,b).then(function(L){return L.mime_type&&(w=L.mime_type,y.set("mime_type",w)),y._token=L.token,o.default.resolve().then(function(){var j=y._data;if(j&&j.base64)return O(j.base64,w);if(j&&j.blob)return!j.blob.type&&w&&(j.blob.type=w),j.blob.name||(j.blob.name=y.get("name")),j.blob;if(typeof Blob<"u"&&j instanceof Blob)return j;throw new TypeError("malformed file data")}).then(function(j){var B=a.extend({},b);switch(b.onprogress&&(B.onprogress=function(F){if(F.direction!=="download")return b.onprogress(F)}),L.provider){case"s3":return d(L,j,y,B);case"qcloud":return l(L,j,y,B);case"qiniu":default:return u(L,j,y,B)}}).then(p(function(){return y._callback(!0)}),function(j){throw y._callback(!1),j})})}else if(this.attributes.url&&this.attributes.metaData.__source==="external"){var S={name:this.attributes.name,ACL:this._acl,metaData:this.attributes.metaData,mime_type:this.mimeType,url:this.attributes.url};this._previousSave=g("files",null,null,"post",S,b).then(function(L){return y.id=L.objectId,y})}}return this._previousSave},_callback:function(y){g("fileCallback",null,null,"post",{token:this._token,result:y}).catch(R),delete this._token,delete this._data},fetch:function(y,b){if(!this.id)throw new Error("Cannot fetch unsaved file");var w=g("files",null,this.id,"GET",E(y),b);return w.then(this._finishFetch.bind(this))},_finishFetch:function(y){var b=T.Object.prototype.parse(y);return b.attributes={name:b.name,url:b.url,mime_type:b.mime_type,bucket:b.bucket},b.attributes.metaData=b.metaData||{},b.id=b.objectId,delete b.objectId,delete b.metaData,delete b.url,delete b.name,delete b.mime_type,delete b.bucket,a.extend(this,b),this},censor:function(){if(!this.id)throw new Error("Cannot censor an unsaved file");return T.File.censor(this.id)}})}},function(i,s,t){var r=t(70),o=r.getAdapter,a=t(69)("cos");i.exports=function(l,u,d){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},f=l.upload_url+"?sign="+encodeURIComponent(l.token),m={field:"fileContent",data:u,name:d.attributes.name},g={headers:d._uploadHeaders,data:{op:"upload"},onprogress:h.onprogress};a("url: %s, file: %o, options: %o",f,m,g);var v=o("upload");return v(f,m,g).then(function(p){if(a(p.status,p.data),p.ok===!1){var E=new Error(p.status);throw E.response=p,E}return d.attributes.url=l.url,d._bucket=l.bucket,d.id=l.objectId,d},function(p){var E=p.response;throw E&&(a(E.status,E.data),p.statusCode=E.status,p.response=E.data),p})}},function(i,s,t){var r=t(38),o=t(236),a=t(87),l=t(238),u=t(463),d=t(1),h=d(t(467)),f=d(t(489)),m=d(t(491)),g=d(t(496)),v=d(t(497)),p=d(t(37)),E=d(t(25)),R=d(t(10)),O=d(t(38));function T(U){var W=D();return function(){var K=(0,m.default)(U),Q;if(W){var J=(0,m.default)(this).constructor;Q=u(K,arguments,J)}else Q=K.apply(this,arguments);return(0,f.default)(this,Q)}}function D(){if(typeof Reflect>"u"||!u||u.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(u(Boolean,[],function(){})),!0}catch{return!1}}function M(U,W){var H=typeof a<"u"&&l(U)||U["@@iterator"];if(!H){if(Array.isArray(U)||(H=P(U))||W){H&&(U=H);var K=0,Q=function(){};return{s:Q,n:function(){return K>=U.length?{done:!0}:{done:!1,value:U[K++]}},e:function(Z){throw Z},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var J=!0,Y=!1,ee;return{s:function(){H=H.call(U)},n:function(){var Z=H.next();return J=Z.done,Z},e:function(Z){Y=!0,ee=Z},f:function(){try{!J&&H.return!=null&&H.return()}finally{if(Y)throw ee}}}}function P(U,W){var H;if(U){if(typeof U=="string")return C(U,W);var K=r(H=Object.prototype.toString.call(U)).call(H,8,-1);if(K==="Object"&&U.constructor&&(K=U.constructor.name),K==="Map"||K==="Set")return o(U);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return C(U,W)}}function C(U,W){(W==null||W>U.length)&&(W=U.length);for(var H=0,K=new Array(W);H<W;H++)K[H]=U[H];return K}var y=t(70),b=y.getAdapter,w=t(69)("leancloud:qiniu"),S=t(106),L=t(498),j=1024*1024*64,B=1024*1024*16;function F(U,W,H){var K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Q=U.token,J=U.upload_url||"https://upload.qiniup.com",Y={field:"file",data:W,name:H.attributes.name},ee={headers:H._uploadHeaders,data:{name:H.attributes.name,key:U.key,token:Q},onprogress:K.onprogress};w("url: %s, file: %o, options: %o",J,Y,ee);var ae=b("upload");return ae(J,Y,ee).then(function(Z){if(w(Z.status,Z.data),Z.ok===!1){var se=Z.status;Z.data&&(Z.data.error?se=Z.data.error:se=(0,p.default)(Z.data));var de=new Error(se);throw de.response=Z,de}return H.attributes.url=U.url,H._bucket=U.bucket,H.id=U.objectId,H},function(Z){var se=Z.response;throw se&&(w(se.status,se.data),Z.statusCode=se.status,Z.response=se.data),Z})}function A(U){var W=L(unescape(encodeURIComponent(U))),H="",K=M(W),Q;try{for(K.s();!(Q=K.n()).done;){var J=Q.value;switch(J){case"+":H+="-";break;case"/":H+="_";break;default:H+=J}}}catch(Y){K.e(Y)}finally{K.f()}return H}var I=function(){function U(W,H,K,Q){var J,Y,ee=this;(0,g.default)(this,U),this.uploadInfo=W,this.data=H,this.file=K,this.size=void 0,this.offset=0,this.uploadedChunks=0;var ae=A(W.key),Z=W.upload_url||"https://upload.qiniup.com";this.baseURL=(0,E.default)(J=(0,E.default)(Y="".concat(Z,"/buckets/")).call(Y,W.bucket,"/objects/")).call(J,ae,"/uploads"),this.upToken="UpToken "+W.token,this.uploaded=0,Q&&Q.onprogress&&(this.onProgress=function(se){var de=se.loaded;de+=ee.uploadedChunks*B,!(de<=ee.uploaded)&&(ee.size?Q.onprogress({loaded:de,total:ee.size,percent:de/ee.size*100}):Q.onprogress({loaded:de}),ee.uploaded=de)})}return(0,v.default)(U,[{key:"getUploadId",value:function(){return S({method:"POST",url:this.baseURL,headers:{Authorization:this.upToken}}).then(function(H){return H.uploadId})}},{key:"getChunk",value:function(){throw new Error("Not implemented")}},{key:"uploadPart",value:function(H,K,Q){var J,Y;return S({method:"PUT",url:(0,E.default)(J=(0,E.default)(Y="".concat(this.baseURL,"/")).call(Y,H,"/")).call(J,K),headers:{Authorization:this.upToken},data:Q,onprogress:this.onProgress}).then(function(ee){var ae=ee.etag;return{partNumber:K,etag:ae}})}},{key:"stopUpload",value:function(H){var K;return S({method:"DELETE",url:(0,E.default)(K="".concat(this.baseURL,"/")).call(K,H),headers:{Authorization:this.upToken}})}},{key:"upload",value:function(){var H=this,K=[];return this.getUploadId().then(function(Q){var J=function Y(){return R.default.resolve(H.getChunk()).then(function(ee){if(ee){var ae=K.length+1;return H.uploadPart(Q,ae,ee).then(function(Z){return K.push(Z),H.uploadedChunks++,Y()})}}).catch(function(ee){return H.stopUpload(Q).then(function(){return R.default.reject(ee)})})};return J().then(function(){var Y;return S({method:"POST",url:(0,E.default)(Y="".concat(H.baseURL,"/")).call(Y,Q),headers:{Authorization:H.upToken},data:{parts:K,fname:H.file.attributes.name,mimeType:H.file.attributes.mime_type}})})}).then(function(){return H.file.attributes.url=H.uploadInfo.url,H.file._bucket=H.uploadInfo.bucket,H.file.id=H.uploadInfo.objectId,H.file})}}]),U}(),x=function(U){(0,h.default)(H,U);var W=T(H);function H(K,Q,J,Y){var ee;return(0,g.default)(this,H),ee=W.call(this,K,Q,J,Y),ee.size=Q.size,ee}return(0,v.default)(H,[{key:"getChunk",value:function(){var Q;if(this.offset>=this.size)return null;var J=(0,O.default)(Q=this.data).call(Q,this.offset,this.offset+B);return this.offset+=J.size,J}}]),H}(I);function N(U){return typeof Blob<"u"&&U instanceof Blob}i.exports=function(U,W,H){var K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return N(W)&&W.size>=j?new x(U,W,H,K).upload():F(U,W,H,K)}},function(i,s,t){t(79),t(455);var r=t(15);i.exports=r.Array.from},function(i,s,t){var r=t(0),o=t(456),a=t(165),l=!a(function(u){Array.from(u)});r({target:"Array",stat:!0,forced:l},{from:o})},function(i,s,t){var r=t(58),o=t(11),a=t(33),l=t(457),u=t(154),d=t(98),h=t(36),f=t(103),m=t(155),g=t(94),v=Array;i.exports=function(E){var R=a(E),O=d(this),T=arguments.length,D=T>1?arguments[1]:void 0,M=D!==void 0;M&&(D=r(D,T>2?arguments[2]:void 0));var P=g(R),C=0,y,b,w,S,L,j;if(P&&!(this===v&&u(P)))for(S=m(R,P),L=S.next,b=O?new this:[];!(w=o(L,S)).done;C++)j=M?l(S,D,[w.value,C],!0):w.value,f(b,C,j);else for(y=h(R),b=O?new this(y):v(y);y>C;C++)j=M?D(R[C],C):R[C],f(b,C,j);return b.length=C,b}},function(i,s,t){var r=t(21),o=t(156);i.exports=function(a,l,u,d){try{return d?l(r(u)[0],u[1]):l(u)}catch(h){o(a,"throw",h)}}},function(i,s,t){i.exports=t(459)},function(i,s,t){var r=t(460);i.exports=r},function(i,s,t){var r=t(461);i.exports=r},function(i,s,t){var r=t(462);t(63),i.exports=r},function(i,s,t){t(60),t(79);var r=t(94);i.exports=r},function(i,s,t){i.exports=t(464)},function(i,s,t){var r=t(465);i.exports=r},function(i,s,t){t(466);var r=t(15);i.exports=r.Reflect.construct},function(i,s,t){var r=t(0),o=t(18),a=t(71),l=t(239),u=t(161),d=t(21),h=t(17),f=t(59),m=t(3),g=o("Reflect","construct"),v=Object.prototype,p=[].push,E=m(function(){function T(){}return!(g(function(){},[],T)instanceof T)}),R=!m(function(){g(function(){})}),O=E||R;r({target:"Reflect",stat:!0,forced:O,sham:O},{construct:function(D,M){u(D),d(M);var P=arguments.length<3?D:u(arguments[2]);if(R&&!E)return g(D,M,P);if(D==P){switch(M.length){case 0:return new D;case 1:return new D(M[0]);case 2:return new D(M[0],M[1]);case 3:return new D(M[0],M[1],M[2]);case 4:return new D(M[0],M[1],M[2],M[3])}var C=[null];return a(p,C,M),new(a(l,D,C))}var y=P.prototype,b=f(h(y)?y:v),w=a(D,b,M);return h(w)?w:b}})},function(i,s,t){var r=t(468),o=t(143),a=t(478);function l(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=r(d&&d.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),o(u,"prototype",{writable:!1}),d&&a(u,d)}i.exports=l,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){i.exports=t(469)},function(i,s,t){i.exports=t(470)},function(i,s,t){var r=t(471);i.exports=r},function(i,s,t){var r=t(472);i.exports=r},function(i,s,t){var r=t(473);i.exports=r},function(i,s,t){t(474);var r=t(15),o=r.Object;i.exports=function(l,u){return o.create(l,u)}},function(i,s,t){var r=t(0),o=t(20),a=t(59);r({target:"Object",stat:!0,sham:!o},{create:a})},function(i,s,t){i.exports=t(476)},function(i,s,t){var r=t(477);i.exports=r},function(i,s,t){var r=t(228);i.exports=r},function(i,s,t){var r=t(240),o=t(241);function a(l,u){var d;return i.exports=a=r?o(d=r).call(d):function(f,m){return f.__proto__=m,f},i.exports.__esModule=!0,i.exports.default=i.exports,a(l,u)}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){i.exports=t(480)},function(i,s,t){var r=t(481);i.exports=r},function(i,s,t){var r=t(226);i.exports=r},function(i,s,t){i.exports=t(483)},function(i,s,t){var r=t(484);i.exports=r},function(i,s,t){var r=t(485);i.exports=r},function(i,s,t){var r=t(486);i.exports=r},function(i,s,t){var r=t(12),o=t(487),a=Function.prototype;i.exports=function(l){var u=l.bind;return l===a||r(a,l)&&u===a.bind?o:u}},function(i,s,t){t(488);var r=t(26);i.exports=r("Function").bind},function(i,s,t){var r=t(0),o=t(239);r({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},function(i,s,t){var r=t(141).default,o=t(490);function a(l,u){if(u&&(r(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(l)}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s){function t(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){var r=t(240),o=t(241),a=t(492);function l(u){var d;return i.exports=l=r?o(d=a).call(d):function(f){return f.__proto__||a(f)},i.exports.__esModule=!0,i.exports.default=i.exports,l(u)}i.exports=l,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){i.exports=t(493)},function(i,s,t){i.exports=t(494)},function(i,s,t){var r=t(495);i.exports=r},function(i,s,t){var r=t(221);i.exports=r},function(i,s){function t(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){var r=t(143);function o(l,u){for(var d=0;d<u.length;d++){var h=u[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),r(l,h.key,h)}}function a(l,u,d){return u&&o(l.prototype,u),d&&o(l,d),r(l,"prototype",{writable:!1}),l}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){var r=t(1),o=r(t(38)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.exports=function(l){for(var u="",d=0;d<l.length;){var h=l.charCodeAt(d++),f=l.charCodeAt(d++),m=l.charCodeAt(d++);if(h>255||f>255||m>255)throw new TypeError("Failed to encode base64: The string to be encoded contains characters outside of the Latin1 range.");var g=h<<16|f<<8|m;u+=a.charAt(g>>18&63)+a.charAt(g>>12&63)+a.charAt(g>>6&63)+a.charAt(g&63)}var v=l.length%3;return v?(0,o.default)(u).call(u,0,v-3)+"===".substring(v):u}},function(i,s,t){var r=t(2),o=t(106);i.exports=function(l,u,d){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return o({url:l.upload_url,method:"PUT",data:u,headers:r.extend({"Content-Type":d.get("mime_type"),"Cache-Control":"public, max-age=31536000"},d._uploadHeaders),onprogress:h.onprogress}).then(function(){return d.attributes.url=l.url,d._bucket=l.bucket,d.id=l.objectId,d})}},function(i,s,t){(function(){var r=t(501),o=t(242).utf8,a=t(502),l=t(242).bin,u=function(d,h){d.constructor==String?h&&h.encoding==="binary"?d=l.stringToBytes(d):d=o.stringToBytes(d):a(d)?d=Array.prototype.slice.call(d,0):Array.isArray(d)||(d=d.toString());for(var f=r.bytesToWords(d),m=d.length*8,g=1732584193,v=-271733879,p=-1732584194,E=271733878,R=0;R<f.length;R++)f[R]=(f[R]<<8|f[R]>>>24)&16711935|(f[R]<<24|f[R]>>>8)&4278255360;f[m>>>5]|=128<<m%32,f[(m+64>>>9<<4)+14]=m;for(var O=u._ff,T=u._gg,D=u._hh,M=u._ii,R=0;R<f.length;R+=16){var P=g,C=v,y=p,b=E;g=O(g,v,p,E,f[R+0],7,-680876936),E=O(E,g,v,p,f[R+1],12,-389564586),p=O(p,E,g,v,f[R+2],17,606105819),v=O(v,p,E,g,f[R+3],22,-1044525330),g=O(g,v,p,E,f[R+4],7,-176418897),E=O(E,g,v,p,f[R+5],12,1200080426),p=O(p,E,g,v,f[R+6],17,-1473231341),v=O(v,p,E,g,f[R+7],22,-45705983),g=O(g,v,p,E,f[R+8],7,1770035416),E=O(E,g,v,p,f[R+9],12,-1958414417),p=O(p,E,g,v,f[R+10],17,-42063),v=O(v,p,E,g,f[R+11],22,-1990404162),g=O(g,v,p,E,f[R+12],7,1804603682),E=O(E,g,v,p,f[R+13],12,-40341101),p=O(p,E,g,v,f[R+14],17,-1502002290),v=O(v,p,E,g,f[R+15],22,1236535329),g=T(g,v,p,E,f[R+1],5,-165796510),E=T(E,g,v,p,f[R+6],9,-1069501632),p=T(p,E,g,v,f[R+11],14,643717713),v=T(v,p,E,g,f[R+0],20,-373897302),g=T(g,v,p,E,f[R+5],5,-701558691),E=T(E,g,v,p,f[R+10],9,38016083),p=T(p,E,g,v,f[R+15],14,-660478335),v=T(v,p,E,g,f[R+4],20,-405537848),g=T(g,v,p,E,f[R+9],5,568446438),E=T(E,g,v,p,f[R+14],9,-1019803690),p=T(p,E,g,v,f[R+3],14,-187363961),v=T(v,p,E,g,f[R+8],20,1163531501),g=T(g,v,p,E,f[R+13],5,-1444681467),E=T(E,g,v,p,f[R+2],9,-51403784),p=T(p,E,g,v,f[R+7],14,1735328473),v=T(v,p,E,g,f[R+12],20,-1926607734),g=D(g,v,p,E,f[R+5],4,-378558),E=D(E,g,v,p,f[R+8],11,-2022574463),p=D(p,E,g,v,f[R+11],16,1839030562),v=D(v,p,E,g,f[R+14],23,-35309556),g=D(g,v,p,E,f[R+1],4,-1530992060),E=D(E,g,v,p,f[R+4],11,1272893353),p=D(p,E,g,v,f[R+7],16,-155497632),v=D(v,p,E,g,f[R+10],23,-1094730640),g=D(g,v,p,E,f[R+13],4,681279174),E=D(E,g,v,p,f[R+0],11,-358537222),p=D(p,E,g,v,f[R+3],16,-722521979),v=D(v,p,E,g,f[R+6],23,76029189),g=D(g,v,p,E,f[R+9],4,-640364487),E=D(E,g,v,p,f[R+12],11,-421815835),p=D(p,E,g,v,f[R+15],16,530742520),v=D(v,p,E,g,f[R+2],23,-995338651),g=M(g,v,p,E,f[R+0],6,-198630844),E=M(E,g,v,p,f[R+7],10,1126891415),p=M(p,E,g,v,f[R+14],15,-1416354905),v=M(v,p,E,g,f[R+5],21,-57434055),g=M(g,v,p,E,f[R+12],6,1700485571),E=M(E,g,v,p,f[R+3],10,-1894986606),p=M(p,E,g,v,f[R+10],15,-1051523),v=M(v,p,E,g,f[R+1],21,-2054922799),g=M(g,v,p,E,f[R+8],6,1873313359),E=M(E,g,v,p,f[R+15],10,-30611744),p=M(p,E,g,v,f[R+6],15,-1560198380),v=M(v,p,E,g,f[R+13],21,1309151649),g=M(g,v,p,E,f[R+4],6,-145523070),E=M(E,g,v,p,f[R+11],10,-1120210379),p=M(p,E,g,v,f[R+2],15,718787259),v=M(v,p,E,g,f[R+9],21,-343485551),g=g+P>>>0,v=v+C>>>0,p=p+y>>>0,E=E+b>>>0}return r.endian([g,v,p,E])};u._ff=function(d,h,f,m,g,v,p){var E=d+(h&f|~h&m)+(g>>>0)+p;return(E<<v|E>>>32-v)+h},u._gg=function(d,h,f,m,g,v,p){var E=d+(h&m|f&~m)+(g>>>0)+p;return(E<<v|E>>>32-v)+h},u._hh=function(d,h,f,m,g,v,p){var E=d+(h^f^m)+(g>>>0)+p;return(E<<v|E>>>32-v)+h},u._ii=function(d,h,f,m,g,v,p){var E=d+(f^(h|~m))+(g>>>0)+p;return(E<<v|E>>>32-v)+h},u._blocksize=16,u._digestsize=16,i.exports=function(d,h){if(d==null)throw new Error("Illegal argument "+d);var f=r.wordsToBytes(u(d,h));return h&&h.asBytes?f:h&&h.asString?l.bytesToString(f):r.bytesToHex(f)}})()},function(i,s){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(o,a){return o<<a|o>>>32-a},rotr:function(o,a){return o<<32-a|o>>>a},endian:function(o){if(o.constructor==Number)return r.rotl(o,8)&16711935|r.rotl(o,24)&4278255360;for(var a=0;a<o.length;a++)o[a]=r.endian(o[a]);return o},randomBytes:function(o){for(var a=[];o>0;o--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(o){for(var a=[],l=0,u=0;l<o.length;l++,u+=8)a[u>>>5]|=o[l]<<24-u%32;return a},wordsToBytes:function(o){for(var a=[],l=0;l<o.length*32;l+=8)a.push(o[l>>>5]>>>24-l%32&255);return a},bytesToHex:function(o){for(var a=[],l=0;l<o.length;l++)a.push((o[l]>>>4).toString(16)),a.push((o[l]&15).toString(16));return a.join("")},hexToBytes:function(o){for(var a=[],l=0;l<o.length;l+=2)a.push(parseInt(o.substr(l,2),16));return a},bytesToBase64:function(o){for(var a=[],l=0;l<o.length;l+=3)for(var u=o[l]<<16|o[l+1]<<8|o[l+2],d=0;d<4;d++)l*8+d*6<=o.length*8?a.push(t.charAt(u>>>6*(3-d)&63)):a.push("=");return a.join("")},base64ToBytes:function(o){o=o.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],l=0,u=0;l<o.length;u=++l%4)u!=0&&a.push((t.indexOf(o.charAt(l-1))&Math.pow(2,-2*u+8)-1)<<u*2|t.indexOf(o.charAt(l))>>>6-u*2);return a}};i.exports=r})()},function(i,s){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */i.exports=function(o){return o!=null&&(t(o)||r(o)||!!o._isBuffer)};function t(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function r(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&t(o.slice(0,0))}},function(i,s,t){var r=t(1),o=r(t(68)),a=function(u,d){var h,f;(0,o.default)(u).call(u,"base64")<0?f=atob(u):(0,o.default)(h=u.split(",")[0]).call(h,"base64")>=0?(d=d||u.split(",")[0].split(":")[1].split(";")[0],f=atob(u.split(",")[1])):f=unescape(u.split(",")[1]);for(var m=new Uint8Array(f.length),g=0;g<f.length;g++)m[g]=f.charCodeAt(g);return new Blob([m],{type:d})};i.exports=a},function(i,s,t){var r=t(1),o=r(t(505)),a=r(t(42)),l=r(t(68)),u=r(t(107)),d=r(t(10)),h=r(t(25)),f=r(t(53)),m=r(t(37)),g=r(t(140)),v=r(t(526)),p=t(2),E=t(43),R=t(27),O=R._request,T=t(31),D=T.isNullOrUndefined,M=T.ensureArray,P=T.transformFetchOptions,C=T.setValue,y=T.findValue,b=T.isPlainObject,w=T.continueWhile,S=function A(I){return p.isArray(I)?(0,a.default)(I).call(I,A):b(I)?p.mapObject(I,A):p.isObject(I)&&I._toPointer?I._toPointer():I},L=["objectId","createdAt","updatedAt"],j=function(I){if((0,l.default)(L).call(L,I)!==-1)throw new Error("key[".concat(I,"] is reserved"))},B=function(I){var x=(0,u.default)(p).call(p,I,function(U){return U instanceof Error});if(!x)return I;var N=new E(x.code,x.message);throw N.results=I,N};function F(A,I){return A&&A[I]?p.isFunction(A[I])?A[I]():A[I]:null}i.exports=function(A){A.Object=function(I,x){if(p.isString(I))return A.Object._create.apply(this,arguments);I=I||{},x&&x.parse&&(I=this.parse(I),I=this._mergeMagicFields(I));var N=F(this,"defaults");N&&(I=p.extend({},N,I)),x&&x.collection&&(this.collection=x.collection),this._serverData={},this._opSetQueue=[{}],this._flags={},this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=p.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(I,{silent:!0}),this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=p.clone(this.attributes),this.initialize.apply(this,arguments)},A.Object.saveAll=function(I,x){return A.Object._deepSaveAsync(I,null,x)},A.Object.fetchAll=function(I,x){return d.default.resolve().then(function(){return O("batch",null,null,"POST",{requests:(0,a.default)(p).call(p,I,function(N){var U;if(!N.className)throw new Error("object must have className to fetch");if(!N.id)throw new Error("object must have id to fetch");if(N.dirty())throw new Error("object is modified but not saved");return{method:"GET",path:(0,h.default)(U="/1.1/classes/".concat(N.className,"/")).call(U,N.id)}})},x)}).then(function(N){var U=(0,a.default)(p).call(p,I,function(W,H){if(N[H].success){var K=W.parse(N[H].success);return W._cleanupUnsetKeys(K),W._finishFetch(K),W}return N[H].success===null?new E(E.OBJECT_NOT_FOUND,"Object not found."):new E(N[H].error.code,N[H].error.error)});return B(U)})},p.extend(A.Object.prototype,A.Events,{_fetchWhenSave:!1,initialize:function(){},fetchWhenSave:function(x){if(console.warn("AV.Object#fetchWhenSave is deprecated, use AV.Object#save with options.fetchWhenSave instead."),!p.isBoolean(x))throw new Error("Expect boolean value for fetchWhenSave");this._fetchWhenSave=x},getObjectId:function(){return this.id},getCreatedAt:function(){return this.createdAt},getUpdatedAt:function(){return this.updatedAt},toJSON:function(x,N){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return this._toFullJSON(U,!1)},toFullJSON:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this._toFullJSON(x)},_toFullJSON:function(x){var N=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,W=p.clone(this.attributes);if(p.isArray(x))var H=(0,h.default)(x).call(x,this);return A._objectEach(W,function(K,Q){W[Q]=A._encode(K,H,void 0,U)}),A._objectEach(this._operations,function(K,Q){W[Q]=K}),p.has(this,"id")&&(W.objectId=this.id),["createdAt","updatedAt"].forEach(function(K){if(p.has(N,K)){var Q=N[K];W[K]=p.isDate(Q)?Q.toJSON():Q}}),U&&(W.__type="Object",p.isArray(x)&&x.length&&(W.__type="Pointer"),W.className=this.className),W},_refreshCache:function(){var x=this;x._refreshingCache||(x._refreshingCache=!0,A._objectEach(this.attributes,function(N,U){N instanceof A.Object?N._refreshCache():p.isObject(N)&&x._resetCacheForKey(U)&&x.set(U,new A.Op.Set(N),{silent:!0})}),delete x._refreshingCache)},dirty:function(x){this._refreshCache();var N=p.last(this._opSetQueue);return x?!!N[x]:!this.id||(0,f.default)(p).call(p,N).length>0},dirtyKeys:function(){this._refreshCache();var x=p.last(this._opSetQueue);return(0,f.default)(p).call(p,x)},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(x){switch(x){case"objectId":return this.id;case"createdAt":case"updatedAt":return this[x];default:return this.attributes[x]}},relation:function(x){var N=this.get(x);if(N){if(!(N instanceof A.Relation))throw new Error("Called relation() on non-relation field "+x);return N._ensureParentAndKey(this,x),N}else return new A.Relation(this,x)},escape:function(x){var N=this._escapedAttributes[x];if(N)return N;var U=this.attributes[x],W;return D(U)?W="":W=p.escape(U.toString()),this._escapedAttributes[x]=W,W},has:function(x){return!D(this.attributes[x])},_mergeMagicFields:function(x){var N=this,U=["objectId","createdAt","updatedAt"];return A._arrayEach(U,function(W){x[W]&&(W==="objectId"?N.id=x[W]:(W==="createdAt"||W==="updatedAt")&&!p.isDate(x[W])?N[W]=A._parseDate(x[W]):N[W]=x[W],delete x[W])}),x},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var x=p.first(this._opSetQueue);this._opSetQueue=p.rest(this._opSetQueue);var N=p.first(this._opSetQueue);A._objectEach(x,function(U,W){var H=x[W],K=N[W];H&&K?N[W]=K._mergeWithPrevious(H):H&&(N[W]=H)}),this._saving=this._saving-1},_finishSave:function(x){var N,U={};A._traverse(this.attributes,function(Q){Q instanceof A.Object&&Q.id&&Q._hasData&&(U[Q.id]=Q)});var W=p.first(this._opSetQueue);this._opSetQueue=p.rest(this._opSetQueue),this._applyOpSet(W,this._serverData),this._mergeMagicFields(x);var H=this;A._objectEach(x,function(Q,J){H._serverData[J]=A._decode(Q,J);var Y=A._traverse(H._serverData[J],function(ee){if(ee instanceof A.Object&&U[ee.id])return U[ee.id]});Y&&(H._serverData[J]=Y)}),this._rebuildAllEstimatedData();var K=(0,a.default)(N=this._opSetQueue).call(N,p.clone);this._refreshCache(),this._opSetQueue=K,this._saving=this._saving-1},_finishFetch:function(x,N){this._opSetQueue=[{}],this._mergeMagicFields(x);var U=this;A._objectEach(x,function(W,H){U._serverData[H]=A._decode(W,H)}),this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._hasData=N},_applyOpSet:function(x,N){var U=this;A._objectEach(x,function(W,H){var K=y(N,H),Q=(0,o.default)(K,3),J=Q[0],Y=Q[1],ee=Q[2];C(N,H,W._estimate(J,U,H)),Y&&Y[ee]===A.Op._UNSET&&delete Y[ee]})},_resetCacheForKey:function(x){var N=this.attributes[x];if(p.isObject(N)&&!(N instanceof A.Object)&&!(N instanceof A.File)){var U=(0,m.default)(S(N));if(this._hashedJSON[x]!==U){var W=!!this._hashedJSON[x];return this._hashedJSON[x]=U,W}}return!1},_rebuildEstimatedDataForKey:function(x){var N=this;delete this.attributes[x],this._serverData[x]&&(this.attributes[x]=this._serverData[x]),A._arrayEach(this._opSetQueue,function(U){var W=U[x];if(W){var H=y(N.attributes,x),K=(0,o.default)(H,4),Q=K[0],J=K[1],Y=K[2],ee=K[3];C(N.attributes,x,W._estimate(Q,N,x)),J&&J[Y]===A.Op._UNSET&&delete J[Y],N._resetCacheForKey(ee)}})},_rebuildAllEstimatedData:function(){var x=this,N=p.clone(this.attributes);this.attributes=p.clone(this._serverData),A._arrayEach(this._opSetQueue,function(U){x._applyOpSet(U,x.attributes),A._objectEach(U,function(W,H){x._resetCacheForKey(H)})}),A._objectEach(N,function(U,W){x.attributes[W]!==U&&x.trigger("change:"+W,x,x.attributes[W],{})}),A._objectEach(this.attributes,function(U,W){p.has(N,W)||x.trigger("change:"+W,x,U,{})})},set:function(x,N,U){var W;if(p.isObject(x)||D(x)?(W=p.mapObject(x,function(J,Y){return j(Y),A._decode(J,Y)}),U=N):(W={},j(x),W[x]=A._decode(N,x)),U=U||{},!W)return this;W instanceof A.Object&&(W=W.attributes),U.unset&&A._objectEach(W,function(J,Y){W[Y]=new A.Op.Unset});var H=p.clone(W),K=this;A._objectEach(H,function(J,Y){J instanceof A.Op&&(H[Y]=J._estimate(K.attributes[Y],K,Y),H[Y]===A.Op._UNSET&&delete H[Y])}),this._validate(W,U),U.changes={};var Q=this._escapedAttributes;return A._arrayEach((0,f.default)(p).call(p,W),function(J){var Y=W[J];Y instanceof A.Relation&&(Y.parent=K),Y instanceof A.Op||(Y=new A.Op.Set(Y));var ee=!0;Y instanceof A.Op.Set&&p.isEqual(K.attributes[J],Y.value)&&(ee=!1),ee&&(delete Q[J],U.silent?K._silent[J]=!0:U.changes[J]=!0);var ae=p.last(K._opSetQueue);ae[J]=Y._mergeWithPrevious(ae[J]),K._rebuildEstimatedDataForKey(J),ee?(K.changed[J]=K.attributes[J],U.silent||(K._pending[J]=!0)):(delete K.changed[J],delete K._pending[J])}),U.silent||this.change(U),this},unset:function(x,N){return N=N||{},N.unset=!0,this.set(x,null,N)},increment:function(x,N){return(p.isUndefined(N)||p.isNull(N))&&(N=1),this.set(x,new A.Op.Increment(N))},add:function(x,N){return this.set(x,new A.Op.Add(M(N)))},addUnique:function(x,N){return this.set(x,new A.Op.AddUnique(M(N)))},remove:function(x,N){return this.set(x,new A.Op.Remove(M(N)))},bitAnd:function(x,N){return this.set(x,new A.Op.BitAnd(N))},bitOr:function(x,N){return this.set(x,new A.Op.BitOr(N))},bitXor:function(x,N){return this.set(x,new A.Op.BitXor(N))},op:function(x){return p.last(this._opSetQueue)[x]},clear:function(x){x=x||{},x.unset=!0;var N=p.extend(this.attributes,this._operations);return this.set(N,x)},revert:function(x){var N=p.last(this._opSetQueue),U=M(x||(0,f.default)(p).call(p,N));return U.forEach(function(W){delete N[W]}),this._rebuildAllEstimatedData(),this},_getSaveJSON:function(){var x=p.clone(p.first(this._opSetQueue));return A._objectEach(x,function(N,U){x[U]=N.toJSON()}),x},_canBeSerialized:function(){return A.Object._canBeSerializedAsValue(this.attributes)},fetch:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=arguments.length>1?arguments[1]:void 0;if(!this.id)throw new Error("Cannot fetch unsaved object");var U=this,W=O("classes",this.className,this.id,"GET",P(x),N);return W.then(function(H){var K=U.parse(H);return U._cleanupUnsetKeys(K,(0,f.default)(x)?M((0,f.default)(x)).join(",").split(","):void 0),U._finishFetch(K,!0),U})},_cleanupUnsetKeys:function(x){var N=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(0,f.default)(p).call(p,this._serverData);p.forEach(U,function(W){x[W]===void 0&&delete N._serverData[W]})},save:function(x,N,U){var W,H,K;p.isObject(x)||D(x)?(W=x,K=N):(W={},W[x]=N,K=U),K=p.clone(K)||{},K.wait&&(H=p.clone(this.attributes));var Q=p.clone(K)||{};Q.wait&&(Q.silent=!0),W&&this.set(W,Q);var J=this,Y=[],ee=[];return A.Object._findUnsavedChildren(J,Y,ee),Y.length+ee.length>1?A.Object._deepSaveAsync(this,J,K):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||d.default.resolve(),this._allPreviousSaves=this._allPreviousSaves.catch(function(ae){}).then(function(){var ae=J.id?"PUT":"POST",Z=J._getSaveJSON(),se={};if((J._fetchWhenSave||K.fetchWhenSave)&&(se.new="true"),K._failOnNotExist&&(se.failOnNotExist="true"),K.query){var de;if(typeof K.query._getParams=="function"&&(de=K.query._getParams(),de&&(se.where=de.where)),!se.where){var De=new Error("options.query is not an AV.Query");throw De}}p.extend(Z,J._flags);var Se="classes",we=J.className;J.className==="_User"&&!J.id&&(Se="users",we=null);var Ae=K._makeRequest||O,Ue=Ae(Se,we,J.id,ae,Z,K,se);return Ue=Ue.then(function(Ge){var Fe=J.parse(Ge);return K.wait&&(Fe=p.extend(W||{},Fe)),J._finishSave(Fe),K.wait&&J.set(H,Q),J},function(Ge){throw J._cancelSave(),Ge}),Ue}),this._allPreviousSaves)},destroy:function(x){x=x||{};var N=this,U=function(){N.trigger("destroy",N,N.collection,x)};if(!this.id)return U();x.wait||U();var W=O("classes",this.className,this.id,"DELETE",this._flags,x);return W.then(function(){return x.wait&&U(),N})},parse:function(x){var N=p.clone(x);return["createdAt","updatedAt"].forEach(function(U){N[U]&&(N[U]=A._parseDate(N[U]))}),N.createdAt&&!N.updatedAt&&(N.updatedAt=N.createdAt),N},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(x){x=x||{};var N=this._changing;this._changing=!0;var U=this;A._objectEach(this._silent,function(K){U._pending[K]=!0});var W=p.extend({},x.changes,this._silent);if(this._silent={},A._objectEach(W,function(K,Q){U.trigger("change:"+Q,U,U.get(Q),x)}),N)return this;for(var H=function(Q,J){!U._pending[J]&&!U._silent[J]&&delete U.changed[J]};!p.isEmpty(this._pending);)this._pending={},this.trigger("change",this,x),A._objectEach(this.changed,H),U._previousAttributes=p.clone(this.attributes);return this._changing=!1,this},previous:function(x){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[x]},previousAttributes:function(){return p.clone(this._previousAttributes)},isValid:function(){try{this.validate(this.attributes)}catch{return!1}return!0},validate:function(x){if(p.has(x,"ACL")&&!(x.ACL instanceof A.ACL))throw new E(E.OTHER_CAUSE,"ACL must be a AV.ACL.")},_validate:function(x,N){N.silent||!this.validate||(x=p.extend({},this.attributes,x),this.validate(x))},getACL:function(){return this.get("ACL")},setACL:function(x,N){return this.set("ACL",x,N)},disableBeforeHook:function(){this.ignoreHook("beforeSave"),this.ignoreHook("beforeUpdate"),this.ignoreHook("beforeDelete")},disableAfterHook:function(){this.ignoreHook("afterSave"),this.ignoreHook("afterUpdate"),this.ignoreHook("afterDelete")},ignoreHook:function(x){if(!p.contains(["beforeSave","afterSave","beforeUpdate","afterUpdate","beforeDelete","afterDelete"],x))throw new Error("Unsupported hookName: "+x);if(!A.hookKey)throw new Error("ignoreHook required hookKey");this._flags.__ignore_hooks||(this._flags.__ignore_hooks=[]),this._flags.__ignore_hooks.push(x)}}),A.Object.createWithoutData=function(I,x,N){var U;if(p.isString(I))U=A.Object._getSubclass(I);else if(I.prototype&&I.prototype instanceof A.Object)U=I;else throw new Error("class must be a string or a subclass of AV.Object.");if(!x)throw new TypeError("The objectId must be provided");var W=new U;return W.id=x,W._hasData=N,W},A.Object.destroyAll=function(I){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!I||I.length===0)return d.default.resolve();var N=p.groupBy(I,function(W){return(0,m.default)({className:W.className,flags:W._flags})}),U={requests:(0,a.default)(p).call(p,N,function(W){var H,K=(0,a.default)(p).call(p,W,"id").join(",");return{method:"DELETE",path:(0,h.default)(H="/1.1/classes/".concat(W[0].className,"/")).call(H,K),body:W[0]._flags}})};return O("batch",null,null,"POST",U,x).then(function(W){var H=(0,u.default)(p).call(p,W,function(K){return!K.success});if(H)throw new E(H.error.code,H.error.error)})},A.Object._getSubclass=function(I){if(!p.isString(I))throw new Error("AV.Object._getSubclass requires a string argument.");var x=A.Object._classMap[I];return x||(x=A.Object.extend(I),A.Object._classMap[I]=x),x},A.Object._create=function(I,x,N){var U=A.Object._getSubclass(I);return new U(x,N)},A.Object._classMap={},A.Object._extend=A._extend,A.Object.new=function(I,x){return new A.Object(I,x)},A.Object.extend=function(I,x,N){if(!p.isString(I)){if(I&&p.has(I,"className"))return A.Object.extend(I.className,I,x);throw new Error("AV.Object.extend's first argument should be the className.")}I==="User"&&(I="_User");var U=null;if(p.has(A.Object._classMap,I)){var W=A.Object._classMap[I];if(x||N)U=W._extend(x,N);else return W}else x=x||{},x._className=I,U=this._extend(x,N);return U.extend=function(H){var K;if(p.isString(H)||H&&p.has(H,"className"))return A.Object.extend.apply(U,arguments);var Q=(0,h.default)(K=[I]).call(K,p.toArray(arguments));return A.Object.extend.apply(U,Q)},(0,g.default)(U,"query",(0,v.default)(A.Object,"query")),U.new=function(H,K){return new U(H,K)},A.Object._classMap[I]=U,U},(0,g.default)(A.Object.prototype,"className",{get:function(){var x=this._className||this.constructor._LCClassName||this.constructor.name;return x==="User"?"_User":x}}),A.Object.register=function(I,x){if(!(I.prototype instanceof A.Object))throw new Error("registered class is not a subclass of AV.Object");var N=x||I.name;if(!N.length)throw new Error("registered class must be named");x&&(I._LCClassName=x),A.Object._classMap[N]=I},(0,g.default)(A.Object,"query",{get:function(){return new A.Query(this.prototype.className)}}),A.Object._findUnsavedChildren=function(I,x,N){A._traverse(I,function(U){if(U instanceof A.Object){U.dirty()&&x.push(U);return}if(U instanceof A.File){U.id||N.push(U);return}})},A.Object._canBeSerializedAsValue=function(I){var x=!0;return I instanceof A.Object||I instanceof A.File?x=!!I.id:p.isArray(I)?A._arrayEach(I,function(N){A.Object._canBeSerializedAsValue(N)||(x=!1)}):p.isObject(I)&&A._objectEach(I,function(N){A.Object._canBeSerializedAsValue(N)||(x=!1)}),x},A.Object._deepSaveAsync=function(I,x,N){var U=[],W=[];A.Object._findUnsavedChildren(I,U,W),W=p.uniq(W);var H=d.default.resolve();p.each(W,function(J){H=H.then(function(){return J.save()})});var K=p.uniq(U),Q=p.uniq(K);return H.then(function(){return w(function(){return Q.length>0},function(){var J=[],Y=[];if(A._arrayEach(Q,function(Z){Z._canBeSerialized()?J.push(Z):Y.push(Z)}),Q=Y,J.length===0)return d.default.reject(new E(E.OTHER_CAUSE,"Tried to save a batch with a cycle."));var ee=d.default.resolve((0,a.default)(p).call(p,J,function(Z){return Z._allPreviousSaves||d.default.resolve()})),ae=ee.then(function(){return O("batch",null,null,"POST",{requests:(0,a.default)(p).call(p,J,function(Z){var se=Z.id?"PUT":"POST",de=Z._getSaveJSON();p.extend(de,Z._flags);var De="classes",Se=Z.className,we="/".concat(De,"/").concat(Se);Z.className==="_User"&&!Z.id&&(we="/users");var we="/1.1".concat(we);return Z.id&&(we=we+"/"+Z.id),Z._startSave(),{method:se,path:we,body:de,params:N&&N.fetchWhenSave?{fetchWhenSave:!0}:void 0}})},N).then(function(Z){var se=(0,a.default)(p).call(p,J,function(de,De){return Z[De].success?(de._finishSave(de.parse(Z[De].success)),de):(de._cancelSave(),new E(Z[De].error.code,Z[De].error.error))});return B(se)})});return A._arrayEach(J,function(Z){Z._allPreviousSaves=ae}),ae})}).then(function(){return I})}}},function(i,s,t){var r=t(506),o=t(514),a=t(515),l=t(525);function u(d,h){return r(d)||o(d,h)||a(d,h)||l()}i.exports=u,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){var r=t(507);function o(a){if(r(a))return a}i.exports=o,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){i.exports=t(508)},function(i,s,t){i.exports=t(509)},function(i,s,t){var r=t(510);i.exports=r},function(i,s,t){var r=t(511);i.exports=r},function(i,s,t){var r=t(512);i.exports=r},function(i,s,t){t(513);var r=t(15);i.exports=r.Array.isArray},function(i,s,t){var r=t(0),o=t(86);r({target:"Array",stat:!0},{isArray:o})},function(i,s,t){var r=t(229),o=t(238);function a(l,u){var d=l==null?null:typeof r<"u"&&o(l)||l["@@iterator"];if(d!=null){var h=[],f=!0,m=!1,g,v;try{for(d=d.call(l);!(f=(g=d.next()).done)&&(h.push(g.value),!(u&&h.length===u));f=!0);}catch(p){m=!0,v=p}finally{try{!f&&d.return!=null&&d.return()}finally{if(m)throw v}}return h}}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){var r=t(516),o=t(520),a=t(524);function l(u,d){var h;if(u){if(typeof u=="string")return a(u,d);var f=r(h=Object.prototype.toString.call(u)).call(h,8,-1);if(f==="Object"&&u.constructor&&(f=u.constructor.name),f==="Map"||f==="Set")return o(u);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return a(u,d)}}i.exports=l,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){i.exports=t(517)},function(i,s,t){i.exports=t(518)},function(i,s,t){var r=t(519);i.exports=r},function(i,s,t){var r=t(227);i.exports=r},function(i,s,t){i.exports=t(521)},function(i,s,t){i.exports=t(522)},function(i,s,t){var r=t(523);i.exports=r},function(i,s,t){var r=t(237);i.exports=r},function(i,s){function t(r,o){(o==null||o>r.length)&&(o=r.length);for(var a=0,l=new Array(o);a<o;a++)l[a]=r[a];return l}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){i.exports=t(527)},function(i,s,t){var r=t(528);i.exports=r},function(i,s,t){t(529);var r=t(15),o=r.Object,a=i.exports=function(u,d){return o.getOwnPropertyDescriptor(u,d)};o.getOwnPropertyDescriptor.sham&&(a.sham=!0)},function(i,s,t){var r=t(0),o=t(3),a=t(35),l=t(73).f,u=t(20),d=o(function(){l(1)}),h=!u||d;r({target:"Object",stat:!0,forced:h,sham:!u},{getOwnPropertyDescriptor:function(m,g){return l(a(m),g)}})},function(i,s,t){var r=t(2),o=t(43);i.exports=function(a){a.Role=a.Object.extend("_Role",{constructor:function(u,d){if(r.isString(u)?(a.Object.prototype.constructor.call(this,null,null),this.setName(u)):a.Object.prototype.constructor.call(this,u,d),d)if(d instanceof a.ACL)this.setACL(d);else throw new TypeError("acl must be an instance of AV.ACL")},getName:function(){return this.get("name")},setName:function(u,d){return this.set("name",u,d)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(u,d){if("name"in u&&u.name!==this.getName()){var h=u.name;if(this.id&&this.id!==u.objectId)return new o(o.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!r.isString(h))return new o(o.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(h))return new o(o.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return a.Object.prototype.validate?a.Object.prototype.validate.call(this,u,d):!1}})}},function(i,s,t){var r=t(1),o=r(t(532)),a=r(t(10)),l=r(t(42)),u=r(t(107)),d=r(t(37)),h=t(2),f=t(219),m=t(43),g=t(27),v=g._request,p=g.request,E=t(70),R=E.getAdapter,O="anonymous",T="lc_qqapp",D=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"weixin";return function(C,y){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},w=b.unionIdPlatform,S=w===void 0?P:w,L=b.asMainAccount,j=L===void 0?!1:L;if(typeof y!="string")throw new m(m.OTHER_CAUSE,"unionId is not a string");if(typeof S!="string")throw new m(m.OTHER_CAUSE,"unionIdPlatform is not a string");return h.extend({},C,{platform:S,unionid:y,main_account:!!j})}};i.exports=function(M){M.User=M.Object.extend("_User",{_isCurrentUser:!1,_mergeMagicFields:function(C){return C.sessionToken&&(this._sessionToken=C.sessionToken,delete C.sessionToken),M.User.__super__._mergeMagicFields.call(this,C)},_cleanupAuthData:function(){if(this.isCurrent()){var C=this.get("authData");C&&M._objectEach(this.get("authData"),function(y,b){C[b]||delete C[b]})}},_synchronizeAllAuthData:function(){var C=this.get("authData");if(C){var y=this;M._objectEach(this.get("authData"),function(b,w){y._synchronizeAuthData(w)})}},_synchronizeAuthData:function(C){if(this.isCurrent()){var y;h.isString(C)?(y=C,C=M.User._authProviders[y]):y=C.getAuthType();var b=this.get("authData");if(!(!b||!C)){var w=C.restoreAuthentication(b[y]);w||this.dissociateAuthData(C)}}},_handleSaveResult:function(C){return C&&!M._config.disableCurrentUser&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),(C||this.isCurrent())&&!M._config.disableCurrentUser?a.default.resolve(M.User._saveCurrentUser(this)):a.default.resolve()},_linkWith:function(C,y){var b=this,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=w.failOnNotExist,L=S===void 0?!1:S,j=w.useMasterKey,B=w.sessionToken,F=w.user,A;return h.isString(C)?(A=C,C=M.User._authProviders[C]):A=C.getAuthType(),y?this.save({authData:(0,o.default)({},A,y)},{useMasterKey:j,sessionToken:B,user:F,fetchWhenSave:!!this.get("authData"),_failOnNotExist:L}).then(function(I){return I._handleSaveResult(!0).then(function(){return I})}):C.authenticate().then(function(I){return b._linkWith(C,I)})},associateWithAuthData:function(C,y){return this._linkWith(y,C)},associateWithAuthDataAndUnionId:function(C,y,b,w){return this._linkWith(y,D()(C,b,w))},associateWithMiniApp:function(C,y){var b=this;if(C===void 0){var w=R("getAuthInfo");return w().then(function(S){return b._linkWith(S.provider,S.authData,y)})}return this._linkWith(C.provider,C.authData,y)},associateWithQQApp:function(){var C=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=y.preferUnionId,w=b===void 0?!1:b,S=y.unionIdPlatform,L=S===void 0?"qq":S,j=y.asMainAccount,B=j===void 0?!0:j,F=R("getAuthInfo");return F({preferUnionId:w,asMainAccount:B,platform:L}).then(function(A){return A.provider=T,C.associateWithMiniApp(A)})},associateWithWeapp:function(){var C=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=y.preferUnionId,w=b===void 0?!1:b,S=y.unionIdPlatform,L=S===void 0?"weixin":S,j=y.asMainAccount,B=j===void 0?!0:j,F=R("getAuthInfo");return F({preferUnionId:w,asMainAccount:B,platform:L}).then(function(A){return C.associateWithMiniApp(A)})},linkWithWeapp:function(C){return console.warn("DEPRECATED: User#linkWithWeapp 已废弃，请使用 User#associateWithWeapp 代替"),this.associateWithWeapp(C)},associateWithQQAppWithUnionId:function(C){var y=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=b.unionIdPlatform,S=w===void 0?"qq":w,L=b.asMainAccount,j=L===void 0?!1:L,B=R("getAuthInfo");return B({platform:S}).then(function(F){return F=M.User.mergeUnionId(F,C,{asMainAccount:j}),F.provider=T,y.associateWithMiniApp(F)})},associateWithWeappWithUnionId:function(C){var y=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=b.unionIdPlatform,S=w===void 0?"weixin":w,L=b.asMainAccount,j=L===void 0?!1:L,B=R("getAuthInfo");return B({platform:S}).then(function(F){return F=M.User.mergeUnionId(F,C,{asMainAccount:j}),y.associateWithMiniApp(F)})},dissociateAuthData:function(C){return this.unset("authData.".concat(C)),this.save().then(function(y){return y._handleSaveResult(!0).then(function(){return y})})},_unlinkFrom:function(C){return console.warn("DEPRECATED: User#_unlinkFrom 已废弃，请使用 User#dissociateAuthData 代替"),this.dissociateAuthData(C)},_isLinked:function(C){var y;h.isString(C)?y=C:y=C.getAuthType();var b=this.get("authData")||{};return!!b[y]},isAnonymous:function(){return this._isLinked(O)},logOut:function(){this._logOutWithAll(),this._isCurrentUser=!1},_logOutWithAll:function(){var C=this.get("authData");if(C){var y=this;M._objectEach(this.get("authData"),function(b,w){y._logOutWith(w)})}},_logOutWith:function(C){this.isCurrent()&&(h.isString(C)&&(C=M.User._authProviders[C]),C&&C.deauthenticate&&C.deauthenticate())},signUp:function(C,y){var b,w=C&&C.username||this.get("username");if(!w||w==="")throw b=new m(m.OTHER_CAUSE,"Cannot sign up user with an empty name."),b;var S=C&&C.password||this.get("password");if(!S||S==="")throw b=new m(m.OTHER_CAUSE,"Cannot sign up user with an empty password."),b;return this.save(C,y).then(function(L){return L.isAnonymous()&&(L.unset("authData.".concat(O)),L._opSetQueue=[{}]),L._handleSaveResult(!0).then(function(){return L})})},signUpOrlogInWithMobilePhone:function(C){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b,w=C&&C.mobilePhoneNumber||this.get("mobilePhoneNumber");if(!w||w==="")throw b=new m(m.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber with an empty mobilePhoneNumber."),b;var S=C&&C.smsCode||this.get("smsCode");if(!S||S==="")throw b=new m(m.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber  with an empty smsCode."),b;return y._makeRequest=function(L,j,B,F,A){return v("usersByMobilePhone",null,null,"POST",A)},this.save(C,y).then(function(L){return delete L.attributes.smsCode,delete L._serverData.smsCode,L._handleSaveResult(!0).then(function(){return L})})},loginWithAuthData:function(C,y,b){return this._linkWith(y,C,b)},loginWithAuthDataAndUnionId:function(C,y,b,w){return this.loginWithAuthData(D()(C,b,w),y,w)},loginWithWeapp:function(){var C=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=y.preferUnionId,w=b===void 0?!1:b,S=y.unionIdPlatform,L=S===void 0?"weixin":S,j=y.asMainAccount,B=j===void 0?!0:j,F=y.failOnNotExist,A=F===void 0?!1:F,I=y.useMasterKey,x=y.sessionToken,N=y.user,U=R("getAuthInfo");return U({preferUnionId:w,asMainAccount:B,platform:L}).then(function(W){return C.loginWithMiniApp(W,{failOnNotExist:A,useMasterKey:I,sessionToken:x,user:N})})},loginWithWeappWithUnionId:function(C){var y=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=b.unionIdPlatform,S=w===void 0?"weixin":w,L=b.asMainAccount,j=L===void 0?!1:L,B=b.failOnNotExist,F=B===void 0?!1:B,A=b.useMasterKey,I=b.sessionToken,x=b.user,N=R("getAuthInfo");return N({platform:S}).then(function(U){return U=M.User.mergeUnionId(U,C,{asMainAccount:j}),y.loginWithMiniApp(U,{failOnNotExist:F,useMasterKey:A,sessionToken:I,user:x})})},loginWithQQApp:function(){var C=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=y.preferUnionId,w=b===void 0?!1:b,S=y.unionIdPlatform,L=S===void 0?"qq":S,j=y.asMainAccount,B=j===void 0?!0:j,F=y.failOnNotExist,A=F===void 0?!1:F,I=y.useMasterKey,x=y.sessionToken,N=y.user,U=R("getAuthInfo");return U({preferUnionId:w,asMainAccount:B,platform:L}).then(function(W){return W.provider=T,C.loginWithMiniApp(W,{failOnNotExist:A,useMasterKey:I,sessionToken:x,user:N})})},loginWithQQAppWithUnionId:function(C){var y=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=b.unionIdPlatform,S=w===void 0?"qq":w,L=b.asMainAccount,j=L===void 0?!1:L,B=b.failOnNotExist,F=B===void 0?!1:B,A=b.useMasterKey,I=b.sessionToken,x=b.user,N=R("getAuthInfo");return N({platform:S}).then(function(U){return U=M.User.mergeUnionId(U,C,{asMainAccount:j}),U.provider=T,y.loginWithMiniApp(U,{failOnNotExist:F,useMasterKey:A,sessionToken:I,user:x})})},loginWithMiniApp:function(C,y){var b=this;if(C===void 0){var w=R("getAuthInfo");return w().then(function(S){return b.loginWithAuthData(S.authData,S.provider,y)})}return this.loginWithAuthData(C.authData,C.provider,y)},logIn:function(){var C=this,y=v("login",null,null,"POST",this.toJSON());return y.then(function(b){var w=C.parse(b);return C._finishFetch(w),C._handleSaveResult(!0).then(function(){return w.smsCode||delete C.attributes.smsCode,C})})},save:function(C,y,b){var w,S;return h.isObject(C)||h.isNull(C)||h.isUndefined(C)?(w=C,S=y):(w={},w[C]=y,S=b),S=S||{},M.Object.prototype.save.call(this,w,S).then(function(L){return L._handleSaveResult(!1).then(function(){return L})})},follow:function(C,y){if(!this.id)throw new Error("Please signin.");var b,w;C.user?(b=C.user,w=C.attributes):b=C;var S=h.isString(b)?b:b.id;if(!S)throw new Error("Invalid target user.");var L="users/"+this.id+"/friendship/"+S,j=v(L,null,null,"POST",M._encode(w),y);return j},unfollow:function(C,y){if(!this.id)throw new Error("Please signin.");var b;C.user?b=C.user:b=C;var w=h.isString(b)?b:b.id;if(!w)throw new Error("Invalid target user.");var S="users/"+this.id+"/friendship/"+w,L=v(S,null,null,"DELETE",null,y);return L},getFollowersAndFollowees:function(C,y){if(!this.id)throw new Error("Please signin.");return p({method:"GET",path:"/users/".concat(this.id,"/followersAndFollowees"),query:{skip:C&&C.skip,limit:C&&C.limit,include:"follower,followee",keys:"follower,followee"},authOptions:y}).then(function(b){var w=b.followers,S=b.followees;return{followers:(0,l.default)(w).call(w,function(L){var j=L.follower;return M._decode(j)}),followees:(0,l.default)(S).call(S,function(L){var j=L.followee;return M._decode(j)})}})},followerQuery:function(){return M.User.followerQuery(this.id)},followeeQuery:function(){return M.User.followeeQuery(this.id)},fetch:function(C,y){return M.Object.prototype.fetch.call(this,C,y).then(function(b){return b._handleSaveResult(!1).then(function(){return b})})},updatePassword:function(C,y,b){var w=this,S="users/"+this.id+"/updatePassword",L={old_password:C,new_password:y},j=v(S,null,null,"PUT",L,b);return j.then(function(B){return w._finishFetch(w.parse(B)),w._handleSaveResult(!0).then(function(){return B})})},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},getMobilePhoneNumber:function(){return this.get("mobilePhoneNumber")},setMobilePhoneNumber:function(C,y){return this.set("mobilePhoneNumber",C,y)},setUsername:function(C,y){return this.set("username",C,y)},setPassword:function(C,y){return this.set("password",C,y)},getEmail:function(){return this.get("email")},setEmail:function(C,y){return this.set("email",C,y)},authenticated:function(){return console.warn("DEPRECATED: 如果要判断当前用户的登录状态是否有效，请使用 currentUser.isAuthenticated().then()，如果要判断该用户是否是当前登录用户，请使用 user.id === currentUser.id。"),!!this._sessionToken&&!M._config.disableCurrentUser&&M.User.current()&&M.User.current().id===this.id},isAuthenticated:function(){var C=this;return a.default.resolve().then(function(){return!!C._sessionToken&&M.User._fetchUserBySessionToken(C._sessionToken).then(function(){return!0},function(y){if(y.code===211)return!1;throw y})})},getSessionToken:function(){return this._sessionToken},refreshSessionToken:function(C){var y=this;return v("users/".concat(this.id,"/refreshSessionToken"),null,null,"PUT",null,C).then(function(b){return y._finishFetch(b),y._handleSaveResult(!0).then(function(){return y})})},getRoles:function(C){var y;return(0,u.default)(y=M.Relation.reverseQuery("_Role","users",this)).call(y,C)}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(C,y,b,w){b=b||{},b.username=C,b.password=y;var S=M.Object._create("_User");return S.signUp(b,w)},logIn:function(C,y){var b=M.Object._create("_User");return b._finishFetch({username:C,password:y}),b.logIn()},become:function(C){return this._fetchUserBySessionToken(C).then(function(y){return y._handleSaveResult(!0).then(function(){return y})})},_fetchUserBySessionToken:function(C){if(C===void 0)return a.default.reject(new Error("The sessionToken cannot be undefined"));var y=M.Object._create("_User");return p({method:"GET",path:"/users/me",authOptions:{sessionToken:C}}).then(function(b){var w=y.parse(b);return y._finishFetch(w),y})},logInWithMobilePhoneSmsCode:function(C,y){var b=M.Object._create("_User");return b._finishFetch({mobilePhoneNumber:C,smsCode:y}),b.logIn()},signUpOrlogInWithMobilePhone:function(C,y,b,w){b=b||{},b.mobilePhoneNumber=C,b.smsCode=y;var S=M.Object._create("_User");return S.signUpOrlogInWithMobilePhone(b,w)},logInWithMobilePhone:function(C,y){var b=M.Object._create("_User");return b._finishFetch({mobilePhoneNumber:C,password:y}),b.logIn()},loginWithEmail:function(C,y){var b=M.Object._create("_User");return b._finishFetch({email:C,password:y}),b.logIn()},loginWithAuthData:function(C,y,b){return M.User._logInWith(y,C,b)},signUpOrlogInWithAuthData:function(){return console.warn("DEPRECATED: User.signUpOrlogInWithAuthData 已废弃，请使用 User#loginWithAuthData 代替"),this.loginWithAuthData.apply(this,arguments)},loginWithAuthDataAndUnionId:function(C,y,b,w){return this.loginWithAuthData(D()(C,b,w),y,w)},signUpOrlogInWithAuthDataAndUnionId:function(){return console.warn("DEPRECATED: User.signUpOrlogInWithAuthDataAndUnionId 已废弃，请使用 User#loginWithAuthDataAndUnionId 代替"),this.loginWithAuthDataAndUnionId.apply(this,arguments)},mergeUnionId:function(C,y){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},w=b.asMainAccount,S=w===void 0?!1:w;C=JSON.parse((0,d.default)(C));var L=C,j=L.authData,B=L.platform;return j.platform=B,j.main_account=S,j.unionid=y,C},loginWithWeapp:function(){var C=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=y.preferUnionId,w=b===void 0?!1:b,S=y.unionIdPlatform,L=S===void 0?"weixin":S,j=y.asMainAccount,B=j===void 0?!0:j,F=y.failOnNotExist,A=F===void 0?!1:F,I=y.useMasterKey,x=y.sessionToken,N=y.user,U=R("getAuthInfo");return U({preferUnionId:w,asMainAccount:B,platform:L}).then(function(W){return C.loginWithMiniApp(W,{failOnNotExist:A,useMasterKey:I,sessionToken:x,user:N})})},loginWithWeappWithUnionId:function(C){var y=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=b.unionIdPlatform,S=w===void 0?"weixin":w,L=b.asMainAccount,j=L===void 0?!1:L,B=b.failOnNotExist,F=B===void 0?!1:B,A=b.useMasterKey,I=b.sessionToken,x=b.user,N=R("getAuthInfo");return N({platform:S}).then(function(U){return U=M.User.mergeUnionId(U,C,{asMainAccount:j}),y.loginWithMiniApp(U,{failOnNotExist:F,useMasterKey:A,sessionToken:I,user:x})})},loginWithQQApp:function(){var C=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=y.preferUnionId,w=b===void 0?!1:b,S=y.unionIdPlatform,L=S===void 0?"qq":S,j=y.asMainAccount,B=j===void 0?!0:j,F=y.failOnNotExist,A=F===void 0?!1:F,I=y.useMasterKey,x=y.sessionToken,N=y.user,U=R("getAuthInfo");return U({preferUnionId:w,asMainAccount:B,platform:L}).then(function(W){return W.provider=T,C.loginWithMiniApp(W,{failOnNotExist:A,useMasterKey:I,sessionToken:x,user:N})})},loginWithQQAppWithUnionId:function(C){var y=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=b.unionIdPlatform,S=w===void 0?"qq":w,L=b.asMainAccount,j=L===void 0?!1:L,B=b.failOnNotExist,F=B===void 0?!1:B,A=b.useMasterKey,I=b.sessionToken,x=b.user,N=R("getAuthInfo");return N({platform:S}).then(function(U){return U=M.User.mergeUnionId(U,C,{asMainAccount:j}),U.provider=T,y.loginWithMiniApp(U,{failOnNotExist:F,useMasterKey:A,sessionToken:I,user:x})})},loginWithMiniApp:function(C,y){var b=this;if(C===void 0){var w=R("getAuthInfo");return w().then(function(S){return b.loginWithAuthData(S.authData,S.provider,y)})}return this.loginWithAuthData(C.authData,C.provider,y)},_genId:function(){return f()},loginAnonymously:function(){return this.loginWithAuthData({id:M.User._genId()},"anonymous")},associateWithAuthData:function(C,y,b){return console.warn("DEPRECATED: User.associateWithAuthData 已废弃，请使用 User#associateWithAuthData 代替"),C._linkWith(y,b)},logOut:function(){return M._config.disableCurrentUser?(console.warn("AV.User.current() was disabled in multi-user environment, call logOut() from user object instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),a.default.resolve(null)):(M.User._currentUser!==null&&(M.User._currentUser._logOutWithAll(),M.User._currentUser._isCurrentUser=!1),M.User._currentUserMatchesDisk=!0,M.User._currentUser=null,M.localStorage.removeItemAsync(M._getAVPath(M.User._CURRENT_USER_KEY)).then(function(){return M._refreshSubscriptionId()}))},followerQuery:function(C){if(!C||!h.isString(C))throw new Error("Invalid user object id.");var y=new M.FriendShipQuery("_Follower");return y._friendshipTag="follower",y.equalTo("user",M.Object.createWithoutData("_User",C)),y},followeeQuery:function(C){if(!C||!h.isString(C))throw new Error("Invalid user object id.");var y=new M.FriendShipQuery("_Followee");return y._friendshipTag="followee",y.equalTo("user",M.Object.createWithoutData("_User",C)),y},requestPasswordReset:function(C){var y={email:C},b=v("requestPasswordReset",null,null,"POST",y);return b},requestEmailVerify:function(C){var y={email:C},b=v("requestEmailVerify",null,null,"POST",y);return b},requestMobilePhoneVerify:function(C){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b={mobilePhoneNumber:C};y.validateToken&&(b.validate_token=y.validateToken);var w=v("requestMobilePhoneVerify",null,null,"POST",b,y);return w},requestPasswordResetBySmsCode:function(C){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b={mobilePhoneNumber:C};y.validateToken&&(b.validate_token=y.validateToken);var w=v("requestPasswordResetBySmsCode",null,null,"POST",b,y);return w},requestChangePhoneNumber:function(C,y,b){var w={mobilePhoneNumber:C};return y&&(w.ttl=b.ttl),b&&b.validateToken&&(w.validate_token=b.validateToken),v("requestChangePhoneNumber",null,null,"POST",w,b)},changePhoneNumber:function(C,y){var b={mobilePhoneNumber:C,code:y};return v("changePhoneNumber",null,null,"POST",b)},resetPasswordBySmsCode:function(C,y){var b={password:y},w=v("resetPasswordBySmsCode",null,C,"PUT",b);return w},verifyMobilePhone:function(C){var y=v("verifyMobilePhone",null,C,"POST",null);return y},requestLoginSmsCode:function(C){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b={mobilePhoneNumber:C};y.validateToken&&(b.validate_token=y.validateToken);var w=v("requestLoginSmsCode",null,null,"POST",b,y);return w},currentAsync:function(){return M._config.disableCurrentUser?(console.warn("AV.User.currentAsync() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),a.default.resolve(null)):M.User._currentUser||M.User._currentUserMatchesDisk?a.default.resolve(M.User._currentUser):M.localStorage.getItemAsync(M._getAVPath(M.User._CURRENT_USER_KEY)).then(function(C){if(!C)return null;M.User._currentUserMatchesDisk=!0,M.User._currentUser=M.Object._create("_User"),M.User._currentUser._isCurrentUser=!0;var y=JSON.parse(C);return M.User._currentUser.id=y._id,delete y._id,M.User._currentUser._sessionToken=y._sessionToken,delete y._sessionToken,M.User._currentUser._finishFetch(y),M.User._currentUser._synchronizeAllAuthData(),M.User._currentUser._refreshCache(),M.User._currentUser._opSetQueue=[{}],M.User._currentUser})},current:function(){if(M._config.disableCurrentUser)return console.warn("AV.User.current() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),null;if(M.localStorage.async){var C=new Error("Synchronous API User.current() is not available in this runtime. Use User.currentAsync() instead.");throw C.code="SYNC_API_NOT_AVAILABLE",C}if(M.User._currentUser||M.User._currentUserMatchesDisk)return M.User._currentUser;M.User._currentUserMatchesDisk=!0;var y=M.localStorage.getItem(M._getAVPath(M.User._CURRENT_USER_KEY));if(!y)return null;M.User._currentUser=M.Object._create("_User"),M.User._currentUser._isCurrentUser=!0;var b=JSON.parse(y);return M.User._currentUser.id=b._id,delete b._id,M.User._currentUser._sessionToken=b._sessionToken,delete b._sessionToken,M.User._currentUser._finishFetch(b),M.User._currentUser._synchronizeAllAuthData(),M.User._currentUser._refreshCache(),M.User._currentUser._opSetQueue=[{}],M.User._currentUser},_saveCurrentUser:function(C){var y;return M.User._currentUser!==C?y=M.User.logOut():y=a.default.resolve(),y.then(function(){C._isCurrentUser=!0,M.User._currentUser=C;var b=C._toFullJSON();return b._id=C.id,b._sessionToken=C._sessionToken,M.localStorage.setItemAsync(M._getAVPath(M.User._CURRENT_USER_KEY),(0,d.default)(b)).then(function(){return M.User._currentUserMatchesDisk=!0,M._refreshSubscriptionId()})})},_registerAuthenticationProvider:function(C){M.User._authProviders[C.getAuthType()]=C,!M._config.disableCurrentUser&&M.User.current()&&M.User.current()._synchronizeAuthData(C.getAuthType())},_logInWith:function(C,y,b){var w=M.Object._create("_User");return w._linkWith(C,y,b)}})}},function(i,s,t){var r=t(143);function o(a,l,u){return l in a?r(a,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[l]=u,a}i.exports=o,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,s,t){var r=t(1),o=r(t(42)),a=r(t(10)),l=r(t(53)),u=r(t(37)),d=r(t(107)),h=r(t(25)),f=t(2),m=t(69)("leancloud:query"),g=t(43),v=t(27),p=v._request,E=v.request,R=t(31),O=R.ensureArray,T=R.transformFetchOptions,D=R.continueWhile,M=function(C,y){if(C===void 0)throw new Error(y)};i.exports=function(P){P.Query=function(C){f.isString(C)&&(C=P.Object._getSubclass(C)),this.objectClass=C,this.className=C.prototype.className,this._where={},this._include=[],this._select=[],this._limit=-1,this._skip=0,this._defaultParams={}},P.Query.or=function(){var C=f.toArray(arguments),y=null;P._arrayEach(C,function(w){if(f.isNull(y)&&(y=w.className),y!==w.className)throw new Error("All queries must be for the same class")});var b=new P.Query(y);return b._orQuery(C),b},P.Query.and=function(){var C=f.toArray(arguments),y=null;P._arrayEach(C,function(w){if(f.isNull(y)&&(y=w.className),y!==w.className)throw new Error("All queries must be for the same class")});var b=new P.Query(y);return b._andQuery(C),b},P.Query.doCloudQuery=function(C,y,b){var w={cql:C};f.isArray(y)?w.pvalues=y:b=y;var S=p("cloudQuery",null,null,"GET",w,b);return S.then(function(L){var j=new P.Query(L.className),B=(0,o.default)(f).call(f,L.results,function(F){var A=j._newObject(L);return A._finishFetch&&A._finishFetch(j._processResult(F),!0),A});return{results:B,count:L.count,className:L.className}})},P.Query.fromJSON=function(C){var y=C.className,b=C.where,w=C.include,S=C.select,L=C.includeACL,j=C.limit,B=C.skip,F=C.order;if(typeof y!="string")throw new TypeError("Invalid Query JSON, className must be a String.");var A=new P.Query(y);return f.extend(A,{_where:b,_include:w,_select:S,_includeACL:L,_limit:j,_skip:B,_order:F}),A},P.Query._extend=P._extend,f.extend(P.Query.prototype,{_processResult:function(y){return y},get:function(y,b){if(!f.isString(y))throw new Error("objectId must be a string");if(y==="")return a.default.reject(new g(g.OBJECT_NOT_FOUND,"Object not found."));var w=this._newObject();w.id=y;var S=this._getParams(),L={};return(0,l.default)(S)&&(L.keys=(0,l.default)(S)),S.include&&(L.include=S.include),S.includeACL&&(L.includeACL=S.includeACL),p("classes",this.className,y,"GET",T(L),b).then(function(j){if(f.isEmpty(j))throw new g(g.OBJECT_NOT_FOUND,"Object not found.");return w._finishFetch(w.parse(j),!0),w})},toJSON:function(){var y=this.className,b=this._where,w=this._include,S=this._select,L=this._includeACL,j=this._limit,B=this._skip,F=this._order;return{className:y,where:b,include:w,select:S,includeACL:L,limit:j,skip:B,order:F}},_getParams:function(){var y=f.extend({},this._defaultParams,{where:this._where});return this._include.length>0&&(y.include=this._include.join(",")),this._select.length>0&&(y.keys=this._select.join(",")),this._includeACL!==void 0&&(y.returnACL=this._includeACL),this._limit>=0&&(y.limit=this._limit),this._skip>0&&(y.skip=this._skip),this._order!==void 0&&(y.order=this._order),y},_newObject:function(y){var b;return y&&y.className?b=new P.Object(y.className):b=new this.objectClass,b},_createRequest:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._getParams(),b=arguments.length>1?arguments[1]:void 0,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/classes/".concat(this.className);if(encodeURIComponent((0,u.default)(y)).length>2e3){var S={requests:[{method:"GET",path:"/1.1".concat(w),params:y}]};return E({path:"/batch",method:"POST",data:S,authOptions:b}).then(function(L){var j=L[0];if(j.success)return j.success;var B=new g(j.error.code,j.error.error||"Unknown batch error");throw B})}return E({method:"GET",path:w,query:y,authOptions:b})},_parseResponse:function(y){var b=this;return(0,o.default)(f).call(f,y.results,function(w){var S=b._newObject(y);return S._finishFetch&&S._finishFetch(b._processResult(w),!0),S})},find:function(y){var b=this._createRequest(void 0,y);return b.then(this._parseResponse.bind(this))},findAndCount:function(y){var b=this,w=this._getParams();w.count=1;var S=this._createRequest(w,y);return S.then(function(L){return[b._parseResponse(L),L.count]})},scan:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=b.orderedBy,S=b.batchSize,L=arguments.length>1?arguments[1]:void 0,j=this._getParams();m("scan %O",j),j.order&&(console.warn("The order of the query is ignored for Query#scan. Checkout the orderedBy option of Query#scan."),delete j.order),j.skip&&(console.warn("The skip option of the query is ignored for Query#scan."),delete j.skip),j.limit&&(console.warn("The limit option of the query is ignored for Query#scan."),delete j.limit),w&&(j.scan_key=w),S&&(j.limit=S);var B,F=[];return{next:function(){return F.length?a.default.resolve({done:!1,value:F.shift()}):B===null?a.default.resolve({done:!0}):p("scan/classes",y.className,null,"GET",B?f.extend({},j,{cursor:B}):j,L).then(function(I){if(B=I.cursor,I.results.length){var x=y._parseResponse(I);x.forEach(function(N){return F.push(N)})}return B===null&&F.length===0?{done:!0}:{done:!1,value:F.shift()}})}}},destroyAll:function(y){var b=this;return(0,d.default)(b).call(b,y).then(function(w){return P.Object.destroyAll(w,y)})},count:function(y){var b=this._getParams();b.limit=0,b.count=1;var w=this._createRequest(b,y);return w.then(function(S){return S.count})},first:function(y){var b=this,w=this._getParams();w.limit=1;var S=this._createRequest(w,y);return S.then(function(L){return(0,o.default)(f).call(f,L.results,function(j){var B=b._newObject();return B._finishFetch&&B._finishFetch(b._processResult(j),!0),B})[0]})},skip:function(y){return M(y,"undefined is not a valid skip value"),this._skip=y,this},limit:function(y){return M(y,"undefined is not a valid limit value"),this._limit=y,this},equalTo:function(y,b){return M(y,"undefined is not a valid key"),M(b,"undefined is not a valid value"),this._where[y]=P._encode(b),this},_addCondition:function(y,b,w){return M(y,"undefined is not a valid condition key"),M(b,"undefined is not a valid condition"),M(w,"undefined is not a valid condition value"),this._where[y]||(this._where[y]={}),this._where[y][b]=P._encode(w),this},sizeEqualTo:function(y,b){return this._addCondition(y,"$size",b),this},notEqualTo:function(y,b){return this._addCondition(y,"$ne",b),this},lessThan:function(y,b){return this._addCondition(y,"$lt",b),this},greaterThan:function(y,b){return this._addCondition(y,"$gt",b),this},lessThanOrEqualTo:function(y,b){return this._addCondition(y,"$lte",b),this},greaterThanOrEqualTo:function(y,b){return this._addCondition(y,"$gte",b),this},containedIn:function(y,b){return this._addCondition(y,"$in",b),this},notContainedIn:function(y,b){return this._addCondition(y,"$nin",b),this},containsAll:function(y,b){return this._addCondition(y,"$all",b),this},exists:function(y){return this._addCondition(y,"$exists",!0),this},doesNotExist:function(y){return this._addCondition(y,"$exists",!1),this},matches:function(y,b,w){return this._addCondition(y,"$regex",b),w||(w=""),b.ignoreCase&&(w+="i"),b.multiline&&(w+="m"),w&&w.length&&this._addCondition(y,"$options",w),this},matchesQuery:function(y,b){var w=b._getParams();return w.className=b.className,this._addCondition(y,"$inQuery",w),this},doesNotMatchQuery:function(y,b){var w=b._getParams();return w.className=b.className,this._addCondition(y,"$notInQuery",w),this},matchesKeyInQuery:function(y,b,w){var S=w._getParams();return S.className=w.className,this._addCondition(y,"$select",{key:b,query:S}),this},doesNotMatchKeyInQuery:function(y,b,w){var S=w._getParams();return S.className=w.className,this._addCondition(y,"$dontSelect",{key:b,query:S}),this},_orQuery:function(y){var b=(0,o.default)(f).call(f,y,function(w){return w._getParams().where});return this._where.$or=b,this},_andQuery:function(y){var b=(0,o.default)(f).call(f,y,function(w){return w._getParams().where});return this._where.$and=b,this},_quote:function(y){return"\\Q"+y.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(y,b){return this._addCondition(y,"$regex",this._quote(b)),this},startsWith:function(y,b){return this._addCondition(y,"$regex","^"+this._quote(b)),this},endsWith:function(y,b){return this._addCondition(y,"$regex",this._quote(b)+"$"),this},ascending:function(y){return M(y,"undefined is not a valid key"),this._order=y,this},addAscending:function(y){return M(y,"undefined is not a valid key"),this._order?this._order+=","+y:this._order=y,this},descending:function(y){return M(y,"undefined is not a valid key"),this._order="-"+y,this},addDescending:function(y){return M(y,"undefined is not a valid key"),this._order?this._order+=",-"+y:this._order="-"+y,this},near:function(y,b){return b instanceof P.GeoPoint||(b=new P.GeoPoint(b)),this._addCondition(y,"$nearSphere",b),this},withinRadians:function(y,b,w){return this.near(y,b),this._addCondition(y,"$maxDistance",w),this},withinMiles:function(y,b,w){return this.withinRadians(y,b,w/3958.8)},withinKilometers:function(y,b,w){return this.withinRadians(y,b,w/6371)},withinGeoBox:function(y,b,w){return b instanceof P.GeoPoint||(b=new P.GeoPoint(b)),w instanceof P.GeoPoint||(w=new P.GeoPoint(w)),this._addCondition(y,"$within",{$box:[b,w]}),this},include:function(y){var b=this;return M(y,"undefined is not a valid key"),f.forEach(arguments,function(w){var S;b._include=(0,h.default)(S=b._include).call(S,O(w))}),this},includeACL:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._includeACL=y,this},select:function(y){var b=this;return M(y,"undefined is not a valid key"),f.forEach(arguments,function(w){var S;b._select=(0,h.default)(S=b._select).call(S,O(w))}),this},each:function(y){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this._order||this._skip||this._limit>=0){var w=new Error("Cannot iterate on a query with sort, skip, or limit.");return a.default.reject(w)}var S=new P.Query(this.objectClass);S._limit=b.batchSize||100,S._where=f.clone(this._where),S._include=f.clone(this._include),S.ascending("objectId");var L=!1;return D(function(){return!L},function(){return(0,d.default)(S).call(S,b).then(function(j){var B=a.default.resolve();return f.each(j,function(F){B=B.then(function(){return y(F)})}),B.then(function(){j.length>=S._limit?S.greaterThan("objectId",j[j.length-1].id):L=!0})})})},subscribe:function(y){return P.LiveQuery.init(this,y)}}),P.FriendShipQuery=P.Query._extend({_newObject:function(){var y=P.Object._getSubclass("_User");return new y},_processResult:function(y){if(y&&y[this._friendshipTag]){var b=y[this._friendshipTag];return b.__type==="Pointer"&&b.className==="_User"&&(delete b.__type,delete b.className),b}else return null}})}},function(i,s,t){var r=t(1),o=r(t(10)),a=r(t(53)),l=t(2),u=t(223),d=t(31),h=d.inherits,f=t(27),m=f.request,g=function(p,E){return m({method:"POST",path:"/LiveQuery/subscribe",data:{query:p,id:E}})};i.exports=function(v){var p=function(){if(!v._config.realtime)throw new Error("LiveQuery not supported. Please use the LiveQuery bundle. https://url.leanapp.cn/enable-live-query")};v.LiveQuery=h(u,{constructor:function(R,O,T,D){var M=this;u.apply(this),this.id=R,this._client=O,this._client.register(this),this._queryJSON=T,this._subscriptionId=D,this._onMessage=this._dispatch.bind(this),this._onReconnect=function(){g(M._queryJSON,M._subscriptionId).catch(function(P){return console.error("LiveQuery resubscribe error: ".concat(P.message))})},O.on("message",this._onMessage),O.on("reconnect",this._onReconnect)},_dispatch:function(R){var O=this;R.forEach(function(T){var D=T.op,M=T.object,P=T.query_id,C=T.updatedKeys;if(P===O.id){var y=v.parseJSON(l.extend({__type:M.className==="_File"?"File":"Object"},M));C?O.emit(D,y,C):O.emit(D,y)}})},unsubscribe:function(){var R=this._client;return R.off("message",this._onMessage),R.off("reconnect",this._onReconnect),R.deregister(this),m({method:"POST",path:"/LiveQuery/unsubscribe",data:{id:R.id,query_id:this.id}})}},{init:function(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=O.subscriptionId,D=T===void 0?v._getSubscriptionId():T;if(p(),!(R instanceof v.Query))throw new TypeError("LiveQuery must be inited with a Query");return o.default.resolve(D).then(function(M){return v._config.realtime.createLiveQueryClient(M).then(function(P){var C=R._getParams(),y=C.where,b=(0,a.default)(C),w=C.returnACL,S={where:y,keys:b,returnACL:w,className:R.className},L=g(S,M).then(function(j){var B=j.query_id;return new v.LiveQuery(B,P,S,M)}).finally(function(){P.deregister(L)});return P.register(L),L})})},pause:function(){return p(),v._config.realtime.pause()},resume:function(){return p(),v._config.realtime.resume()}})}},function(i,s,t){var r=t(2),o=t(31),a=o.tap;i.exports=function(l){l.Captcha=function(d,h){this._options=d,this._authOptions=h,this.url=void 0,this.captchaToken=void 0,this.validateToken=void 0},l.Captcha.prototype.refresh=function(){var d=this;return l.Cloud._requestCaptcha(this._options,this._authOptions).then(function(h){var f=h.captchaToken,m=h.url;return r.extend(d,{captchaToken:f,url:m}),m})},l.Captcha.prototype.verify=function(d){var h=this;return l.Cloud.verifyCaptcha(d,this.captchaToken).then(a(function(f){return h.validateToken=f}))},l.Captcha.prototype.bind=function(d,h){var f=this,m=d.textInput,g=d.image,v=d.verifyButton,p=h.success,E=h.error;if(typeof m=="string"&&(m=document.getElementById(m),!m))throw new Error("textInput with id ".concat(m," not found"));if(typeof g=="string"&&(g=document.getElementById(g),!g))throw new Error("image with id ".concat(g," not found"));if(typeof v=="string"&&(v=document.getElementById(v),!v))throw new Error("verifyButton with id ".concat(v," not found"));this.__refresh=function(){return f.refresh().then(function(R){g.src=R,m&&(m.value="",m.focus())}).catch(function(R){return console.warn("refresh captcha fail: ".concat(R.message))})},g&&(this.__image=g,g.src=this.url,g.addEventListener("click",this.__refresh)),this.__verify=function(){var R=m.value;f.verify(R).catch(function(O){throw f.__refresh(),O}).then(p,E).catch(function(O){return console.warn("verify captcha fail: ".concat(O.message))})},m&&v&&(this.__verifyButton=v,v.addEventListener("click",this.__verify))},l.Captcha.prototype.unbind=function(){this.__image&&this.__image.removeEventListener("click",this.__refresh),this.__verifyButton&&this.__verifyButton.removeEventListener("click",this.__verify)},l.Captcha.request=function(u,d){var h=new l.Captcha(u,d);return h.refresh().then(function(){return h})}}},function(i,s,t){var r=t(1),o=r(t(10)),a=t(2),l=t(27),u=l._request,d=l.request;i.exports=function(h){h.Cloud=h.Cloud||{},a.extend(h.Cloud,{run:function(m,g,v){return d({service:"engine",method:"POST",path:"/functions/".concat(m),data:h._encode(g,null,!0),authOptions:v}).then(function(p){return h._decode(p).result})},rpc:function(m,g,v){return a.isArray(g)?o.default.reject(new Error("Can't pass Array as the param of rpc function in JavaScript SDK.")):d({service:"engine",method:"POST",path:"/call/".concat(m),data:h._encodeObjectOrArray(g),authOptions:v}).then(function(p){return h._decode(p).result})},getServerDate:function(){return u("date",null,null,"GET").then(function(m){return h._decode(m)})},requestSmsCode:function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a.isString(m)&&(m={mobilePhoneNumber:m}),!m.mobilePhoneNumber)throw new Error("Missing mobilePhoneNumber.");return g.validateToken&&(m=a.extend({},m,{validate_token:g.validateToken})),u("requestSmsCode",null,null,"POST",m,g)},verifySmsCode:function(m,g){if(!m)throw new Error("Missing sms code.");var v={};return a.isString(g)&&(v.mobilePhoneNumber=g),u("verifySmsCode",m,null,"POST",v)},_requestCaptcha:function(m,g){return u("requestCaptcha",null,null,"GET",m,g).then(function(v){var p=v.captcha_url,E=v.captcha_token;return{captchaToken:E,url:p}})},requestCaptcha:h.Captcha.request,verifyCaptcha:function(m,g){return u("verifyCaptcha",null,null,"POST",{captcha_code:m,captcha_token:g}).then(function(v){var p=v.validate_token;return p})}})}},function(i,s,t){var r=t(27).request;i.exports=function(o){o.Installation=o.Object.extend("_Installation"),o.Push=o.Push||{},o.Push.send=function(a,l){if(a.where&&(a.where=a.where._getParams().where),a.where&&a.cql)throw new Error("Both where and cql can't be set");if(a.push_time&&(a.push_time=a.push_time.toJSON()),a.expiration_time&&(a.expiration_time=a.expiration_time.toJSON()),a.expiration_time&&a.expiration_interval)throw new Error("Both expiration_time and expiration_interval can't be set");return r({service:"push",method:"POST",path:"/push",data:a,authOptions:l})}}},function(i,s,t){var r=t(1),o=r(t(10)),a=r(t(141)),l=t(2),u=t(27)._request,d=t(31),h=d.getSessionToken;i.exports=function(f){var m=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=h(p);return E?f.User._fetchUserBySessionToken(h(p)):f.User.currentAsync()},g=function(p){return m(p).then(function(E){return f.Object.createWithoutData("_User",E.id)._toPointer()})};f.Status=function(v,p){return this.data={},this.inboxType="default",this.query=null,v&&(0,a.default)(v)==="object"?this.data=v:(v&&(this.data.image=v),p&&(this.data.message=p)),this},l.extend(f.Status.prototype,{get:function(p){return this.data[p]},set:function(p,E){return this.data[p]=E,this},destroy:function(p){if(!this.id)return o.default.reject(new Error("The status id is not exists."));var E=u("statuses",null,this.id,"DELETE",p);return E},toObject:function(){return this.id?f.Object.createWithoutData("_Status",this.id):null},_getDataJSON:function(){var p=l.clone(this.data);return f._encode(p)},send:function(){var p=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!h(E)&&!f.User.current())throw new Error("Please signin an user.");return this.query?g(E).then(function(R){var O=p.query._getParams();O.className=p.query.className;var T={};return T.query=O,p.data=p.data||{},p.data.source=p.data.source||R,T.data=p._getDataJSON(),T.inboxType=p.inboxType||"default",u("statuses",null,null,"POST",T,E)}).then(function(R){return p.id=R.objectId,p.createdAt=f._parseDate(R.createdAt),p}):f.Status.sendStatusToFollowers(this,E)},_finishFetch:function(p){this.id=p.objectId,this.createdAt=f._parseDate(p.createdAt),this.updatedAt=f._parseDate(p.updatedAt),this.messageId=p.messageId,delete p.messageId,delete p.objectId,delete p.createdAt,delete p.updatedAt,this.data=f._decode(p)}}),f.Status.sendStatusToFollowers=function(v){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!h(p)&&!f.User.current())throw new Error("Please signin an user.");return g(p).then(function(E){var R={};R.className="_Follower",R.keys="follower",R.where={user:E};var O={};O.query=R,v.data=v.data||{},v.data.source=v.data.source||E,O.data=v._getDataJSON(),O.inboxType=v.inboxType||"default";var T=u("statuses",null,null,"POST",O,p);return T.then(function(D){return v.id=D.objectId,v.createdAt=f._parseDate(D.createdAt),v})})},f.Status.sendPrivateStatus=function(v,p){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!h(E)&&!f.User.current())throw new Error("Please signin an user.");if(!p)throw new Error("Invalid target user.");var R=l.isString(p)?p:p.id;if(!R)throw new Error("Invalid target user.");return g(E).then(function(O){var T={};T.className="_User",T.where={objectId:R};var D={};D.query=T,v.data=v.data||{},v.data.source=v.data.source||O,D.data=v._getDataJSON(),D.inboxType="private",v.inboxType="private";var M=u("statuses",null,null,"POST",D,E);return M.then(function(P){return v.id=P.objectId,v.createdAt=f._parseDate(P.createdAt),v})})},f.Status.countUnreadStatuses=function(v){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(l.isString(p)||(E=p),!h(E)&&v==null&&!f.User.current())throw new Error("Please signin an user or pass the owner objectId.");return o.default.resolve(v||m(E)).then(function(R){var O={};return O.inboxType=f._encode(p),O.owner=f._encode(R),u("subscribe/statuses/count",null,null,"GET",O,E)})},f.Status.resetUnreadCount=function(v){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(l.isString(p)||(E=p),!h(E)&&v==null&&!f.User.current())throw new Error("Please signin an user or pass the owner objectId.");return o.default.resolve(v||m(E)).then(function(R){var O={};return O.inboxType=f._encode(p),O.owner=f._encode(R),u("subscribe/statuses/resetUnreadCount",null,null,"POST",O,E)})},f.Status.statusQuery=function(v){var p=new f.Query("_Status");return v&&p.equalTo("source",v),p},f.InboxQuery=f.Query._extend({_objectClass:f.Status,_sinceId:0,_maxId:0,_inboxType:"default",_owner:null,_newObject:function(){return new f.Status},_createRequest:function(p,E){return f.InboxQuery.__super__._createRequest.call(this,p,E,"/subscribe/statuses")},sinceId:function(p){return this._sinceId=p,this},maxId:function(p){return this._maxId=p,this},owner:function(p){return this._owner=p,this},inboxType:function(p){return this._inboxType=p,this},_getParams:function(){var p=f.InboxQuery.__super__._getParams.call(this);return p.owner=f._encode(this._owner),p.inboxType=f._encode(this._inboxType),p.sinceId=f._encode(this._sinceId),p.maxId=f._encode(this._maxId),p}}),f.Status.inboxQuery=function(v,p){var E=new f.InboxQuery(f.Status);return v&&(E._owner=v),p&&(E._inboxType=p),E}}},function(i,s,t){var r=t(1),o=r(t(37)),a=r(t(42)),l=t(2),u=t(27)._request;i.exports=function(d){d.SearchSortBuilder=function(){this._sortFields=[]},l.extend(d.SearchSortBuilder.prototype,{_addField:function(f,m,g,v){var p={};return p[f]={order:m||"asc",mode:g||"avg",missing:"_"+(v||"last")},this._sortFields.push(p),this},ascending:function(f,m,g){return this._addField(f,"asc",m,g)},descending:function(f,m,g){return this._addField(f,"desc",m,g)},whereNear:function(f,m,g){g=g||{};var v={},p={lat:m.latitude,lon:m.longitude},E={order:g.order||"asc",mode:g.mode||"avg",unit:g.unit||"km"};return E[f]=p,v._geo_distance=E,this._sortFields.push(v),this},build:function(){return(0,o.default)(d._encode(this._sortFields))}}),d.SearchQuery=d.Query._extend({_sid:null,_hits:0,_queryString:null,_highlights:null,_sortBuilder:null,_clazz:null,constructor:function(f){f?this._clazz=f:f="__INVALID_CLASS",d.Query.call(this,f)},_createRequest:function(f,m){return u("search/select",null,null,"GET",f||this._getParams(),m)},sid:function(f){return this._sid=f,this},queryString:function(f){return this._queryString=f,this},highlights:function(f){var m;return f&&l.isString(f)?m=l.toArray(arguments):m=f,this._highlights=m,this},sortBy:function(f){return this._sortBuilder=f,this},hits:function(){return this._hits||(this._hits=0),this._hits},_processResult:function(f){return delete f.className,delete f._app_url,delete f._deeplink,f},hasMore:function(){return!this._hitEnd},reset:function(){this._hitEnd=!1,this._sid=null,this._hits=0},find:function(f){var m=this,g=this._createRequest(void 0,f);return g.then(function(v){return v.sid?(m._oldSid=m._sid,m._sid=v.sid):(m._sid=null,m._hitEnd=!0),m._hits=v.hits||0,(0,a.default)(l).call(l,v.results,function(p){p.className&&(v.className=p.className);var E=m._newObject(v);return E.appURL=p._app_url,E._finishFetch(m._processResult(p),!0),E})})},_getParams:function(){var f=d.SearchQuery.__super__._getParams.call(this);if(delete f.where,this._clazz&&(f.clazz=this.className),this._sid&&(f.sid=this._sid),this._queryString)f.q=this._queryString;else throw new Error("Please set query string.");if(this._highlights&&(f.highlights=this._highlights.join(",")),this._sortBuilder&&f.order)throw new Error("sort and order can not be set at same time.");return this._sortBuilder&&(f.sort=this._sortBuilder.build()),f}})}},function(i,s,t){var r=t(1),o=r(t(10)),a=t(2),l=t(43),u=t(27),d=u.request;i.exports=function(h){h.Insight=h.Insight||{},a.extend(h.Insight,{startJob:function(m,g){if(!m||!m.sql)throw new Error("Please provide the sql to run the job.");var v={jobConfig:m,appId:h.applicationId};return d({path:"/bigquery/jobs",method:"POST",data:h._encode(v,null,!0),authOptions:g,signKey:!1}).then(function(p){return h._decode(p).id})},on:function(m,g){}}),h.Insight.JobQuery=function(f,m){if(!f)throw new Error("Please provide the job id.");this.id=f,this.className=m,this._skip=0,this._limit=100},a.extend(h.Insight.JobQuery.prototype,{skip:function(m){return this._skip=m,this},limit:function(m){return this._limit=m,this},find:function(m){var g={skip:this._skip,limit:this._limit};return d({path:"/bigquery/jobs/".concat(this.id),method:"GET",query:g,authOptions:m,signKey:!1}).then(function(v){return v.error?o.default.reject(new l(v.code,v.error)):o.default.resolve(v)})}})}},function(i,s,t){var r=t(1),o=r(t(10)),a=t(2),l=t(27),u=l.request,d=t(31),h=d.getSessionToken;i.exports=function(f){var m=function(p){if(p.user){if(!p.user._sessionToken)throw new Error("authOptions.user is not signed in.");return o.default.resolve(p.user)}return p.sessionToken?f.User._fetchUserBySessionToken(p.sessionToken):f.User.currentAsync()},g=function(p){var E=h(p);return E?o.default.resolve(E):f.User.currentAsync().then(function(R){if(R)return R.getSessionToken()})};f.Friendship={request:function(p){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R,O;p.friend?(R=p.friend,O=p.attributes):R=p;var T=a.isString(R)?f.Object.createWithoutData("_User",R):R;return m(E).then(function(D){if(!D)throw new Error("Please signin an user.");return u({method:"POST",path:"/users/friendshipRequests",data:{user:D._toPointer(),friend:T._toPointer(),friendship:O},authOptions:E})})},acceptRequest:function(p){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R,O;p.request?(R=p.request,O=p.attributes):R=p;var T=a.isString(R)?R:R.id;return g(E).then(function(D){if(!D)throw new Error("Please signin an user.");return u({method:"PUT",path:"/users/friendshipRequests/"+T+"/accept",data:{friendship:f._encode(O)},authOptions:E})})},declineRequest:function(p){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=a.isString(p)?p:p.id;return g(E).then(function(O){if(!O)throw new Error("Please signin an user.");return u({method:"PUT",path:"/users/friendshipRequests/"+R+"/decline",authOptions:E})})}}}},function(i,s,t){var r=t(1),o=r(t(37)),a=t(2),l=t(27),u=l._request,d=t(67),h=function(m){return typeof m=="string"?m:typeof m.getPayload=="function"?(0,o.default)(m.getPayload()):(0,o.default)(m)};i.exports=d.Object.extend("_Conversation",{constructor:function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};d.Object.prototype.constructor.call(this,null,null),this.set("name",m),g.isSystem!==void 0&&this.set("sys",!!g.isSystem),g.isTransient!==void 0&&this.set("tr",!!g.isTransient)},getCreator:function(){return this.get("c")},getLastMessageAt:function(){return this.get("lm")},getMembers:function(){return this.get("m")},addMember:function(m){return this.add("m",m)},getMutedMembers:function(){return this.get("mu")},getName:function(){return this.get("name")},isTransient:function(){return this.get("tr")},isSystem:function(){return this.get("sys")},send:function(m,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},E={from_peer:m,conv_id:this.id,transient:!1,message:h(g)};return v.toClients!==void 0&&(E.to_peers=v.toClients),v.transient!==void 0&&(E.transient=!!v.transient),v.pushData!==void 0&&(E.push_data=v.pushData),u("rtm","messages",null,"POST",E,p)},broadcast:function(m,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},E={from_peer:m,conv_id:this.id,message:h(g)};if(v.pushData!==void 0&&(E.push=v.pushData),v.validTill!==void 0){var R=v.validTill;a.isDate(R)&&(R=R.getTime()),v.valid_till=R}return u("rtm","broadcast",null,"POST",E,p)}})},function(i,s,t){var r=t(1),o=r(t(10)),a=r(t(42)),l=r(t(25)),u=t(2),d=t(27),h=d.request,f=t(31),m=f.ensureArray,g=f.parseDate,v=t(67);v.LeaderboardVersionChangeInterval={NEVER:"never",DAY:"day",WEEK:"week",MONTH:"month"},v.LeaderboardOrder={ASCENDING:"ascending",DESCENDING:"descending"},v.LeaderboardUpdateStrategy={BETTER:"better",LAST:"last",SUM:"sum"};function p(O){var T=O.name,D=O.value,M=O.version;this.name=T,this.value=D,this.version=M}var E=function(T){var D=v._decode(T),M=D.statisticName,P=D.statisticValue,C=D.version;return new p({name:M,value:P,version:C})};v.Leaderboard=function(T){this.statisticName=T,this.order=void 0,this.updateStrategy=void 0,this.versionChangeInterval=void 0,this.version=void 0,this.nextResetAt=void 0,this.createdAt=void 0};var R=v.Leaderboard;v.Leaderboard.createWithoutData=function(O){return new R(O)},v.Leaderboard.createLeaderboard=function(O,T){var D=O.statisticName,M=O.order,P=O.versionChangeInterval,C=O.updateStrategy;return h({method:"POST",path:"/leaderboard/leaderboards",data:{statisticName:D,order:M,versionChangeInterval:P,updateStrategy:C},authOptions:T}).then(function(y){var b=new R(D);return b._finishFetch(y)})},v.Leaderboard.getLeaderboard=function(O,T){return R.createWithoutData(O).fetch(T)},v.Leaderboard.getStatistics=function(O){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=T.statisticNames,M=arguments.length>2?arguments[2]:void 0;return o.default.resolve().then(function(){if(!(O&&O.id))throw new Error("user must be an AV.User");return h({method:"GET",path:"/leaderboard/users/".concat(O.id,"/statistics"),query:{statistics:D?m(D).join(","):void 0},authOptions:M}).then(function(P){var C=P.results;return(0,a.default)(C).call(C,E)})})},v.Leaderboard.updateStatistics=function(O,T){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.default.resolve().then(function(){if(!(O&&O.id))throw new Error("user must be an AV.User");var M=(0,a.default)(u).call(u,T,function(C,y){return{statisticName:y,statisticValue:C}}),P=D.overwrite;return h({method:"POST",path:"/leaderboard/users/".concat(O.id,"/statistics"),query:{overwrite:P?1:void 0},data:M,authOptions:D}).then(function(C){var y=C.results;return(0,a.default)(y).call(y,E)})})},v.Leaderboard.deleteStatistics=function(O,T,D){return o.default.resolve().then(function(){if(!(O&&O.id))throw new Error("user must be an AV.User");return h({method:"DELETE",path:"/leaderboard/users/".concat(O.id,"/statistics"),query:{statistics:m(T).join(",")},authOptions:D}).then(function(){})})},u.extend(R.prototype,{_finishFetch:function(T){var D=this;return u.forEach(T,function(M,P){P==="updatedAt"||P==="objectId"||(P==="expiredAt"&&(P="nextResetAt"),P==="createdAt"&&(M=g(M)),M&&M.__type==="Date"&&(M=g(M.iso)),D[P]=M)}),this},fetch:function(T){var D=this;return h({method:"GET",path:"/leaderboard/leaderboards/".concat(this.statisticName),authOptions:T}).then(function(M){return D._finishFetch(M)})},count:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=T.version,M=arguments.length>1?arguments[1]:void 0;return h({method:"GET",path:"/leaderboard/leaderboards/".concat(this.statisticName,"/ranks"),query:{count:1,limit:0,version:D},authOptions:M}).then(function(P){var C=P.count;return C})},_getResults:function(T,D,M){var P,C=T.skip,y=T.limit,b=T.selectUserKeys,w=T.includeUserKeys,S=T.includeStatistics,L=T.version;return h({method:"GET",path:(0,l.default)(P="/leaderboard/leaderboards/".concat(this.statisticName,"/ranks")).call(P,M?"/".concat(M):""),query:{skip:C,limit:y,selectUserKeys:u.union(m(b),m(w)).join(",")||void 0,includeUser:w?m(w).join(","):void 0,includeStatistics:S?m(S).join(","):void 0,version:L},authOptions:D}).then(function(j){var B=j.results;return(0,a.default)(B).call(B,function(F){var A=v._decode(F),I=A.user,x=A.statisticValue,N=A.rank,U=A.statistics,W=U===void 0?[]:U;return{user:I,value:x,rank:N,includedStatistics:(0,a.default)(W).call(W,E)}})})},getResults:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=T.skip,M=T.limit,P=T.selectUserKeys,C=T.includeUserKeys,y=T.includeStatistics,b=T.version,w=arguments.length>1?arguments[1]:void 0;return this._getResults({skip:D,limit:M,selectUserKeys:P,includeUserKeys:C,includeStatistics:y,version:b},w)},getResultsAroundUser:function(T){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=arguments.length>2?arguments[2]:void 0;if(T&&typeof T.id!="string")return this.getResultsAroundUser(void 0,T,D);var P=D.limit,C=D.selectUserKeys,y=D.includeUserKeys,b=D.includeStatistics,w=D.version;return this._getResults({limit:P,selectUserKeys:C,includeUserKeys:y,includeStatistics:b,version:w},M,T?T.id:"self")},_update:function(T,D){var M=this;return h({method:"PUT",path:"/leaderboard/leaderboards/".concat(this.statisticName),data:T,authOptions:D}).then(function(P){return M._finishFetch(P)})},updateVersionChangeInterval:function(T,D){return this._update({versionChangeInterval:T},D)},updateUpdateStrategy:function(T,D){return this._update({updateStrategy:T},D)},reset:function(T){var D=this;return h({method:"PUT",path:"/leaderboard/leaderboards/".concat(this.statisticName,"/incrementVersion"),authOptions:T}).then(function(M){return D._finishFetch(M)})},destroy:function(T){return v.request({method:"DELETE",path:"/leaderboard/leaderboards/".concat(this.statisticName),authOptions:T}).then(function(){})},getArchives:function(){var T=this,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=D.skip,P=D.limit,C=arguments.length>1?arguments[1]:void 0;return h({method:"GET",path:"/leaderboard/leaderboards/".concat(this.statisticName,"/archives"),query:{skip:M,limit:P},authOptions:C}).then(function(y){var b=y.results;return(0,a.default)(b).call(b,function(w){var S=w.version,L=w.status,j=w.url,B=w.activatedAt,F=w.deactivatedAt;return{statisticName:T.statisticName,version:S,status:L,url:j,activatedAt:g(B.iso),deactivatedAt:g(F.iso)}})})}})},function(i,s,t){var r=t(545);i.exports=function(o){return o.setAdapters(r),o}},function(i,s,t){var r=t(140);r(s,"__esModule",{value:!0}),s.platformInfo=s.WebSocket=void 0,r(s,"request",{enumerable:!0,get:function(){return o.request}}),s.storage=void 0,r(s,"upload",{enumerable:!0,get:function(){return o.upload}});var o=t(546),a=window.localStorage;s.storage=a;var l=window.WebSocket;s.WebSocket=l;var u={name:"Browser"};s.platformInfo=u},function(i,s,t){var r=this&&this.__awaiter||function(f,m,g,v){function p(E){return E instanceof g?E:new g(function(R){R(E)})}return new(g||(g=Promise))(function(E,R){function O(M){try{D(v.next(M))}catch(P){R(P)}}function T(M){try{D(v.throw(M))}catch(P){R(P)}}function D(M){M.done?E(M.value):p(M.value).then(O,T)}D((v=v.apply(f,m||[])).next())})},o=this&&this.__generator||function(f,m){var g={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},v,p,E,R;return R={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function O(D){return function(M){return T([D,M])}}function T(D){if(v)throw new TypeError("Generator is already executing.");for(;g;)try{if(v=1,p&&(E=D[0]&2?p.return:D[0]?p.throw||((E=p.return)&&E.call(p),0):p.next)&&!(E=E.call(p,D[1])).done)return E;switch(p=0,E&&(D=[D[0]&2,E.value]),D[0]){case 0:case 1:E=D;break;case 4:return g.label++,{value:D[1],done:!1};case 5:g.label++,p=D[1],D=[0];continue;case 7:D=g.ops.pop(),g.trys.pop();continue;default:if(E=g.trys,!(E=E.length>0&&E[E.length-1])&&(D[0]===6||D[0]===2)){g=0;continue}if(D[0]===3&&(!E||D[1]>E[0]&&D[1]<E[3])){g.label=D[1];break}if(D[0]===6&&g.label<E[1]){g.label=E[1],E=D;break}if(E&&g.label<E[2]){g.label=E[2],g.ops.push(D);break}E[2]&&g.ops.pop(),g.trys.pop();continue}D=m.call(f,g)}catch(M){D=[6,M],p=0}finally{v=E=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.upload=s.request=void 0;var a=t(547),l=t(548);function u(f){return{ok:f.ok,status:f.status,headers:f.header,data:f.body}}var d=function(f,m){return m===void 0&&(m={}),r(void 0,void 0,void 0,function(){var g,v,p,E,R,O,T,D,M,P,C;return o(this,function(y){switch(y.label){case 0:if(g=m.method,v=g===void 0?"GET":g,p=m.data,E=m.headers,R=m.onprogress,O=m.signal,O!=null&&O.aborted)throw new a.AbortError("Request aborted");T=l(v,f).ok(function(){return!0}),E&&T.set(E),R&&T.on("progress",R),D=!1,M=function(){D=!0,T.abort()},O==null||O.addEventListener("abort",M),y.label=1;case 1:return y.trys.push([1,3,4,5]),[4,T.send(p)];case 2:return P=y.sent(),[2,u(P)];case 3:throw C=y.sent(),D?new a.AbortError("Request aborted"):C;case 4:return O==null||O.removeEventListener("abort",M),[7];case 5:return[2]}})})};s.request=d;var h=function(f,m,g){return g===void 0&&(g={}),r(void 0,void 0,void 0,function(){var v,p,E,R,O,T,D,M,P,C,y;return o(this,function(b){switch(b.label){case 0:if(v=g.method,p=v===void 0?"POST":v,E=g.data,R=g.headers,O=g.onprogress,T=g.signal,T!=null&&T.aborted)throw new a.AbortError("Request aborted");D=l(p,f).ok(function(){return!0}).attach(m.field,m.data,m.name),E&&D.field(E),R&&D.set(R),O&&D.on("progress",O),M=!1,P=function(){M=!0,D.abort()},T==null||T.addEventListener("abort",P),b.label=1;case 1:return b.trys.push([1,3,4,5]),[4,D];case 2:return C=b.sent(),[2,u(C)];case 3:throw y=b.sent(),M?new a.AbortError("Request aborted"):y;case 4:return T==null||T.removeEventListener("abort",P),[7];case 5:return[2]}})})};s.upload=h},function(i,s,t){Object.defineProperty(s,"__esModule",{value:!0}),t.d(s,"AbortError",function(){return a});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(l,u){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(d[f]=h[f])},r(l,u)};function o(l,u){r(l,u);function d(){this.constructor=l}l.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}var a=function(l){o(u,l);function u(){var d=l!==null&&l.apply(this,arguments)||this;return d.name="AbortError",d}return u}(Error)},function(i,s,t){var r=t(1),o=r(t(87)),a=r(t(144)),l=r(t(549)),u=r(t(25)),d=r(t(68)),h=r(t(38));function f(B){"@babel/helpers - typeof";return typeof o.default=="function"&&typeof a.default=="symbol"?f=function(A){return typeof A}:f=function(A){return A&&typeof o.default=="function"&&A.constructor===o.default&&A!==o.default.prototype?"symbol":typeof A},f(B)}var m;typeof window<"u"?m=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),m=void 0):m=self;var g=t(556),v=t(557),p=t(558),E=t(244),R=t(579),O=t(587);function T(){}i.exports=function(B,F){return typeof F=="function"?new s.Request("GET",B).end(F):arguments.length===1?new s.Request("GET",B):new s.Request(B,F)},s=i.exports;var D=s;s.Request=L,D.getXHR=function(){if(m.XMLHttpRequest&&(!m.location||m.location.protocol!=="file:"||!m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("Browser-only version of superagent could not find XHR")};var M=(0,l.default)("")?function(B){return(0,l.default)(B).call(B)}:function(B){return B.replace(/(^\s*|\s*$)/g,"")};function P(B){if(!E(B))return B;var F=[];for(var A in B)Object.prototype.hasOwnProperty.call(B,A)&&C(F,A,B[A]);return F.join("&")}function C(B,F,A){if(A!==void 0){if(A===null){B.push(encodeURI(F));return}if(Array.isArray(A))A.forEach(function(N){C(B,F,N)});else if(E(A))for(var I in A){var x;Object.prototype.hasOwnProperty.call(A,I)&&C(B,(0,u.default)(x="".concat(F,"[")).call(x,I,"]"),A[I])}else B.push(encodeURI(F)+"="+encodeURIComponent(A))}}D.serializeObject=P;function y(B){for(var F={},A=B.split("&"),I,x,N=0,U=A.length;N<U;++N)I=A[N],x=(0,d.default)(I).call(I,"="),x===-1?F[decodeURIComponent(I)]="":F[decodeURIComponent((0,h.default)(I).call(I,0,x))]=decodeURIComponent((0,h.default)(I).call(I,x+1));return F}D.parseString=y,D.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},D.serialize={"application/x-www-form-urlencoded":P,"application/json":v},D.parse={"application/x-www-form-urlencoded":y,"application/json":JSON.parse};function b(B){for(var F=B.split(/\r?\n/),A={},I,x,N,U,W=0,H=F.length;W<H;++W)x=F[W],I=(0,d.default)(x).call(x,":"),I!==-1&&(N=(0,h.default)(x).call(x,0,I).toLowerCase(),U=M((0,h.default)(x).call(x,I+1)),A[N]=U);return A}function w(B){return/[/+]json($|[^-\w])/.test(B)}function S(B){this.req=B,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType>"u"?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var F=this.xhr.status;F===1223&&(F=204),this._setStatusProperties(F),this.headers=b(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&B._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}R(S.prototype),S.prototype._parseBody=function(B){var F=D.parse[this.type];return this.req._parser?this.req._parser(this,B):(!F&&w(this.type)&&(F=D.parse["application/json"]),F&&B&&(B.length>0||B instanceof Object)?F(B):null)},S.prototype.toError=function(){var B,F,A=this.req,I=A.method,x=A.url,N=(0,u.default)(B=(0,u.default)(F="cannot ".concat(I," ")).call(F,x," (")).call(B,this.status,")"),U=new Error(N);return U.status=this.status,U.method=I,U.url=x,U},D.Response=S;function L(B,F){var A=this;this._query=this._query||[],this.method=B,this.url=F,this.header={},this._header={},this.on("end",function(){var I=null,x=null;try{x=new S(A)}catch(U){return I=new Error("Parser is unable to parse the response"),I.parse=!0,I.original=U,A.xhr?(I.rawResponse=typeof A.xhr.responseType>"u"?A.xhr.responseText:A.xhr.response,I.status=A.xhr.status?A.xhr.status:null,I.statusCode=I.status):(I.rawResponse=null,I.status=null),A.callback(I)}A.emit("response",x);var N;try{A._isResponseOK(x)||(N=new Error(x.statusText||x.text||"Unsuccessful HTTP response"))}catch(U){N=U}N?(N.original=I,N.response=x,N.status=x.status,A.callback(N,x)):A.callback(null,x)})}g(L.prototype),p(L.prototype),L.prototype.type=function(B){return this.set("Content-Type",D.types[B]||B),this},L.prototype.accept=function(B){return this.set("Accept",D.types[B]||B),this},L.prototype.auth=function(B,F,A){arguments.length===1&&(F=""),f(F)==="object"&&F!==null&&(A=F,F=""),A||(A={type:typeof btoa=="function"?"basic":"auto"});var I=function(N){if(typeof btoa=="function")return btoa(N);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(B,F,A,I)},L.prototype.query=function(B){return typeof B!="string"&&(B=P(B)),B&&this._query.push(B),this},L.prototype.attach=function(B,F,A){if(F){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(B,F,A||F.name)}return this},L.prototype._getFormData=function(){return this._formData||(this._formData=new m.FormData),this._formData},L.prototype.callback=function(B,F){if(this._shouldRetry(B,F))return this._retry();var A=this._callback;this.clearTimeout(),B&&(this._maxRetries&&(B.retries=this._retries-1),this.emit("error",B)),A(B,F)},L.prototype.crossDomainError=function(){var B=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);B.crossDomain=!0,B.status=this.status,B.method=this.method,B.url=this.url,this.callback(B)},L.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},L.prototype.ca=L.prototype.agent,L.prototype.buffer=L.prototype.ca,L.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},L.prototype.pipe=L.prototype.write,L.prototype._isHost=function(B){return B&&f(B)==="object"&&!Array.isArray(B)&&Object.prototype.toString.call(B)!=="[object Object]"},L.prototype.end=function(B){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=B||T,this._finalizeQueryString(),this._end()},L.prototype._setUploadTimeout=function(){var B=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){B._timeoutError("Upload timeout of ",B._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},L.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var B=this;this.xhr=D.getXHR();var F=this.xhr,A=this._formData||this._data;this._setTimeouts(),F.onreadystatechange=function(){var W=F.readyState;if(W>=2&&B._responseTimeoutTimer&&clearTimeout(B._responseTimeoutTimer),W===4){var H;try{H=F.status}catch{H=0}if(!H)return B.timedout||B._aborted?void 0:B.crossDomainError();B.emit("end")}};var I=function(H,K){K.total>0&&(K.percent=K.loaded/K.total*100,K.percent===100&&clearTimeout(B._uploadTimeoutTimer)),K.direction=H,B.emit("progress",K)};if(this.hasListeners("progress"))try{F.addEventListener("progress",I.bind(null,"download")),F.upload&&F.upload.addEventListener("progress",I.bind(null,"upload"))}catch{}F.upload&&this._setUploadTimeout();try{this.username&&this.password?F.open(this.method,this.url,!0,this.username,this.password):F.open(this.method,this.url,!0)}catch(W){return this.callback(W)}if(this._withCredentials&&(F.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof A!="string"&&!this._isHost(A)){var x=this._header["content-type"],N=this._serializer||D.serialize[x?x.split(";")[0]:""];!N&&w(x)&&(N=D.serialize["application/json"]),N&&(A=N(A))}for(var U in this.header)this.header[U]!==null&&Object.prototype.hasOwnProperty.call(this.header,U)&&F.setRequestHeader(U,this.header[U]);this._responseType&&(F.responseType=this._responseType),this.emit("request",this),F.send(typeof A>"u"?null:A)},D.agent=function(){return new O},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(B){O.prototype[B.toLowerCase()]=function(F,A){var I=new D.Request(B,F);return this._setDefaults(I),A&&I.end(A),I}}),O.prototype.del=O.prototype.delete,D.get=function(B,F,A){var I=D("GET",B);return typeof F=="function"&&(A=F,F=null),F&&I.query(F),A&&I.end(A),I},D.head=function(B,F,A){var I=D("HEAD",B);return typeof F=="function"&&(A=F,F=null),F&&I.query(F),A&&I.end(A),I},D.options=function(B,F,A){var I=D("OPTIONS",B);return typeof F=="function"&&(A=F,F=null),F&&I.send(F),A&&I.end(A),I};function j(B,F,A){var I=D("DELETE",B);return typeof F=="function"&&(A=F,F=null),F&&I.send(F),A&&I.end(A),I}D.del=j,D.delete=j,D.patch=function(B,F,A){var I=D("PATCH",B);return typeof F=="function"&&(A=F,F=null),F&&I.send(F),A&&I.end(A),I},D.post=function(B,F,A){var I=D("POST",B);return typeof F=="function"&&(A=F,F=null),F&&I.send(F),A&&I.end(A),I},D.put=function(B,F,A){var I=D("PUT",B);return typeof F=="function"&&(A=F,F=null),F&&I.send(F),A&&I.end(A),I}},function(i,s,t){i.exports=t(550)},function(i,s,t){var r=t(551);i.exports=r},function(i,s,t){var r=t(12),o=t(552),a=String.prototype;i.exports=function(l){var u=l.trim;return typeof l=="string"||l===a||r(a,l)&&u===a.trim?o:u}},function(i,s,t){t(553);var r=t(26);i.exports=r("String").trim},function(i,s,t){var r=t(0),o=t(554).trim,a=t(555);r({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})},function(i,s,t){var r=t(4),o=t(74),a=t(40),l=t(243),u=r("".replace),d="["+l+"]",h=RegExp("^"+d+d+"*"),f=RegExp(d+d+"*$"),m=function(g){return function(v){var p=a(o(v));return g&1&&(p=u(p,h,"")),g&2&&(p=u(p,f,"")),p}};i.exports={start:m(1),end:m(2),trim:m(3)}},function(i,s,t){var r=t(158).PROPER,o=t(3),a=t(243),l="​᠎";i.exports=function(u){return o(function(){return!!a[u]()||l[u]()!==l||r&&a[u].name!==u})}},function(i,s,t){i.exports=r;function r(a){if(a)return o(a)}function o(a){for(var l in r.prototype)a[l]=r.prototype[l];return a}r.prototype.on=r.prototype.addEventListener=function(a,l){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(l),this},r.prototype.once=function(a,l){function u(){this.off(a,u),l.apply(this,arguments)}return u.fn=l,this.on(a,u),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(a,l){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var u=this._callbacks["$"+a];if(!u)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var d,h=0;h<u.length;h++)if(d=u[h],d===l||d.fn===l){u.splice(h,1);break}return u.length===0&&delete this._callbacks["$"+a],this},r.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var l=new Array(arguments.length-1),u=this._callbacks["$"+a],d=1;d<arguments.length;d++)l[d-1]=arguments[d];if(u){u=u.slice(0);for(var d=0,h=u.length;d<h;++d)u[d].apply(this,l)}return this},r.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},r.prototype.hasListeners=function(a){return!!this.listeners(a).length}},function(i,s){i.exports=u,u.default=u,u.stable=m,u.stableStringify=m;var t="[...]",r="[Circular]",o=[],a=[];function l(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function u(p,E,R,O){typeof O>"u"&&(O=l()),h(p,"",0,[],void 0,0,O);var T;try{a.length===0?T=JSON.stringify(p,E,R):T=JSON.stringify(p,v(E),R)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;o.length!==0;){var D=o.pop();D.length===4?Object.defineProperty(D[0],D[1],D[3]):D[0][D[1]]=D[2]}}return T}function d(p,E,R,O){var T=Object.getOwnPropertyDescriptor(O,R);T.get!==void 0?T.configurable?(Object.defineProperty(O,R,{value:p}),o.push([O,R,E,T])):a.push([E,R,p]):(O[R]=p,o.push([O,R,E]))}function h(p,E,R,O,T,D,M){D+=1;var P;if(typeof p=="object"&&p!==null){for(P=0;P<O.length;P++)if(O[P]===p){d(r,p,E,T);return}if(typeof M.depthLimit<"u"&&D>M.depthLimit){d(t,p,E,T);return}if(typeof M.edgesLimit<"u"&&R+1>M.edgesLimit){d(t,p,E,T);return}if(O.push(p),Array.isArray(p))for(P=0;P<p.length;P++)h(p[P],P,P,O,p,D,M);else{var C=Object.keys(p);for(P=0;P<C.length;P++){var y=C[P];h(p[y],y,P,O,p,D,M)}}O.pop()}}function f(p,E){return p<E?-1:p>E?1:0}function m(p,E,R,O){typeof O>"u"&&(O=l());var T=g(p,"",0,[],void 0,0,O)||p,D;try{a.length===0?D=JSON.stringify(T,E,R):D=JSON.stringify(T,v(E),R)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;o.length!==0;){var M=o.pop();M.length===4?Object.defineProperty(M[0],M[1],M[3]):M[0][M[1]]=M[2]}}return D}function g(p,E,R,O,T,D,M){D+=1;var P;if(typeof p=="object"&&p!==null){for(P=0;P<O.length;P++)if(O[P]===p){d(r,p,E,T);return}try{if(typeof p.toJSON=="function")return}catch{return}if(typeof M.depthLimit<"u"&&D>M.depthLimit){d(t,p,E,T);return}if(typeof M.edgesLimit<"u"&&R+1>M.edgesLimit){d(t,p,E,T);return}if(O.push(p),Array.isArray(p))for(P=0;P<p.length;P++)g(p[P],P,P,O,p,D,M);else{var C={},y=Object.keys(p).sort(f);for(P=0;P<y.length;P++){var b=y[P];g(p[b],b,P,O,p,D,M),C[b]=p[b]}if(typeof T<"u")o.push([T,E,p]),T[E]=C;else return C}O.pop()}}function v(p){return p=typeof p<"u"?p:function(E,R){return R},function(E,R){if(a.length>0)for(var O=0;O<a.length;O++){var T=a[O];if(T[1]===E&&T[0]===R){R=T[2],a.splice(O,1);break}}return p.call(this,E,R)}}},function(i,s,t){var r=t(1),o=r(t(87)),a=r(t(144)),l=r(t(559)),u=r(t(10)),d=r(t(25)),h=r(t(68)),f=r(t(38)),m=r(t(569));function g(O){"@babel/helpers - typeof";return typeof o.default=="function"&&typeof a.default=="symbol"?g=function(D){return typeof D}:g=function(D){return D&&typeof o.default=="function"&&D.constructor===o.default&&D!==o.default.prototype?"symbol":typeof D},g(O)}var v=t(244);i.exports=p;function p(O){if(O)return E(O)}function E(O){for(var T in p.prototype)Object.prototype.hasOwnProperty.call(p.prototype,T)&&(O[T]=p.prototype[T]);return O}p.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},p.prototype.parse=function(O){return this._parser=O,this},p.prototype.responseType=function(O){return this._responseType=O,this},p.prototype.serialize=function(O){return this._serializer=O,this},p.prototype.timeout=function(O){if(!O||g(O)!=="object")return this._timeout=O,this._responseTimeout=0,this._uploadTimeout=0,this;for(var T in O)if(Object.prototype.hasOwnProperty.call(O,T))switch(T){case"deadline":this._timeout=O.deadline;break;case"response":this._responseTimeout=O.response;break;case"upload":this._uploadTimeout=O.upload;break;default:console.warn("Unknown timeout option",T)}return this},p.prototype.retry=function(O,T){return(arguments.length===0||O===!0)&&(O=1),O<=0&&(O=0),this._maxRetries=O,this._retries=0,this._retryCallback=T,this};var R=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];p.prototype._shouldRetry=function(O,T){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var D=this._retryCallback(O,T);if(D===!0)return!0;if(D===!1)return!1}catch(M){console.error(M)}return!!(T&&T.status&&T.status>=500&&T.status!==501||O&&(O.code&&(0,l.default)(R).call(R,O.code)||O.timeout&&O.code==="ECONNABORTED"||O.crossDomain))},p.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},p.prototype.then=function(O,T){var D=this;if(!this._fullfilledPromise){var M=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new u.default(function(P,C){M.on("abort",function(){if(!(D._maxRetries&&D._maxRetries>D._retries)){if(D.timedout&&D.timedoutError){C(D.timedoutError);return}var y=new Error("Aborted");y.code="ABORTED",y.status=D.status,y.method=D.method,y.url=D.url,C(y)}}),M.end(function(y,b){y?C(y):P(b)})})}return this._fullfilledPromise.then(O,T)},p.prototype.catch=function(O){return this.then(void 0,O)},p.prototype.use=function(O){return O(this),this},p.prototype.ok=function(O){if(typeof O!="function")throw new Error("Callback required");return this._okCallback=O,this},p.prototype._isResponseOK=function(O){return O?this._okCallback?this._okCallback(O):O.status>=200&&O.status<300:!1},p.prototype.get=function(O){return this._header[O.toLowerCase()]},p.prototype.getHeader=p.prototype.get,p.prototype.set=function(O,T){if(v(O)){for(var D in O)Object.prototype.hasOwnProperty.call(O,D)&&this.set(D,O[D]);return this}return this._header[O.toLowerCase()]=T,this.header[O]=T,this},p.prototype.unset=function(O){return delete this._header[O.toLowerCase()],delete this.header[O],this},p.prototype.field=function(O,T){if(O==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(v(O)){for(var D in O)Object.prototype.hasOwnProperty.call(O,D)&&this.field(D,O[D]);return this}if(Array.isArray(T)){for(var M in T)Object.prototype.hasOwnProperty.call(T,M)&&this.field(O,T[M]);return this}if(T==null)throw new Error(".field(name, val) val can not be empty");return typeof T=="boolean"&&(T=String(T)),this._getFormData().append(O,T),this},p.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype._auth=function(O,T,D,M){var P;switch(D.type){case"basic":this.set("Authorization","Basic ".concat(M((0,d.default)(P="".concat(O,":")).call(P,T))));break;case"auto":this.username=O,this.password=T;break;case"bearer":this.set("Authorization","Bearer ".concat(O));break}return this},p.prototype.withCredentials=function(O){return O===void 0&&(O=!0),this._withCredentials=O,this},p.prototype.redirects=function(O){return this._maxRedirects=O,this},p.prototype.maxResponseSize=function(O){if(typeof O!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=O,this},p.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},p.prototype.send=function(O){var T=v(O),D=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(T&&!this._data)Array.isArray(O)?this._data=[]:this._isHost(O)||(this._data={});else if(O&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(T&&v(this._data))for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(this._data[M]=O[M]);else if(typeof O=="string")if(D||this.type("form"),D=this._header["content-type"],D==="application/x-www-form-urlencoded"){var P;this._data=this._data?(0,d.default)(P="".concat(this._data,"&")).call(P,O):O}else this._data=(this._data||"")+O;else this._data=O;return!T||this._isHost(O)?this:(D||this.type("json"),this)},p.prototype.sortQuery=function(O){return this._sort=typeof O>"u"?!0:O,this},p.prototype._finalizeQueryString=function(){var O=this._query.join("&");if(O){var T;this.url+=((0,l.default)(T=this.url).call(T,"?")?"&":"?")+O}if(this._query.length=0,this._sort){var D,M=(0,h.default)(D=this.url).call(D,"?");if(M>=0){var P,C,y=(0,f.default)(P=this.url).call(P,M+1).split("&");typeof this._sort=="function"?(0,m.default)(y).call(y,this._sort):(0,m.default)(y).call(y),this.url=(0,f.default)(C=this.url).call(C,0,M)+"?"+y.join("&")}}},p.prototype._appendQueryString=function(){console.warn("Unsupported")},p.prototype._timeoutError=function(O,T,D){if(!this._aborted){var M=new Error("".concat(O+T,"ms exceeded"));M.timeout=T,M.code="ECONNABORTED",M.errno=D,this.timedout=!0,this.timedoutError=M,this.abort(),this.callback(M)}},p.prototype._setTimeouts=function(){var O=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){O._timeoutError("Timeout of ",O._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){O._timeoutError("Response timeout of ",O._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(i,s,t){i.exports=t(560)},function(i,s,t){var r=t(561);i.exports=r},function(i,s,t){var r=t(12),o=t(562),a=t(564),l=Array.prototype,u=String.prototype;i.exports=function(d){var h=d.includes;return d===l||r(l,d)&&h===l.includes?o:typeof d=="string"||d===u||r(u,d)&&h===u.includes?a:h}},function(i,s,t){t(563);var r=t(26);i.exports=r("Array").includes},function(i,s,t){var r=t(0),o=t(115).includes,a=t(3),l=t(122),u=a(function(){return!Array(1).includes()});r({target:"Array",proto:!0,forced:u},{includes:function(h){return o(this,h,arguments.length>1?arguments[1]:void 0)}}),l("includes")},function(i,s,t){t(565);var r=t(26);i.exports=r("String").includes},function(i,s,t){var r=t(0),o=t(4),a=t(566),l=t(74),u=t(40),d=t(568),h=o("".indexOf);r({target:"String",proto:!0,forced:!d("includes")},{includes:function(m){return!!~h(u(l(this)),u(a(m)),arguments.length>1?arguments[1]:void 0)}})},function(i,s,t){var r=t(567),o=TypeError;i.exports=function(a){if(r(a))throw o("The method doesn't accept regular expressions");return a}},function(i,s,t){var r=t(17),o=t(54),a=t(5),l=a("match");i.exports=function(u){var d;return r(u)&&((d=u[l])!==void 0?!!d:o(u)=="RegExp")}},function(i,s,t){var r=t(5),o=r("match");i.exports=function(a){var l=/./;try{"/./"[a](l)}catch{try{return l[o]=!1,"/./"[a](l)}catch{}}return!1}},function(i,s,t){i.exports=t(570)},function(i,s,t){var r=t(571);i.exports=r},function(i,s,t){var r=t(12),o=t(572),a=Array.prototype;i.exports=function(l){var u=l.sort;return l===a||r(a,l)&&u===a.sort?o:u}},function(i,s,t){t(573);var r=t(26);i.exports=r("Array").sort},function(i,s,t){var r=t(0),o=t(4),a=t(28),l=t(33),u=t(36),d=t(574),h=t(40),f=t(3),m=t(575),g=t(139),v=t(576),p=t(577),E=t(56),R=t(578),O=[],T=o(O.sort),D=o(O.push),M=f(function(){O.sort(void 0)}),P=f(function(){O.sort(null)}),C=g("sort"),y=!f(function(){if(E)return E<70;if(!(v&&v>3)){if(p)return!0;if(R)return R<603;var S="",L,j,B,F;for(L=65;L<76;L++){switch(j=String.fromCharCode(L),L){case 66:case 69:case 70:case 72:B=3;break;case 68:case 71:B=4;break;default:B=2}for(F=0;F<47;F++)O.push({k:j+F,v:B})}for(O.sort(function(A,I){return I.v-A.v}),F=0;F<O.length;F++)j=O[F].k.charAt(0),S.charAt(S.length-1)!==j&&(S+=j);return S!=="DGBEFHACIJK"}}),b=M||!P||!C||!y,w=function(S){return function(L,j){return j===void 0?-1:L===void 0?1:S!==void 0?+S(L,j)||0:h(L)>h(j)?1:-1}};r({target:"Array",proto:!0,forced:b},{sort:function(L){L!==void 0&&a(L);var j=l(this);if(y)return L===void 0?T(j):T(j,L);var B=[],F=u(j),A,I;for(I=0;I<F;I++)I in j&&D(B,j[I]);for(m(B,w(L)),A=B.length,I=0;I<A;)j[I]=B[I++];for(;I<F;)d(j,I++);return j}})},function(i,s,t){var r=t(57),o=TypeError;i.exports=function(a,l){if(!delete a[l])throw o("Cannot delete property "+r(l)+" of "+r(a))}},function(i,s,t){var r=t(231),o=Math.floor,a=function(d,h){var f=d.length,m=o(f/2);return f<8?l(d,h):u(d,a(r(d,0,m),h),a(r(d,m),h),h)},l=function(d,h){for(var f=d.length,m=1,g,v;m<f;){for(v=m,g=d[m];v&&h(d[v-1],g)>0;)d[v]=d[--v];v!==m++&&(d[v]=g)}return d},u=function(d,h,f,m){for(var g=h.length,v=f.length,p=0,E=0;p<g||E<v;)d[p+E]=p<g&&E<v?m(h[p],f[E])<=0?h[p++]:f[E++]:p<g?h[p++]:f[E++];return d};i.exports=a},function(i,s,t){var r=t(45),o=r.match(/firefox\/(\d+)/i);i.exports=!!o&&+o[1]},function(i,s,t){var r=t(45);i.exports=/MSIE|Trident/.test(r)},function(i,s,t){var r=t(45),o=r.match(/AppleWebKit\/(\d+)\./);i.exports=!!o&&+o[1]},function(i,s,t){var r=t(580);i.exports=o;function o(l){if(l)return a(l)}function a(l){for(var u in o.prototype)Object.prototype.hasOwnProperty.call(o.prototype,u)&&(l[u]=o.prototype[u]);return l}o.prototype.get=function(l){return this.header[l.toLowerCase()]},o.prototype._setHeaderProperties=function(l){var u=l["content-type"]||"";this.type=r.type(u);var d=r.params(u);for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(this[h]=d[h]);this.links={};try{l.link&&(this.links=r.parseLinks(l.link))}catch{}},o.prototype._setStatusProperties=function(l){var u=l/100|0;this.statusCode=l,this.status=this.statusCode,this.statusType=u,this.info=u===1,this.ok=u===2,this.redirect=u===3,this.clientError=u===4,this.serverError=u===5,this.error=u===4||u===5?this.toError():!1,this.created=l===201,this.accepted=l===202,this.noContent=l===204,this.badRequest=l===400,this.unauthorized=l===401,this.notAcceptable=l===406,this.forbidden=l===403,this.notFound=l===404,this.unprocessableEntity=l===422}},function(i,s,t){var r=t(1),o=r(t(581)),a=r(t(38));s.type=function(l){return l.split(/ *; */).shift()},s.params=function(l){var u;return(0,o.default)(u=l.split(/ *; */)).call(u,function(d,h){var f=h.split(/ *= */),m=f.shift(),g=f.shift();return m&&g&&(d[m]=g),d},{})},s.parseLinks=function(l){var u;return(0,o.default)(u=l.split(/ *, */)).call(u,function(d,h){var f,m,g=h.split(/ *; */),v=(0,a.default)(f=g[0]).call(f,1,-1),p=(0,a.default)(m=g[1].split(/ *= */)[1]).call(m,1,-1);return d[p]=v,d},{})},s.cleanHeader=function(l,u){return delete l["content-type"],delete l["content-length"],delete l["transfer-encoding"],delete l.host,u&&(delete l.authorization,delete l.cookie),l}},function(i,s,t){i.exports=t(582)},function(i,s,t){var r=t(583);i.exports=r},function(i,s,t){var r=t(12),o=t(584),a=Array.prototype;i.exports=function(l){var u=l.reduce;return l===a||r(a,l)&&u===a.reduce?o:u}},function(i,s,t){t(585);var r=t(26);i.exports=r("Array").reduce},function(i,s,t){var r=t(0),o=t(586).left,a=t(139),l=t(56),u=t(97),d=a("reduce"),h=!u&&l>79&&l<83;r({target:"Array",proto:!0,forced:!d||h},{reduce:function(m){var g=arguments.length;return o(this,m,g,g>1?arguments[1]:void 0)}})},function(i,s,t){var r=t(28),o=t(33),a=t(109),l=t(36),u=TypeError,d=function(h){return function(f,m,g,v){r(m);var p=o(f),E=a(p),R=l(p),O=h?R-1:0,T=h?-1:1;if(g<2)for(;;){if(O in E){v=E[O],O+=T;break}if(O+=T,h?O<0:R<=O)throw u("Reduce of empty array with no initial value")}for(;h?O>=0:R>O;O+=T)O in E&&(v=m(v,E[O],O,p));return v}};i.exports={left:d(!1),right:d(!0)}},function(i,s,t){var r=t(1),o=r(t(38)),a=r(t(236)),l=r(t(87)),u=r(t(588));function d(E){return g(E)||m(E)||f(E)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(E,R){var O;if(E){if(typeof E=="string")return v(E,R);var T=(0,o.default)(O=Object.prototype.toString.call(E)).call(O,8,-1);if(T==="Object"&&E.constructor&&(T=E.constructor.name),T==="Map"||T==="Set")return(0,a.default)(E);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return v(E,R)}}function m(E){if(typeof l.default<"u"&&(0,u.default)(Object(E)))return(0,a.default)(E)}function g(E){if(Array.isArray(E))return v(E)}function v(E,R){(R==null||R>E.length)&&(R=E.length);for(var O=0,T=new Array(R);O<R;O++)T[O]=E[O];return T}function p(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach(function(E){p.prototype[E]=function(){for(var R=arguments.length,O=new Array(R),T=0;T<R;T++)O[T]=arguments[T];return this._defaults.push({fn:E,args:O}),this}}),p.prototype._setDefaults=function(E){this._defaults.forEach(function(R){E[R.fn].apply(E,d(R.args))})},i.exports=p},function(i,s,t){i.exports=t(589)},function(i,s,t){i.exports=t(590)},function(i,s,t){var r=t(591);i.exports=r},function(i,s,t){var r=t(592);i.exports=r},function(i,s,t){var r=t(593);t(63),i.exports=r},function(i,s,t){t(60),t(79);var r=t(594);i.exports=r},function(i,s,t){var r=t(47),o=t(13),a=t(5),l=t(46),u=a("iterator"),d=Object;i.exports=function(h){var f=d(h);return f[u]!==void 0||"@@iterator"in f||o(l,r(f))}}])})}(ri)),ri.exports}var gd=md();const oi=Fa(gd),vd=["极诣·剑魂","极诣·狂战士","极诣·鬼泣","极诣·阿修罗","极诣·剑影","极诣·驭剑士","极诣·契魔者","极诣·暗殿骑士","极诣·流浪武士","极诣·刃影","重霄·漫游枪手","重霄·枪炮师","重霄·机械师","重霄·弹药专家","重霄·合金战士","重霄·女漫游枪手","重霄·女枪炮师","重霄·女机械师","重霄·女弹药专家","重霄·协战师","归元·气功师","归元·散打","归元·柔道家","归元·街霸","归元·气功师（女）","归元·散打（女）","归元·柔道家（女）","归元·街霸（女）","知源·元素爆破师","知源·冰结师","知源·血法师","知源·逐风者","知源·次元行者","知源·元素师","知源·召唤师","知源·战斗法师","知源·魔道学者","知源·小魔女","光启·圣骑士","光启·蓝拳圣使","光启·驱魔师","光启·复仇者","光启·圣骑士（女）","光启·异端审判者","光启·巫女","光启·诱魔者","隐夜·刺客","隐夜·死灵术士","隐夜·忍者","隐夜·影舞者","皓曦·精灵骑士","皓曦·混沌魔灵","皓曦·帕拉丁","皓曦·龙骑士","千魂·征战者","千魂·决战者","千魂·狩猎者","千魂·暗枪士","苍暮·暗刃","苍暮·特工","苍暮·战线佣兵","苍暮·源能专家","聆风·缪斯","聆风·旅人","聆风·奇美拉","聆风·妖护使","缔造者","黑暗武士"];oi.init({appId:"OymXq6ZGQbnJoyQ2uOHpfmj6-gzGzoHsz",appKey:"CQc5f48ugFiMwGhsQoqS54Jd",serverURL:"https://oymxq6zg.lc-cn-n1-shared.com"});const Rr=wa("edit",{state:()=>({editTable:[],base64code:"",playerId:"",DNFProfessions:vd,uploadResult:null,uploadError:null}),actions:{async uploadTable(){var n;const{playerId:c,editTable:e}=this;if(!c){console.warn("请先选择角色 ID"),this.uploadError="未选择角色 ID";return}this.uploadError=null;try{const i=oi.Object.extend("DNFEditTable"),s=new oi.Query("DNFEditTable");s.equalTo("playerId",c);const t=await s.find();t.length>0&&await oi.Object.destroyAll(t);const r=new i;r.set("playerId",c),r.set("editTableData",e);const o=await r.save(),a={id:o.id,createdAt:o.get("createdAt"),updatedAt:o.get("updatedAt"),playerId:o.get("playerId"),dataPreview:((n=o.get("editTableData"))==null?void 0:n.slice(0,3))||[]};this.uploadResult=a,console.log("上传成功:",a),alert(`上传成功！ID: ${a.id}`)}catch(i){console.error("上传失败:",i),this.uploadError=i.message,alert(`上传失败: ${i.message}`)}},base64ToArrayBuffer(c){c=c.replace(/-/g,"+").replace(/_/g,"/");const e=window.atob(c),n=e.length,i=new Uint8Array(n);for(let s=0;s<n;s++)i[s]=e.charCodeAt(s);return i},base2Table(c){const e=this.base64ToArrayBuffer(c),n=Na(e.buffer,{type:"array"}),i=n.SheetNames[0],s=n.Sheets[i];return Ua.sheet_to_json(s,{header:1})},initTable(c=this.base64code){const e=this.base2Table(c);if(!e||e.length<=1){this.editTable=[{fame:0,charid:"<请填写>",profession:"缔造者",ifsup:0,buff:0}];return}const n=e.slice(1);this.editTable=n.map(i=>{const s=i[0]||"";return{fame:Number(s.toString().replace(/,/g,"")),charid:i[1]||"",profession:this.DNFProfessions.includes(i[2])?i[2]:"缔造者",ifsup:0,buff:0}}).filter(i=>i.fame)}},persist:{paths:["editTable"]}}),bd={class:"table-wrapper"},yd={class:"m-4"},Ed={__name:"RecognizeTable",setup(c){const e=Rr(),{editTable:n,DNFProfessions:i,playerId:s}=Bs(e);let t=null;const r=d=>{s.value=d,console.log("playerSelect:",d)},o=[{value:"kk",label:"kk"},{value:"丁真",label:"丁真"},{value:"akira",label:"akira"},{value:"牢弟",label:"牢弟"},{value:"茜",label:"茜"},{value:"飞飞",label:"飞飞"},{value:"圣羽",label:"圣羽"},{value:"发少",label:"发少"},{value:"幻梦",label:"幻梦"},{value:"可爱多",label:"可爱多"},{value:"牢见",label:"牢见"},{value:"老鸽",label:"老鸽"},{value:"娜娜米",label:"娜娜米"},{value:"千千",label:"千千"},{value:"烧鸡",label:"烧鸡"},{value:"迷人",label:"迷人"},{value:"大丢",label:"大丢"},{value:"大滴",label:"大滴"},{value:"饼",label:"饼"}],a=()=>{t.addRow({fame:0,charid:"<请填入>",profession:"缔造者",ifsup:0,buff:0})};function l(){if(t){const d=t.getData();n.value=d,e.uploadTable(),console.log("修改后的数据：",n.value)}}function u(){const d=n.value;e.initTable(),t&&t.destroy(),t=new fd("#tabulator-table",{data:d,layout:"fitColumns",height:"400px",reactiveData:!0,columns:[{title:"名望",field:"fame",editor:"number",validator:["required","integer","min:0"]},{title:"角色名",field:"charid",editor:"number"},{title:"职业(必填)",field:"profession",editor:"list",validator:["required"],editorParams:{values:i.value,autocomplete:!0,placeholderEmpty:"无选项"}},{title:"是否奶",field:"ifsup",editor:"list",editorParams:{values:{0:"否",1:"是"},clearable:!0},formatter:h=>h.getValue()?"是":"否",mutatorEdit:h=>Number(h)},{title:"三攻",field:"buff",editor:"number",validator:["integer","min:0"]},{title:"删除",formatter:"buttonCross",width:80,hozAlign:"center",headerSort:!1,cellClick:function(h,f){f.getRow().delete()}}]})}return Ft(()=>{e.initTable(),u()}),(d,h)=>{const f=Sn,m=Tl;return te(),ve("div",bd,[pe(f,{type:"primary",onClick:a,class:"btn-add"},{default:re(()=>h[0]||(h[0]=[et("添加角色")])),_:1,__:[0]}),pe(f,{type:"info",onClick:u},{default:re(()=>h[1]||(h[1]=[et("刷新数据")])),_:1,__:[1]}),pe(f,{type:"primary",onClick:l,class:"btn-upload"},{default:re(()=>h[2]||(h[2]=[et(" 上传角色数据 ")])),_:1,__:[2]}),ye("div",yd,[h[3]||(h[3]=ye("p",null,"必须选择ID才能获取或上传",-1)),pe(m,{placeholder:"我是谁",options:o,onChange:r,filterable:""})]),h[4]||(h[4]=ye("div",{id:"tabulator-table"},null,-1)),h[5]||(h[5]=ye("div",{id:"tabulator-table"},null,-1))])}}},Cd=Ta(Ed,[["__scopeId","data-v-98cd2fcd"]]),Od="/toolkit/assets/table-B6kGN9zL.png",Rd={__name:"SampleFigure",setup(c){const e=fe(!1);return(n,i)=>{const s=Sn,t=Jl;return te(),ve(yt,null,[pe(s,{type:"primary",style:{"font-size":"16px",width:"130px","background-color":"rgb(248, 152, 152)"},onClick:i[0]||(i[0]=r=>e.value=!0)},{default:re(()=>i[2]||(i[2]=[et(" 角色列表截图样例 ")])),_:1,__:[2]}),pe(t,{modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=r=>e.value=r),title:"I am the title","with-header":!1},{default:re(()=>i[3]||(i[3]=[ye("img",{src:Od,alt:"示例图片",style:{width:"100%",height:"auto"}},null,-1),ye("p",{style:{"margin-top":"15px",color:"#333","font-weight":"600"}},[et(" DNF客户端ESC->玩法信息->右上角设置按钮->截图 "),ye("br"),et(" (最好不要包含其他内容) ")],-1)])),_:1,__:[3]},8,["modelValue"])],64)}}};function wr(c,e){return function(){return c.apply(e,arguments)}}const{toString:wd}=Object.prototype,{getPrototypeOf:An}=Object,{iterator:Oi,toStringTag:Tr}=Symbol,Ri=(c=>e=>{const n=wd.call(e);return c[n]||(c[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),tt=c=>(c=c.toLowerCase(),e=>Ri(e)===c),wi=c=>e=>typeof e===c,{isArray:Nt}=Array,Yt=wi("undefined");function Td(c){return c!==null&&!Yt(c)&&c.constructor!==null&&!Yt(c.constructor)&&He(c.constructor.isBuffer)&&c.constructor.isBuffer(c)}const Mr=tt("ArrayBuffer");function Md(c){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(c):e=c&&c.buffer&&Mr(c.buffer),e}const Pd=wi("string"),He=wi("function"),Pr=wi("number"),Ti=c=>c!==null&&typeof c=="object",Dd=c=>c===!0||c===!1,ai=c=>{if(Ri(c)!=="object")return!1;const e=An(c);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Tr in c)&&!(Oi in c)},Sd=tt("Date"),xd=tt("File"),Ld=tt("Blob"),Ad=tt("FileList"),Id=c=>Ti(c)&&He(c.pipe),Bd=c=>{let e;return c&&(typeof FormData=="function"&&c instanceof FormData||He(c.append)&&((e=Ri(c))==="formdata"||e==="object"&&He(c.toString)&&c.toString()==="[object FormData]"))},jd=tt("URLSearchParams"),[Fd,Nd,Ud,Wd]=["ReadableStream","Request","Response","Headers"].map(tt),zd=c=>c.trim?c.trim():c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _t(c,e,{allOwnKeys:n=!1}={}){if(c===null||typeof c>"u")return;let i,s;if(typeof c!="object"&&(c=[c]),Nt(c))for(i=0,s=c.length;i<s;i++)e.call(null,c[i],i,c);else{const t=n?Object.getOwnPropertyNames(c):Object.keys(c),r=t.length;let o;for(i=0;i<r;i++)o=t[i],e.call(null,c[o],o,c)}}function Dr(c,e){e=e.toLowerCase();const n=Object.keys(c);let i=n.length,s;for(;i-- >0;)if(s=n[i],e===s.toLowerCase())return s;return null}const Tt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Sr=c=>!Yt(c)&&c!==Tt;function En(){const{caseless:c}=Sr(this)&&this||{},e={},n=(i,s)=>{const t=c&&Dr(e,s)||s;ai(e[t])&&ai(i)?e[t]=En(e[t],i):ai(i)?e[t]=En({},i):Nt(i)?e[t]=i.slice():e[t]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&_t(arguments[i],n);return e}const Hd=(c,e,n,{allOwnKeys:i}={})=>(_t(e,(s,t)=>{n&&He(s)?c[t]=wr(s,n):c[t]=s},{allOwnKeys:i}),c),Kd=c=>(c.charCodeAt(0)===65279&&(c=c.slice(1)),c),Gd=(c,e,n,i)=>{c.prototype=Object.create(e.prototype,i),c.prototype.constructor=c,Object.defineProperty(c,"super",{value:e.prototype}),n&&Object.assign(c.prototype,n)},$d=(c,e,n,i)=>{let s,t,r;const o={};if(e=e||{},c==null)return e;do{for(s=Object.getOwnPropertyNames(c),t=s.length;t-- >0;)r=s[t],(!i||i(r,c,e))&&!o[r]&&(e[r]=c[r],o[r]=!0);c=n!==!1&&An(c)}while(c&&(!n||n(c,e))&&c!==Object.prototype);return e},Vd=(c,e,n)=>{c=String(c),(n===void 0||n>c.length)&&(n=c.length),n-=e.length;const i=c.indexOf(e,n);return i!==-1&&i===n},Jd=c=>{if(!c)return null;if(Nt(c))return c;let e=c.length;if(!Pr(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=c[e];return n},kd=(c=>e=>c&&e instanceof c)(typeof Uint8Array<"u"&&An(Uint8Array)),Qd=(c,e)=>{const i=(c&&c[Oi]).call(c);let s;for(;(s=i.next())&&!s.done;){const t=s.value;e.call(c,t[0],t[1])}},Xd=(c,e)=>{let n;const i=[];for(;(n=c.exec(e))!==null;)i.push(n);return i},Yd=tt("HTMLFormElement"),Zd=c=>c.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),as=(({hasOwnProperty:c})=>(e,n)=>c.call(e,n))(Object.prototype),qd=tt("RegExp"),xr=(c,e)=>{const n=Object.getOwnPropertyDescriptors(c),i={};_t(n,(s,t)=>{let r;(r=e(s,t,c))!==!1&&(i[t]=r||s)}),Object.defineProperties(c,i)},_d=c=>{xr(c,(e,n)=>{if(He(c)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=c[n];if(He(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ec=(c,e)=>{const n={},i=s=>{s.forEach(t=>{n[t]=!0})};return Nt(c)?i(c):i(String(c).split(e)),n},tc=()=>{},ic=(c,e)=>c!=null&&Number.isFinite(c=+c)?c:e;function nc(c){return!!(c&&He(c.append)&&c[Tr]==="FormData"&&c[Oi])}const sc=c=>{const e=new Array(10),n=(i,s)=>{if(Ti(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const t=Nt(i)?[]:{};return _t(i,(r,o)=>{const a=n(r,s+1);!Yt(a)&&(t[o]=a)}),e[s]=void 0,t}}return i};return n(c,0)},rc=tt("AsyncFunction"),oc=c=>c&&(Ti(c)||He(c))&&He(c.then)&&He(c.catch),Lr=((c,e)=>c?setImmediate:e?((n,i)=>(Tt.addEventListener("message",({source:s,data:t})=>{s===Tt&&t===n&&i.length&&i.shift()()},!1),s=>{i.push(s),Tt.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",He(Tt.postMessage)),ac=typeof queueMicrotask<"u"?queueMicrotask.bind(Tt):typeof process<"u"&&process.nextTick||Lr,lc=c=>c!=null&&He(c[Oi]),$={isArray:Nt,isArrayBuffer:Mr,isBuffer:Td,isFormData:Bd,isArrayBufferView:Md,isString:Pd,isNumber:Pr,isBoolean:Dd,isObject:Ti,isPlainObject:ai,isReadableStream:Fd,isRequest:Nd,isResponse:Ud,isHeaders:Wd,isUndefined:Yt,isDate:Sd,isFile:xd,isBlob:Ld,isRegExp:qd,isFunction:He,isStream:Id,isURLSearchParams:jd,isTypedArray:kd,isFileList:Ad,forEach:_t,merge:En,extend:Hd,trim:zd,stripBOM:Kd,inherits:Gd,toFlatObject:$d,kindOf:Ri,kindOfTest:tt,endsWith:Vd,toArray:Jd,forEachEntry:Qd,matchAll:Xd,isHTMLForm:Yd,hasOwnProperty:as,hasOwnProp:as,reduceDescriptors:xr,freezeMethods:_d,toObjectSet:ec,toCamelCase:Zd,noop:tc,toFiniteNumber:ic,findKey:Dr,global:Tt,isContextDefined:Sr,isSpecCompliantForm:nc,toJSONObject:sc,isAsyncFn:rc,isThenable:oc,setImmediate:Lr,asap:ac,isIterable:lc};function le(c,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=c,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}$.inherits(le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Ar=le.prototype,Ir={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(c=>{Ir[c]={value:c}});Object.defineProperties(le,Ir);Object.defineProperty(Ar,"isAxiosError",{value:!0});le.from=(c,e,n,i,s,t)=>{const r=Object.create(Ar);return $.toFlatObject(c,r,function(a){return a!==Error.prototype},o=>o!=="isAxiosError"),le.call(r,c.message,e,n,i,s),r.cause=c,r.name=c.name,t&&Object.assign(r,t),r};const uc=null;function Cn(c){return $.isPlainObject(c)||$.isArray(c)}function Br(c){return $.endsWith(c,"[]")?c.slice(0,-2):c}function ls(c,e,n){return c?c.concat(e).map(function(s,t){return s=Br(s),!n&&t?"["+s+"]":s}).join(n?".":""):e}function hc(c){return $.isArray(c)&&!c.some(Cn)}const dc=$.toFlatObject($,{},null,function(e){return/^is[A-Z]/.test(e)});function Mi(c,e,n){if(!$.isObject(c))throw new TypeError("target must be an object");e=e||new FormData,n=$.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!$.isUndefined(v[g])});const i=n.metaTokens,s=n.visitor||u,t=n.dots,r=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(e);if(!$.isFunction(s))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if($.isDate(m))return m.toISOString();if(!a&&$.isBlob(m))throw new le("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(m)||$.isTypedArray(m)?a&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,g,v){let p=m;if(m&&!v&&typeof m=="object"){if($.endsWith(g,"{}"))g=i?g:g.slice(0,-2),m=JSON.stringify(m);else if($.isArray(m)&&hc(m)||($.isFileList(m)||$.endsWith(g,"[]"))&&(p=$.toArray(m)))return g=Br(g),p.forEach(function(R,O){!($.isUndefined(R)||R===null)&&e.append(r===!0?ls([g],O,t):r===null?g:g+"[]",l(R))}),!1}return Cn(m)?!0:(e.append(ls(v,g,t),l(m)),!1)}const d=[],h=Object.assign(dc,{defaultVisitor:u,convertValue:l,isVisitable:Cn});function f(m,g){if(!$.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(m),$.forEach(m,function(p,E){(!($.isUndefined(p)||p===null)&&s.call(e,p,$.isString(E)?E.trim():E,g,h))===!0&&f(p,g?g.concat(E):[E])}),d.pop()}}if(!$.isObject(c))throw new TypeError("data must be an object");return f(c),e}function us(c){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(c).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function In(c,e){this._pairs=[],c&&Mi(c,this,e)}const jr=In.prototype;jr.append=function(e,n){this._pairs.push([e,n])};jr.toString=function(e){const n=e?function(i){return e.call(this,i,us)}:us;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function cc(c){return encodeURIComponent(c).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fr(c,e,n){if(!e)return c;const i=n&&n.encode||cc;$.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let t;if(s?t=s(e,n):t=$.isURLSearchParams(e)?e.toString():new In(e,n).toString(i),t){const r=c.indexOf("#");r!==-1&&(c=c.slice(0,r)),c+=(c.indexOf("?")===-1?"?":"&")+t}return c}class hs{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){$.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Nr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fc=typeof URLSearchParams<"u"?URLSearchParams:In,pc=typeof FormData<"u"?FormData:null,mc=typeof Blob<"u"?Blob:null,gc={isBrowser:!0,classes:{URLSearchParams:fc,FormData:pc,Blob:mc},protocols:["http","https","file","blob","url","data"]},Bn=typeof window<"u"&&typeof document<"u",On=typeof navigator=="object"&&navigator||void 0,vc=Bn&&(!On||["ReactNative","NativeScript","NS"].indexOf(On.product)<0),bc=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yc=Bn&&window.location.href||"http://localhost",Ec=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bn,hasStandardBrowserEnv:vc,hasStandardBrowserWebWorkerEnv:bc,navigator:On,origin:yc},Symbol.toStringTag,{value:"Module"})),je={...Ec,...gc};function Cc(c,e){return Mi(c,new je.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,t){return je.isNode&&$.isBuffer(n)?(this.append(i,n.toString("base64")),!1):t.defaultVisitor.apply(this,arguments)}},e))}function Oc(c){return $.matchAll(/\w+|\[(\w*)]/g,c).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Rc(c){const e={},n=Object.keys(c);let i;const s=n.length;let t;for(i=0;i<s;i++)t=n[i],e[t]=c[t];return e}function Ur(c){function e(n,i,s,t){let r=n[t++];if(r==="__proto__")return!0;const o=Number.isFinite(+r),a=t>=n.length;return r=!r&&$.isArray(s)?s.length:r,a?($.hasOwnProp(s,r)?s[r]=[s[r],i]:s[r]=i,!o):((!s[r]||!$.isObject(s[r]))&&(s[r]=[]),e(n,i,s[r],t)&&$.isArray(s[r])&&(s[r]=Rc(s[r])),!o)}if($.isFormData(c)&&$.isFunction(c.entries)){const n={};return $.forEachEntry(c,(i,s)=>{e(Oc(i),s,n,0)}),n}return null}function wc(c,e,n){if($.isString(c))try{return(e||JSON.parse)(c),$.trim(c)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(c)}const ei={transitional:Nr,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,t=$.isObject(e);if(t&&$.isHTMLForm(e)&&(e=new FormData(e)),$.isFormData(e))return s?JSON.stringify(Ur(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e)||$.isReadableStream(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(t){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Cc(e,this.formSerializer).toString();if((o=$.isFileList(e))||i.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Mi(o?{"files[]":e}:e,a&&new a,this.formSerializer)}}return t||s?(n.setContentType("application/json",!1),wc(e)):e}],transformResponse:[function(e){const n=this.transitional||ei.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if($.isResponse(e)||$.isReadableStream(e))return e;if(e&&$.isString(e)&&(i&&!this.responseType||s)){const r=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(r)throw o.name==="SyntaxError"?le.from(o,le.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:je.classes.FormData,Blob:je.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],c=>{ei.headers[c]={}});const Tc=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Mc=c=>{const e={};let n,i,s;return c&&c.split(`
`).forEach(function(r){s=r.indexOf(":"),n=r.substring(0,s).trim().toLowerCase(),i=r.substring(s+1).trim(),!(!n||e[n]&&Tc[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},ds=Symbol("internals");function Ht(c){return c&&String(c).trim().toLowerCase()}function li(c){return c===!1||c==null?c:$.isArray(c)?c.map(li):String(c)}function Pc(c){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(c);)e[i[1]]=i[2];return e}const Dc=c=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(c.trim());function Fi(c,e,n,i,s){if($.isFunction(i))return i.call(this,e,n);if(s&&(e=n),!!$.isString(e)){if($.isString(i))return e.indexOf(i)!==-1;if($.isRegExp(i))return i.test(e)}}function Sc(c){return c.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function xc(c,e){const n=$.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(c,i+n,{value:function(s,t,r){return this[i].call(this,e,s,t,r)},configurable:!0})})}let Ke=class{constructor(e){e&&this.set(e)}set(e,n,i){const s=this;function t(o,a,l){const u=Ht(a);if(!u)throw new Error("header name must be a non-empty string");const d=$.findKey(s,u);(!d||s[d]===void 0||l===!0||l===void 0&&s[d]!==!1)&&(s[d||a]=li(o))}const r=(o,a)=>$.forEach(o,(l,u)=>t(l,u,a));if($.isPlainObject(e)||e instanceof this.constructor)r(e,n);else if($.isString(e)&&(e=e.trim())&&!Dc(e))r(Mc(e),n);else if($.isObject(e)&&$.isIterable(e)){let o={},a,l;for(const u of e){if(!$.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[l=u[0]]=(a=o[l])?$.isArray(a)?[...a,u[1]]:[a,u[1]]:u[1]}r(o,n)}else e!=null&&t(n,e,i);return this}get(e,n){if(e=Ht(e),e){const i=$.findKey(this,e);if(i){const s=this[i];if(!n)return s;if(n===!0)return Pc(s);if($.isFunction(n))return n.call(this,s,i);if($.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ht(e),e){const i=$.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Fi(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let s=!1;function t(r){if(r=Ht(r),r){const o=$.findKey(i,r);o&&(!n||Fi(i,i[o],o,n))&&(delete i[o],s=!0)}}return $.isArray(e)?e.forEach(t):t(e),s}clear(e){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const t=n[i];(!e||Fi(this,this[t],t,e,!0))&&(delete this[t],s=!0)}return s}normalize(e){const n=this,i={};return $.forEach(this,(s,t)=>{const r=$.findKey(i,t);if(r){n[r]=li(s),delete n[t];return}const o=e?Sc(t):String(t).trim();o!==t&&delete n[t],n[o]=li(s),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return $.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=e&&$.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[ds]=this[ds]={accessors:{}}).accessors,s=this.prototype;function t(r){const o=Ht(r);i[o]||(xc(s,r),i[o]=!0)}return $.isArray(e)?e.forEach(t):t(e),this}};Ke.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Ke.prototype,({value:c},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>c,set(i){this[n]=i}}});$.freezeMethods(Ke);function Ni(c,e){const n=this||ei,i=e||n,s=Ke.from(i.headers);let t=i.data;return $.forEach(c,function(o){t=o.call(n,t,s.normalize(),e?e.status:void 0)}),s.normalize(),t}function Wr(c){return!!(c&&c.__CANCEL__)}function Ut(c,e,n){le.call(this,c??"canceled",le.ERR_CANCELED,e,n),this.name="CanceledError"}$.inherits(Ut,le,{__CANCEL__:!0});function zr(c,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?c(n):e(new le("Request failed with status code "+n.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Lc(c){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(c);return e&&e[1]||""}function Ac(c,e){c=c||10;const n=new Array(c),i=new Array(c);let s=0,t=0,r;return e=e!==void 0?e:1e3,function(a){const l=Date.now(),u=i[t];r||(r=l),n[s]=a,i[s]=l;let d=t,h=0;for(;d!==s;)h+=n[d++],d=d%c;if(s=(s+1)%c,s===t&&(t=(t+1)%c),l-r<e)return;const f=u&&l-u;return f?Math.round(h*1e3/f):void 0}}function Ic(c,e){let n=0,i=1e3/e,s,t;const r=(l,u=Date.now())=>{n=u,s=null,t&&(clearTimeout(t),t=null),c.apply(null,l)};return[(...l)=>{const u=Date.now(),d=u-n;d>=i?r(l,u):(s=l,t||(t=setTimeout(()=>{t=null,r(s)},i-d)))},()=>s&&r(s)]}const pi=(c,e,n=3)=>{let i=0;const s=Ac(50,250);return Ic(t=>{const r=t.loaded,o=t.lengthComputable?t.total:void 0,a=r-i,l=s(a),u=r<=o;i=r;const d={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-r)/l:void 0,event:t,lengthComputable:o!=null,[e?"download":"upload"]:!0};c(d)},n)},cs=(c,e)=>{const n=c!=null;return[i=>e[0]({lengthComputable:n,total:c,loaded:i}),e[1]]},fs=c=>(...e)=>$.asap(()=>c(...e)),Bc=je.hasStandardBrowserEnv?((c,e)=>n=>(n=new URL(n,je.origin),c.protocol===n.protocol&&c.host===n.host&&(e||c.port===n.port)))(new URL(je.origin),je.navigator&&/(msie|trident)/i.test(je.navigator.userAgent)):()=>!0,jc=je.hasStandardBrowserEnv?{write(c,e,n,i,s,t){const r=[c+"="+encodeURIComponent(e)];$.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),$.isString(i)&&r.push("path="+i),$.isString(s)&&r.push("domain="+s),t===!0&&r.push("secure"),document.cookie=r.join("; ")},read(c){const e=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(c){this.write(c,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Fc(c){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(c)}function Nc(c,e){return e?c.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):c}function Hr(c,e,n){let i=!Fc(e);return c&&(i||n==!1)?Nc(c,e):e}const ps=c=>c instanceof Ke?{...c}:c;function St(c,e){e=e||{};const n={};function i(l,u,d,h){return $.isPlainObject(l)&&$.isPlainObject(u)?$.merge.call({caseless:h},l,u):$.isPlainObject(u)?$.merge({},u):$.isArray(u)?u.slice():u}function s(l,u,d,h){if($.isUndefined(u)){if(!$.isUndefined(l))return i(void 0,l,d,h)}else return i(l,u,d,h)}function t(l,u){if(!$.isUndefined(u))return i(void 0,u)}function r(l,u){if($.isUndefined(u)){if(!$.isUndefined(l))return i(void 0,l)}else return i(void 0,u)}function o(l,u,d){if(d in e)return i(l,u);if(d in c)return i(void 0,l)}const a={url:t,method:t,data:t,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:o,headers:(l,u,d)=>s(ps(l),ps(u),d,!0)};return $.forEach(Object.keys(Object.assign({},c,e)),function(u){const d=a[u]||s,h=d(c[u],e[u],u);$.isUndefined(h)&&d!==o||(n[u]=h)}),n}const Kr=c=>{const e=St({},c);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:t,headers:r,auth:o}=e;e.headers=r=Ke.from(r),e.url=Fr(Hr(e.baseURL,e.url,e.allowAbsoluteUrls),c.params,c.paramsSerializer),o&&r.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let a;if($.isFormData(n)){if(je.hasStandardBrowserEnv||je.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((a=r.getContentType())!==!1){const[l,...u]=a?a.split(";").map(d=>d.trim()).filter(Boolean):[];r.setContentType([l||"multipart/form-data",...u].join("; "))}}if(je.hasStandardBrowserEnv&&(i&&$.isFunction(i)&&(i=i(e)),i||i!==!1&&Bc(e.url))){const l=s&&t&&jc.read(t);l&&r.set(s,l)}return e},Uc=typeof XMLHttpRequest<"u",Wc=Uc&&function(c){return new Promise(function(n,i){const s=Kr(c);let t=s.data;const r=Ke.from(s.headers).normalize();let{responseType:o,onUploadProgress:a,onDownloadProgress:l}=s,u,d,h,f,m;function g(){f&&f(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function p(){if(!v)return;const R=Ke.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:R,config:c,request:v};zr(function(M){n(M),g()},function(M){i(M),g()},T),v=null}"onloadend"in v?v.onloadend=p:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(p)},v.onabort=function(){v&&(i(new le("Request aborted",le.ECONNABORTED,c,v)),v=null)},v.onerror=function(){i(new le("Network Error",le.ERR_NETWORK,c,v)),v=null},v.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||Nr;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),i(new le(O,T.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,c,v)),v=null},t===void 0&&r.setContentType(null),"setRequestHeader"in v&&$.forEach(r.toJSON(),function(O,T){v.setRequestHeader(T,O)}),$.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),o&&o!=="json"&&(v.responseType=s.responseType),l&&([h,m]=pi(l,!0),v.addEventListener("progress",h)),a&&v.upload&&([d,f]=pi(a),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(u=R=>{v&&(i(!R||R.type?new Ut(null,c,v):R),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const E=Lc(s.url);if(E&&je.protocols.indexOf(E)===-1){i(new le("Unsupported protocol "+E+":",le.ERR_BAD_REQUEST,c));return}v.send(t||null)})},zc=(c,e)=>{const{length:n}=c=c?c.filter(Boolean):[];if(e||n){let i=new AbortController,s;const t=function(l){if(!s){s=!0,o();const u=l instanceof Error?l:this.reason;i.abort(u instanceof le?u:new Ut(u instanceof Error?u.message:u))}};let r=e&&setTimeout(()=>{r=null,t(new le(`timeout ${e} of ms exceeded`,le.ETIMEDOUT))},e);const o=()=>{c&&(r&&clearTimeout(r),r=null,c.forEach(l=>{l.unsubscribe?l.unsubscribe(t):l.removeEventListener("abort",t)}),c=null)};c.forEach(l=>l.addEventListener("abort",t));const{signal:a}=i;return a.unsubscribe=()=>$.asap(o),a}},Hc=function*(c,e){let n=c.byteLength;if(n<e){yield c;return}let i=0,s;for(;i<n;)s=i+e,yield c.slice(i,s),i=s},Kc=async function*(c,e){for await(const n of Gc(c))yield*Hc(n,e)},Gc=async function*(c){if(c[Symbol.asyncIterator]){yield*c;return}const e=c.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},ms=(c,e,n,i)=>{const s=Kc(c,e);let t=0,r,o=a=>{r||(r=!0,i&&i(a))};return new ReadableStream({async pull(a){try{const{done:l,value:u}=await s.next();if(l){o(),a.close();return}let d=u.byteLength;if(n){let h=t+=d;n(h)}a.enqueue(new Uint8Array(u))}catch(l){throw o(l),l}},cancel(a){return o(a),s.return()}},{highWaterMark:2})},Pi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Gr=Pi&&typeof ReadableStream=="function",$c=Pi&&(typeof TextEncoder=="function"?(c=>e=>c.encode(e))(new TextEncoder):async c=>new Uint8Array(await new Response(c).arrayBuffer())),$r=(c,...e)=>{try{return!!c(...e)}catch{return!1}},Vc=Gr&&$r(()=>{let c=!1;const e=new Request(je.origin,{body:new ReadableStream,method:"POST",get duplex(){return c=!0,"half"}}).headers.has("Content-Type");return c&&!e}),gs=64*1024,Rn=Gr&&$r(()=>$.isReadableStream(new Response("").body)),mi={stream:Rn&&(c=>c.body)};Pi&&(c=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!mi[e]&&(mi[e]=$.isFunction(c[e])?n=>n[e]():(n,i)=>{throw new le(`Response type '${e}' is not supported`,le.ERR_NOT_SUPPORT,i)})})})(new Response);const Jc=async c=>{if(c==null)return 0;if($.isBlob(c))return c.size;if($.isSpecCompliantForm(c))return(await new Request(je.origin,{method:"POST",body:c}).arrayBuffer()).byteLength;if($.isArrayBufferView(c)||$.isArrayBuffer(c))return c.byteLength;if($.isURLSearchParams(c)&&(c=c+""),$.isString(c))return(await $c(c)).byteLength},kc=async(c,e)=>{const n=$.toFiniteNumber(c.getContentLength());return n??Jc(e)},Qc=Pi&&(async c=>{let{url:e,method:n,data:i,signal:s,cancelToken:t,timeout:r,onDownloadProgress:o,onUploadProgress:a,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Kr(c);l=l?(l+"").toLowerCase():"text";let f=zc([s,t&&t.toAbortSignal()],r),m;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(a&&Vc&&n!=="get"&&n!=="head"&&(v=await kc(u,i))!==0){let T=new Request(e,{method:"POST",body:i,duplex:"half"}),D;if($.isFormData(i)&&(D=T.headers.get("content-type"))&&u.setContentType(D),T.body){const[M,P]=cs(v,pi(fs(a)));i=ms(T.body,gs,M,P)}}$.isString(d)||(d=d?"include":"omit");const p="credentials"in Request.prototype;m=new Request(e,{...h,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:p?d:void 0});let E=await fetch(m);const R=Rn&&(l==="stream"||l==="response");if(Rn&&(o||R&&g)){const T={};["status","statusText","headers"].forEach(C=>{T[C]=E[C]});const D=$.toFiniteNumber(E.headers.get("content-length")),[M,P]=o&&cs(D,pi(fs(o),!0))||[];E=new Response(ms(E.body,gs,M,()=>{P&&P(),g&&g()}),T)}l=l||"text";let O=await mi[$.findKey(mi,l)||"text"](E,c);return!R&&g&&g(),await new Promise((T,D)=>{zr(T,D,{data:O,headers:Ke.from(E.headers),status:E.status,statusText:E.statusText,config:c,request:m})})}catch(p){throw g&&g(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,c,m),{cause:p.cause||p}):le.from(p,p&&p.code,c,m)}}),wn={http:uc,xhr:Wc,fetch:Qc};$.forEach(wn,(c,e)=>{if(c){try{Object.defineProperty(c,"name",{value:e})}catch{}Object.defineProperty(c,"adapterName",{value:e})}});const vs=c=>`- ${c}`,Xc=c=>$.isFunction(c)||c===null||c===!1,Vr={getAdapter:c=>{c=$.isArray(c)?c:[c];const{length:e}=c;let n,i;const s={};for(let t=0;t<e;t++){n=c[t];let r;if(i=n,!Xc(n)&&(i=wn[(r=String(n)).toLowerCase()],i===void 0))throw new le(`Unknown adapter '${r}'`);if(i)break;s[r||"#"+t]=i}if(!i){const t=Object.entries(s).map(([o,a])=>`adapter ${o} `+(a===!1?"is not supported by the environment":"is not available in the build"));let r=e?t.length>1?`since :
`+t.map(vs).join(`
`):" "+vs(t[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:wn};function Ui(c){if(c.cancelToken&&c.cancelToken.throwIfRequested(),c.signal&&c.signal.aborted)throw new Ut(null,c)}function bs(c){return Ui(c),c.headers=Ke.from(c.headers),c.data=Ni.call(c,c.transformRequest),["post","put","patch"].indexOf(c.method)!==-1&&c.headers.setContentType("application/x-www-form-urlencoded",!1),Vr.getAdapter(c.adapter||ei.adapter)(c).then(function(i){return Ui(c),i.data=Ni.call(c,c.transformResponse,i),i.headers=Ke.from(i.headers),i},function(i){return Wr(i)||(Ui(c),i&&i.response&&(i.response.data=Ni.call(c,c.transformResponse,i.response),i.response.headers=Ke.from(i.response.headers))),Promise.reject(i)})}const Jr="1.9.0",Di={};["object","boolean","number","function","string","symbol"].forEach((c,e)=>{Di[c]=function(i){return typeof i===c||"a"+(e<1?"n ":" ")+c}});const ys={};Di.transitional=function(e,n,i){function s(t,r){return"[Axios v"+Jr+"] Transitional option '"+t+"'"+r+(i?". "+i:"")}return(t,r,o)=>{if(e===!1)throw new le(s(r," has been removed"+(n?" in "+n:"")),le.ERR_DEPRECATED);return n&&!ys[r]&&(ys[r]=!0,console.warn(s(r," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(t,r,o):!0}};Di.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Yc(c,e,n){if(typeof c!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);const i=Object.keys(c);let s=i.length;for(;s-- >0;){const t=i[s],r=e[t];if(r){const o=c[t],a=o===void 0||r(o,t,c);if(a!==!0)throw new le("option "+t+" must be "+a,le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new le("Unknown option "+t,le.ERR_BAD_OPTION)}}const ui={assertOptions:Yc,validators:Di},nt=ui.validators;let Pt=class{constructor(e){this.defaults=e||{},this.interceptors={request:new hs,response:new hs}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const t=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?t&&!String(i.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+t):i.stack=t}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=St(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:t}=n;i!==void 0&&ui.assertOptions(i,{silentJSONParsing:nt.transitional(nt.boolean),forcedJSONParsing:nt.transitional(nt.boolean),clarifyTimeoutError:nt.transitional(nt.boolean)},!1),s!=null&&($.isFunction(s)?n.paramsSerializer={serialize:s}:ui.assertOptions(s,{encode:nt.function,serialize:nt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ui.assertOptions(n,{baseUrl:nt.spelling("baseURL"),withXsrfToken:nt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=t&&$.merge(t.common,t[n.method]);t&&$.forEach(["delete","get","head","post","put","patch","common"],m=>{delete t[m]}),n.headers=Ke.concat(r,t);const o=[];let a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(a=a&&g.synchronous,o.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let u,d=0,h;if(!a){const m=[bs.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,l),h=m.length,u=Promise.resolve(n);d<h;)u=u.then(m[d++],m[d++]);return u}h=o.length;let f=n;for(d=0;d<h;){const m=o[d++],g=o[d++];try{f=m(f)}catch(v){g.call(this,v);break}}try{u=bs.call(this,f)}catch(m){return Promise.reject(m)}for(d=0,h=l.length;d<h;)u=u.then(l[d++],l[d++]);return u}getUri(e){e=St(this.defaults,e);const n=Hr(e.baseURL,e.url,e.allowAbsoluteUrls);return Fr(n,e.params,e.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(e){Pt.prototype[e]=function(n,i){return this.request(St(i||{},{method:e,url:n,data:(i||{}).data}))}});$.forEach(["post","put","patch"],function(e){function n(i){return function(t,r,o){return this.request(St(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:t,data:r}))}}Pt.prototype[e]=n(),Pt.prototype[e+"Form"]=n(!0)});let Zc=class kr{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(t){n=t});const i=this;this.promise.then(s=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](s);i._listeners=null}),this.promise.then=s=>{let t;const r=new Promise(o=>{i.subscribe(o),t=o}).then(s);return r.cancel=function(){i.unsubscribe(t)},r},e(function(t,r,o){i.reason||(i.reason=new Ut(t,r,o),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new kr(function(s){e=s}),cancel:e}}};function qc(c){return function(n){return c.apply(null,n)}}function _c(c){return $.isObject(c)&&c.isAxiosError===!0}const Tn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tn).forEach(([c,e])=>{Tn[e]=c});function Qr(c){const e=new Pt(c),n=wr(Pt.prototype.request,e);return $.extend(n,Pt.prototype,e,{allOwnKeys:!0}),$.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Qr(St(c,s))},n}const Me=Qr(ei);Me.Axios=Pt;Me.CanceledError=Ut;Me.CancelToken=Zc;Me.isCancel=Wr;Me.VERSION=Jr;Me.toFormData=Mi;Me.AxiosError=le;Me.Cancel=Me.CanceledError;Me.all=function(e){return Promise.all(e)};Me.spread=qc;Me.isAxiosError=_c;Me.mergeConfig=St;Me.AxiosHeaders=Ke;Me.formToJSON=c=>Ur($.isHTMLForm(c)?new FormData(c):c);Me.getAdapter=Vr.getAdapter;Me.HttpStatusCode=Tn;Me.default=Me;const{Axios:ff,AxiosError:pf,CanceledError:mf,isCancel:gf,CancelToken:vf,VERSION:bf,all:yf,Cancel:Ef,isAxiosError:Cf,spread:Of,toFormData:Rf,AxiosHeaders:wf,HttpStatusCode:Tf,formToJSON:Mf,getAdapter:Pf,mergeConfig:Df}=Me,ef={class:"common-layout"},tf=["src"],Sf=Pe({__name:"index",setup(c){const e=Rr(),{editTable:n,base64code:i}=Bs(e),s=fe([]),t=fe(null),r=fe(""),o=fe(!1),a=(v,p)=>{console.log("Removed:",v,p)},l=v=>{r.value=v.url||"",o.value=!0},u=(v,p)=>{s.value.length>1&&(s.value=s.value.slice(-1)),console.log("File changed:",v,s.value)},d=(v,p)=>{alert("只能上传一个文件！")},h=v=>{const p=v.type==="image/jpeg"||v.type==="image/png"||v.type==="image/jpg";return p||alert("只能上传 JPG 或 PNG 格式的图片！"),p};function f(v){return new Promise((p,E)=>{const R=new FileReader;R.readAsDataURL(v),R.onload=()=>p(R.result),R.onerror=O=>E(O)})}function m(){if(s.value.length===0){Wt.error("没有图片可以上传");return}t.value&&(Wt.success("已上传，正在识别"),t.value.submit())}async function g({file:v,onProgress:p,onSuccess:E,onError:R}){var O;try{const D={base64:await f(v)},M={"X-LC-Id":"OymXq6ZGQbnJoyQ2uOHpfmj6-gzGzoHsz","X-LC-Key":"CQc5f48ugFiMwGhsQoqS54Jd","Content-Type":"application/json"},C=(await Me.post("https://oymxq6zg.lc-cn-n1-shared.com/1.1/functions/decodeImage",D,{headers:M,onUploadProgress:w=>{w.lengthComputable&&p({percent:w.loaded/w.total*100})}})).data.result,y=C.code,b=C.msg;switch(console.log("rescode:",y),console.log("resmsg:",b),y){case 0:{if(Wt.success("识别成功"),i.value=(O=C.result)==null?void 0:O.text.Data,i.value==="")throw new Error("未接收到有效的 Base64 数据");break}case 1:{Wt.error("缺少参数base64");break}case 2:{Wt.error(C.msg);break}}s.value=[]}catch(T){const D=T.message;console.log("try-catch-msg",D)}}return(v,p)=>{const E=Rd,R=Da,O=Et,T=Wa,D=Sn,M=zl,P=Cd,C=xa,y=Sa;return te(),ve("div",ef,[pe(y,{style:{height:"100vh"}},{default:re(()=>[pe(R,{width:"200px"},{default:re(()=>[pe(E)]),_:1}),pe(y,null,{default:re(()=>[pe(C,{style:{padding:"20px",overflow:"auto"}},{default:re(()=>[pe(T,{"file-list":s.value,"onUpdate:fileList":p[0]||(p[0]=b=>s.value=b),"list-type":"picture-card","auto-upload":!1,"on-preview":l,"on-remove":a,"on-change":u,limit:1,"on-exceed":d,"before-upload":h,"http-request":g,ref_key:"uploadRef",ref:t},{default:re(()=>[s.value.length===0?(te(),Te(O,{key:0},{default:re(()=>[pe(z(Ma))]),_:1})):Oe("",!0)]),_:1},8,["file-list"]),pe(D,{type:"primary",onClick:m,style:{"background-color":"rgb(121.3, 187.1, 255)"}},{default:re(()=>p[2]||(p[2]=[et("上传文件")])),_:1,__:[2]}),p[3]||(p[3]=ye("div",{style:{"font-size":"12px",color:"#999","margin-top":"6px"}}," 请上传角色列表截图：只支持 PNG/JPG 格式，最大 2MB; 上传后请稍后刷新数据 ",-1)),pe(M,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=b=>o.value=b),width:"50%"},{default:re(()=>[ye("img",{style:{width:"100%"},src:r.value,alt:"Preview Image"},null,8,tf)]),_:1},8,["modelValue"]),pe(P)]),_:1,__:[3]})]),_:1})]),_:1})])}}});export{Sf as default};
