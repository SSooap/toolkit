var tl=Object.defineProperty;var il=(u,e,n)=>e in u?tl(u,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[e]=n;var te=(u,e,n)=>il(u,typeof e!="symbol"?e+"":e,n);import{b as nl,i as ai,a as ii,c as bt,d as Ei,e as it,u as Ki,r as le,f as gt,g as J,h as as,_ as Ze,j as Me,k as Be,l as ce,o as _,m as pe,w as ot,v as Ks,n as U,p as Ie,q as ie,s as vn,t as me,x as at,y as Fe,z as $e,A as At,B as Vr,C as ni,D as Ct,E as li,F as Et,G as Oi,H as xe,I as ri,J as kt,K as $i,L as $s,M as Ge,N as Ee,O as Te,P as ae,Q as se,R as Tt,S as rl,T as Gs,U as Vs,V as Mt,W as _t,X as wi,Y as Gi,Z as sl,$ as Zn,a0 as yt,a1 as Ut,a2 as dt,a3 as Xe,a4 as rn,a5 as ol,a6 as al,a7 as Qe,a8 as sn,a9 as ks,aa as Js,ab as qn,ac as Qs,ad as ll,ae as Xs,af as ul,ag as jt,ah as si,ai as kr,aj as Ys,ak as Jr,al as _n,am as Lt,an as Zs,ao as qs,ap as hl,aq as $n,ar as er,as as _s,at as bn,au as Ci,av as dl,aw as Ai,ax as cl,ay as fl,az as yn,aA as ls,aB as pl,aC as ml,aD as gl,aE as vl,aF as bl,aG as yl,aH as El,aI as Cl,aJ as us,aK as Qr,aL as eo,aM as to,aN as io,aO as no,aP as Ol,aQ as ro,aR as Xr,aS as tr,aT as so,aU as wl,aV as Gn,aW as Rl,aX as Ii,aY as Tl,aZ as Ml,a_ as oo,a$ as Sl,b0 as fi,b1 as Pl,b2 as pi,b3 as Dl,b4 as hs,b5 as xl,b6 as Ll,b7 as Al,b8 as Il,b9 as Fl,ba as Bl,bb as ao,bc as lo,bd as Nl,be as jl,bf as Ul}from"./index-DI_k6pjs.js";import{u as Ri,a as uo,i as It,E as wt,b as Wl,c as zl,d as Hl}from"./main-Buwdkzgp.js";import{u as ho,E as co,i as Kl,a as $l}from"./input-DKGOvZQH.js";import{b as Gl,C as St,U as Ue,u as Yr,a as En,c as fo,E as Vl,d as Zr,e as po,f as Rt,I as on,s as kl,g as qr}from"./button-Dvj716f1.js";import{b as Jl,c as mo,g as Ql,r as Xl,u as Yl,E as Zl}from"./progress-DwpPmjtM.js";import{t as pn,E as ir}from"./index-CmiSUEnD.js";function ql(u,e,n,i){u.length;for(var r=n+1;r--;)if(e(u[r],r,u))return r;return-1}var _l=4;function ds(u){return Jl(u,_l)}function eu(u,e,n){var i=u==null?0:u.length;if(!i)return-1;var r=i-1;return ql(u,Gl(e),r)}var tu=1/0;function iu(u){var e=u==null?0:u.length;return e?nl(u,tu):[]}let en;const nu=u=>{var e;if(!ai)return 0;if(en!==void 0)return en;const n=document.createElement("div");n.className=`${u}-scrollbar__wrap`,n.style.visibility="hidden",n.style.width="100px",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);const i=n.offsetWidth;n.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",n.appendChild(r);const t=r.offsetWidth;return(e=n.parentNode)==null||e.removeChild(n),en=i-t,en};function go(u,e){if(!ai)return;if(!e){u.scrollTop=0;return}const n=[];let i=e.offsetParent;for(;i!==null&&u!==i&&u.contains(i);)n.push(i),i=i.offsetParent;const r=e.offsetTop+n.reduce((a,l)=>a+l.offsetTop,0),t=r+e.offsetHeight,s=u.scrollTop,o=s+u.clientHeight;r<s?u.scrollTop=r:t>o&&(u.scrollTop=t-u.clientHeight)}const vo=it({modelValue:{type:[String,Number,Boolean],default:void 0},size:Ki,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),ru=it({...vo,border:Boolean}),bo={[Ue]:u=>ii(u)||bt(u)||Ei(u),[St]:u=>ii(u)||bt(u)||Ei(u)},yo=Symbol("radioGroupKey"),Eo=(u,e)=>{const n=le(),i=gt(yo,void 0),r=J(()=>!!i),t=J(()=>as(u.value)?u.label:u.value),s=J({get(){return r.value?i.modelValue:u.modelValue},set(c){r.value?i.changeEvent(c):e&&e(Ue,c),n.value.checked=u.modelValue===t.value}}),o=Ri(J(()=>i==null?void 0:i.size)),a=uo(J(()=>i==null?void 0:i.disabled)),l=le(!1),h=J(()=>a.value||r.value&&s.value!==t.value?-1:0);return Yr({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},J(()=>r.value&&as(u.value))),{radioRef:n,isGroup:r,radioGroup:i,focus:l,size:o,disabled:a,tabIndex:h,modelValue:s,actualValue:t}},su=Me({name:"ElRadio"}),ou=Me({...su,props:ru,emits:bo,setup(u,{emit:e}){const n=u,i=Be("radio"),{radioRef:r,radioGroup:t,focus:s,size:o,disabled:a,modelValue:l,actualValue:h}=Eo(n,e);function c(){$e(()=>e(St,l.value))}return(d,f)=>{var m;return _(),ce("label",{class:ie([U(i).b(),U(i).is("disabled",U(a)),U(i).is("focus",U(s)),U(i).is("bordered",d.border),U(i).is("checked",U(l)===U(h)),U(i).m(U(o))])},[pe("span",{class:ie([U(i).e("input"),U(i).is("disabled",U(a)),U(i).is("checked",U(l)===U(h))])},[ot(pe("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":g=>vn(l)?l.value=g:null,class:ie(U(i).e("original")),value:U(h),name:d.name||((m=U(t))==null?void 0:m.name),disabled:U(a),checked:U(l)===U(h),type:"radio",onFocus:g=>s.value=!0,onBlur:g=>s.value=!1,onChange:c,onClick:Ie(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[Ks,U(l)]]),pe("span",{class:ie(U(i).e("inner"))},null,2)],2),pe("span",{class:ie(U(i).e("label")),onKeydown:Ie(()=>{},["stop"])},[me(d.$slots,"default",{},()=>[at(Fe(d.label),1)])],42,["onKeydown"])],2)}}});var au=Ze(ou,[["__file","radio.vue"]]);const lu=it({...vo}),uu=Me({name:"ElRadioButton"}),hu=Me({...uu,props:lu,setup(u){const e=u,n=Be("radio"),{radioRef:i,focus:r,size:t,disabled:s,modelValue:o,radioGroup:a,actualValue:l}=Eo(e),h=J(()=>({backgroundColor:(a==null?void 0:a.fill)||"",borderColor:(a==null?void 0:a.fill)||"",boxShadow:a!=null&&a.fill?`-1px 0 0 0 ${a.fill}`:"",color:(a==null?void 0:a.textColor)||""}));return(c,d)=>{var f;return _(),ce("label",{class:ie([U(n).b("button"),U(n).is("active",U(o)===U(l)),U(n).is("disabled",U(s)),U(n).is("focus",U(r)),U(n).bm("button",U(t))])},[ot(pe("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":m=>vn(o)?o.value=m:null,class:ie(U(n).be("button","original-radio")),value:U(l),type:"radio",name:c.name||((f=U(a))==null?void 0:f.name),disabled:U(s),onFocus:m=>r.value=!0,onBlur:m=>r.value=!1,onClick:Ie(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[Ks,U(o)]]),pe("span",{class:ie(U(n).be("button","inner")),style:At(U(o)===U(l)?U(h):{}),onKeydown:Ie(()=>{},["stop"])},[me(c.$slots,"default",{},()=>[at(Fe(c.label),1)])],46,["onKeydown"])],2)}}});var Co=Ze(hu,[["__file","radio-button.vue"]]);const du=it({id:{type:String,default:void 0},size:Ki,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...Vr(["ariaLabel"])}),cu=bo,fu=Me({name:"ElRadioGroup"}),pu=Me({...fu,props:du,emits:cu,setup(u,{emit:e}){const n=u,i=Be("radio"),r=ni(),t=le(),{formItem:s}=En(),{inputId:o,isLabeledByFormItem:a}=fo(n,{formItemContext:s}),l=c=>{e(Ue,c),$e(()=>e(St,c))};Ct(()=>{const c=t.value.querySelectorAll("[type=radio]"),d=c[0];!Array.from(c).some(f=>f.checked)&&d&&(d.tabIndex=0)});const h=J(()=>n.name||r.value);return li(yo,Et({...Oi(n),changeEvent:l,name:h})),xe(()=>n.modelValue,()=>{n.validateEvent&&(s==null||s.validate("change").catch(c=>ri()))}),(c,d)=>(_(),ce("div",{id:U(o),ref_key:"radioGroupRef",ref:t,class:ie(U(i).b("group")),role:"radiogroup","aria-label":U(a)?void 0:c.ariaLabel||"radio-group","aria-labelledby":U(a)?U(s).labelId:void 0},[me(c.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var Oo=Ze(pu,[["__file","radio-group.vue"]]);const mu=kt(au,{RadioButton:Co,RadioGroup:Oo});$i(Oo);$i(Co);var gu=Me({name:"NodeContent",setup(){return{ns:Be("cascader-node")}},render(){const{ns:u}=this,{node:e,panel:n}=this.$parent,{data:i,label:r}=e,{renderLabelFn:t}=n;return $s("span",{class:u.e("label")},t?t({node:e,data:i}):r)}});const _r=Symbol(),vu=Me({name:"ElCascaderNode",components:{ElCheckbox:Vl,ElRadio:mu,NodeContent:gu,ElIcon:Mt,Check:Vs,Loading:Gs,ArrowRight:rl},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(u,{emit:e}){const n=gt(_r),i=Be("cascader-node"),r=J(()=>n.isHoverMenu),t=J(()=>n.config.multiple),s=J(()=>n.config.checkStrictly),o=J(()=>{var S;return(S=n.checkedNodes[0])==null?void 0:S.uid}),a=J(()=>u.node.isDisabled),l=J(()=>u.node.isLeaf),h=J(()=>s.value&&!l.value||!a.value),c=J(()=>f(n.expandingNode)),d=J(()=>s.value&&n.checkedNodes.some(f)),f=S=>{var M;const{level:P,uid:y}=u.node;return((M=S==null?void 0:S.pathNodes[P-1])==null?void 0:M.uid)===y},m=()=>{c.value||n.expandNode(u.node)},g=S=>{const{node:M}=u;S!==M.checked&&n.handleCheckChange(M,S)},v=()=>{n.lazyLoad(u.node,()=>{l.value||m()})},p=S=>{r.value&&(E(),!l.value&&e("expand",S))},E=()=>{const{node:S}=u;!h.value||S.loading||(S.loaded?m():v())},w=()=>{r.value&&!l.value||(l.value&&!a.value&&!s.value&&!t.value?T(!0):E())},O=S=>{s.value?(g(S),u.node.loaded&&m()):T(S)},T=S=>{u.node.loaded?(g(S),!s.value&&m()):v()};return{panel:n,isHoverMenu:r,multiple:t,checkStrictly:s,checkedNodeId:o,isDisabled:a,isLeaf:l,expandable:h,inExpandingPath:c,inCheckedPath:d,ns:i,handleHoverExpand:p,handleExpand:E,handleClick:w,handleCheck:T,handleSelectCheck:O}}});function bu(u,e,n,i,r,t){const s=Ge("el-checkbox"),o=Ge("el-radio"),a=Ge("check"),l=Ge("el-icon"),h=Ge("node-content"),c=Ge("loading"),d=Ge("arrow-right");return _(),ce("li",{id:`${u.menuId}-${u.node.uid}`,role:"menuitem","aria-haspopup":!u.isLeaf,"aria-owns":u.isLeaf?void 0:u.menuId,"aria-expanded":u.inExpandingPath,tabindex:u.expandable?-1:void 0,class:ie([u.ns.b(),u.ns.is("selectable",u.checkStrictly),u.ns.is("active",u.node.checked),u.ns.is("disabled",!u.expandable),u.inExpandingPath&&"in-active-path",u.inCheckedPath&&"in-checked-path"]),onMouseenter:u.handleHoverExpand,onFocus:u.handleHoverExpand,onClick:u.handleClick},[Ee(" prefix "),u.multiple?(_(),Te(s,{key:0,"model-value":u.node.checked,indeterminate:u.node.indeterminate,disabled:u.isDisabled,onClick:Ie(()=>{},["stop"]),"onUpdate:modelValue":u.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):u.checkStrictly?(_(),Te(o,{key:1,"model-value":u.checkedNodeId,label:u.node.uid,disabled:u.isDisabled,"onUpdate:modelValue":u.handleSelectCheck,onClick:Ie(()=>{},["stop"])},{default:se(()=>[Ee(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),pe("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):u.isLeaf&&u.node.checked?(_(),Te(l,{key:2,class:ie(u.ns.e("prefix"))},{default:se(()=>[ae(a)]),_:1},8,["class"])):Ee("v-if",!0),Ee(" content "),ae(h),Ee(" postfix "),u.isLeaf?Ee("v-if",!0):(_(),ce(Tt,{key:3},[u.node.loading?(_(),Te(l,{key:0,class:ie([u.ns.is("loading"),u.ns.e("postfix")])},{default:se(()=>[ae(c)]),_:1},8,["class"])):(_(),Te(l,{key:1,class:ie(["arrow-right",u.ns.e("postfix")])},{default:se(()=>[ae(d)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var yu=Ze(vu,[["render",bu],["__file","node.vue"]]);const Eu=Me({name:"ElCascaderMenu",components:{Loading:Gs,ElIcon:Mt,ElScrollbar:Zr,ElCascaderNode:yu},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(u){const e=Gi(),n=Be("cascader-menu"),{t:i}=wi(),r=ni();let t=null,s=null;const o=gt(_r),a=le(null),l=J(()=>!u.nodes.length),h=J(()=>!o.initialLoaded),c=J(()=>`${r.value}-${u.index}`),d=v=>{t=v.target},f=v=>{if(!(!o.isHoverMenu||!t||!a.value))if(t.contains(v.target)){m();const p=e.vnode.el,{left:E}=p.getBoundingClientRect(),{offsetWidth:w,offsetHeight:O}=p,T=v.clientX-E,S=t.offsetTop,M=S+t.offsetHeight;a.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${S} L${w} 0 V${S} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${M} L${w} ${O} V${M} Z" />
        `}else s||(s=window.setTimeout(g,o.config.hoverThreshold))},m=()=>{s&&(clearTimeout(s),s=null)},g=()=>{a.value&&(a.value.innerHTML="",m())};return{ns:n,panel:o,hoverZone:a,isEmpty:l,isLoading:h,menuId:c,t:i,handleExpand:d,handleMouseMove:f,clearHoverZone:g}}});function Cu(u,e,n,i,r,t){const s=Ge("el-cascader-node"),o=Ge("loading"),a=Ge("el-icon"),l=Ge("el-scrollbar");return _(),Te(l,{key:u.menuId,tag:"ul",role:"menu",class:ie(u.ns.b()),"wrap-class":u.ns.e("wrap"),"view-class":[u.ns.e("list"),u.ns.is("empty",u.isEmpty)],onMousemove:u.handleMouseMove,onMouseleave:u.clearHoverZone},{default:se(()=>{var h;return[(_(!0),ce(Tt,null,_t(u.nodes,c=>(_(),Te(s,{key:c.uid,node:c,"menu-id":u.menuId,onExpand:u.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),u.isLoading?(_(),ce("div",{key:0,class:ie(u.ns.e("empty-text"))},[ae(a,{size:"14",class:ie(u.ns.is("loading"))},{default:se(()=>[ae(o)]),_:1},8,["class"]),at(" "+Fe(u.t("el.cascader.loading")),1)],2)):u.isEmpty?(_(),ce("div",{key:1,class:ie(u.ns.e("empty-text"))},[me(u.$slots,"empty",{},()=>[at(Fe(u.t("el.cascader.noData")),1)])],2)):(h=u.panel)!=null&&h.isHoverMenu?(_(),ce(Tt,{key:2},[Ee(" eslint-disable-next-line vue/html-self-closing "),(_(),ce("svg",{ref:"hoverZone",class:ie(u.ns.e("hover-zone"))},null,2))],2112)):Ee("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Ou=Ze(Eu,[["render",Cu],["__file","menu.vue"]]);const wu=(u="")=>u.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),cs=u=>sl(u);let Ru=0;const Tu=u=>{const e=[u];let{parent:n}=u;for(;n;)e.unshift(n),n=n.parent;return e};let nr=class rr{constructor(e,n,i,r=!1){this.data=e,this.config=n,this.parent=i,this.root=r,this.uid=Ru++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:t,label:s,children:o}=n,a=e[o],l=Tu(this);this.level=r?0:i?i.level+1:1,this.value=e[t],this.label=e[s],this.pathNodes=l,this.pathValues=l.map(h=>h.value),this.pathLabels=l.map(h=>h.label),this.childrenData=a,this.children=(a||[]).map(h=>new rr(h,n,this)),this.loaded=!n.lazy||this.isLeaf||!Zn(a)}get isDisabled(){const{data:e,parent:n,config:i}=this,{disabled:r,checkStrictly:t}=i;return(yt(r)?r(e,this):!!e[r])||!t&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:i,loaded:r}=this,{lazy:t,leaf:s}=n,o=yt(s)?s(e,this):e[s];return Ut(o)?t&&!r?!1:!(dt(i)&&i.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:i}=this,r=new rr(e,this.config,this);return dt(n)?n.push(e):this.childrenData=[e],i.push(r),r}calcText(e,n){const i=e?this.pathLabels.join(n):this.label;return this.text=i,i}broadcast(e,...n){const i=`onParent${cs(e)}`;this.children.forEach(r=>{r&&(r.broadcast(e,...n),r[i]&&r[i](...n))})}emit(e,...n){const{parent:i}=this,r=`onChild${cs(e)}`;i&&(i[r]&&i[r](...n),i.emit(e,...n))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(r=>!r.isDisabled),i=n.length?n.every(r=>r.checked):!1;this.setCheckState(i)}setCheckState(e){const n=this.children.length,i=this.children.reduce((r,t)=>{const s=t.checked?1:t.indeterminate?.5:0;return r+s},0);this.checked=this.loaded&&this.children.filter(r=>!r.isDisabled).every(r=>r.loaded&&r.checked)&&e,this.indeterminate=this.loaded&&i!==n&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:i}=this.config;n||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const sr=(u,e)=>u.reduce((n,i)=>(i.isLeaf?n.push(i):(!e&&n.push(i),n=n.concat(sr(i.children,e))),n),[]);class fs{constructor(e,n){this.config=n;const i=(e||[]).map(r=>new nr(r,this.config));this.nodes=i,this.allNodes=sr(i,!1),this.leafNodes=sr(i,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const i=n?n.appendChild(e):new nr(e,this.config);n||this.nodes.push(i),this.appendAllNodesAndLeafNodes(i)}appendNodes(e,n){e.forEach(i=>this.appendNode(i,n))}appendAllNodesAndLeafNodes(e){this.allNodes.push(e),e.isLeaf&&this.leafNodes.push(e),e.children&&e.children.forEach(n=>{this.appendAllNodesAndLeafNodes(n)})}getNodeByValue(e,n=!1){return!e&&e!==0?null:this.getFlattedNodes(n).find(r=>It(r.value,e)||It(r.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:i,level:r})=>It(e.value,i)&&e.level===r)||null}}const wo=it({modelValue:{type:Xe([Number,String,Array])},options:{type:Xe(Array),default:()=>[]},props:{type:Xe(Object),default:()=>({})}}),Mu={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:rn,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Su=u=>J(()=>({...Mu,...u.props})),ps=u=>{if(!u)return 0;const e=u.id.split("-");return Number(e[e.length-2])},Pu=u=>{if(!u)return;const e=u.querySelector("input");e?e.click():ol(u)&&u.click()},Du=(u,e)=>{const n=e.slice(0),i=n.map(t=>t.uid),r=u.reduce((t,s)=>{const o=i.indexOf(s.uid);return o>-1&&(t.push(s),n.splice(o,1),i.splice(o,1)),t},[]);return r.push(...n),r},ms=u=>[...new Set(u)],gs=u=>!u&&u!==0?[]:dt(u)?u:[u],xu=Me({name:"ElCascaderPanel",components:{ElCascaderMenu:Ou},props:{...wo,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ue,St,"close","expand-change"],setup(u,{emit:e,slots:n}){let i=!1;const r=Be("cascader"),t=Su(u);let s=null;const o=le(!0),a=le([]),l=le(null),h=le([]),c=le(null),d=le([]),f=J(()=>t.value.expandTrigger==="hover"),m=J(()=>u.renderLabel||n.default),g=()=>{const{options:R}=u,D=t.value;i=!1,s=new fs(R,D),h.value=[s.getNodes()],D.lazy&&Zn(u.options)?(o.value=!1,v(void 0,I=>{I&&(s=new fs(I,D),h.value=[s.getNodes()]),o.value=!0,P(!1,!0)})):P(!1,!0)},v=(R,D)=>{const I=t.value;R=R||new nr({},I,void 0,!0),R.loading=!0;const x=A=>{const N=R,F=N.root?null:N;A&&(s==null||s.appendNodes(A,F)),N.loading=!1,N.loaded=!0,N.childrenData=N.childrenData||[],D&&D(A)};I.lazyLoad(R,x)},p=(R,D)=>{var I;const{level:x}=R,A=h.value.slice(0,x);let N;R.isLeaf?N=R.pathNodes[x-2]:(N=R,A.push(R.children)),((I=c.value)==null?void 0:I.uid)!==(N==null?void 0:N.uid)&&(c.value=R,h.value=A,!D&&e("expand-change",(R==null?void 0:R.pathValues)||[]))},E=(R,D,I=!0)=>{const{checkStrictly:x,multiple:A}=t.value,N=d.value[0];i=!0,!A&&(N==null||N.doCheck(!1)),R.doCheck(D),M(),I&&!A&&!x&&e("close"),!I&&!A&&!x&&w(R)},w=R=>{R&&(R=R.parent,w(R),R&&p(R))},O=R=>s==null?void 0:s.getFlattedNodes(R),T=R=>{var D;return(D=O(R))==null?void 0:D.filter(I=>I.checked!==!1)},S=()=>{d.value.forEach(R=>R.doCheck(!1)),M(),h.value=h.value.slice(0,1),c.value=null,e("expand-change",[])},M=()=>{var R;const{checkStrictly:D,multiple:I}=t.value,x=d.value,A=T(!D),N=Du(x,A),F=N.map(B=>B.valueByOption);d.value=N,l.value=I?F:(R=F[0])!=null?R:null},P=(R=!1,D=!1)=>{const{modelValue:I}=u,{lazy:x,multiple:A,checkStrictly:N}=t.value,F=!N;if(!(!o.value||i||!D&&It(I,l.value)))if(x&&!R){const L=ms(iu(gs(I))).map(W=>s==null?void 0:s.getNodeByValue(W)).filter(W=>!!W&&!W.loaded&&!W.loading);L.length?L.forEach(W=>{v(W,()=>P(!1,D))}):P(!0,D)}else{const B=A?gs(I):[I],L=ms(B.map(W=>s==null?void 0:s.getNodeByValue(W,F)));y(L,D),l.value=mo(I)}},y=(R,D=!0)=>{const{checkStrictly:I}=t.value,x=d.value,A=R.filter(B=>!!B&&(I||B.isLeaf)),N=s==null?void 0:s.getSameNode(c.value),F=D&&N||A[0];F?F.pathNodes.forEach(B=>p(B,!0)):c.value=null,x.forEach(B=>B.doCheck(!1)),Et(A).forEach(B=>B.doCheck(!0)),d.value=A,$e(C)},C=()=>{ai&&a.value.forEach(R=>{const D=R==null?void 0:R.$el;if(D){const I=D.querySelector(`.${r.namespace.value}-scrollbar__wrap`),x=D.querySelector(`.${r.b("node")}.${r.is("active")}`)||D.querySelector(`.${r.b("node")}.in-active-path`);go(I,x)}})},b=R=>{const D=R.target,{code:I}=R;switch(I){case Qe.up:case Qe.down:{R.preventDefault();const x=I===Qe.up?-1:1;sn(ks(D,x,`.${r.b("node")}[tabindex="-1"]`));break}case Qe.left:{R.preventDefault();const x=a.value[ps(D)-1],A=x==null?void 0:x.$el.querySelector(`.${r.b("node")}[aria-expanded="true"]`);sn(A);break}case Qe.right:{R.preventDefault();const x=a.value[ps(D)+1],A=x==null?void 0:x.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`);sn(A);break}case Qe.enter:case Qe.numpadEnter:Pu(D);break}};return li(_r,Et({config:t,expandingNode:c,checkedNodes:d,isHoverMenu:f,initialLoaded:o,renderLabelFn:m,lazyLoad:v,expandNode:p,handleCheckChange:E})),xe([t,()=>u.options],g,{deep:!0,immediate:!0}),xe(()=>u.modelValue,()=>{i=!1,P()},{deep:!0}),xe(()=>l.value,R=>{It(R,u.modelValue)||(e(Ue,R),e(St,R))}),al(()=>a.value=[]),Ct(()=>!Zn(u.modelValue)&&P()),{ns:r,menuList:a,menus:h,checkedNodes:d,handleKeyDown:b,handleCheckChange:E,getFlattedNodes:O,getCheckedNodes:T,clearCheckedNodes:S,calculateCheckedValue:M,scrollToExpandingNode:C}}});function Lu(u,e,n,i,r,t){const s=Ge("el-cascader-menu");return _(),ce("div",{class:ie([u.ns.b("panel"),u.ns.is("bordered",u.border)]),onKeydown:u.handleKeyDown},[(_(!0),ce(Tt,null,_t(u.menus,(o,a)=>(_(),Te(s,{key:a,ref_for:!0,ref:l=>u.menuList[a]=l,index:a,nodes:[...o]},{empty:se(()=>[me(u.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var Au=Ze(xu,[["render",Lu],["__file","index.vue"]]);const Iu=kt(Au),Fu=it({...wo,size:Ki,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Xe(Function),default:(u,e)=>u.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Xe(Function),default:()=>!0},placement:{type:Xe(String),values:Qs,default:"bottom-start"},fallbackPlacements:{type:Xe(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:qn.teleported,tagType:{...pn.type,default:"info"},tagEffect:{...pn.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Js}),Bu={[Ue]:u=>!0,[St]:u=>!0,focus:u=>u instanceof FocusEvent,blur:u=>u instanceof FocusEvent,clear:()=>!0,visibleChange:u=>Ei(u),expandChange:u=>!!u,removeTag:u=>!!u},Nu="ElCascader",ju=Me({name:Nu}),Uu=Me({...ju,props:Fu,emits:Bu,setup(u,{expose:e,emit:n}){const i=u,r={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:$})=>{const{modifiersData:X,placement:Y}=$;["right","left","bottom","top"].includes(Y)||(X.arrow.x=35)},requires:["arrow"]}]},t=ll();let s=0,o=0;const a=Be("cascader"),l=Be("input"),{t:h}=wi(),{form:c,formItem:d}=En(),{valueOnClear:f}=Xs(i),{isComposing:m,handleComposition:g}=ho({afterComposition($){var X;const Y=(X=$.target)==null?void 0:X.value;ye(Y)}}),v=le(null),p=le(null),E=le(null),w=le(null),O=le(null),T=le(!1),S=le(!1),M=le(!1),P=le(!1),y=le(""),C=le(""),b=le([]),R=le([]),D=le([]),I=J(()=>t.style),x=J(()=>i.disabled||(c==null?void 0:c.disabled)),A=J(()=>i.placeholder||h("el.cascader.placeholder")),N=J(()=>C.value||b.value.length>0||m.value?"":A.value),F=Ri(),B=J(()=>F.value==="small"?"small":"default"),L=J(()=>!!i.props.multiple),W=J(()=>!i.filterable||L.value),z=J(()=>L.value?C.value:y.value),j=J(()=>{var $;return(($=w.value)==null?void 0:$.checkedNodes)||[]}),H=J(()=>!i.clearable||x.value||M.value||!S.value?!1:!!j.value.length),K=J(()=>{const{showAllLevels:$,separator:X}=i,Y=j.value;return Y.length?L.value?"":Y[0].calcText($,X):""}),Z=J(()=>(d==null?void 0:d.validateState)||""),Q=J({get(){return mo(i.modelValue)},set($){const X=$??f.value;n(Ue,X),n(St,X),i.validateEvent&&(d==null||d.validate("change").catch(Y=>ri()))}}),V=J(()=>[a.b(),a.m(F.value),a.is("disabled",x.value),t.class]),ee=J(()=>[l.e("icon"),"icon-arrow-down",a.is("reverse",T.value)]),ue=J(()=>a.is("focus",T.value||P.value)),q=J(()=>{var $,X;return(X=($=v.value)==null?void 0:$.popperRef)==null?void 0:X.contentRef}),he=$=>{var X,Y,oe;x.value||($=$??!T.value,$!==T.value&&(T.value=$,(Y=(X=p.value)==null?void 0:X.input)==null||Y.setAttribute("aria-expanded",`${$}`),$?(fe(),$e((oe=w.value)==null?void 0:oe.scrollToExpandingNode)):i.filterable&&nt(),n("visibleChange",$)))},fe=()=>{$e(()=>{var $;($=v.value)==null||$.updatePopper()})},Ne=()=>{M.value=!1},je=$=>{const{showAllLevels:X,separator:Y}=i;return{node:$,key:$.uid,text:$.calcText(X,Y),hitState:!1,closable:!x.value&&!$.isDisabled,isCollapseTag:!1}},Le=$=>{var X;const Y=$.node;Y.doCheck(!1),(X=w.value)==null||X.calculateCheckedValue(),n("removeTag",Y.valueByOption)},ke=()=>{if(!L.value)return;const $=j.value,X=[],Y=[];if($.forEach(oe=>Y.push(je(oe))),R.value=Y,$.length){$.slice(0,i.maxCollapseTags).forEach(De=>X.push(je(De)));const oe=$.slice(i.maxCollapseTags),ge=oe.length;ge&&(i.collapseTags?X.push({key:-1,text:`+ ${ge}`,closable:!1,isCollapseTag:!0}):oe.forEach(De=>X.push(je(De))))}b.value=X},He=()=>{var $,X;const{filterMethod:Y,showAllLevels:oe,separator:ge}=i,De=(X=($=w.value)==null?void 0:$.getFlattedNodes(!i.props.checkStrictly))==null?void 0:X.filter(rt=>rt.isDisabled?!1:(rt.calcText(oe,ge),Y(rt,z.value)));L.value&&(b.value.forEach(rt=>{rt.hitState=!1}),R.value.forEach(rt=>{rt.hitState=!1})),M.value=!0,D.value=De,fe()},_e=()=>{var $;let X;M.value&&O.value?X=O.value.$el.querySelector(`.${a.e("suggestion-item")}`):X=($=w.value)==null?void 0:$.$el.querySelector(`.${a.b("node")}[tabindex="-1"]`),X&&(X.focus(),!M.value&&X.click())},ze=()=>{var $,X;const Y=($=p.value)==null?void 0:$.input,oe=E.value,ge=(X=O.value)==null?void 0:X.$el;if(!(!ai||!Y)){if(ge){const De=ge.querySelector(`.${a.e("suggestion-list")}`);De.style.minWidth=`${Y.offsetWidth}px`}if(oe){const{offsetHeight:De}=oe,rt=b.value.length>0?`${Math.max(De,s)-2}px`:`${s}px`;Y.style.height=rt,fe()}}},Ke=$=>{var X;return(X=w.value)==null?void 0:X.getCheckedNodes($)},lt=$=>{fe(),n("expandChange",$)},Ft=$=>{if(!m.value)switch($.code){case Qe.enter:case Qe.numpadEnter:he();break;case Qe.down:he(!0),$e(_e),$.preventDefault();break;case Qe.esc:T.value===!0&&($.preventDefault(),$.stopPropagation(),he(!1));break;case Qe.tab:he(!1);break}},vt=()=>{var $;($=w.value)==null||$.clearCheckedNodes(),!T.value&&i.filterable&&nt(),he(!1),n("clear")},nt=()=>{const{value:$}=K;y.value=$,C.value=$},Ye=$=>{var X,Y;const{checked:oe}=$;L.value?(X=w.value)==null||X.handleCheckChange($,!oe,!1):(!oe&&((Y=w.value)==null||Y.handleCheckChange($,!0,!1)),he(!1))},Je=$=>{const X=$.target,{code:Y}=$;switch(Y){case Qe.up:case Qe.down:{$.preventDefault();const oe=Y===Qe.up?-1:1;sn(ks(X,oe,`.${a.e("suggestion-item")}[tabindex="-1"]`));break}case Qe.enter:case Qe.numpadEnter:X.click();break}},ut=()=>{const $=b.value,X=$[$.length-1];o=C.value?0:o+1,!(!X||!o||i.collapseTags&&$.length>1)&&(X.hitState?Le(X):X.hitState=!0)},re=$=>{const X=$.target,Y=a.e("search-input");X.className===Y&&(P.value=!0),n("focus",$)},de=$=>{P.value=!1,n("blur",$)},Oe=po(()=>{const{value:$}=z;if(!$)return;const X=i.beforeFilter($);ul(X)?X.then(He).catch(()=>{}):X!==!1?He():Ne()},i.debounce),ye=($,X)=>{!T.value&&he(!0),!(X!=null&&X.isComposing)&&($?Oe():Ne())},Re=$=>Number.parseFloat(hl(l.cssVarName("input-height"),$).value)-2;return xe(M,fe),xe([j,x,()=>i.collapseTags],ke),xe(b,()=>{$e(()=>ze())}),xe(F,async()=>{await $e();const $=p.value.input;s=Re($)||s,ze()}),xe(K,nt,{immediate:!0}),Ct(()=>{const $=p.value.input,X=Re($);s=$.offsetHeight||X,jt($,ze)}),e({getCheckedNodes:Ke,cascaderPanelRef:w,togglePopperVisible:he,contentRef:q,presentText:K}),($,X)=>(_(),Te(U(_n),{ref_key:"tooltipRef",ref:v,visible:T.value,teleported:$.teleported,"popper-class":[U(a).e("dropdown"),$.popperClass],"popper-options":r,"fallback-placements":$.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:$.placement,transition:`${U(a).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:$.persistent,onHide:Ne},{default:se(()=>[ot((_(),ce("div",{class:ie(U(V)),style:At(U(I)),onClick:()=>he(U(W)?void 0:!0),onKeydown:Ft,onMouseenter:Y=>S.value=!0,onMouseleave:Y=>S.value=!1},[ae(U(co),{ref_key:"input",ref:p,modelValue:y.value,"onUpdate:modelValue":Y=>y.value=Y,placeholder:U(N),readonly:U(W),disabled:U(x),"validate-event":!1,size:U(F),class:ie(U(ue)),tabindex:U(L)&&$.filterable&&!U(x)?-1:void 0,onCompositionstart:U(g),onCompositionupdate:U(g),onCompositionend:U(g),onFocus:re,onBlur:de,onInput:ye},kr({suffix:se(()=>[U(H)?(_(),Te(U(Mt),{key:"clear",class:ie([U(l).e("icon"),"icon-circle-close"]),onClick:Ie(vt,["stop"])},{default:se(()=>[ae(U(Ys))]),_:1},8,["class","onClick"])):(_(),Te(U(Mt),{key:"arrow-down",class:ie(U(ee)),onClick:Ie(Y=>he(),["stop"])},{default:se(()=>[ae(U(Jr))]),_:1},8,["class","onClick"]))]),_:2},[$.$slots.prefix?{name:"prefix",fn:se(()=>[me($.$slots,"prefix")])}:void 0]),1032,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),U(L)?(_(),ce("div",{key:0,ref_key:"tagWrapper",ref:E,class:ie([U(a).e("tags"),U(a).is("validate",!!U(Z))])},[(_(!0),ce(Tt,null,_t(b.value,Y=>(_(),Te(U(ir),{key:Y.key,type:$.tagType,size:U(B),effect:$.tagEffect,hit:Y.hitState,closable:Y.closable,"disable-transitions":"",onClose:oe=>Le(Y)},{default:se(()=>[Y.isCollapseTag===!1?(_(),ce("span",{key:0},Fe(Y.text),1)):(_(),Te(U(_n),{key:1,disabled:T.value||!$.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:se(()=>[pe("span",null,Fe(Y.text),1)]),content:se(()=>[pe("div",{class:ie(U(a).e("collapse-tags"))},[(_(!0),ce(Tt,null,_t(R.value.slice($.maxCollapseTags),(oe,ge)=>(_(),ce("div",{key:ge,class:ie(U(a).e("collapse-tag"))},[(_(),Te(U(ir),{key:oe.key,class:"in-tooltip",type:$.tagType,size:U(B),effect:$.tagEffect,hit:oe.hitState,closable:oe.closable,"disable-transitions":"",onClose:De=>Le(oe)},{default:se(()=>[pe("span",null,Fe(oe.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),$.filterable&&!U(x)?ot((_(),ce("input",{key:0,"onUpdate:modelValue":Y=>C.value=Y,type:"text",class:ie(U(a).e("search-input")),placeholder:U(K)?"":U(A),onInput:Y=>ye(C.value,Y),onClick:Ie(Y=>he(!0),["stop"]),onKeydown:Lt(ut,["delete"]),onCompositionstart:U(g),onCompositionupdate:U(g),onCompositionend:U(g),onFocus:re,onBlur:de},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[Zs,C.value]]):Ee("v-if",!0)],2)):Ee("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[U(qs),()=>he(!1),U(q)]])]),content:se(()=>[ot(ae(U(Iu),{ref_key:"cascaderPanelRef",ref:w,modelValue:U(Q),"onUpdate:modelValue":Y=>vn(Q)?Q.value=Y:null,options:$.options,props:i.props,border:!1,"render-label":$.$slots.default,onExpandChange:lt,onClose:Y=>$.$nextTick(()=>he(!1))},{empty:se(()=>[me($.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[si,!M.value]]),$.filterable?ot((_(),Te(U(Zr),{key:0,ref_key:"suggestionPanel",ref:O,tag:"ul",class:ie(U(a).e("suggestion-panel")),"view-class":U(a).e("suggestion-list"),onKeydown:Je},{default:se(()=>[D.value.length?(_(!0),ce(Tt,{key:0},_t(D.value,Y=>(_(),ce("li",{key:Y.uid,class:ie([U(a).e("suggestion-item"),U(a).is("checked",Y.checked)]),tabindex:-1,onClick:oe=>Ye(Y)},[me($.$slots,"suggestion-item",{item:Y},()=>[pe("span",null,Fe(Y.text),1),Y.checked?(_(),Te(U(Mt),{key:0},{default:se(()=>[ae(U(Vs))]),_:1})):Ee("v-if",!0)])],10,["onClick"]))),128)):me($.$slots,"empty",{key:1},()=>[pe("li",{class:ie(U(a).e("empty-text"))},Fe(U(h)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[si,M.value]]):Ee("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var Wu=Ze(Uu,[["__file","cascader.vue"]]);const zu=kt(Wu),Hu=100,Ku=600,vs={beforeMount(u,e){const n=e.value,{interval:i=Hu,delay:r=Ku}=yt(n)?{}:n;let t,s;const o=()=>yt(n)?n():n.handler(),a=()=>{s&&(clearTimeout(s),s=void 0),t&&(clearInterval(t),t=void 0)};u.addEventListener("mousedown",l=>{l.button===0&&(a(),o(),document.addEventListener("mouseup",()=>a(),{once:!0}),s=setTimeout(()=>{t=setInterval(()=>{o()},i)},r))})}},Ro=u=>{if(!u)return{onClick:rn,onMousedown:rn,onMouseup:rn};let e=!1,n=!1;return{onClick:s=>{e&&n&&u(s),e=n=!1},onMousedown:s=>{e=s.target===s.currentTarget},onMouseup:s=>{n=s.target===s.currentTarget}}},$u=it({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Xe([String,Array,Object])},zIndex:{type:Xe([String,Number])}}),Gu={click:u=>u instanceof MouseEvent},Vu="overlay";var ku=Me({name:"ElOverlay",props:$u,emits:Gu,setup(u,{slots:e,emit:n}){const i=Be(Vu),r=a=>{n("click",a)},{onClick:t,onMousedown:s,onMouseup:o}=Ro(u.customMaskEvent?void 0:r);return()=>u.mask?ae("div",{class:[i.b(),u.overlayClass],style:{zIndex:u.zIndex},onClick:t,onMousedown:s,onMouseup:o},[me(e,"default")],$n.STYLE|$n.CLASS|$n.PROPS,["onClick","onMouseup","onMousedown"]):$s("div",{class:u.overlayClass,style:{zIndex:u.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[me(e,"default")])}});const To=ku,Mo=Symbol("dialogInjectionKey"),So=it({center:Boolean,alignCenter:Boolean,closeIcon:{type:er},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ju={close:()=>!0},Qu=(u,e,n,i)=>{const r={offsetX:0,offsetY:0},t=(c,d)=>{if(u.value){const{offsetX:f,offsetY:m}=r,g=u.value.getBoundingClientRect(),v=g.left,p=g.top,E=g.width,w=g.height,O=document.documentElement.clientWidth,T=document.documentElement.clientHeight,S=-v+f,M=-p+m,P=O-v-E+f,y=T-p-w+m;i!=null&&i.value||(c=Math.min(Math.max(c,S),P),d=Math.min(Math.max(d,M),y)),r.offsetX=c,r.offsetY=d,u.value.style.transform=`translate(${Ci(c)}, ${Ci(d)})`}},s=c=>{const d=c.clientX,f=c.clientY,{offsetX:m,offsetY:g}=r,v=E=>{const w=m+E.clientX-d,O=g+E.clientY-f;t(w,O)},p=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",v),document.addEventListener("mouseup",p)},o=()=>{e.value&&u.value&&(e.value.addEventListener("mousedown",s),window.addEventListener("resize",h))},a=()=>{e.value&&u.value&&(e.value.removeEventListener("mousedown",s),window.removeEventListener("resize",h))},l=()=>{r.offsetX=0,r.offsetY=0,u.value&&(u.value.style.transform="")},h=()=>{const{offsetX:c,offsetY:d}=r;t(c,d)};return Ct(()=>{_s(()=>{n.value?o():a()})}),bn(()=>{a()}),{resetPosition:l,updatePosition:h}},Xu=(...u)=>e=>{u.forEach(n=>{yt(n)?n(e):n.value=e})},Yu=Me({name:"ElDialogContent"}),Zu=Me({...Yu,props:So,emits:Ju,setup(u,{expose:e}){const n=u,{t:i}=wi(),{Close:r}=cl,{dialogRef:t,headerRef:s,bodyId:o,ns:a,style:l}=gt(Mo),{focusTrapRef:h}=gt(dl),c=J(()=>[a.b(),a.is("fullscreen",n.fullscreen),a.is("draggable",n.draggable),a.is("align-center",n.alignCenter),{[a.m("center")]:n.center}]),d=Xu(h,t),f=J(()=>n.draggable),m=J(()=>n.overflow),{resetPosition:g,updatePosition:v}=Qu(t,s,f,m);return e({resetPosition:g,updatePosition:v}),(p,E)=>(_(),ce("div",{ref:U(d),class:ie(U(c)),style:At(U(l)),tabindex:"-1"},[pe("header",{ref_key:"headerRef",ref:s,class:ie([U(a).e("header"),p.headerClass,{"show-close":p.showClose}])},[me(p.$slots,"header",{},()=>[pe("span",{role:"heading","aria-level":p.ariaLevel,class:ie(U(a).e("title"))},Fe(p.title),11,["aria-level"])]),p.showClose?(_(),ce("button",{key:0,"aria-label":U(i)("el.dialog.close"),class:ie(U(a).e("headerbtn")),type:"button",onClick:w=>p.$emit("close")},[ae(U(Mt),{class:ie(U(a).e("close"))},{default:se(()=>[(_(),Te(Ai(p.closeIcon||U(r))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Ee("v-if",!0)],2),pe("div",{id:U(o),class:ie([U(a).e("body"),p.bodyClass])},[me(p.$slots,"default")],10,["id"]),p.$slots.footer?(_(),ce("footer",{key:0,class:ie([U(a).e("footer"),p.footerClass])},[me(p.$slots,"footer")],2)):Ee("v-if",!0)],6))}});var qu=Ze(Zu,[["__file","dialog-content.vue"]]);const Po=it({...So,appendToBody:Boolean,appendTo:{type:fl.to.type,default:"body"},beforeClose:{type:Xe(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Do={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ue]:u=>Ei(u),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},_u=(u,e={})=>{vn(u)||yn("[useLockscreen]","You need to pass a ref param to this function");const n=e.ns||Be("popup"),i=J(()=>n.bm("parent","hidden"));if(!ai||ls(document.body,i.value))return;let r=0,t=!1,s="0";const o=()=>{setTimeout(()=>{typeof document>"u"||t&&document&&(document.body.style.width=s,vl(document.body,i.value))},200)};xe(u,a=>{if(!a){o();return}t=!ls(document.body,i.value),t&&(s=document.body.style.width,pl(document.body,i.value)),r=nu(n.namespace.value);const l=document.documentElement.clientHeight<document.body.scrollHeight,h=ml(document.body,"overflowY");r>0&&(l||h==="scroll")&&t&&(document.body.style.width=`calc(100% - ${r}px)`)}),gl(()=>o())},xo=(u,e)=>{var n;const r=Gi().emit,{nextZIndex:t}=bl();let s="";const o=ni(),a=ni(),l=le(!1),h=le(!1),c=le(!1),d=le((n=u.zIndex)!=null?n:t());let f,m;const g=yl("namespace",Cl),v=J(()=>{const x={},A=`--${g.value}-dialog`;return u.fullscreen||(u.top&&(x[`${A}-margin-top`]=u.top),u.width&&(x[`${A}-width`]=Ci(u.width))),x}),p=J(()=>u.alignCenter?{display:"flex"}:{});function E(){r("opened")}function w(){r("closed"),r(Ue,!1),u.destroyOnClose&&(c.value=!1)}function O(){r("close")}function T(){m==null||m(),f==null||f(),u.openDelay&&u.openDelay>0?{stop:f}=us(()=>y(),u.openDelay):y()}function S(){f==null||f(),m==null||m(),u.closeDelay&&u.closeDelay>0?{stop:m}=us(()=>C(),u.closeDelay):C()}function M(){function x(A){A||(h.value=!0,l.value=!1)}u.beforeClose?u.beforeClose(x):S()}function P(){u.closeOnClickModal&&M()}function y(){ai&&(l.value=!0)}function C(){l.value=!1}function b(){r("openAutoFocus")}function R(){r("closeAutoFocus")}function D(x){var A;((A=x.detail)==null?void 0:A.focusReason)==="pointer"&&x.preventDefault()}u.lockScroll&&_u(l);function I(){u.closeOnPressEscape&&M()}return xe(()=>u.modelValue,x=>{x?(h.value=!1,T(),c.value=!0,d.value=El(u.zIndex)?t():d.value++,$e(()=>{r("open"),e.value&&(e.value.parentElement.scrollTop=0,e.value.parentElement.scrollLeft=0,e.value.scrollTop=0)})):l.value&&S()}),xe(()=>u.fullscreen,x=>{e.value&&(x?(s=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=s)}),Ct(()=>{u.modelValue&&(l.value=!0,c.value=!0,T())}),{afterEnter:E,afterLeave:w,beforeLeave:O,handleClose:M,onModalClick:P,close:S,doClose:C,onOpenAutoFocus:b,onCloseAutoFocus:R,onCloseRequested:I,onFocusoutPrevented:D,titleId:o,bodyId:a,closed:h,style:v,overlayDialogStyle:p,rendered:c,visible:l,zIndex:d}},eh=Me({name:"ElDialog",inheritAttrs:!1}),th=Me({...eh,props:Po,emits:Do,setup(u,{expose:e}){const n=u,i=Qr();Yr({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},J(()=>!!i.title));const r=Be("dialog"),t=le(),s=le(),o=le(),{visible:a,titleId:l,bodyId:h,style:c,overlayDialogStyle:d,rendered:f,zIndex:m,afterEnter:g,afterLeave:v,beforeLeave:p,handleClose:E,onModalClick:w,onOpenAutoFocus:O,onCloseAutoFocus:T,onCloseRequested:S,onFocusoutPrevented:M}=xo(n,t);li(Mo,{dialogRef:t,headerRef:s,bodyId:h,ns:r,rendered:f,style:c});const P=Ro(w),y=J(()=>n.draggable&&!n.fullscreen);return e({visible:a,dialogContentRef:o,resetPosition:()=>{var b;(b=o.value)==null||b.resetPosition()},handleClose:E}),(b,R)=>(_(),Te(U(no),{to:b.appendTo,disabled:b.appendTo!=="body"?!1:!b.appendToBody},{default:se(()=>[ae(eo,{name:"dialog-fade",onAfterEnter:U(g),onAfterLeave:U(v),onBeforeLeave:U(p),persisted:""},{default:se(()=>[ot(ae(U(To),{"custom-mask-event":"",mask:b.modal,"overlay-class":b.modalClass,"z-index":U(m)},{default:se(()=>[pe("div",{role:"dialog","aria-modal":"true","aria-label":b.title||void 0,"aria-labelledby":b.title?void 0:U(l),"aria-describedby":U(h),class:ie(`${U(r).namespace.value}-overlay-dialog`),style:At(U(d)),onClick:U(P).onClick,onMousedown:U(P).onMousedown,onMouseup:U(P).onMouseup},[ae(U(to),{loop:"",trapped:U(a),"focus-start-el":"container",onFocusAfterTrapped:U(O),onFocusAfterReleased:U(T),onFocusoutPrevented:U(M),onReleaseRequested:U(S)},{default:se(()=>[U(f)?(_(),Te(qu,io({key:0,ref_key:"dialogContentRef",ref:o},b.$attrs,{center:b.center,"align-center":b.alignCenter,"close-icon":b.closeIcon,draggable:U(y),overflow:b.overflow,fullscreen:b.fullscreen,"header-class":b.headerClass,"body-class":b.bodyClass,"footer-class":b.footerClass,"show-close":b.showClose,title:b.title,"aria-level":b.headerAriaLevel,onClose:U(E)}),kr({header:se(()=>[b.$slots.title?me(b.$slots,"title",{key:1}):me(b.$slots,"header",{key:0,close:U(E),titleId:U(l),titleClass:U(r).e("title")})]),default:se(()=>[me(b.$slots,"default")]),_:2},[b.$slots.footer?{name:"footer",fn:se(()=>[me(b.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):Ee("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[si,U(a)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var ih=Ze(th,[["__file","dialog.vue"]]);const nh=kt(ih),rh=it({...Po,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),sh=Do,oh=Me({name:"ElDrawer",inheritAttrs:!1}),ah=Me({...oh,props:rh,emits:sh,setup(u,{expose:e}){const n=u,i=Qr();Yr({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},J(()=>!!i.title));const r=le(),t=le(),s=Be("drawer"),{t:o}=wi(),{afterEnter:a,afterLeave:l,beforeLeave:h,visible:c,rendered:d,titleId:f,bodyId:m,zIndex:g,onModalClick:v,onOpenAutoFocus:p,onCloseAutoFocus:E,onFocusoutPrevented:w,onCloseRequested:O,handleClose:T}=xo(n,r),S=J(()=>n.direction==="rtl"||n.direction==="ltr"),M=J(()=>Ci(n.size));return e({handleClose:T,afterEnter:a,afterLeave:l}),(P,y)=>(_(),Te(U(no),{to:P.appendTo,disabled:P.appendTo!=="body"?!1:!P.appendToBody},{default:se(()=>[ae(eo,{name:U(s).b("fade"),onAfterEnter:U(a),onAfterLeave:U(l),onBeforeLeave:U(h),persisted:""},{default:se(()=>[ot(ae(U(To),{mask:P.modal,"overlay-class":P.modalClass,"z-index":U(g),onClick:U(v)},{default:se(()=>[ae(U(to),{loop:"",trapped:U(c),"focus-trap-el":r.value,"focus-start-el":t.value,onFocusAfterTrapped:U(p),onFocusAfterReleased:U(E),onFocusoutPrevented:U(w),onReleaseRequested:U(O)},{default:se(()=>[pe("div",io({ref_key:"drawerRef",ref:r,"aria-modal":"true","aria-label":P.title||void 0,"aria-labelledby":P.title?void 0:U(f),"aria-describedby":U(m)},P.$attrs,{class:[U(s).b(),P.direction,U(c)&&"open"],style:U(S)?"width: "+U(M):"height: "+U(M),role:"dialog",onClick:Ie(()=>{},["stop"])}),[pe("span",{ref_key:"focusStartRef",ref:t,class:ie(U(s).e("sr-focus")),tabindex:"-1"},null,2),P.withHeader?(_(),ce("header",{key:0,class:ie([U(s).e("header"),P.headerClass])},[P.$slots.title?me(P.$slots,"title",{key:1},()=>[Ee(" DEPRECATED SLOT ")]):me(P.$slots,"header",{key:0,close:U(T),titleId:U(f),titleClass:U(s).e("title")},()=>[P.$slots.title?Ee("v-if",!0):(_(),ce("span",{key:0,id:U(f),role:"heading","aria-level":P.headerAriaLevel,class:ie(U(s).e("title"))},Fe(P.title),11,["id","aria-level"]))]),P.showClose?(_(),ce("button",{key:2,"aria-label":U(o)("el.drawer.close"),class:ie(U(s).e("close-btn")),type:"button",onClick:U(T)},[ae(U(Mt),{class:ie(U(s).e("close"))},{default:se(()=>[ae(U(Ol))]),_:1},8,["class"])],10,["aria-label","onClick"])):Ee("v-if",!0)],2)):Ee("v-if",!0),U(d)?(_(),ce("div",{key:1,id:U(m),class:ie([U(s).e("body"),P.bodyClass])},[me(P.$slots,"default")],10,["id"])):Ee("v-if",!0),P.$slots.footer?(_(),ce("div",{key:2,class:ie([U(s).e("footer"),P.footerClass])},[me(P.$slots,"footer")],2)):Ee("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[si,U(c)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var lh=Ze(ah,[["__file","drawer.vue"]]);const uh=kt(lh),hh=it({size:{type:String,values:ro},disabled:Boolean}),dh=it({...hh,model:Object,rules:{type:Xe(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),ch={validate:(u,e,n)=>(dt(u)||ii(u))&&Ei(e)&&ii(n)};function fh(){const u=le([]),e=J(()=>{if(!u.value.length)return"0";const t=Math.max(...u.value);return t?`${t}px`:""});function n(t){const s=u.value.indexOf(t);return s===-1&&e.value,s}function i(t,s){if(t&&s){const o=n(s);u.value.splice(o,1,t)}else t&&u.value.push(t)}function r(t){const s=n(t);s>-1&&u.value.splice(s,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:r}}const tn=(u,e)=>{const n=Rt(e);return n.length>0?u.filter(i=>i.prop&&n.includes(i.prop)):u},ph="ElForm",mh=Me({name:ph}),gh=Me({...mh,props:dh,emits:ch,setup(u,{expose:e,emit:n}){const i=u,r=Et([]),t=Ri(),s=Be("form"),o=J(()=>{const{labelPosition:w,inline:O}=i;return[s.b(),s.m(t.value||"default"),{[s.m(`label-${w}`)]:w,[s.m("inline")]:O}]}),a=w=>r.find(O=>O.prop===w),l=w=>{r.push(w)},h=w=>{w.prop&&r.splice(r.indexOf(w),1)},c=(w=[])=>{i.model&&tn(r,w).forEach(O=>O.resetField())},d=(w=[])=>{tn(r,w).forEach(O=>O.clearValidate())},f=J(()=>!!i.model),m=w=>{if(r.length===0)return[];const O=tn(r,w);return O.length?O:[]},g=async w=>p(void 0,w),v=async(w=[])=>{if(!f.value)return!1;const O=m(w);if(O.length===0)return!0;let T={};for(const S of O)try{await S.validate(""),S.validateState==="error"&&S.resetField()}catch(M){T={...T,...M}}return Object.keys(T).length===0?!0:Promise.reject(T)},p=async(w=[],O)=>{const T=!yt(O);try{const S=await v(w);return S===!0&&await(O==null?void 0:O(S)),S}catch(S){if(S instanceof Error)throw S;const M=S;return i.scrollToError&&E(Object.keys(M)[0]),await(O==null?void 0:O(!1,M)),T&&Promise.reject(M)}},E=w=>{var O;const T=tn(r,w)[0];T&&((O=T.$el)==null||O.scrollIntoView(i.scrollIntoViewOptions))};return xe(()=>i.rules,()=>{i.validateOnRuleChange&&g().catch(w=>ri())},{deep:!0,flush:"post"}),li(Xr,Et({...Oi(i),emit:n,resetFields:c,clearValidate:d,validateField:p,getField:a,addField:l,removeField:h,...fh()})),e({validate:g,validateField:p,resetFields:c,clearValidate:d,scrollToField:E,fields:r}),(w,O)=>(_(),ce("form",{class:ie(U(o))},[me(w.$slots,"default")],2))}});var vh=Ze(gh,[["__file","form.vue"]]);function Zt(){return Zt=Object.assign?Object.assign.bind():function(u){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(u[i]=n[i])}return u},Zt.apply(this,arguments)}function bh(u,e){u.prototype=Object.create(e.prototype),u.prototype.constructor=u,zi(u,e)}function or(u){return or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},or(u)}function zi(u,e){return zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},zi(u,e)}function yh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function an(u,e,n){return yh()?an=Reflect.construct.bind():an=function(r,t,s){var o=[null];o.push.apply(o,t);var a=Function.bind.apply(r,o),l=new a;return s&&zi(l,s.prototype),l},an.apply(null,arguments)}function Eh(u){return Function.toString.call(u).indexOf("[native code]")!==-1}function ar(u){var e=typeof Map=="function"?new Map:void 0;return ar=function(i){if(i===null||!Eh(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return an(i,arguments,or(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),zi(r,i)},ar(u)}var Ch=/%[sdj%]/g,Oh=function(){};function lr(u){if(!u||!u.length)return null;var e={};return u.forEach(function(n){var i=n.field;e[i]=e[i]||[],e[i].push(n)}),e}function mt(u){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=0,t=n.length;if(typeof u=="function")return u.apply(null,n);if(typeof u=="string"){var s=u.replace(Ch,function(o){if(o==="%%")return"%";if(r>=t)return o;switch(o){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}break;default:return o}});return s}return u}function wh(u){return u==="string"||u==="url"||u==="hex"||u==="email"||u==="date"||u==="pattern"}function Ve(u,e){return!!(u==null||e==="array"&&Array.isArray(u)&&!u.length||wh(e)&&typeof u=="string"&&!u)}function Rh(u,e,n){var i=[],r=0,t=u.length;function s(o){i.push.apply(i,o||[]),r++,r===t&&n(i)}u.forEach(function(o){e(o,s)})}function bs(u,e,n){var i=0,r=u.length;function t(s){if(s&&s.length){n(s);return}var o=i;i=i+1,o<r?e(u[o],t):n([])}t([])}function Th(u){var e=[];return Object.keys(u).forEach(function(n){e.push.apply(e,u[n]||[])}),e}var ys=function(u){bh(e,u);function e(n,i){var r;return r=u.call(this,"Async Validation Error")||this,r.errors=n,r.fields=i,r}return e}(ar(Error));function Mh(u,e,n,i,r){if(e.first){var t=new Promise(function(d,f){var m=function(p){return i(p),p.length?f(new ys(p,lr(p))):d(r)},g=Th(u);bs(g,n,m)});return t.catch(function(d){return d}),t}var s=e.firstFields===!0?Object.keys(u):e.firstFields||[],o=Object.keys(u),a=o.length,l=0,h=[],c=new Promise(function(d,f){var m=function(v){if(h.push.apply(h,v),l++,l===a)return i(h),h.length?f(new ys(h,lr(h))):d(r)};o.length||(i(h),d(r)),o.forEach(function(g){var v=u[g];s.indexOf(g)!==-1?bs(v,n,m):Rh(v,n,m)})});return c.catch(function(d){return d}),c}function Sh(u){return!!(u&&u.message!==void 0)}function Ph(u,e){for(var n=u,i=0;i<e.length;i++){if(n==null)return n;n=n[e[i]]}return n}function Es(u,e){return function(n){var i;return u.fullFields?i=Ph(e,u.fullFields):i=e[n.field||u.fullField],Sh(n)?(n.field=n.field||u.fullField,n.fieldValue=i,n):{message:typeof n=="function"?n():n,fieldValue:i,field:n.field||u.fullField}}}function Cs(u,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];typeof i=="object"&&typeof u[n]=="object"?u[n]=Zt({},u[n],i):u[n]=i}}return u}var Lo=function(e,n,i,r,t,s){e.required&&(!i.hasOwnProperty(e.field)||Ve(n,s||e.type))&&r.push(mt(t.messages.required,e.fullField))},Dh=function(e,n,i,r,t){(/^\s+$/.test(n)||n==="")&&r.push(mt(t.messages.whitespace,e.fullField))},nn,xh=function(){if(nn)return nn;var u="[a-fA-F\\d:]",e=function(O){return O&&O.includeBoundaries?"(?:(?<=\\s|^)(?="+u+")|(?<="+u+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+n+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+n+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+n+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+n+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+n+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+n+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+n+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),t=new RegExp("(?:^"+n+"$)|(?:^"+r+"$)"),s=new RegExp("^"+n+"$"),o=new RegExp("^"+r+"$"),a=function(O){return O&&O.exact?t:new RegExp("(?:"+e(O)+n+e(O)+")|(?:"+e(O)+r+e(O)+")","g")};a.v4=function(w){return w&&w.exact?s:new RegExp(""+e(w)+n+e(w),"g")},a.v6=function(w){return w&&w.exact?o:new RegExp(""+e(w)+r+e(w),"g")};var l="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",c=a.v4().source,d=a.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",p='(?:[/?#][^\\s"]*)?',E="(?:"+l+"|www\\.)"+h+"(?:localhost|"+c+"|"+d+"|"+f+m+g+")"+v+p;return nn=new RegExp("(?:^"+E+"$)","i"),nn},Os={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Li={integer:function(e){return Li.number(e)&&parseInt(e,10)===e},float:function(e){return Li.number(e)&&!Li.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Li.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Os.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(xh())},hex:function(e){return typeof e=="string"&&!!e.match(Os.hex)}},Lh=function(e,n,i,r,t){if(e.required&&n===void 0){Lo(e,n,i,r,t);return}var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;s.indexOf(o)>-1?Li[o](n)||r.push(mt(t.messages.types[o],e.fullField,e.type)):o&&typeof n!==e.type&&r.push(mt(t.messages.types[o],e.fullField,e.type))},Ah=function(e,n,i,r,t){var s=typeof e.len=="number",o=typeof e.min=="number",a=typeof e.max=="number",l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=n,c=null,d=typeof n=="number",f=typeof n=="string",m=Array.isArray(n);if(d?c="number":f?c="string":m&&(c="array"),!c)return!1;m&&(h=n.length),f&&(h=n.replace(l,"_").length),s?h!==e.len&&r.push(mt(t.messages[c].len,e.fullField,e.len)):o&&!a&&h<e.min?r.push(mt(t.messages[c].min,e.fullField,e.min)):a&&!o&&h>e.max?r.push(mt(t.messages[c].max,e.fullField,e.max)):o&&a&&(h<e.min||h>e.max)&&r.push(mt(t.messages[c].range,e.fullField,e.min,e.max))},ci="enum",Ih=function(e,n,i,r,t){e[ci]=Array.isArray(e[ci])?e[ci]:[],e[ci].indexOf(n)===-1&&r.push(mt(t.messages[ci],e.fullField,e[ci].join(", ")))},Fh=function(e,n,i,r,t){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||r.push(mt(t.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var s=new RegExp(e.pattern);s.test(n)||r.push(mt(t.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},we={required:Lo,whitespace:Dh,type:Lh,range:Ah,enum:Ih,pattern:Fh},Bh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n,"string")&&!e.required)return i();we.required(e,n,r,s,t,"string"),Ve(n,"string")||(we.type(e,n,r,s,t),we.range(e,n,r,s,t),we.pattern(e,n,r,s,t),e.whitespace===!0&&we.whitespace(e,n,r,s,t))}i(s)},Nh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n)&&!e.required)return i();we.required(e,n,r,s,t),n!==void 0&&we.type(e,n,r,s,t)}i(s)},jh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(n===""&&(n=void 0),Ve(n)&&!e.required)return i();we.required(e,n,r,s,t),n!==void 0&&(we.type(e,n,r,s,t),we.range(e,n,r,s,t))}i(s)},Uh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n)&&!e.required)return i();we.required(e,n,r,s,t),n!==void 0&&we.type(e,n,r,s,t)}i(s)},Wh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n)&&!e.required)return i();we.required(e,n,r,s,t),Ve(n)||we.type(e,n,r,s,t)}i(s)},zh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n)&&!e.required)return i();we.required(e,n,r,s,t),n!==void 0&&(we.type(e,n,r,s,t),we.range(e,n,r,s,t))}i(s)},Hh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n)&&!e.required)return i();we.required(e,n,r,s,t),n!==void 0&&(we.type(e,n,r,s,t),we.range(e,n,r,s,t))}i(s)},Kh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(n==null&&!e.required)return i();we.required(e,n,r,s,t,"array"),n!=null&&(we.type(e,n,r,s,t),we.range(e,n,r,s,t))}i(s)},$h=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n)&&!e.required)return i();we.required(e,n,r,s,t),n!==void 0&&we.type(e,n,r,s,t)}i(s)},Gh="enum",Vh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n)&&!e.required)return i();we.required(e,n,r,s,t),n!==void 0&&we[Gh](e,n,r,s,t)}i(s)},kh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n,"string")&&!e.required)return i();we.required(e,n,r,s,t),Ve(n,"string")||we.pattern(e,n,r,s,t)}i(s)},Jh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n,"date")&&!e.required)return i();if(we.required(e,n,r,s,t),!Ve(n,"date")){var a;n instanceof Date?a=n:a=new Date(n),we.type(e,a,r,s,t),a&&we.range(e,a.getTime(),r,s,t)}}i(s)},Qh=function(e,n,i,r,t){var s=[],o=Array.isArray(n)?"array":typeof n;we.required(e,n,r,s,t,o),i(s)},Vn=function(e,n,i,r,t){var s=e.type,o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Ve(n,s)&&!e.required)return i();we.required(e,n,r,o,t,s),Ve(n,s)||we.type(e,n,r,o,t)}i(o)},Xh=function(e,n,i,r,t){var s=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Ve(n)&&!e.required)return i();we.required(e,n,r,s,t)}i(s)},Fi={string:Bh,method:Nh,number:jh,boolean:Uh,regexp:Wh,integer:zh,float:Hh,array:Kh,object:$h,enum:Vh,pattern:kh,date:Jh,url:Vn,hex:Vn,email:Vn,required:Qh,any:Xh};function ur(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var hr=ur(),Vi=function(){function u(n){this.rules=null,this._messages=hr,this.define(n)}var e=u.prototype;return e.define=function(i){var r=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(t){var s=i[t];r.rules[t]=Array.isArray(s)?s:[s]})},e.messages=function(i){return i&&(this._messages=Cs(ur(),i)),this._messages},e.validate=function(i,r,t){var s=this;r===void 0&&(r={}),t===void 0&&(t=function(){});var o=i,a=r,l=t;if(typeof a=="function"&&(l=a,a={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,o),Promise.resolve(o);function h(g){var v=[],p={};function E(O){if(Array.isArray(O)){var T;v=(T=v).concat.apply(T,O)}else v.push(O)}for(var w=0;w<g.length;w++)E(g[w]);v.length?(p=lr(v),l(v,p)):l(null,o)}if(a.messages){var c=this.messages();c===hr&&(c=ur()),Cs(c,a.messages),a.messages=c}else a.messages=this.messages();var d={},f=a.keys||Object.keys(this.rules);f.forEach(function(g){var v=s.rules[g],p=o[g];v.forEach(function(E){var w=E;typeof w.transform=="function"&&(o===i&&(o=Zt({},o)),p=o[g]=w.transform(p)),typeof w=="function"?w={validator:w}:w=Zt({},w),w.validator=s.getValidationMethod(w),w.validator&&(w.field=g,w.fullField=w.fullField||g,w.type=s.getType(w),d[g]=d[g]||[],d[g].push({rule:w,value:p,source:o,field:g}))})});var m={};return Mh(d,a,function(g,v){var p=g.rule,E=(p.type==="object"||p.type==="array")&&(typeof p.fields=="object"||typeof p.defaultField=="object");E=E&&(p.required||!p.required&&g.value),p.field=g.field;function w(S,M){return Zt({},M,{fullField:p.fullField+"."+S,fullFields:p.fullFields?[].concat(p.fullFields,[S]):[S]})}function O(S){S===void 0&&(S=[]);var M=Array.isArray(S)?S:[S];!a.suppressWarning&&M.length&&u.warning("async-validator:",M),M.length&&p.message!==void 0&&(M=[].concat(p.message));var P=M.map(Es(p,o));if(a.first&&P.length)return m[p.field]=1,v(P);if(!E)v(P);else{if(p.required&&!g.value)return p.message!==void 0?P=[].concat(p.message).map(Es(p,o)):a.error&&(P=[a.error(p,mt(a.messages.required,p.field))]),v(P);var y={};p.defaultField&&Object.keys(g.value).map(function(R){y[R]=p.defaultField}),y=Zt({},y,g.rule.fields);var C={};Object.keys(y).forEach(function(R){var D=y[R],I=Array.isArray(D)?D:[D];C[R]=I.map(w.bind(null,R))});var b=new u(C);b.messages(a.messages),g.rule.options&&(g.rule.options.messages=a.messages,g.rule.options.error=a.error),b.validate(g.value,g.rule.options||a,function(R){var D=[];P&&P.length&&D.push.apply(D,P),R&&R.length&&D.push.apply(D,R),v(D.length?D:null)})}}var T;if(p.asyncValidator)T=p.asyncValidator(p,g.value,O,g.source,a);else if(p.validator){try{T=p.validator(p,g.value,O,g.source,a)}catch(S){console.error==null||console.error(S),a.suppressValidatorError||setTimeout(function(){throw S},0),O(S.message)}T===!0?O():T===!1?O(typeof p.message=="function"?p.message(p.fullField||p.field):p.message||(p.fullField||p.field)+" fails"):T instanceof Array?O(T):T instanceof Error&&O(T.message)}T&&T.then&&T.then(function(){return O()},function(S){return O(S)})},function(g){h(g)},o)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!Fi.hasOwnProperty(i.type))throw new Error(mt("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var r=Object.keys(i),t=r.indexOf("message");return t!==-1&&r.splice(t,1),r.length===1&&r[0]==="required"?Fi.required:Fi[this.getType(i)]||void 0},u}();Vi.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Fi[e]=n};Vi.warning=Oh;Vi.messages=hr;Vi.validators=Fi;const Yh=["","error","validating","success"],Zh=it({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:Xe([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Xe([Object,Array])},error:String,validateStatus:{type:String,values:Yh},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:ro}}),ws="ElLabelWrap";var qh=Me({name:ws,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(u,{slots:e}){const n=gt(Xr,void 0),i=gt(tr);i||yn(ws,"usage: <el-form-item><label-wrap /></el-form-item>");const r=Be("form"),t=le(),s=le(0),o=()=>{var h;if((h=t.value)!=null&&h.firstElementChild){const c=window.getComputedStyle(t.value.firstElementChild).width;return Math.ceil(Number.parseFloat(c))}else return 0},a=(h="update")=>{$e(()=>{e.default&&u.isAutoWidth&&(h==="update"?s.value=o():h==="remove"&&(n==null||n.deregisterLabelWidth(s.value)))})},l=()=>a("update");return Ct(()=>{l()}),bn(()=>{a("remove")}),so(()=>l()),xe(s,(h,c)=>{u.updateAll&&(n==null||n.registerLabelWidth(h,c))}),jt(J(()=>{var h,c;return(c=(h=t.value)==null?void 0:h.firstElementChild)!=null?c:null}),l),()=>{var h,c;if(!e)return null;const{isAutoWidth:d}=u;if(d){const f=n==null?void 0:n.autoLabelWidth,m=i==null?void 0:i.hasLabel,g={};if(m&&f&&f!=="auto"){const v=Math.max(0,Number.parseInt(f,10)-s.value),E=(i.labelPosition||n.labelPosition)==="left"?"marginRight":"marginLeft";v&&(g[E]=`${v}px`)}return ae("div",{ref:t,class:[r.be("item","label-wrap")],style:g},[(h=e.default)==null?void 0:h.call(e)])}else return ae(Tt,{ref:t},[(c=e.default)==null?void 0:c.call(e)])}}});const _h=Me({name:"ElFormItem"}),ed=Me({..._h,props:Zh,setup(u,{expose:e}){const n=u,i=Qr(),r=gt(Xr,void 0),t=gt(tr,void 0),s=Ri(void 0,{formItem:!1}),o=Be("form-item"),a=ni().value,l=le([]),h=le(""),c=wl(h,100),d=le(""),f=le();let m,g=!1;const v=J(()=>n.labelPosition||(r==null?void 0:r.labelPosition)),p=J(()=>{if(v.value==="top")return{};const V=Ci(n.labelWidth||(r==null?void 0:r.labelWidth)||"");return V?{width:V}:{}}),E=J(()=>{if(v.value==="top"||r!=null&&r.inline)return{};if(!n.label&&!n.labelWidth&&C)return{};const V=Ci(n.labelWidth||(r==null?void 0:r.labelWidth)||"");return!n.label&&!i.label?{marginLeft:V}:{}}),w=J(()=>[o.b(),o.m(s.value),o.is("error",h.value==="error"),o.is("validating",h.value==="validating"),o.is("success",h.value==="success"),o.is("required",x.value||n.required),o.is("no-asterisk",r==null?void 0:r.hideRequiredAsterisk),(r==null?void 0:r.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:r==null?void 0:r.statusIcon,[o.m(`label-${v.value}`)]:v.value}]),O=J(()=>Ei(n.inlineMessage)?n.inlineMessage:(r==null?void 0:r.inlineMessage)||!1),T=J(()=>[o.e("error"),{[o.em("error","inline")]:O.value}]),S=J(()=>n.prop?ii(n.prop)?n.prop:n.prop.join("."):""),M=J(()=>!!(n.label||i.label)),P=J(()=>n.for||(l.value.length===1?l.value[0]:void 0)),y=J(()=>!P.value&&M.value),C=!!t,b=J(()=>{const V=r==null?void 0:r.model;if(!(!V||!n.prop))return Gn(V,n.prop).value}),R=J(()=>{const{required:V}=n,ee=[];n.rules&&ee.push(...Rt(n.rules));const ue=r==null?void 0:r.rules;if(ue&&n.prop){const q=Gn(ue,n.prop).value;q&&ee.push(...Rt(q))}if(V!==void 0){const q=ee.map((he,fe)=>[he,fe]).filter(([he])=>Object.keys(he).includes("required"));if(q.length>0)for(const[he,fe]of q)he.required!==V&&(ee[fe]={...he,required:V});else ee.push({required:V})}return ee}),D=J(()=>R.value.length>0),I=V=>R.value.filter(ue=>!ue.trigger||!V?!0:dt(ue.trigger)?ue.trigger.includes(V):ue.trigger===V).map(({trigger:ue,...q})=>q),x=J(()=>R.value.some(V=>V.required)),A=J(()=>{var V;return c.value==="error"&&n.showMessage&&((V=r==null?void 0:r.showMessage)!=null?V:!0)}),N=J(()=>`${n.label||""}${(r==null?void 0:r.labelSuffix)||""}`),F=V=>{h.value=V},B=V=>{var ee,ue;const{errors:q,fields:he}=V;(!q||!he)&&console.error(V),F("error"),d.value=q?(ue=(ee=q==null?void 0:q[0])==null?void 0:ee.message)!=null?ue:`${n.prop} is required`:"",r==null||r.emit("validate",n.prop,!1,d.value)},L=()=>{F("success"),r==null||r.emit("validate",n.prop,!0,"")},W=async V=>{const ee=S.value;return new Vi({[ee]:V}).validate({[ee]:b.value},{firstFields:!0}).then(()=>(L(),!0)).catch(q=>(B(q),Promise.reject(q)))},z=async(V,ee)=>{if(g||!n.prop)return!1;const ue=yt(ee);if(!D.value)return ee==null||ee(!1),!1;const q=I(V);return q.length===0?(ee==null||ee(!0),!0):(F("validating"),W(q).then(()=>(ee==null||ee(!0),!0)).catch(he=>{const{fields:fe}=he;return ee==null||ee(!1,fe),ue?!1:Promise.reject(fe)}))},j=()=>{F(""),d.value="",g=!1},H=async()=>{const V=r==null?void 0:r.model;if(!V||!n.prop)return;const ee=Gn(V,n.prop);g=!0,ee.value=ds(m),await $e(),j(),g=!1},K=V=>{l.value.includes(V)||l.value.push(V)},Z=V=>{l.value=l.value.filter(ee=>ee!==V)};xe(()=>n.error,V=>{d.value=V||"",F(V?"error":"")},{immediate:!0}),xe(()=>n.validateStatus,V=>F(V||""));const Q=Et({...Oi(n),$el:f,size:s,validateState:h,labelId:a,inputIds:l,isGroup:y,hasLabel:M,fieldValue:b,addInputId:K,removeInputId:Z,resetField:H,clearValidate:j,validate:z});return li(tr,Q),Ct(()=>{n.prop&&(r==null||r.addField(Q),m=ds(b.value))}),bn(()=>{r==null||r.removeField(Q)}),e({size:s,validateMessage:d,validateState:h,validate:z,clearValidate:j,resetField:H}),(V,ee)=>{var ue;return _(),ce("div",{ref_key:"formItemRef",ref:f,class:ie(U(w)),role:U(y)?"group":void 0,"aria-labelledby":U(y)?U(a):void 0},[ae(U(qh),{"is-auto-width":U(p).width==="auto","update-all":((ue=U(r))==null?void 0:ue.labelWidth)==="auto"},{default:se(()=>[U(M)?(_(),Te(Ai(U(P)?"label":"div"),{key:0,id:U(a),for:U(P),class:ie(U(o).e("label")),style:At(U(p))},{default:se(()=>[me(V.$slots,"label",{label:U(N)},()=>[at(Fe(U(N)),1)])]),_:3},8,["id","for","class","style"])):Ee("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),pe("div",{class:ie(U(o).e("content")),style:At(U(E))},[me(V.$slots,"default"),ae(Rl,{name:`${U(o).namespace.value}-zoom-in-top`},{default:se(()=>[U(A)?me(V.$slots,"error",{key:0,error:d.value},()=>[pe("div",{class:ie(U(T))},Fe(d.value),3)]):Ee("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var Ao=Ze(ed,[["__file","form-item.vue"]]);const td=kt(vh,{FormItem:Ao}),id=$i(Ao),nd=it({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Ki,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:u=>u===null||bt(u)||["min","max"].includes(u),default:null},name:String,placeholder:String,precision:{type:Number,validator:u=>u>=0&&u===Number.parseInt(`${u}`,10)},validateEvent:{type:Boolean,default:!0},...Vr(["ariaLabel"])}),rd={[St]:(u,e)=>e!==u,blur:u=>u instanceof FocusEvent,focus:u=>u instanceof FocusEvent,[on]:u=>bt(u)||Ii(u),[Ue]:u=>bt(u)||Ii(u)},sd=Me({name:"ElInputNumber"}),od=Me({...sd,props:nd,emits:rd,setup(u,{expose:e,emit:n}){const i=u,{t:r}=wi(),t=Be("input-number"),s=le(),o=Et({currentValue:i.modelValue,userInput:null}),{formItem:a}=En(),l=J(()=>bt(i.modelValue)&&i.modelValue<=i.min),h=J(()=>bt(i.modelValue)&&i.modelValue>=i.max),c=J(()=>{const x=p(i.step);return Ut(i.precision)?Math.max(p(i.modelValue),x):(x>i.precision,i.precision)}),d=J(()=>i.controls&&i.controlsPosition==="right"),f=Ri(),m=uo(),g=J(()=>{if(o.userInput!==null)return o.userInput;let x=o.currentValue;if(Ii(x))return"";if(bt(x)){if(Number.isNaN(x))return"";Ut(i.precision)||(x=x.toFixed(i.precision))}return x}),v=(x,A)=>{if(Ut(A)&&(A=c.value),A===0)return Math.round(x);let N=String(x);const F=N.indexOf(".");if(F===-1||!N.replace(".","").split("")[F+A])return x;const W=N.length;return N.charAt(W-1)==="5"&&(N=`${N.slice(0,Math.max(0,W-1))}6`),Number.parseFloat(Number(N).toFixed(A))},p=x=>{if(Ii(x))return 0;const A=x.toString(),N=A.indexOf(".");let F=0;return N!==-1&&(F=A.length-N-1),F},E=(x,A=1)=>bt(x)?v(x+i.step*A):o.currentValue,w=()=>{if(i.readonly||m.value||h.value)return;const x=Number(g.value)||0,A=E(x);S(A),n(on,o.currentValue),D()},O=()=>{if(i.readonly||m.value||l.value)return;const x=Number(g.value)||0,A=E(x,-1);S(A),n(on,o.currentValue),D()},T=(x,A)=>{const{max:N,min:F,step:B,precision:L,stepStrictly:W,valueOnClear:z}=i;N<F&&yn("InputNumber","min should not be greater than max.");let j=Number(x);if(Ii(x)||Number.isNaN(j))return null;if(x===""){if(z===null)return null;j=ii(z)?{min:F,max:N}[z]:z}return W&&(j=v(Math.round(j/B)*B,L),j!==x&&A&&n(Ue,j)),Ut(L)||(j=v(j,L)),(j>N||j<F)&&(j=j>N?N:F,A&&n(Ue,j)),j},S=(x,A=!0)=>{var N;const F=o.currentValue,B=T(x);if(!A){n(Ue,B);return}F===B&&x||(o.userInput=null,n(Ue,B),F!==B&&n(St,B,F),i.validateEvent&&((N=a==null?void 0:a.validate)==null||N.call(a,"change").catch(L=>ri())),o.currentValue=B)},M=x=>{o.userInput=x;const A=x===""?null:Number(x);n(on,A),S(A,!1)},P=x=>{const A=x!==""?Number(x):"";(bt(A)&&!Number.isNaN(A)||x==="")&&S(A),D(),o.userInput=null},y=()=>{var x,A;(A=(x=s.value)==null?void 0:x.focus)==null||A.call(x)},C=()=>{var x,A;(A=(x=s.value)==null?void 0:x.blur)==null||A.call(x)},b=x=>{n("focus",x)},R=x=>{var A,N;o.userInput=null,Kl()&&o.currentValue===null&&((A=s.value)!=null&&A.input)&&(s.value.input.value=""),n("blur",x),i.validateEvent&&((N=a==null?void 0:a.validate)==null||N.call(a,"blur").catch(F=>ri()))},D=()=>{o.currentValue!==i.modelValue&&(o.currentValue=i.modelValue)},I=x=>{document.activeElement===x.target&&x.preventDefault()};return xe(()=>i.modelValue,(x,A)=>{const N=T(x,!0);o.userInput===null&&N!==A&&(o.currentValue=N)},{immediate:!0}),Ct(()=>{var x;const{min:A,max:N,modelValue:F}=i,B=(x=s.value)==null?void 0:x.input;if(B.setAttribute("role","spinbutton"),Number.isFinite(N)?B.setAttribute("aria-valuemax",String(N)):B.removeAttribute("aria-valuemax"),Number.isFinite(A)?B.setAttribute("aria-valuemin",String(A)):B.removeAttribute("aria-valuemin"),B.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),B.setAttribute("aria-disabled",String(m.value)),!bt(F)&&F!=null){let L=Number(F);Number.isNaN(L)&&(L=null),n(Ue,L)}B.addEventListener("wheel",I,{passive:!1})}),so(()=>{var x,A;const N=(x=s.value)==null?void 0:x.input;N==null||N.setAttribute("aria-valuenow",`${(A=o.currentValue)!=null?A:""}`)}),e({focus:y,blur:C}),(x,A)=>(_(),ce("div",{class:ie([U(t).b(),U(t).m(U(f)),U(t).is("disabled",U(m)),U(t).is("without-controls",!x.controls),U(t).is("controls-right",U(d))]),onDragstart:Ie(()=>{},["prevent"])},[x.controls?ot((_(),ce("span",{key:0,role:"button","aria-label":U(r)("el.inputNumber.decrease"),class:ie([U(t).e("decrease"),U(t).is("disabled",U(l))]),onKeydown:Lt(O,["enter"])},[me(x.$slots,"decrease-icon",{},()=>[ae(U(Mt),null,{default:se(()=>[U(d)?(_(),Te(U(Jr),{key:0})):(_(),Te(U(Tl),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[U(vs),O]]):Ee("v-if",!0),x.controls?ot((_(),ce("span",{key:1,role:"button","aria-label":U(r)("el.inputNumber.increase"),class:ie([U(t).e("increase"),U(t).is("disabled",U(h))]),onKeydown:Lt(w,["enter"])},[me(x.$slots,"increase-icon",{},()=>[ae(U(Mt),null,{default:se(()=>[U(d)?(_(),Te(U(Ml),{key:0})):(_(),Te(U(oo),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[U(vs),w]]):Ee("v-if",!0),ae(U(co),{id:x.id,ref_key:"input",ref:s,type:"number",step:x.step,"model-value":U(g),placeholder:x.placeholder,readonly:x.readonly,disabled:U(m),size:U(f),max:x.max,min:x.min,name:x.name,"aria-label":x.ariaLabel,"validate-event":!1,onKeydown:[Lt(Ie(w,["prevent"]),["up"]),Lt(Ie(O,["prevent"]),["down"])],onBlur:R,onFocus:b,onInput:M,onChange:P},kr({_:2},[x.$slots.prefix?{name:"prefix",fn:se(()=>[me(x.$slots,"prefix")])}:void 0,x.$slots.suffix?{name:"suffix",fn:se(()=>[me(x.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var ad=Ze(od,[["__file","input-number.vue"]]);const ld=kt(ad);function ud(){const u=Sl(),e=le(0),n=11,i=J(()=>({minWidth:`${Math.max(e.value,n)}px`}));return jt(u,()=>{var t,s;e.value=(s=(t=u.value)==null?void 0:t.getBoundingClientRect().width)!=null?s:0}),{calculatorRef:u,calculatorWidth:e,inputStyle:i}}const Io=Symbol("ElSelectGroup"),Cn=Symbol("ElSelect"),dr="ElOption",hd=it({value:{type:[String,Number,Boolean,Object],required:!0},label:{type:[String,Number]},created:Boolean,disabled:Boolean});function dd(u,e){const n=gt(Cn);n||yn(dr,"usage: <el-select><el-option /></el-select/>");const i=gt(Io,{disabled:!1}),r=J(()=>h(Rt(n.props.modelValue),u.value)),t=J(()=>{var f;if(n.props.multiple){const m=Rt((f=n.props.modelValue)!=null?f:[]);return!r.value&&m.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),s=J(()=>u.label||(fi(u.value)?"":u.value)),o=J(()=>u.value||u.label||""),a=J(()=>u.disabled||e.groupDisabled||t.value),l=Gi(),h=(f=[],m)=>{if(fi(u.value)){const g=n.props.valueKey;return f&&f.some(v=>Pl(pi(v,g))===pi(m,g))}else return f&&f.includes(m)},c=()=>{!u.disabled&&!i.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(l.proxy))},d=f=>{const m=new RegExp(wu(f),"i");e.visible=m.test(String(s.value))||u.created};return xe(()=>s.value,()=>{!u.created&&!n.props.remote&&n.setSelected()}),xe(()=>u.value,(f,m)=>{const{remote:g,valueKey:v}=n.props;if((g?f!==m:!It(f,m))&&(n.onOptionDestroy(m,l.proxy),n.onOptionCreate(l.proxy)),!u.created&&!g){if(v&&fi(f)&&fi(m)&&f[v]===m[v])return;n.setSelected()}}),xe(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0}),{select:n,currentLabel:s,currentValue:o,itemSelected:r,isDisabled:a,hoverItem:c,updateOption:d}}const cd=Me({name:dr,componentName:dr,props:hd,setup(u){const e=Be("select"),n=ni(),i=J(()=>[e.be("dropdown","item"),e.is("disabled",U(o)),e.is("selected",U(s)),e.is("hovering",U(d))]),r=Et({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:t,itemSelected:s,isDisabled:o,select:a,hoverItem:l,updateOption:h}=dd(u,r),{visible:c,hover:d}=Oi(r),f=Gi().proxy;a.onOptionCreate(f),bn(()=>{const g=f.value,{selected:v}=a.states,p=v.some(E=>E.value===f.value);$e(()=>{a.states.cachedOptions.get(g)===f&&!p&&a.states.cachedOptions.delete(g)}),a.onOptionDestroy(g,f)});function m(){o.value||a.handleOptionSelect(f)}return{ns:e,id:n,containerKls:i,currentLabel:t,itemSelected:s,isDisabled:o,select:a,visible:c,hover:d,states:r,hoverItem:l,updateOption:h,selectOptionClick:m}}});function fd(u,e){return ot((_(),ce("li",{id:u.id,class:ie(u.containerKls),role:"option","aria-disabled":u.isDisabled||void 0,"aria-selected":u.itemSelected,onMousemove:u.hoverItem,onClick:Ie(u.selectOptionClick,["stop"])},[me(u.$slots,"default",{},()=>[pe("span",null,Fe(u.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[si,u.visible]])}var es=Ze(cd,[["render",fd],["__file","option.vue"]]);const pd=Me({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const u=gt(Cn),e=Be("select"),n=J(()=>u.props.popperClass),i=J(()=>u.props.multiple),r=J(()=>u.props.fitInputWidth),t=le("");function s(){var o;t.value=`${(o=u.selectRef)==null?void 0:o.offsetWidth}px`}return Ct(()=>{s(),jt(u.selectRef,s)}),{ns:e,minWidth:t,popperClass:n,isMultiple:i,isFitInputWidth:r}}});function md(u,e,n,i,r,t){return _(),ce("div",{class:ie([u.ns.b("dropdown"),u.ns.is("multiple",u.isMultiple),u.popperClass]),style:At({[u.isFitInputWidth?"width":"minWidth"]:u.minWidth})},[u.$slots.header?(_(),ce("div",{key:0,class:ie(u.ns.be("dropdown","header"))},[me(u.$slots,"header")],2)):Ee("v-if",!0),me(u.$slots,"default"),u.$slots.footer?(_(),ce("div",{key:1,class:ie(u.ns.be("dropdown","footer"))},[me(u.$slots,"footer")],2)):Ee("v-if",!0)],6)}var gd=Ze(pd,[["render",md],["__file","select-dropdown.vue"]]);const vd=(u,e)=>{const{t:n}=wi(),i=ni(),r=Be("select"),t=Be("input"),s=Et({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),o=le(),a=le(),l=le(),h=le(),c=le(),d=le(),f=le(),m=le(),g=le(),v=le(),p=le(),{isComposing:E,handleCompositionStart:w,handleCompositionUpdate:O,handleCompositionEnd:T}=ho({afterComposition:G=>ut(G)}),{wrapperRef:S,isFocused:M,handleBlur:P}=$l(c,{beforeFocus(){return A.value},afterFocus(){u.automaticDropdown&&!y.value&&(y.value=!0,s.menuVisibleOnFocus=!0)},beforeBlur(G){var ne,ve;return((ne=l.value)==null?void 0:ne.isFocusInsideContent(G))||((ve=h.value)==null?void 0:ve.isFocusInsideContent(G))},afterBlur(){var G;y.value=!1,s.menuVisibleOnFocus=!1,u.validateEvent&&((G=R==null?void 0:R.validate)==null||G.call(R,"blur").catch(ne=>ri()))}}),y=le(!1),C=le(),{form:b,formItem:R}=En(),{inputId:D}=fo(u,{formItemContext:R}),{valueOnClear:I,isEmptyValue:x}=Xs(u),A=J(()=>u.disabled||(b==null?void 0:b.disabled)),N=J(()=>dt(u.modelValue)?u.modelValue.length>0:!x(u.modelValue)),F=J(()=>{var G;return(G=b==null?void 0:b.statusIcon)!=null?G:!1}),B=J(()=>u.clearable&&!A.value&&s.inputHovering&&N.value),L=J(()=>u.remote&&u.filterable&&!u.remoteShowSuffix?"":u.suffixIcon),W=J(()=>r.is("reverse",!!(L.value&&y.value))),z=J(()=>(R==null?void 0:R.validateState)||""),j=J(()=>z.value&&Dl[z.value]),H=J(()=>u.remote?300:0),K=J(()=>u.remote&&!s.inputValue&&s.options.size===0),Z=J(()=>u.loading?u.loadingText||n("el.select.loading"):u.filterable&&s.inputValue&&s.options.size>0&&Q.value===0?u.noMatchText||n("el.select.noMatch"):s.options.size===0?u.noDataText||n("el.select.noData"):null),Q=J(()=>V.value.filter(G=>G.visible).length),V=J(()=>{const G=Array.from(s.options.values()),ne=[];return s.optionValues.forEach(ve=>{const Ae=G.findIndex(st=>st.value===ve);Ae>-1&&ne.push(G[Ae])}),ne.length>=G.length?ne:G}),ee=J(()=>Array.from(s.cachedOptions.values())),ue=J(()=>{const G=V.value.filter(ne=>!ne.created).some(ne=>ne.currentLabel===s.inputValue);return u.filterable&&u.allowCreate&&s.inputValue!==""&&!G}),q=()=>{u.filterable&&yt(u.filterMethod)||u.filterable&&u.remote&&yt(u.remoteMethod)||V.value.forEach(G=>{var ne;(ne=G.updateOption)==null||ne.call(G,s.inputValue)})},he=Ri(),fe=J(()=>["small"].includes(he.value)?"small":"default"),Ne=J({get(){return y.value&&!K.value},set(G){y.value=G}}),je=J(()=>{if(u.multiple&&!Ut(u.modelValue))return Rt(u.modelValue).length===0&&!s.inputValue;const G=dt(u.modelValue)?u.modelValue[0]:u.modelValue;return u.filterable||Ut(G)?!s.inputValue:!0}),Le=J(()=>{var G;const ne=(G=u.placeholder)!=null?G:n("el.select.placeholder");return u.multiple||!N.value?ne:s.selectedLabel}),ke=J(()=>hs?null:"mouseenter");xe(()=>u.modelValue,(G,ne)=>{u.multiple&&u.filterable&&!u.reserveKeyword&&(s.inputValue="",He("")),ze(),!It(G,ne)&&u.validateEvent&&(R==null||R.validate("change").catch(ve=>ri()))},{flush:"post",deep:!0}),xe(()=>y.value,G=>{G?He(s.inputValue):(s.inputValue="",s.previousQuery=null,s.isBeforeHide=!0),e("visible-change",G)}),xe(()=>s.options.entries(),()=>{ai&&(ze(),u.defaultFirstOption&&(u.filterable||u.remote)&&Q.value&&_e())},{flush:"post"}),xe([()=>s.hoveringIndex,V],([G])=>{bt(G)&&G>-1?C.value=V.value[G]||{}:C.value={},V.value.forEach(ne=>{ne.hover=C.value===ne})}),_s(()=>{s.isBeforeHide||q()});const He=G=>{s.previousQuery===G||E.value||(s.previousQuery=G,u.filterable&&yt(u.filterMethod)?u.filterMethod(G):u.filterable&&u.remote&&yt(u.remoteMethod)&&u.remoteMethod(G),u.defaultFirstOption&&(u.filterable||u.remote)&&Q.value?$e(_e):$e(lt))},_e=()=>{const G=V.value.filter(st=>st.visible&&!st.disabled&&!st.states.groupDisabled),ne=G.find(st=>st.created),ve=G[0],Ae=V.value.map(st=>st.value);s.hoveringIndex=Y(Ae,ne||ve)},ze=()=>{if(u.multiple)s.selectedLabel="";else{const ne=dt(u.modelValue)?u.modelValue[0]:u.modelValue,ve=Ke(ne);s.selectedLabel=ve.currentLabel,s.selected=[ve];return}const G=[];Ut(u.modelValue)||Rt(u.modelValue).forEach(ne=>{G.push(Ke(ne))}),s.selected=G},Ke=G=>{let ne;const ve=xl(G);for(let Wt=s.cachedOptions.size-1;Wt>=0;Wt--){const Dt=ee.value[Wt];if(ve?pi(Dt.value,u.valueKey)===pi(G,u.valueKey):Dt.value===G){ne={value:G,currentLabel:Dt.currentLabel,get isDisabled(){return Dt.isDisabled}};break}}if(ne)return ne;const Ae=ve?G.label:G??"";return{value:G,currentLabel:Ae}},lt=()=>{s.hoveringIndex=V.value.findIndex(G=>s.selected.some(ne=>hi(ne)===hi(G)))},Ft=()=>{s.selectionWidth=Number.parseFloat(window.getComputedStyle(a.value).width)},vt=()=>{s.collapseItemWidth=v.value.getBoundingClientRect().width},nt=()=>{var G,ne;(ne=(G=l.value)==null?void 0:G.updatePopper)==null||ne.call(G)},Ye=()=>{var G,ne;(ne=(G=h.value)==null?void 0:G.updatePopper)==null||ne.call(G)},Je=()=>{s.inputValue.length>0&&!y.value&&(y.value=!0),He(s.inputValue)},ut=G=>{if(s.inputValue=G.target.value,u.remote)re();else return Je()},re=po(()=>{Je()},H.value),de=G=>{It(u.modelValue,G)||e(St,G)},Oe=G=>eu(G,ne=>{const ve=s.cachedOptions.get(ne);return ve&&!ve.disabled&&!ve.states.groupDisabled}),ye=G=>{if(u.multiple&&G.code!==Qe.delete&&G.target.value.length<=0){const ne=Rt(u.modelValue).slice(),ve=Oe(ne);if(ve<0)return;const Ae=ne[ve];ne.splice(ve,1),e(Ue,ne),de(ne),e("remove-tag",Ae)}},Re=(G,ne)=>{const ve=s.selected.indexOf(ne);if(ve>-1&&!A.value){const Ae=Rt(u.modelValue).slice();Ae.splice(ve,1),e(Ue,Ae),de(Ae),e("remove-tag",ne.value)}G.stopPropagation(),ui()},$=G=>{G.stopPropagation();const ne=u.multiple?[]:I.value;if(u.multiple)for(const ve of s.selected)ve.isDisabled&&ne.push(ve.value);e(Ue,ne),de(ne),s.hoveringIndex=-1,y.value=!1,e("clear"),ui()},X=G=>{var ne;if(u.multiple){const ve=Rt((ne=u.modelValue)!=null?ne:[]).slice(),Ae=Y(ve,G);Ae>-1?ve.splice(Ae,1):(u.multipleLimit<=0||ve.length<u.multipleLimit)&&ve.push(G.value),e(Ue,ve),de(ve),G.created&&He(""),u.filterable&&!u.reserveKeyword&&(s.inputValue="")}else e(Ue,G.value),de(G.value),y.value=!1;ui(),!y.value&&$e(()=>{oe(G)})},Y=(G,ne)=>Ut(ne)?-1:fi(ne.value)?G.findIndex(ve=>It(pi(ve,u.valueKey),hi(ne))):G.indexOf(ne.value),oe=G=>{var ne,ve,Ae,st,Wt;const Dt=dt(G)?G[0]:G;let di=null;if(Dt!=null&&Dt.value){const Jt=V.value.filter(zn=>zn.value===Dt.value);Jt.length>0&&(di=Jt[0].$el)}if(l.value&&di){const Jt=(st=(Ae=(ve=(ne=l.value)==null?void 0:ne.popperRef)==null?void 0:ve.contentRef)==null?void 0:Ae.querySelector)==null?void 0:st.call(Ae,`.${r.be("dropdown","wrap")}`);Jt&&go(Jt,di)}(Wt=p.value)==null||Wt.handleScroll()},ge=G=>{s.options.set(G.value,G),s.cachedOptions.set(G.value,G)},De=(G,ne)=>{s.options.get(G)===ne&&s.options.delete(G)},rt=J(()=>{var G,ne;return(ne=(G=l.value)==null?void 0:G.popperRef)==null?void 0:ne.contentRef}),An=()=>{s.isBeforeHide=!1,$e(()=>{var G;(G=p.value)==null||G.update(),oe(s.selected)})},ui=()=>{var G;(G=c.value)==null||G.focus()},In=()=>{var G;if(y.value){y.value=!1,$e(()=>{var ne;return(ne=c.value)==null?void 0:ne.blur()});return}(G=c.value)==null||G.blur()},Fn=G=>{$(G)},Bn=G=>{if(y.value=!1,M.value){const ne=new FocusEvent("focus",G);$e(()=>P(ne))}},Nn=()=>{s.inputValue.length>0?s.inputValue="":y.value=!1},Xi=()=>{A.value||(hs&&(s.inputHovering=!0),s.menuVisibleOnFocus?s.menuVisibleOnFocus=!1:y.value=!y.value)},jn=()=>{if(!y.value)Xi();else{const G=V.value[s.hoveringIndex];G&&!G.isDisabled&&X(G)}},hi=G=>fi(G.value)?pi(G.value,u.valueKey):G.value,Un=J(()=>V.value.filter(G=>G.visible).every(G=>G.isDisabled)),Yi=J(()=>u.multiple?u.collapseTags?s.selected.slice(0,u.maxCollapseTags):s.selected:[]),Wn=J(()=>u.multiple?u.collapseTags?s.selected.slice(u.maxCollapseTags):[]:[]),Si=G=>{if(!y.value){y.value=!0;return}if(!(s.options.size===0||Q.value===0||E.value)&&!Un.value){G==="next"?(s.hoveringIndex++,s.hoveringIndex===s.options.size&&(s.hoveringIndex=0)):G==="prev"&&(s.hoveringIndex--,s.hoveringIndex<0&&(s.hoveringIndex=s.options.size-1));const ne=V.value[s.hoveringIndex];(ne.isDisabled||!ne.visible)&&Si(G),$e(()=>oe(C.value))}},Zi=()=>{if(!a.value)return 0;const G=window.getComputedStyle(a.value);return Number.parseFloat(G.gap||"6px")},Pi=J(()=>{const G=Zi();return{maxWidth:`${v.value&&u.maxCollapseTags===1?s.selectionWidth-s.collapseItemWidth-G:s.selectionWidth}px`}}),qi=J(()=>({maxWidth:`${s.selectionWidth}px`})),_i=G=>{e("popup-scroll",G)};return jt(a,Ft),jt(m,nt),jt(S,nt),jt(g,Ye),jt(v,vt),Ct(()=>{ze()}),{inputId:D,contentId:i,nsSelect:r,nsInput:t,states:s,isFocused:M,expanded:y,optionsArray:V,hoverOption:C,selectSize:he,filteredOptionsCount:Q,updateTooltip:nt,updateTagTooltip:Ye,debouncedOnInputChange:re,onInput:ut,deletePrevTag:ye,deleteTag:Re,deleteSelected:$,handleOptionSelect:X,scrollToOption:oe,hasModelValue:N,shouldShowPlaceholder:je,currentPlaceholder:Le,mouseEnterEventName:ke,needStatusIcon:F,showClose:B,iconComponent:L,iconReverse:W,validateState:z,validateIcon:j,showNewOption:ue,updateOptions:q,collapseTagSize:fe,setSelected:ze,selectDisabled:A,emptyText:Z,handleCompositionStart:w,handleCompositionUpdate:O,handleCompositionEnd:T,onOptionCreate:ge,onOptionDestroy:De,handleMenuEnter:An,focus:ui,blur:In,handleClearClick:Fn,handleClickOutside:Bn,handleEsc:Nn,toggleMenu:Xi,selectOption:jn,getValueKey:hi,navigateOptions:Si,dropdownMenuVisible:Ne,showTagList:Yi,collapseTagList:Wn,popupScroll:_i,tagStyle:Pi,collapseTagStyle:qi,popperRef:rt,inputRef:c,tooltipRef:l,tagTooltipRef:h,prefixRef:d,suffixRef:f,selectRef:o,wrapperRef:S,selectionRef:a,scrollbarRef:p,menuRef:m,tagMenuRef:g,collapseItemRef:v}};var bd=Me({name:"ElOptions",setup(u,{slots:e}){const n=gt(Cn);let i=[];return()=>{var r,t;const s=(r=e.default)==null?void 0:r.call(e),o=[];function a(l){dt(l)&&l.forEach(h=>{var c,d,f,m;const g=(c=(h==null?void 0:h.type)||{})==null?void 0:c.name;g==="ElOptionGroup"?a(!ii(h.children)&&!dt(h.children)&&yt((d=h.children)==null?void 0:d.default)?(f=h.children)==null?void 0:f.default():h.children):g==="ElOption"?o.push((m=h.props)==null?void 0:m.value):dt(h.children)&&a(h.children)})}return s.length&&a((t=s[0])==null?void 0:t.children),It(o,i)||(i=o,n&&(n.states.optionValues=o)),s}}});const yd=it({name:String,id:String,modelValue:{type:Xe([Array,String,Number,Boolean,Object]),default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Ki,effect:{type:Xe(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Xe(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:qn.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:er,default:Ys},fitInputWidth:Boolean,suffixIcon:{type:er,default:Jr},tagType:{...pn.type,default:"info"},tagEffect:{...pn.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Xe(String),values:Qs,default:"bottom-start"},fallbackPlacements:{type:Xe(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:qn.appendTo,...Js,...Vr(["ariaLabel"])});kl.scroll;const Rs="ElSelect",Ed=Me({name:Rs,componentName:Rs,components:{ElSelectMenu:gd,ElOption:es,ElOptions:bd,ElTag:ir,ElScrollbar:Zr,ElTooltip:_n,ElIcon:Mt},directives:{ClickOutside:qs},props:yd,emits:[Ue,St,"remove-tag","clear","visible-change","focus","blur","popup-scroll"],setup(u,{emit:e}){const n=J(()=>{const{modelValue:a,multiple:l}=u,h=l?[]:void 0;return dt(a)?l?a:h:l?h:a}),i=Et({...Oi(u),modelValue:n}),r=vd(i,e),{calculatorRef:t,inputStyle:s}=ud();li(Cn,Et({props:i,states:r.states,selectRef:r.selectRef,optionsArray:r.optionsArray,setSelected:r.setSelected,handleOptionSelect:r.handleOptionSelect,onOptionCreate:r.onOptionCreate,onOptionDestroy:r.onOptionDestroy}));const o=J(()=>u.multiple?r.states.selected.map(a=>a.currentLabel):r.states.selectedLabel);return{...r,modelValue:n,selectedLabel:o,calculatorRef:t,inputStyle:s}}});function Cd(u,e){const n=Ge("el-tag"),i=Ge("el-tooltip"),r=Ge("el-icon"),t=Ge("el-option"),s=Ge("el-options"),o=Ge("el-scrollbar"),a=Ge("el-select-menu"),l=Ll("click-outside");return ot((_(),ce("div",{ref:"selectRef",class:ie([u.nsSelect.b(),u.nsSelect.m(u.selectSize)]),[Al(u.mouseEnterEventName)]:h=>u.states.inputHovering=!0,onMouseleave:h=>u.states.inputHovering=!1},[ae(i,{ref:"tooltipRef",visible:u.dropdownMenuVisible,placement:u.placement,teleported:u.teleported,"popper-class":[u.nsSelect.e("popper"),u.popperClass],"popper-options":u.popperOptions,"fallback-placements":u.fallbackPlacements,effect:u.effect,pure:"",trigger:"click",transition:`${u.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:u.persistent,"append-to":u.appendTo,"show-arrow":u.showArrow,offset:u.offset,onBeforeShow:u.handleMenuEnter,onHide:h=>u.states.isBeforeHide=!1},{default:se(()=>{var h;return[pe("div",{ref:"wrapperRef",class:ie([u.nsSelect.e("wrapper"),u.nsSelect.is("focused",u.isFocused),u.nsSelect.is("hovering",u.states.inputHovering),u.nsSelect.is("filterable",u.filterable),u.nsSelect.is("disabled",u.selectDisabled)]),onClick:Ie(u.toggleMenu,["prevent"])},[u.$slots.prefix?(_(),ce("div",{key:0,ref:"prefixRef",class:ie(u.nsSelect.e("prefix"))},[me(u.$slots,"prefix")],2)):Ee("v-if",!0),pe("div",{ref:"selectionRef",class:ie([u.nsSelect.e("selection"),u.nsSelect.is("near",u.multiple&&!u.$slots.prefix&&!!u.states.selected.length)])},[u.multiple?me(u.$slots,"tag",{key:0},()=>[(_(!0),ce(Tt,null,_t(u.showTagList,c=>(_(),ce("div",{key:u.getValueKey(c),class:ie(u.nsSelect.e("selected-item"))},[ae(n,{closable:!u.selectDisabled&&!c.isDisabled,size:u.collapseTagSize,type:u.tagType,effect:u.tagEffect,"disable-transitions":"",style:At(u.tagStyle),onClose:d=>u.deleteTag(d,c)},{default:se(()=>[pe("span",{class:ie(u.nsSelect.e("tags-text"))},[me(u.$slots,"label",{label:c.currentLabel,value:c.value},()=>[at(Fe(c.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),u.collapseTags&&u.states.selected.length>u.maxCollapseTags?(_(),Te(i,{key:0,ref:"tagTooltipRef",disabled:u.dropdownMenuVisible||!u.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:u.effect,placement:"bottom",teleported:u.teleported},{default:se(()=>[pe("div",{ref:"collapseItemRef",class:ie(u.nsSelect.e("selected-item"))},[ae(n,{closable:!1,size:u.collapseTagSize,type:u.tagType,effect:u.tagEffect,"disable-transitions":"",style:At(u.collapseTagStyle)},{default:se(()=>[pe("span",{class:ie(u.nsSelect.e("tags-text"))}," + "+Fe(u.states.selected.length-u.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:se(()=>[pe("div",{ref:"tagMenuRef",class:ie(u.nsSelect.e("selection"))},[(_(!0),ce(Tt,null,_t(u.collapseTagList,c=>(_(),ce("div",{key:u.getValueKey(c),class:ie(u.nsSelect.e("selected-item"))},[ae(n,{class:"in-tooltip",closable:!u.selectDisabled&&!c.isDisabled,size:u.collapseTagSize,type:u.tagType,effect:u.tagEffect,"disable-transitions":"",onClose:d=>u.deleteTag(d,c)},{default:se(()=>[pe("span",{class:ie(u.nsSelect.e("tags-text"))},[me(u.$slots,"label",{label:c.currentLabel,value:c.value},()=>[at(Fe(c.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Ee("v-if",!0)]):Ee("v-if",!0),pe("div",{class:ie([u.nsSelect.e("selected-item"),u.nsSelect.e("input-wrapper"),u.nsSelect.is("hidden",!u.filterable)])},[ot(pe("input",{id:u.inputId,ref:"inputRef","onUpdate:modelValue":c=>u.states.inputValue=c,type:"text",name:u.name,class:ie([u.nsSelect.e("input"),u.nsSelect.is(u.selectSize)]),disabled:u.selectDisabled,autocomplete:u.autocomplete,style:At(u.inputStyle),tabindex:u.tabindex,role:"combobox",readonly:!u.filterable,spellcheck:"false","aria-activedescendant":((h=u.hoverOption)==null?void 0:h.id)||"","aria-controls":u.contentId,"aria-expanded":u.dropdownMenuVisible,"aria-label":u.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Lt(Ie(c=>u.navigateOptions("next"),["stop","prevent"]),["down"]),Lt(Ie(c=>u.navigateOptions("prev"),["stop","prevent"]),["up"]),Lt(Ie(u.handleEsc,["stop","prevent"]),["esc"]),Lt(Ie(u.selectOption,["stop","prevent"]),["enter"]),Lt(Ie(u.deletePrevTag,["stop"]),["delete"])],onCompositionstart:u.handleCompositionStart,onCompositionupdate:u.handleCompositionUpdate,onCompositionend:u.handleCompositionEnd,onInput:u.onInput,onClick:Ie(u.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[Zs,u.states.inputValue]]),u.filterable?(_(),ce("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:ie(u.nsSelect.e("input-calculator")),textContent:Fe(u.states.inputValue)},null,10,["textContent"])):Ee("v-if",!0)],2),u.shouldShowPlaceholder?(_(),ce("div",{key:1,class:ie([u.nsSelect.e("selected-item"),u.nsSelect.e("placeholder"),u.nsSelect.is("transparent",!u.hasModelValue||u.expanded&&!u.states.inputValue)])},[u.hasModelValue?me(u.$slots,"label",{key:0,label:u.currentPlaceholder,value:u.modelValue},()=>[pe("span",null,Fe(u.currentPlaceholder),1)]):(_(),ce("span",{key:1},Fe(u.currentPlaceholder),1))],2)):Ee("v-if",!0)],2),pe("div",{ref:"suffixRef",class:ie(u.nsSelect.e("suffix"))},[u.iconComponent&&!u.showClose?(_(),Te(r,{key:0,class:ie([u.nsSelect.e("caret"),u.nsSelect.e("icon"),u.iconReverse])},{default:se(()=>[(_(),Te(Ai(u.iconComponent)))]),_:1},8,["class"])):Ee("v-if",!0),u.showClose&&u.clearIcon?(_(),Te(r,{key:1,class:ie([u.nsSelect.e("caret"),u.nsSelect.e("icon"),u.nsSelect.e("clear")]),onClick:u.handleClearClick},{default:se(()=>[(_(),Te(Ai(u.clearIcon)))]),_:1},8,["class","onClick"])):Ee("v-if",!0),u.validateState&&u.validateIcon&&u.needStatusIcon?(_(),Te(r,{key:2,class:ie([u.nsInput.e("icon"),u.nsInput.e("validateIcon"),u.nsInput.is("loading",u.validateState==="validating")])},{default:se(()=>[(_(),Te(Ai(u.validateIcon)))]),_:1},8,["class"])):Ee("v-if",!0)],2)],10,["onClick"])]}),content:se(()=>[ae(a,{ref:"menuRef"},{default:se(()=>[u.$slots.header?(_(),ce("div",{key:0,class:ie(u.nsSelect.be("dropdown","header")),onClick:Ie(()=>{},["stop"])},[me(u.$slots,"header")],10,["onClick"])):Ee("v-if",!0),ot(ae(o,{id:u.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":u.nsSelect.be("dropdown","wrap"),"view-class":u.nsSelect.be("dropdown","list"),class:ie([u.nsSelect.is("empty",u.filteredOptionsCount===0)]),role:"listbox","aria-label":u.ariaLabel,"aria-orientation":"vertical",onScroll:u.popupScroll},{default:se(()=>[u.showNewOption?(_(),Te(t,{key:0,value:u.states.inputValue,created:!0},null,8,["value"])):Ee("v-if",!0),ae(s,null,{default:se(()=>[me(u.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label","onScroll"]),[[si,u.states.options.size>0&&!u.loading]]),u.$slots.loading&&u.loading?(_(),ce("div",{key:1,class:ie(u.nsSelect.be("dropdown","loading"))},[me(u.$slots,"loading")],2)):u.loading||u.filteredOptionsCount===0?(_(),ce("div",{key:2,class:ie(u.nsSelect.be("dropdown","empty"))},[me(u.$slots,"empty",{},()=>[pe("span",null,Fe(u.emptyText),1)])],2)):Ee("v-if",!0),u.$slots.footer?(_(),ce("div",{key:3,class:ie(u.nsSelect.be("dropdown","footer")),onClick:Ie(()=>{},["stop"])},[me(u.$slots,"footer")],10,["onClick"])):Ee("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[l,u.handleClickOutside,u.popperRef]])}var Od=Ze(Ed,[["render",Cd],["__file","select.vue"]]);const wd=Me({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(u){const e=Be("select"),n=le(),i=Gi(),r=le([]);li(Io,Et({...Oi(u)}));const t=J(()=>r.value.some(l=>l.visible===!0)),s=l=>{var h;return l.type.name==="ElOption"&&!!((h=l.component)!=null&&h.proxy)},o=l=>{const h=Rt(l),c=[];return h.forEach(d=>{var f;Fl(d)&&(s(d)?c.push(d.component.proxy):dt(d.children)&&d.children.length?c.push(...o(d.children)):(f=d.component)!=null&&f.subTree&&c.push(...o(d.component.subTree)))}),c},a=()=>{r.value=o(i.subTree)};return Ct(()=>{a()}),Il(n,a,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:t,ns:e}}});function Rd(u,e,n,i,r,t){return ot((_(),ce("ul",{ref:"groupRef",class:ie(u.ns.be("group","wrap"))},[pe("li",{class:ie(u.ns.be("group","title"))},Fe(u.label),3),pe("li",null,[pe("ul",{class:ie(u.ns.b("group"))},[me(u.$slots,"default")],2)])],2)),[[si,u.visible]])}var Fo=Ze(wd,[["render",Rd],["__file","option-group.vue"]]);const Td=kt(Od,{Option:es,OptionGroup:Fo}),Md=$i(es);$i(Fo);class qe{constructor(e){this.table=e}reloadData(e,n,i){return this.table.dataLoader.load(e,void 0,void 0,void 0,n,i)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(e){return this.table.modules.layout.layout(e)}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(e){return this.table.eventBus.subscribed(e)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(e){return this.table.externalEvents.subscribed(e)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(e){return this.table.options[e]}setOption(e,n){return typeof n<"u"&&(this.table.options[e]=n),this.table.options[e]}deprecationCheck(e,n,i){return this.table.deprecationAdvisor.check(e,n,i)}deprecationCheckMsg(e,n){return this.table.deprecationAdvisor.checkMsg(e,n)}deprecationMsg(e){return this.table.deprecationAdvisor.msg(e)}module(e){return this.table.module(e)}}class Pe{static elVisible(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)}static elOffset(e){var n=e.getBoundingClientRect();return{top:n.top+window.pageYOffset-document.documentElement.clientTop,left:n.left+window.pageXOffset-document.documentElement.clientLeft}}static retrieveNestedData(e,n,i){var r=e?n.split(e):[n],t=r.length,s;for(let o=0;o<t&&(i=i[r[o]],s=i,!!i);o++);return s}static deepClone(e,n,i=[]){var r={}.__proto__,t=[].__proto__;n||(n=Object.assign(Array.isArray(e)?[]:{},e));for(var s in e){let o=e[s],a,l;o!=null&&typeof o=="object"&&(o.__proto__===r||o.__proto__===t)&&(a=i.findIndex(h=>h.subject===o),a>-1?n[s]=i[a].copy:(l=Object.assign(Array.isArray(o)?[]:{},o),i.unshift({subject:o,copy:l}),n[s]=this.deepClone(o,l,i)))}return n}}let Sd=class Bo extends qe{constructor(e,n,i){super(e),this.element=n,this.container=this._lookupContainer(),this.parent=i,this.reversedX=!1,this.childPopup=null,this.blurable=!1,this.blurCallback=null,this.blurEventsBound=!1,this.renderedCallback=null,this.visible=!1,this.hideable=!0,this.element.classList.add("tabulator-popup-container"),this.blurEvent=this.hide.bind(this,!1),this.escEvent=this._escapeCheck.bind(this),this.destroyBinding=this.tableDestroyed.bind(this),this.destroyed=!1}tableDestroyed(){this.destroyed=!0,this.hide(!0)}_lookupContainer(){var e=this.table.options.popupContainer;return typeof e=="string"?(e=document.querySelector(e),e||console.warn("Menu Error - no container element found matching selector:",this.table.options.popupContainer,"(defaulting to document body)")):e===!0&&(e=this.table.element),e&&!this._checkContainerIsParent(e)&&(e=!1,console.warn("Menu Error - container element does not contain this table:",this.table.options.popupContainer,"(defaulting to document body)")),e||(e=document.body),e}_checkContainerIsParent(e,n=this.table.element){return e===n?!0:n.parentNode?this._checkContainerIsParent(e,n.parentNode):!1}renderCallback(e){this.renderedCallback=e}containerEventCoords(e){var n=!(e instanceof MouseEvent),i=n?e.touches[0].pageX:e.pageX,r=n?e.touches[0].pageY:e.pageY;if(this.container!==document.body){let t=Pe.elOffset(this.container);i-=t.left,r-=t.top}return{x:i,y:r}}elementPositionCoords(e,n="right"){var i=Pe.elOffset(e),r,t,s;switch(this.container!==document.body&&(r=Pe.elOffset(this.container),i.left-=r.left,i.top-=r.top),n){case"right":t=i.left+e.offsetWidth,s=i.top-1;break;case"bottom":t=i.left,s=i.top+e.offsetHeight;break;case"left":t=i.left,s=i.top-1;break;case"top":t=i.left,s=i.top;break;case"center":t=i.left+e.offsetWidth/2,s=i.top+e.offsetHeight/2;break}return{x:t,y:s,offset:i}}show(e,n){var i,r,t,s,o;return this.destroyed||this.table.destroyed?this:(e instanceof HTMLElement?(t=e,o=this.elementPositionCoords(e,n),s=o.offset,i=o.x,r=o.y):typeof e=="number"?(s={top:0,left:0},i=e,r=n):(o=this.containerEventCoords(e),i=o.x,r=o.y,this.reversedX=!1),this.element.style.top=r+"px",this.element.style.left=i+"px",this.container.appendChild(this.element),typeof this.renderedCallback=="function"&&this.renderedCallback(),this._fitToScreen(i,r,t,s,n),this.visible=!0,this.subscribe("table-destroy",this.destroyBinding),this.element.addEventListener("mousedown",a=>{a.stopPropagation()}),this)}_fitToScreen(e,n,i,r,t){var s=this.container===document.body?document.documentElement.scrollTop:this.container.scrollTop;(e+this.element.offsetWidth>=this.container.offsetWidth||this.reversedX)&&(this.element.style.left="",i?this.element.style.right=this.container.offsetWidth-r.left+"px":this.element.style.right=this.container.offsetWidth-e+"px",this.reversedX=!0);let o=Math.max(this.container.offsetHeight,s?this.container.scrollHeight:0);if(n+this.element.offsetHeight>o)if(i)switch(t){case"bottom":this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight-i.offsetHeight-1+"px";break;default:this.element.style.top=parseInt(this.element.style.top)-this.element.offsetHeight+i.offsetHeight+1+"px"}else this.element.style.height=o+"px"}isVisible(){return this.visible}hideOnBlur(e){return this.blurable=!0,this.visible&&(setTimeout(()=>{this.visible&&(this.table.rowManager.element.addEventListener("scroll",this.blurEvent),this.subscribe("cell-editing",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),document.body.addEventListener("mousedown",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent),this.blurEventsBound=!0)},100),this.blurCallback=e),this}_escapeCheck(e){e.keyCode==27&&this.hide()}blockHide(){this.hideable=!1}restoreHide(){this.hideable=!0}hide(e=!1){return this.visible&&this.hideable&&(this.blurable&&this.blurEventsBound&&(document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),document.body.removeEventListener("mousedown",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent),this.unsubscribe("cell-editing",this.blurEvent),this.blurEventsBound=!1),this.childPopup&&this.childPopup.hide(),this.parent&&(this.parent.childPopup=null),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.visible=!1,this.blurCallback&&!e&&this.blurCallback(),this.unsubscribe("table-destroy",this.destroyBinding)),this}child(e){return this.childPopup&&this.childPopup.hide(),this.childPopup=new Bo(this.table,e,this),this.childPopup}};class Ce extends qe{constructor(e,n){super(e),this._handler=null}initialize(){}registerTableOption(e,n){this.table.optionsList.register(e,n)}registerColumnOption(e,n){this.table.columnManager.optionsList.register(e,n)}registerTableFunction(e,n){typeof this.table[e]>"u"?this.table[e]=(...i)=>(this.table.initGuard(e),n(...i)):console.warn("Unable to bind table function, name already in use",e)}registerComponentFunction(e,n,i){return this.table.componentFunctionBinder.bind(e,n,i)}registerDataHandler(e,n){this.table.rowManager.registerDataPipelineHandler(e,n),this._handler=e}registerDisplayHandler(e,n){this.table.rowManager.registerDisplayPipelineHandler(e,n),this._handler=e}displayRows(e){var n=this.table.rowManager.displayRows.length-1,i;if(this._handler&&(i=this.table.rowManager.displayPipeline.findIndex(r=>r.handler===this._handler),i>-1&&(n=i)),e&&(n=n+e),this._handler)return n>-1?this.table.rowManager.getDisplayRows(n):this.activeRows()}activeRows(){return this.table.rowManager.activeRows}refreshData(e,n){n||(n=this._handler),n&&this.table.rowManager.refreshActiveData(n,!1,e)}footerAppend(e){return this.table.footerManager.append(e)}footerPrepend(e){return this.table.footerManager.prepend(e)}footerRemove(e){return this.table.footerManager.remove(e)}popup(e,n){return new Sd(this.table,e,n)}alert(e,n){return this.table.alertManager.alert(e,n)}clearAlert(){return this.table.alertManager.clear()}}var Pd={rownum:function(u,e,n,i,r,t){return t.getPosition()}};const gi=class gi extends Ce{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var n=!1,i={};this.allowedTypes.forEach(r=>{var t="accessor"+(r.charAt(0).toUpperCase()+r.slice(1)),s;e.definition[t]&&(s=this.lookupAccessor(e.definition[t]),s&&(n=!0,i[t]={accessor:s,params:e.definition[t+"Params"]||{}}))}),n&&(e.modules.accessor=i)}lookupAccessor(e){var n=!1;switch(typeof e){case"string":gi.accessors[e]?n=gi.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":n=e;break}return n}transformRow(e,n){var i="accessor"+(n.charAt(0).toUpperCase()+n.slice(1)),r=e.getComponent(),t=Pe.deepClone(e.data||{});return this.table.columnManager.traverse(function(s){var o,a,l,h;s.modules.accessor&&(a=s.modules.accessor[i]||s.modules.accessor.accessor||!1,a&&(o=s.getFieldValue(t),o!="undefined"&&(h=s.getComponent(),l=typeof a.params=="function"?a.params(o,t,n,h,r):a.params,s.setFieldValue(t,a.accessor(o,t,n,l,h,r)))))}),t}};te(gi,"moduleName","accessor"),te(gi,"accessors",Pd);let cr=gi;var Dd={method:"GET"};function fr(u,e){var n=[];if(e=e||"",Array.isArray(u))u.forEach((r,t)=>{n=n.concat(fr(r,e?e+"["+t+"]":t))});else if(typeof u=="object")for(var i in u)n=n.concat(fr(u[i],e?e+"["+i+"]":i));else n.push({key:e,value:u});return n}function xd(u){var e=fr(u),n=[];return e.forEach(function(i){n.push(encodeURIComponent(i.key)+"="+encodeURIComponent(i.value))}),n.join("&")}function No(u,e,n){return u&&n&&Object.keys(n).length&&(!e.method||e.method.toLowerCase()=="get")&&(e.method="get",u+=(u.includes("?")?"&":"?")+xd(n)),u}function Ld(u,e,n){var i;return new Promise((r,t)=>{if(u=this.urlGenerator.call(this.table,u,e,n),e.method.toUpperCase()!="GET")if(i=typeof this.table.options.ajaxContentType=="object"?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType],i){for(var s in i.headers)e.headers||(e.headers={}),typeof e.headers[s]>"u"&&(e.headers[s]=i.headers[s]);e.body=i.body.call(this,u,e,n)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);u?(typeof e.headers>"u"&&(e.headers={}),typeof e.headers.Accept>"u"&&(e.headers.Accept="application/json"),typeof e.headers["X-Requested-With"]>"u"&&(e.headers["X-Requested-With"]="XMLHttpRequest"),typeof e.mode>"u"&&(e.mode="cors"),e.mode=="cors"?(typeof e.headers.Origin>"u"&&(e.headers.Origin=window.location.origin),typeof e.credentials>"u"&&(e.credentials="same-origin")):typeof e.credentials>"u"&&(e.credentials="include"),fetch(u,e).then(o=>{o.ok?o.json().then(a=>{r(a)}).catch(a=>{t(a),console.warn("Ajax Load Error - Invalid JSON returned",a)}):(console.error("Ajax Load Error - Connection Error: "+o.status,o.statusText),t(o))}).catch(o=>{console.error("Ajax Load Error - Connection Error: ",o),t(o)})):(console.warn("Ajax Load Error - No URL Set"),r([]))})}function pr(u,e){var n=[];if(e=e||"",Array.isArray(u))u.forEach((r,t)=>{n=n.concat(pr(r,e?e+"["+t+"]":t))});else if(typeof u=="object")for(var i in u)n=n.concat(pr(u[i],e?e+"["+i+"]":i));else n.push({key:e,value:u});return n}var Ad={json:{headers:{"Content-Type":"application/json"},body:function(u,e,n){return JSON.stringify(n)}},form:{headers:{},body:function(u,e,n){var i=pr(n),r=new FormData;return i.forEach(function(t){r.append(t.key,t.value)}),r}}};const Ot=class Ot extends Ce{constructor(e){super(e),this.config={},this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=Ot.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||Ot.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||Ot.defaultURLGenerator,this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.setDefaultConfig(this.table.options.ajaxConfig),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-params",this.requestParams.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestParams(e,n,i,r){var t=this.table.options.ajaxParams;return t&&(typeof t=="function"&&(t=t.call(this.table)),r=Object.assign(Object.assign({},t),r)),r}requestDataCheck(e,n,i,r){return!!(!e&&this.url||typeof e=="string")}requestData(e,n,i,r,t){var s;return!t&&this.requestDataCheck(e)?(e&&this.setUrl(e),s=this.generateConfig(i),this.sendRequest(this.url,n,s)):t}setDefaultConfig(e={}){this.config=Object.assign({},Ot.defaultConfig),typeof e=="string"?this.config.method=e:Object.assign(this.config,e)}generateConfig(e={}){var n=Object.assign({},this.config);return typeof e=="string"?n.method=e:Object.assign(n,e),n}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e,n,i){return this.table.options.ajaxRequesting.call(this.table,e,n)!==!1?this.loaderPromise(e,i,n).then(r=>(this.table.options.ajaxResponse&&(r=this.table.options.ajaxResponse.call(this.table,e,n,r)),r)):Promise.reject()}};te(Ot,"moduleName","ajax"),te(Ot,"defaultConfig",Dd),te(Ot,"defaultURLGenerator",No),te(Ot,"defaultLoaderPromise",Ld),te(Ot,"contentTypeFormatters",Ad);let mr=Ot;var Id={replace:function(u){return this.table.setData(u)},update:function(u){return this.table.updateOrAddData(u)},insert:function(u){return this.table.addData(u)}},Fd={table:function(u){var e=[],n=!0,i=this.table.columnManager.columns,r=[],t=[];return u=u.split(`
`),u.forEach(function(s){e.push(s.split("	"))}),e.length&&!(e.length===1&&e[0].length<2)?(e[0].forEach(function(s){var o=i.find(function(a){return s&&a.definition.title&&s.trim()&&a.definition.title.trim()===s.trim()});o?r.push(o):n=!1}),n||(n=!0,r=[],e[0].forEach(function(s){var o=i.find(function(a){return s&&a.field&&s.trim()&&a.field.trim()===s.trim()});o?r.push(o):n=!1}),n||(r=this.table.columnManager.columnsByIndex)),n&&e.shift(),e.forEach(function(s){var o={};s.forEach(function(a,l){r[l]&&(o[r[l].field]=a)}),t.push(o)}),t):!1}},Bd={copyToClipboard:["ctrl + 67","meta + 67"]},Nd={copyToClipboard:function(u){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},jd={keybindings:{bindings:Bd,actions:Nd}};const zt=class zt extends Ce{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(this.mode===!0||this.mode==="copy")&&this.table.element.addEventListener("copy",e=>{var n,i,r;this.blocked||(e.preventDefault(),this.customSelection?(n=this.customSelection,this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n))):(r=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard"),i=this.table.modules.export.generateHTMLTable(r),n=i?this.generatePlainContent(r):"",this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n),i=this.table.options.clipboardCopyFormatter("html",i))),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",n):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",n),i&&e.clipboardData.setData("text/html",i)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",n),i&&e.originalEvent.clipboardData.setData("text/html",i)),this.dispatchExternal("clipboardCopied",n,i),this.reset())}),(this.mode===!0||this.mode==="paste")&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var n=[];return e.forEach(i=>{var r=[];i.columns.forEach(t=>{var s="";if(t)if(i.type==="group"&&(t.value=t.component.getKey()),t.value===null)s="";else switch(typeof t.value){case"object":s=JSON.stringify(t.value);break;case"undefined":s="";break;default:s=t.value}r.push(s)}),n.push(r.join("	"))}),n.join(`
`)}copy(e,n){var i,r;this.blocked=!1,this.customSelection=!1,(this.mode===!0||this.mode==="copy")&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,typeof window.getSelection<"u"&&typeof document.createRange<"u"?(e=document.createRange(),e.selectNodeContents(this.table.element),i=window.getSelection(),i.toString()&&n&&(this.customSelection=i.toString()),i.removeAllRanges(),i.addRange(e)):typeof document.selection<"u"&&typeof document.body.createTextRange<"u"&&(r=document.body.createTextRange(),r.moveToElementText(this.table.element),r.select()),document.execCommand("copy"),i&&i.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=zt.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e;break}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=zt.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e;break}}paste(e){var n,i,r;this.checkPasteOrigin(e)&&(n=this.getPasteData(e),i=this.pasteParser.call(this,n),i?(e.preventDefault(),this.table.modExists("mutator")&&(i=this.mutateData(i)),r=this.pasteAction.call(this,i),this.dispatchExternal("clipboardPasted",n,i,r)):this.dispatchExternal("clipboardPasteError",n))}mutateData(e){var n=[];return Array.isArray(e)?e.forEach(i=>{n.push(this.table.modules.mutator.transformRow(i,"clipboard"))}):n=e,n}checkPasteOrigin(e){var n=!0,i=this.confirm("clipboard-paste",[e]);return(i||!["DIV","SPAN"].includes(e.target.tagName))&&(n=!1),n}getPasteData(e){var n;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?n=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(n=e.originalEvent.clipboardData.getData("text/plain")),n}};te(zt,"moduleName","clipboard"),te(zt,"moduleExtensions",jd),te(zt,"pasteActions",Id),te(zt,"pasteParsers",Fd);let gr=zt;class Ud{constructor(e){return this._row=e,new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._row.table.componentFunctionBinder.handle("row",n._row,i)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var e=[];return this._row.getCells().forEach(function(n){e.push(n.getComponent())}),e}getCell(e){var n=this._row.getCell(e);return n?n.getComponent():!1}_getSelf(){return this._row}}class jo{constructor(e){return this._cell=e,new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._cell.table.componentFunctionBinder.handle("cell",n._cell,i)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(e){return this._cell.row.getData(e)}getType(){return"cell"}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(e,n){typeof n>"u"&&(n=!0),this._cell.setValue(e,n)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class ki extends qe{constructor(e,n){super(e.table),this.table=e.table,this.column=e,this.row=n,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.column.isRowHeader&&this.element.classList.add("tabulator-row-header")}_configureCell(){var e=this.element,n=this.column.getField(),i={top:"flex-start",bottom:"flex-end",middle:"center"},r={left:"flex-start",right:"flex-end",center:"center"};if(e.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(e.style.display="inline-flex",e.style.alignItems=i[this.column.vertAlign]||"",this.column.hozAlign&&(e.style.justifyContent=r[this.column.hozAlign]||"")),n&&e.setAttribute("tabulator-field",n),this.column.definition.cssClass){var t=this.column.definition.cssClass.split(" ");t.forEach(s=>{e.classList.add(s)})}this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var e;switch(e=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value),typeof e){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",e!=null&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":this.element.innerHTML="";break;default:this.element.innerHTML=e}}cellRendered(){this.dispatch("cell-rendered",this)}getElement(e){return this.loaded||(this.loaded=!0,e||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(e,n,i){var r=this.setValueProcessData(e,n,i);r&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.column.definition.cellEdited&&this.column.definition.cellEdited.call(this.table,this.getComponent()),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(e,n,i){var r=!1;return(this.value!==e||i)&&(r=!0,n&&(e=this.chain("cell-value-changing",[this,e],null,e))),this.setValueActual(e),r&&this.dispatch("cell-value-changed",this),r}setValueActual(e){this.oldValue=this.value,this.value=e,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,e),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null,this.dispatch("cell-height",this,"")}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled,this.dispatch("cell-height",this,this.row.heightStyled)}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new jo(this)),this.component}}class Uo{constructor(e){return this._column=e,this.type="ColumnComponent",new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._column.table.componentFunctionBinder.handle("column",n._column,i)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getTitleDownload(){return this._column.getTitleDownload()}getCells(){var e=[];return this._column.cells.forEach(function(n){e.push(n.getComponent())}),e}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(e){e.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(e){e.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var e=[];return this._column.columns.length&&this._column.columns.forEach(function(n){e.push(n.getComponent())}),e}getParentColumn(){return this._column.getParentComponent()}_getSelf(){return this._column}scrollTo(e,n){return this._column.table.columnManager.scrollToColumn(this._column,e,n)}getTable(){return this._column.table}move(e,n){var i=this._column.table.columnManager.findColumn(e);i?this._column.table.columnManager.moveColumn(this._column,i,n):console.warn("Move Error - No matching column found:",i)}getNextColumn(){var e=this._column.nextColumn();return e?e.getComponent():!1}getPrevColumn(){var e=this._column.prevColumn();return e?e.getComponent():!1}updateDefinition(e){return this._column.updateDefinition(e)}getWidth(){return this._column.getWidth()}setWidth(e){var n;return e===!0?n=this._column.reinitializeWidth(!0):n=this._column.setWidth(e),this._column.table.columnManager.rerenderColumns(!0),n}}var Wo={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,maxInitialWidth:void 0,cssClass:void 0,variableHeight:void 0,headerVertical:void 0,headerHozAlign:void 0,headerWordWrap:!1,editableTitle:void 0};const Qt=class Qt extends qe{constructor(e,n,i){super(n.table),this.definition=e,this.parent=n,this.type="column",this.columns=[],this.cells=[],this.isGroup=!1,this.isRowHeader=i,this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleDownload=null,this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.maxInitialWidth=null,this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((r,t)=>{var s=new Qt(r,this);this.attachColumn(s)}),this.checkColumnVisibility()):n.registerColumnField(this),this._initialize()}createElement(){var e=document.createElement("div");switch(e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),this.isRowHeader&&e.classList.add("tabulator-row-header"),this.table.options.columnHeaderVertAlign){case"middle":e.style.justifyContent="center";break;case"bottom":e.style.justifyContent="flex-end";break}return e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let n in e)typeof this.definition[n]>"u"&&(this.definition[n]=e[n]);this.definition=this.table.columnManager.optionsList.generate(Qt.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{Qt.defaultOptionList.indexOf(e)===-1&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),e.headerVertical==="flip"&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.dispatch("column-init",this)}_buildColumnHeader(){var e=this.definition;if(this.dispatch("column-layout",this),typeof e.visible<"u"&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass){var n=e.cssClass.split(" ");n.forEach(i=>{this.element.classList.add(i)})}e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxInitialWidth&&(this.maxInitialWidth=parseInt(e.maxInitialWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e}_buildColumnHeaderTitle(){var e=this.definition,n=document.createElement("div");if(n.classList.add("tabulator-col-title"),e.headerWordWrap&&n.classList.add("tabulator-col-title-wrap"),e.editableTitle){var i=document.createElement("input");i.classList.add("tabulator-title-editor"),i.addEventListener("click",r=>{r.stopPropagation(),i.focus()}),i.addEventListener("mousedown",r=>{r.stopPropagation()}),i.addEventListener("change",()=>{e.title=i.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),n.appendChild(i),e.field?this.langBind("columns|"+e.field,r=>{i.value=r||e.title||"&nbsp;"}):i.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,r=>{this._formatColumnHeaderTitle(n,r||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(n,e.title||"&nbsp;");return n}_formatColumnHeaderTitle(e,n){var i=this.chain("column-format",[this,n,e],null,()=>n);switch(typeof i){case"object":i instanceof Node?e.appendChild(i):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",i));break;case"undefined":e.innerHTML="";break;default:e.innerHTML=i}}_buildGroupHeader(){if(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass){var e=this.definition.cssClass.split(" ");e.forEach(n=>{this.element.classList.add(n)})}this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var n=e,i=this.fieldStructure,r=i.length,t;for(let s=0;s<r&&(n=n[i[s]],t=n,!!n);s++);return t}_setFlatData(e,n){this.field&&(e[this.field]=n)}_setNestedData(e,n){var i=e,r=this.fieldStructure,t=r.length;for(let s=0;s<t;s++)if(s==t-1)i[r[s]]=n;else{if(!i[r[s]])if(typeof n<"u")i[r[s]]={};else break;i=i[r[s]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement()),e.columnRendered()):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,n){var i=this.parent.isGroup?this.parent.getGroupElement().clientHeight:n||this.parent.getHeadersElement().clientHeight;this.element.style.height=i+"px",this.dispatch("column-height",this,this.element.style.height),this.isGroup&&(this.groupElement.style.minHeight=i-this.contentElement.offsetHeight+"px"),this.columns.forEach(function(r){r.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()}),this.dispatch("column-height",this,"")}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getTitleDownload(){return this.titleDownload}getFirstColumn(){return this.isGroup?this.columns.length?this.columns[0].getFirstColumn():!1:this}getLastColumn(){return this.isGroup?this.columns.length?this.columns[this.columns.length-1].getLastColumn():!1:this}getColumns(e){var n=[];return e?this.columns.forEach(i=>{n.push(i),n=n.concat(i.getColumns(!0))}):n=this.columns,n}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var n=[];return this.isGroup&&e&&(this.columns.forEach(function(i){n.push(i.getDefinition(!0))}),this.definition.columns=n),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(n){n.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,n){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(i){i.show()}),!this.isGroup&&this.width===null&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,n),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}hide(e,n){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(i){i.hide()}),this.dispatch("column-hide",this,n),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.table.initialized&&(this.element.style.width=e+"px"),this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var n=this.columns.indexOf(e);n>-1&&this.columns.splice(n,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(n){n.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this),this.subscribedExternal("columnWidth")&&this.dispatchExternal("columnWidth",this.getComponent())}checkCellHeights(){var e=[];this.cells.forEach(function(n){n.row.heightInitialized&&(n.row.getElement().offsetParent!==null?(e.push(n.row),n.row.clearCellHeight()):n.row.heightInitialized=!1)}),e.forEach(function(n){n.calcHeight()}),e.forEach(function(n){n.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}):e=this.width,e}getLeftOffset(){var e=this.element.offsetLeft;return this.parent.isGroup&&(e+=this.parent.getLeftOffset()),e}getHeight(){return Math.ceil(this.element.getBoundingClientRect().height)}setMinWidth(e){this.maxWidth&&e>this.maxWidth&&(e=this.maxWidth,console.warn("the minWidth ("+e+"px) for column '"+this.field+"' cannot be bigger that its maxWidth ("+this.maxWidthStyled+")")),this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(n){n.setMinWidth()})}setMaxWidth(e){this.minWidth&&e<this.minWidth&&(e=this.minWidth,console.warn("the maxWidth ("+e+"px) for column '"+this.field+"' cannot be smaller that its minWidth ("+this.minWidthStyled+")")),this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(n){n.setMaxWidth()})}delete(){return new Promise((e,n)=>{this.isGroup&&this.columns.forEach(function(r){r.delete()}),this.dispatch("column-delete",this);var i=this.cells.length;for(let r=0;r<i;r++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.rerenderColumns(!0),this.dispatch("column-deleted",this),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered(),this.dispatch("column-rendered",this)}generateCell(e){var n=new ki(this,e);return this.cells.push(n),n}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._nextVisibleColumn(e+1):!1}_nextVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1?this._prevVisibleColumn(e-1):!1}_prevVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,typeof this.definition.width<"u"&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(e),this.dispatch("column-width-fit-after",this)}fitToData(e){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(r=>{r.clearWidth()}));var n=this.element.offsetWidth;if((!this.width||!this.widthFixed)&&(this.cells.forEach(r=>{var t=r.getWidth();t>n&&(n=t)}),n)){var i=n+1;e?this.setWidth(i):(this.maxInitialWidth&&!e&&(i=Math.min(i,this.maxInitialWidth)),this.setWidthActual(i))}}}updateDefinition(e){var n;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(n=Object.assign({},this.getDefinition()),n=Object.assign(n,e),this.table.columnManager.addColumn(n,!1,this).then(i=>(n.field==this.field&&(this.field=!1),this.delete().then(()=>i.getComponent()))))}deleteCell(e){var n=this.cells.indexOf(e);n>-1&&this.cells.splice(n,1)}getComponent(){return this.component||(this.component=new Uo(this)),this.component}getPosition(){return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this)+1}getParentComponent(){return this.parent instanceof Qt?this.parent.getComponent():!1}};te(Qt,"defaultOptionList",Wo);let ei=Qt;class On{constructor(e){return this._row=e,new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._row.table.componentFunctionBinder.handle("row",n._row,i)}})}getData(e){return this._row.getData(e)}getElement(){return this._row.getElement()}getCells(){var e=[];return this._row.getCells().forEach(function(n){e.push(n.getComponent())}),e}getCell(e){var n=this._row.getCell(e);return n?n.getComponent():!1}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(){return this._row.getPosition()}watchPosition(e){return this._row.watchPosition(e)}delete(){return this._row.delete()}scrollTo(e,n){return this._row.table.rowManager.scrollToRow(this._row,e,n)}move(e,n){this._row.moveToRow(e,n)}update(e){return this._row.updateData(e)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var e=this._row.nextRow();return e&&e.getComponent()}getPrevRow(){var e=this._row.prevRow();return e&&e.getComponent()}}class et extends qe{constructor(e,n,i="row"){super(n.table),this.parent=n,this.data={},this.type=i,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.position=0,this.positionWatchers=[],this.component=null,this.created=!1,this.setData(e)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var e=document.createElement("div");e.classList.add("tabulator-row"),e.setAttribute("role","row"),this.element=e}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(e,n){if(this.create(),!this.initialized||e){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.initialized=!0,this.table.columnManager.renderer.renderRowCells(this,n),e&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this,n)}rendered(){this.cells.forEach(e=>{e.cellRendered()})}reinitializeHeight(){this.heightInitialized=!1,this.element&&this.element.offsetParent!==null&&this.normalizeHeight(!0)}deinitialize(){this.initialized=!1}deinitializeHeight(){this.heightInitialized=!1}reinitialize(e){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&this.element.offsetParent!==null&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(e){var n=0,i=0;this.table.options.rowHeight?this.height=this.table.options.rowHeight:(i=this.calcMinHeight(),n=this.calcMaxHeight(),e?this.height=Math.max(n,i):this.height=this.manualHeight?this.height:Math.max(n,i)),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}calcMinHeight(){return this.table.options.resizableRows?this.element.clientHeight:0}calcMaxHeight(){var e=0;return this.cells.forEach(function(n){var i=n.getHeight();i>e&&(e=i)}),e}setCellHeight(){this.cells.forEach(function(e){e.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(e){e.clearHeight()})}normalizeHeight(e){e&&!this.table.options.rowHeight&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()}setHeight(e,n){(this.height!=e||n)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight,this.subscribedExternal("rowHeight")&&this.dispatchExternal("rowHeight",this.getComponent()))}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(e){var n=this.cells.indexOf(e);n>-1&&this.cells.splice(n,1)}setData(e){this.data=this.chain("row-data-init-before",[this,e],void 0,e),this.dispatch("row-data-init-after",this)}updateData(e){var n=this.element&&Pe.elVisible(this.element),i={},r;return new Promise((t,s)=>{typeof e=="string"&&(e=JSON.parse(e)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(i=Object.assign(i,this.data),i=Object.assign(i,e)),r=this.chain("row-data-changing",[this,i,e],null,e);for(let o in r)this.data[o]=r[o];this.dispatch("row-data-save-after",this);for(let o in e)this.table.columnManager.getColumnsByFieldRoot(o).forEach(l=>{let h=this.getCell(l.getField());if(h){let c=l.getFieldValue(r);h.getValue()!==c&&(h.setValueProcessData(c),n&&h.cellRendered())}});n?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,n,e),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),t()})}getData(e){return e?this.chain("row-data-retrieve",[this,e],null,this.data):this.data}getCell(e){var n=!1;return e=this.table.columnManager.findColumn(e),!this.initialized&&this.cells.length===0&&this.generateCells(),n=this.cells.find(function(i){return i.column===e}),n}getCellIndex(e){return this.cells.findIndex(function(n){return n===e})}findCell(e){return this.cells.find(n=>n.element===e)}getCells(){return!this.initialized&&this.cells.length===0&&this.generateCells(),this.cells}nextRow(){var e=this.table.rowManager.nextDisplayRow(this,!0);return e||!1}prevRow(){var e=this.table.rowManager.prevDisplayRow(this,!0);return e||!1}moveToRow(e,n){var i=this.table.rowManager.findRow(e);i?(this.table.rowManager.moveRowActual(this,i,!n),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(e){this.detachModules(),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detachModules(){this.dispatch("row-deleting",this)}deleteCells(){var e=this.cells.length;for(let n=0;n<e;n++)this.cells[0].delete()}wipe(){if(this.detachModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}isDisplayed(){return this.table.rowManager.getDisplayRows().includes(this)}getPosition(){return this.isDisplayed()?this.position:!1}setPosition(e){e!=this.position&&(this.position=e,this.positionWatchers.forEach(n=>{n(this.position)}))}watchPosition(e){this.positionWatchers.push(e),e(this.position)}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new On(this)),this.component}}var Wd={avg:function(u,e,n){var i=0,r=typeof n.precision<"u"?n.precision:2;return u.length&&(i=u.reduce(function(t,s){return Number(t)+Number(s)}),i=i/u.length,i=r!==!1?i.toFixed(r):i),parseFloat(i).toString()},max:function(u,e,n){var i=null,r=typeof n.precision<"u"?n.precision:!1;return u.forEach(function(t){t=Number(t),(t>i||i===null)&&(i=t)}),i!==null?r!==!1?i.toFixed(r):i:""},min:function(u,e,n){var i=null,r=typeof n.precision<"u"?n.precision:!1;return u.forEach(function(t){t=Number(t),(t<i||i===null)&&(i=t)}),i!==null?r!==!1?i.toFixed(r):i:""},sum:function(u,e,n){var i=0,r=typeof n.precision<"u"?n.precision:!1;return u.length&&u.forEach(function(t){t=Number(t),i+=isNaN(t)?0:Number(t)}),r!==!1?i.toFixed(r):i},concat:function(u,e,n){var i=0;return u.length&&(i=u.reduce(function(r,t){return String(r)+String(t)})),i},count:function(u,e,n){var i=0;return u.length&&u.forEach(function(r){r&&i++}),i},unique:function(u,e,n){var i=u.filter((r,t)=>(u||r===0)&&u.indexOf(r)===t);return i.length}};const Ht=class Ht extends Ce{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.blocked=!1,this.recalcAfterBlock=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new ei({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refreshed",this.recalcActiveRowsRefresh.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this)),this.subscribe("redraw-blocked",this.blockRedraw.bind(this)),this.subscribe("redraw-restored",this.restoreRedraw.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this)),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}blockRedraw(){this.blocked=!0,this.recalcAfterBlock=!1}restoreRedraw(){this.blocked=!1,this.recalcAfterBlock&&(this.recalcAfterBlock=!1,this.recalcActiveRowsRefresh())}userRecalc(){this.recalc(this.table.rowManager.activeRows)}blockCheck(){return this.blocked&&(this.recalcAfterBlock=!0),this.blocked}visibleRows(e,n){return this.topRow&&n.unshift(this.topRow),this.botRow&&n.push(this.botRow),n}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(e):this.recalcActiveRows()}recalcActiveRowsRefresh(){this.table.options.groupBy&&this.table.options.dataTreeStartExpanded&&this.table.options.dataTree?this.recalcAll():this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?((this.table.options.columnCalcs=="table"||this.table.options.columnCalcs=="both")&&this.recalcActiveRows(),this.table.options.columnCalcs!="table"&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var n=e.definition,i={topCalcParams:n.topCalcParams||{},botCalcParams:n.bottomCalcParams||{}};if(n.topCalc){switch(typeof n.topCalc){case"string":Ht.calculations[n.topCalc]?i.topCalc=Ht.calculations[n.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.topCalc);break;case"function":i.topCalc=n.topCalc;break}i.topCalc&&(e.modules.columnCalcs=i,this.topCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeTopRow())}if(n.bottomCalc){switch(typeof n.bottomCalc){case"string":Ht.calculations[n.bottomCalc]?i.botCalc=Ht.calculations[n.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.bottomCalc);break;case"function":i.botCalc=n.bottomCalc;break}i.botCalc&&(e.modules.columnCalcs=i,this.botCalcs.push(e),this.table.options.columnCalcs!="group"&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.footerRemove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}reinitializeCalcs(){this.topCalcs.length&&this.initializeTopRow(),this.botCalcs.length&&this.initializeBottomRow()}initializeTopRow(){var e=document.createDocumentFragment();this.topInitialized||(e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.footerPrepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botElement.scrollLeft=e)}recalc(e){var n,i;if(!this.blockCheck()&&(this.topInitialized||this.botInitialized)){if(n=this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),i=this.generateRow("top",n),this.topRow=i;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(i.getElement()),i.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),i=this.generateRow("bottom",n),this.botRow=i;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(i.getElement()),i.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){if((this.topCalcs.length||this.botCalcs.length)&&(this.table.options.columnCalcs!=="group"&&this.recalcActiveRows(),this.table.options.groupBy&&this.table.options.columnCalcs!=="table")){var e=this.table.modules.groupRows.getChildGroups();e.forEach(n=>{this.recalcGroup(n)})}}recalcGroup(e){var n,i;this.blockCheck()||e&&e.calcs&&(e.calcs.bottom&&(n=this.rowsToData(e.rows),i=this.generateRowData("bottom",n),e.calcs.bottom.updateData(i),e.calcs.bottom.reinitialize()),e.calcs.top&&(n=this.rowsToData(e.rows),i=this.generateRowData("top",n),e.calcs.top.updateData(i),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var n=[],i=this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs,r=this.table.modules.dataTree;return e.forEach(t=>{var s;n.push(t.getData()),i&&((s=t.modules.dataTree)!=null&&s.open)&&this.rowsToData(r.getFilteredTreeChildren(t)).forEach(o=>{n.push(t)})}),n}generateRow(e,n){var i=this.generateRowData(e,n),r;return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),r=new et(i,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),r.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),r.component=!1,r.getComponent=()=>(r.component||(r.component=new Ud(r)),r.component),r.generateCells=()=>{var t=[];this.table.columnManager.columnsByIndex.forEach(s=>{this.genColumn.setField(s.getField()),this.genColumn.hozAlign=s.hozAlign,s.definition[e+"CalcFormatter"]&&this.table.modExists("format")?this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter(s.definition[e+"CalcFormatter"]),params:s.definition[e+"CalcFormatterParams"]||{}}:this.genColumn.modules.format={formatter:this.table.modules.format.lookupFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=s.definition.cssClass;var o=new ki(this.genColumn,r);o.getElement(),o.column=s,o.setWidth(),s.cells.push(o),t.push(o),s.visible||o.hide()}),r.cells=t},r}generateRowData(e,n){var i={},r=e=="top"?this.topCalcs:this.botCalcs,t=e=="top"?"topCalc":"botCalc",s,o;return r.forEach(function(a){var l=[];a.modules.columnCalcs&&a.modules.columnCalcs[t]&&(n.forEach(function(h){l.push(a.getFieldValue(h))}),o=t+"Params",s=typeof a.modules.columnCalcs[o]=="function"?a.modules.columnCalcs[o](l,n):a.modules.columnCalcs[o],a.setFieldValue(i,a.modules.columnCalcs[t](l,n,s)))}),i}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={},n;return this.table.options.groupBy&&this.table.modExists("groupRows")?(n=this.table.modules.groupRows.getGroups(!0),n.forEach(i=>{e[i.getKey()]=this.getGroupResults(i)})):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var n=e._getSelf(),i=e.getSubGroups(),r={},t={};return i.forEach(s=>{r[s.getKey()]=this.getGroupResults(s)}),t={top:n.calcs.top?n.calcs.top.getData():{},bottom:n.calcs.bottom?n.calcs.bottom.getData():{},groups:r},t}adjustForScrollbar(e){this.botRow&&(this.table.rtl?this.botElement.style.paddingLeft=e+"px":this.botElement.style.paddingRight=e+"px")}};te(Ht,"moduleName","columnCalcs"),te(Ht,"calculations",Wd);let vr=Ht;class zo extends Ce{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this)),this.registerComponentFunction("row","isTreeExpanded",this.isRowExpanded.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,n=this.table.options;switch(this.field=n.dataTreeChildField,this.indent=n.dataTreeChildIndent,this.options("movableRows")&&console.warn("The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior"),n.dataTreeBranchElement?n.dataTreeBranchElement===!0?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):typeof n.dataTreeBranchElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=n.dataTreeBranchElement:(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch-empty")),n.dataTreeCollapseElement?typeof n.dataTreeCollapseElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=n.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),n.dataTreeExpandElement?typeof n.dataTreeExpandElement=="string"?(e=document.createElement("div"),e.innerHTML=n.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=n.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof n.dataTreeStartExpanded){case"boolean":this.startOpen=function(i,r){return n.dataTreeStartExpanded};break;case"function":this.startOpen=n.dataTreeStartExpanded;break;default:this.startOpen=function(i,r){return n.dataTreeStartExpanded[r]};break}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("cell-value-updated",this.cellValueChanged.bind(this)),this.subscribe("edit-cancelled",this.cellValueChanged.bind(this)),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.subscribe("table-built",this.initializeElementField.bind(this)),this.subscribe("table-redrawing",this.tableRedrawing.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}tableRedrawing(e){var n;e&&(n=this.table.rowManager.getRows(),n.forEach(i=>{this.reinitializeRowChildren(i)}))}initializeElementField(){var e=this.table.columnManager.getFirstVisibleColumn();this.elementField=this.table.options.dataTreeElementColumn||(e?e.field:!1)}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(n=>{e=e.concat(this.getTreeChildren(n,!1,!0))}),e}rowDataChanged(e,n,i){this.redrawNeeded(i)&&(this.initializeRow(e),n&&(this.layoutRow(e),this.refreshData(!0)))}cellValueChanged(e){var n=e.column.getField();n===this.elementField&&this.layoutRow(e.row)}initializeRow(e){var n=e.getData()[this.field],i=Array.isArray(n),r=i||!i&&typeof n=="object"&&n!==null;!r&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!r&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:r?e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0):!1,controlEl:e.modules.dataTree&&r?e.modules.dataTree.controlEl:!1,branchEl:e.modules.dataTree&&r?e.modules.dataTree.branchEl:!1,parent:e.modules.dataTree?e.modules.dataTree.parent:!1,children:r}}reinitializeRowChildren(e){var n=this.getTreeChildren(e,!1,!0);n.forEach(function(i){i.reinitialize(!0)})}layoutRow(e){var n=this.elementField?e.getCell(this.elementField):e.getCells()[0],i=n.getElement(),r=e.modules.dataTree;r.branchEl&&(r.branchEl.parentNode&&r.branchEl.parentNode.removeChild(r.branchEl),r.branchEl=!1),r.controlEl&&(r.controlEl.parentNode&&r.controlEl.parentNode.removeChild(r.controlEl),r.controlEl=!1),this.generateControlElement(e,i),e.getElement().classList.add("tabulator-tree-level-"+r.index),r.index&&(this.branchEl?(r.branchEl=this.branchEl.cloneNode(!0),i.insertBefore(r.branchEl,i.firstChild),this.table.rtl?r.branchEl.style.marginRight=(r.branchEl.offsetWidth+r.branchEl.style.marginLeft)*(r.index-1)+r.index*this.indent+"px":r.branchEl.style.marginLeft=(r.branchEl.offsetWidth+r.branchEl.style.marginRight)*(r.index-1)+r.index*this.indent+"px"):this.table.rtl?i.style.paddingRight=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-right"))+r.index*this.indent+"px":i.style.paddingLeft=parseInt(window.getComputedStyle(i,null).getPropertyValue("padding-left"))+r.index*this.indent+"px")}generateControlElement(e,n){var i=e.modules.dataTree,r=i.controlEl;n=n||e.getCells()[0].getElement(),i.children!==!1&&(i.open?(i.controlEl=this.collapseEl.cloneNode(!0),i.controlEl.addEventListener("click",t=>{t.stopPropagation(),this.collapseRow(e)})):(i.controlEl=this.expandEl.cloneNode(!0),i.controlEl.addEventListener("click",t=>{t.stopPropagation(),this.expandRow(e)})),i.controlEl.addEventListener("mousedown",t=>{t.stopPropagation()}),r&&r.parentNode===n?r.parentNode.replaceChild(i.controlEl,r):n.insertBefore(i.controlEl,n.firstChild))}getRows(e){var n=[];return e.forEach((i,r)=>{var t,s;n.push(i),i instanceof et&&(i.create(),t=i.modules.dataTree,!t.index&&t.children!==!1&&(s=this.getChildren(i,!1,!0),s.forEach(o=>{o.create(),n.push(o)})))}),n}getChildren(e,n,i){var r=e.modules.dataTree,t=[],s=[];return r.children!==!1&&(r.open||n)&&(Array.isArray(r.children)||(r.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?t=this.table.modules.filter.filter(r.children):t=r.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(t,i),t.forEach(o=>{s.push(o);var a=this.getChildren(o,!1,!0);a.forEach(l=>{s.push(l)})})),s}generateChildren(e){var n=[],i=e.getData()[this.field];return Array.isArray(i)||(i=[i]),i.forEach(r=>{var t=new et(r||{},this.table.rowManager);t.create(),t.modules.dataTree.index=e.modules.dataTree.index+1,t.modules.dataTree.parent=e,t.modules.dataTree.children&&(t.modules.dataTree.open=this.startOpen(t.getComponent(),t.modules.dataTree.index)),n.push(t)}),n}expandRow(e,n){var i=e.modules.dataTree;i.children!==!1&&(i.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var n=e.modules.dataTree;n.children!==!1&&(n.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var n=e.modules.dataTree;n.children!==!1&&(n.open?this.collapseRow(e):this.expandRow(e))}isRowExpanded(e){return e.modules.dataTree.open}getTreeParent(e){return e.modules.dataTree.parent?e.modules.dataTree.parent.getComponent():!1}getTreeParentRoot(e){return e.modules.dataTree&&e.modules.dataTree.parent?this.getTreeParentRoot(e.modules.dataTree.parent):e}getFilteredTreeChildren(e){var n=e.modules.dataTree,i=[],r;return n.children&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),this.table.modExists("filter")&&this.table.options.dataTreeFilter?r=this.table.modules.filter.filter(n.children):r=n.children,r.forEach(t=>{t instanceof et&&i.push(t)})),i}rowDeleting(e){var n=e.modules.dataTree;n&&n.children&&Array.isArray(n.children)&&n.children.forEach(i=>{i instanceof et&&i.wipe()})}rowDelete(e){var n=e.modules.dataTree.parent,i;n&&(i=this.findChildIndex(e,n),i!==!1&&n.data[this.field].splice(i,1),n.data[this.field].length||delete n.data[this.field],this.initializeRow(n),this.layoutRow(n)),this.refreshData(!0)}addTreeChildRow(e,n,i,r){var t=!1;typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),typeof r<"u"&&(t=this.findChildIndex(r,e),t!==!1&&e.data[this.field].splice(i?t:t+1,0,n)),t===!1&&(i?e.data[this.field].unshift(n):e.data[this.field].push(n)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,n){var i=!1;return typeof e=="object"?e instanceof et?i=e.data:e instanceof On?i=e._getSelf().data:typeof HTMLElement<"u"&&e instanceof HTMLElement?n.modules.dataTree&&(i=n.modules.dataTree.children.find(r=>r instanceof et?r.element===e:!1),i&&(i=i.data)):e===null&&(i=!1):typeof e>"u"?i=!1:i=n.data[this.field].find(r=>r.data[this.table.options.index]==e),i&&(Array.isArray(n.data[this.field])&&(i=n.data[this.field].indexOf(i)),i==-1&&(i=!1)),i}getTreeChildren(e,n,i){var r=e.modules.dataTree,t=[];return r&&r.children&&(Array.isArray(r.children)||(r.children=this.generateChildren(e)),r.children.forEach(s=>{s instanceof et&&(t.push(n?s.getComponent():s),i&&this.getTreeChildren(s,n,i).forEach(o=>{t.push(o)}))})),t}getChildField(){return this.field}redrawNeeded(e){return(this.field?typeof e[this.field]<"u":!1)||(this.elementField?typeof e[this.elementField]<"u":!1)}}te(zo,"moduleName","dataTree");function zd(u,e={},n){var i=e.delimiter?e.delimiter:",",r=[],t=[];u.forEach(s=>{var o=[];switch(s.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":s.columns.forEach((a,l)=>{a&&a.depth===1&&(t[l]=typeof a.value>"u"||a.value===null?"":'"'+String(a.value).split('"').join('""')+'"')});break;case"row":s.columns.forEach(a=>{if(a){switch(typeof a.value){case"object":a.value=a.value!==null?JSON.stringify(a.value):"";break;case"undefined":a.value="";break}o.push('"'+String(a.value).split('"').join('""')+'"')}}),r.push(o.join(i));break}}),t.length&&r.unshift(t.join(i)),r=r.join(`
`),e.bom&&(r="\uFEFF"+r),n(r,"text/csv")}function Hd(u,e,n){var i=[];u.forEach(r=>{var t={};switch(r.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":r.columns.forEach(s=>{s&&(t[s.component.getTitleDownload()||s.component.getField()]=s.value)}),i.push(t);break}}),i=JSON.stringify(i,null,"	"),n(i,"application/json")}function Kd(u,e={},n){var i=[],r=[],t={},s=e.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},o=e.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},a=e.jsPDF||{},l=e.title?e.title:"",h,c;a.orientation||(a.orientation=e.orientation||"landscape"),a.unit||(a.unit="pt"),u.forEach(f=>{switch(f.type){case"header":i.push(d(f));break;case"group":r.push(d(f,s));break;case"calc":r.push(d(f,o));break;case"row":r.push(d(f));break}});function d(f,m){var g=[];return f.columns.forEach(v=>{var p;if(v){switch(typeof v.value){case"object":v.value=v.value!==null?JSON.stringify(v.value):"";break;case"undefined":v.value="";break}p={content:v.value,colSpan:v.width,rowSpan:v.height},m&&(p.styles=m),g.push(p)}}),g}h=this.dependencyRegistry.lookup("jspdf","jsPDF"),c=new h(a),e.autoTable&&(typeof e.autoTable=="function"?t=e.autoTable(c)||{}:t=e.autoTable),l&&(t.didDrawPage=function(f){c.text(l,40,30)}),t.head=i,t.body=r,c.autoTable(t),e.documentProcessing&&e.documentProcessing(c),n(c.output("arraybuffer"),"application/pdf")}function $d(u,e,n){var i=this,r=e.sheetName||"Sheet1",t=this.dependencyRegistry.lookup("XLSX"),s=t.utils.book_new(),o=new qe(this),a="compress"in e?e.compress:!0,l=e.writeOptions||{bookType:"xlsx",bookSST:!0,compression:a},h;l.type="binary",s.SheetNames=[],s.Sheets={};function c(){var m=[],g=[],v={},p={s:{c:0,r:0},e:{c:u[0]?u[0].columns.reduce((E,w)=>E+(w&&w.width?w.width:1),0):0,r:u.length}};return u.forEach((E,w)=>{var O=[];E.columns.forEach(function(T,S){T?(O.push(!(T.value instanceof Date)&&typeof T.value=="object"?JSON.stringify(T.value):T.value),(T.width>1||T.height>-1)&&(T.height>1||T.width>1)&&g.push({s:{r:w,c:S},e:{r:w+T.height-1,c:S+T.width-1}})):O.push("")}),m.push(O)}),t.utils.sheet_add_aoa(v,m),v["!ref"]=t.utils.encode_range(p),g.length&&(v["!merges"]=g),v}if(e.sheetOnly){n(c());return}if(e.sheets)for(var d in e.sheets)e.sheets[d]===!0?(s.SheetNames.push(d),s.Sheets[d]=c()):(s.SheetNames.push(d),o.commsSend(e.sheets[d],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:i.active,intercept:function(m){s.Sheets[d]=m}}));else s.SheetNames.push(r),s.Sheets[r]=c();e.documentProcessing&&(s=e.documentProcessing(s));function f(m){for(var g=new ArrayBuffer(m.length),v=new Uint8Array(g),p=0;p!=m.length;++p)v[p]=m.charCodeAt(p)&255;return g}h=t.write(s,l),n(f(h),"application/octet-stream")}function Gd(u,e,n){this.modExists("export",!0)&&n(this.modules.export.generateHTMLTable(u),"text/html")}function Vd(u,e,n){const i=[];u.forEach(r=>{const t={};switch(r.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":r.columns.forEach(s=>{s&&(t[s.component.getTitleDownload()||s.component.getField()]=s.value)}),i.push(JSON.stringify(t));break}}),n(i.join(`
`),"application/x-ndjson")}var kd={csv:zd,json:Hd,jsonLines:Vd,pdf:Kd,xlsx:$d,html:Gd};const vi=class vi extends Ce{constructor(e){super(e),this.registerTableOption("downloadEncoder",function(n,i){return new Blob([n],{type:i})}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.deprecatedOptionsCheck(),this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}deprecatedOptionsCheck(){}downloadToTab(e,n,i,r){this.download(e,n,i,r,!0)}download(e,n,i,r,t){var s=!1;function o(l,h){t?t===!0?this.triggerDownload(l,h,e,n,!0):t(l):this.triggerDownload(l,h,e,n)}if(typeof e=="function"?s=e:vi.downloaders[e]?s=vi.downloaders[e]:console.warn("Download Error - No such download type found: ",e),s){var a=this.generateExportList(r);s.call(this.table,a,i||{},o.bind(this))}}generateExportList(e){var n=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),i=this.table.options.groupHeaderDownload;return i&&!Array.isArray(i)&&(i=[i]),n.forEach(r=>{var t;r.type==="group"&&(t=r.columns[0],i&&i[r.indent]&&(t.value=i[r.indent](t.value,r.component._group.getRowCount(),r.component._group.getData(),r.component)))}),n}triggerDownload(e,n,i,r,t){var s=document.createElement("a"),o=this.table.options.downloadEncoder(e,n);o&&(t?window.open(window.URL.createObjectURL(o)):(r=r||"Tabulator."+(typeof i=="function"?"txt":i),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(o,r):(s.setAttribute("href",window.URL.createObjectURL(o)),s.setAttribute("download",r),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s))),this.dispatchExternal("downloadComplete"))}commsReceived(e,n,i){switch(n){case"intercept":this.download(i.type,"",i.options,i.active,i.intercept);break}}};te(vi,"moduleName","download"),te(vi,"downloaders",kd);let br=vi;function wn(u,e){var n=e.mask,i=typeof e.maskLetterChar<"u"?e.maskLetterChar:"A",r=typeof e.maskNumberChar<"u"?e.maskNumberChar:"9",t=typeof e.maskWildcardChar<"u"?e.maskWildcardChar:"*";function s(o){var a=n[o];typeof a<"u"&&a!==t&&a!==i&&a!==r&&(u.value=u.value+""+a,s(o+1))}u.addEventListener("keydown",o=>{var a=u.value.length,l=o.key;if(o.keyCode>46&&!o.ctrlKey&&!o.metaKey){if(a>=n.length)return o.preventDefault(),o.stopPropagation(),!1;switch(n[a]){case i:if(l.toUpperCase()==l.toLowerCase())return o.preventDefault(),o.stopPropagation(),!1;break;case r:if(isNaN(l))return o.preventDefault(),o.stopPropagation(),!1;break;case t:break;default:if(l!==n[a])return o.preventDefault(),o.stopPropagation(),!1}}}),u.addEventListener("keyup",o=>{o.keyCode>46&&e.maskAutoFill&&s(u.value.length)}),u.placeholder||(u.placeholder=n),e.maskAutoFill&&s(u.value.length)}function Jd(u,e,n,i,r){var t=u.getValue(),s=document.createElement("input");if(s.setAttribute("type",r.search?"search":"text"),s.style.padding="4px",s.style.width="100%",s.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let a in r.elementAttributes)a.charAt(0)=="+"?(a=a.slice(1),s.setAttribute(a,s.getAttribute(a)+r.elementAttributes["+"+a])):s.setAttribute(a,r.elementAttributes[a]);s.value=typeof t<"u"?t:"",e(function(){u.getType()==="cell"&&(s.focus({preventScroll:!0}),s.style.height="100%",r.selectContents&&s.select())});function o(a){(t===null||typeof t>"u")&&s.value!==""||s.value!==t?n(s.value)&&(t=s.value):i()}return s.addEventListener("change",o),s.addEventListener("blur",o),s.addEventListener("keydown",function(a){switch(a.keyCode){case 13:o();break;case 27:i();break;case 35:case 36:a.stopPropagation();break}}),r.mask&&wn(s,r),s}function Qd(u,e,n,i,r){var t=u.getValue(),s=r.verticalNavigation||"hybrid",o=String(t!==null&&typeof t<"u"?t:""),a=document.createElement("textarea"),l=0;if(a.style.display="block",a.style.padding="2px",a.style.height="100%",a.style.width="100%",a.style.boxSizing="border-box",a.style.whiteSpace="pre-wrap",a.style.resize="none",r.elementAttributes&&typeof r.elementAttributes=="object")for(let c in r.elementAttributes)c.charAt(0)=="+"?(c=c.slice(1),a.setAttribute(c,a.getAttribute(c)+r.elementAttributes["+"+c])):a.setAttribute(c,r.elementAttributes[c]);a.value=o,e(function(){u.getType()==="cell"&&(a.focus({preventScroll:!0}),a.style.height="100%",a.scrollHeight,a.style.height=a.scrollHeight+"px",u.getRow().normalizeHeight(),r.selectContents&&a.select())});function h(c){(t===null||typeof t>"u")&&a.value!==""||a.value!==t?(n(a.value)&&(t=a.value),setTimeout(function(){u.getRow().normalizeHeight()},300)):i()}return a.addEventListener("change",h),a.addEventListener("blur",h),a.addEventListener("keyup",function(){a.style.height="";var c=a.scrollHeight;a.style.height=c+"px",c!=l&&(l=c,u.getRow().normalizeHeight())}),a.addEventListener("keydown",function(c){switch(c.keyCode){case 13:c.shiftKey&&r.shiftEnterSubmit&&h();break;case 27:i();break;case 38:(s=="editor"||s=="hybrid"&&a.selectionStart)&&(c.stopImmediatePropagation(),c.stopPropagation());break;case 40:(s=="editor"||s=="hybrid"&&a.selectionStart!==a.value.length)&&(c.stopImmediatePropagation(),c.stopPropagation());break;case 35:case 36:c.stopPropagation();break}}),r.mask&&wn(a,r),a}function Xd(u,e,n,i,r){var t=u.getValue(),s=r.verticalNavigation||"editor",o=document.createElement("input");if(o.setAttribute("type","number"),typeof r.max<"u"&&o.setAttribute("max",r.max),typeof r.min<"u"&&o.setAttribute("min",r.min),typeof r.step<"u"&&o.setAttribute("step",r.step),o.style.padding="4px",o.style.width="100%",o.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let h in r.elementAttributes)h.charAt(0)=="+"?(h=h.slice(1),o.setAttribute(h,o.getAttribute(h)+r.elementAttributes["+"+h])):o.setAttribute(h,r.elementAttributes[h]);o.value=t;var a=function(h){l()};e(function(){u.getType()==="cell"&&(o.removeEventListener("blur",a),o.focus({preventScroll:!0}),o.style.height="100%",o.addEventListener("blur",a),r.selectContents&&o.select())});function l(){var h=o.value;!isNaN(h)&&h!==""&&(h=Number(h)),h!==t?n(h)&&(t=h):i()}return o.addEventListener("keydown",function(h){switch(h.keyCode){case 13:l();break;case 27:i();break;case 38:case 40:s=="editor"&&(h.stopImmediatePropagation(),h.stopPropagation());break;case 35:case 36:h.stopPropagation();break}}),r.mask&&wn(o,r),o}function Yd(u,e,n,i,r){var t=u.getValue(),s=document.createElement("input");if(s.setAttribute("type","range"),typeof r.max<"u"&&s.setAttribute("max",r.max),typeof r.min<"u"&&s.setAttribute("min",r.min),typeof r.step<"u"&&s.setAttribute("step",r.step),s.style.padding="4px",s.style.width="100%",s.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let a in r.elementAttributes)a.charAt(0)=="+"?(a=a.slice(1),s.setAttribute(a,s.getAttribute(a)+r.elementAttributes["+"+a])):s.setAttribute(a,r.elementAttributes[a]);s.value=t,e(function(){u.getType()==="cell"&&(s.focus({preventScroll:!0}),s.style.height="100%")});function o(){var a=s.value;!isNaN(a)&&a!==""&&(a=Number(a)),a!=t?n(a)&&(t=a):i()}return s.addEventListener("blur",function(a){o()}),s.addEventListener("keydown",function(a){switch(a.keyCode){case 13:o();break;case 27:i();break}}),s}function Zd(u,e,n,i,r){var t=r.format,s=r.verticalNavigation||"editor",o=t?window.DateTime||luxon.DateTime:null,a=u.getValue(),l=document.createElement("input");function h(d){var f;return o.isDateTime(d)?f=d:t==="iso"?f=o.fromISO(String(d)):f=o.fromFormat(String(d),t),f.toFormat("yyyy-MM-dd")}if(l.type="date",l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",r.max&&l.setAttribute("max",t?h(r.max):r.max),r.min&&l.setAttribute("min",t?h(r.min):r.min),r.elementAttributes&&typeof r.elementAttributes=="object")for(let d in r.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),l.setAttribute(d,l.getAttribute(d)+r.elementAttributes["+"+d])):l.setAttribute(d,r.elementAttributes[d]);a=typeof a<"u"?a:"",t&&(o?a=h(a):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),l.value=a,e(function(){u.getType()==="cell"&&(l.focus({preventScroll:!0}),l.style.height="100%",r.selectContents&&l.select())});function c(){var d=l.value,f;if((a===null||typeof a>"u")&&d!==""||d!==a){if(d&&t)switch(f=o.fromFormat(String(d),"yyyy-MM-dd"),t){case!0:d=f;break;case"iso":d=f.toISO();break;default:d=f.toFormat(t)}n(d)&&(a=l.value)}else i()}return l.addEventListener("blur",function(d){(d.relatedTarget||d.rangeParent||d.explicitOriginalTarget!==l)&&c()}),l.addEventListener("keydown",function(d){switch(d.keyCode){case 13:c();break;case 27:i();break;case 35:case 36:d.stopPropagation();break;case 38:case 40:s=="editor"&&(d.stopImmediatePropagation(),d.stopPropagation());break}}),l}function qd(u,e,n,i,r){var t=r.format,s=r.verticalNavigation||"editor",o=t?window.DateTime||luxon.DateTime:null,a,l=u.getValue(),h=document.createElement("input");if(h.type="time",h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let d in r.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),h.setAttribute(d,h.getAttribute(d)+r.elementAttributes["+"+d])):h.setAttribute(d,r.elementAttributes[d]);l=typeof l<"u"?l:"",t&&(o?(o.isDateTime(l)?a=l:t==="iso"?a=o.fromISO(String(l)):a=o.fromFormat(String(l),t),l=a.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),h.value=l,e(function(){u.getType()=="cell"&&(h.focus({preventScroll:!0}),h.style.height="100%",r.selectContents&&h.select())});function c(){var d=h.value,f;if((l===null||typeof l>"u")&&d!==""||d!==l){if(d&&t)switch(f=o.fromFormat(String(d),"hh:mm"),t){case!0:d=f;break;case"iso":d=f.toISO();break;default:d=f.toFormat(t)}n(d)&&(l=h.value)}else i()}return h.addEventListener("blur",function(d){(d.relatedTarget||d.rangeParent||d.explicitOriginalTarget!==h)&&c()}),h.addEventListener("keydown",function(d){switch(d.keyCode){case 13:c();break;case 27:i();break;case 35:case 36:d.stopPropagation();break;case 38:case 40:s=="editor"&&(d.stopImmediatePropagation(),d.stopPropagation());break}}),h}function _d(u,e,n,i,r){var t=r.format,s=r.verticalNavigation||"editor",o=t?this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"):null,a,l=u.getValue(),h=document.createElement("input");if(h.type="datetime-local",h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let d in r.elementAttributes)d.charAt(0)=="+"?(d=d.slice(1),h.setAttribute(d,h.getAttribute(d)+r.elementAttributes["+"+d])):h.setAttribute(d,r.elementAttributes[d]);l=typeof l<"u"?l:"",t&&(o?(o.isDateTime(l)?a=l:t==="iso"?a=o.fromISO(String(l)):a=o.fromFormat(String(l),t),l=a.toFormat("yyyy-MM-dd")+"T"+a.toFormat("HH:mm")):console.error("Editor Error - 'date' editor 'format' param is dependant on luxon.js")),h.value=l,e(function(){u.getType()==="cell"&&(h.focus({preventScroll:!0}),h.style.height="100%",r.selectContents&&h.select())});function c(){var d=h.value,f;if((l===null||typeof l>"u")&&d!==""||d!==l){if(d&&t)switch(f=o.fromISO(String(d)),t){case!0:d=f;break;case"iso":d=f.toISO();break;default:d=f.toFormat(t)}n(d)&&(l=h.value)}else i()}return h.addEventListener("blur",function(d){(d.relatedTarget||d.rangeParent||d.explicitOriginalTarget!==h)&&c()}),h.addEventListener("keydown",function(d){switch(d.keyCode){case 13:c();break;case 27:i();break;case 35:case 36:d.stopPropagation();break;case 38:case 40:s=="editor"&&(d.stopImmediatePropagation(),d.stopPropagation());break}}),h}let ec=class{constructor(e,n,i,r,t,s){this.edit=e,this.table=e.table,this.cell=n,this.params=this._initializeParams(s),this.data=[],this.displayItems=[],this.currentItems=[],this.focusedItem=null,this.input=this._createInputElement(),this.listEl=this._createListElement(),this.initialValues=null,this.isFilter=n.getType()==="header",this.filterTimeout=null,this.filtered=!1,this.typing=!1,this.values=[],this.popup=null,this.listIteration=0,this.lastAction="",this.filterTerm="",this.blurable=!0,this.actions={success:r,cancel:t},this._deprecatedOptionsCheck(),this._initializeValue(),i(this._onRendered.bind(this))}_deprecatedOptionsCheck(){}_initializeValue(){var e=this.cell.getValue();typeof e>"u"&&typeof this.params.defaultValue<"u"&&(e=this.params.defaultValue),this.initialValues=this.params.multiselect?e:[e],this.isFilter&&(this.input.value=this.initialValues?this.initialValues.join(","):"",this.headerFilterInitialListGen())}_onRendered(){var e=this.cell.getElement();function n(i){i.stopPropagation()}this.isFilter||(this.input.style.height="100%",this.input.focus({preventScroll:!0})),e.addEventListener("click",n),setTimeout(()=>{e.removeEventListener("click",n)},1e3),this.input.addEventListener("mousedown",this._preventPopupBlur.bind(this))}_createListElement(){var e=document.createElement("div");return e.classList.add("tabulator-edit-list"),e.addEventListener("mousedown",this._preventBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e}_setListWidth(){var e=this.isFilter?this.input:this.cell.getElement();this.listEl.style.minWidth=e.offsetWidth+"px",this.params.maxWidth&&(this.params.maxWidth===!0?this.listEl.style.maxWidth=e.offsetWidth+"px":typeof this.params.maxWidth=="number"?this.listEl.style.maxWidth=this.params.maxWidth+"px":this.listEl.style.maxWidth=this.params.maxWidth)}_createInputElement(){var e=this.params.elementAttributes,n=document.createElement("input");if(n.setAttribute("type",this.params.clearable?"search":"text"),n.style.padding="4px",n.style.width="100%",n.style.boxSizing="border-box",this.params.autocomplete||(n.style.cursor="default",n.style.caretColor="transparent"),e&&typeof e=="object")for(let i in e)i.charAt(0)=="+"?(i=i.slice(1),n.setAttribute(i,n.getAttribute(i)+e["+"+i])):n.setAttribute(i,e[i]);return this.params.mask&&wn(n,this.params),this._bindInputEvents(n),n}_initializeParams(e){var n=["values","valuesURL","valuesLookup"],i;return e=Object.assign({},e),e.verticalNavigation=e.verticalNavigation||"editor",e.placeholderLoading=typeof e.placeholderLoading>"u"?"Searching ...":e.placeholderLoading,e.placeholderEmpty=typeof e.placeholderEmpty>"u"?"No Results Found":e.placeholderEmpty,e.filterDelay=typeof e.filterDelay>"u"?300:e.filterDelay,e.emptyValue=Object.keys(e).includes("emptyValue")?e.emptyValue:"",i=Object.keys(e).filter(r=>n.includes(r)).length,i?i>1&&console.warn("list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor"):console.warn("list editor config error - either the values, valuesURL, or valuesLookup option must be set"),e.autocomplete?e.multiselect&&(e.multiselect=!1,console.warn("list editor config error - multiselect option is not available when autocomplete is enabled")):(e.freetext&&(e.freetext=!1,console.warn("list editor config error - freetext option is only available when autocomplete is enabled")),e.filterFunc&&(e.filterFunc=!1,console.warn("list editor config error - filterFunc option is only available when autocomplete is enabled")),e.filterRemote&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option is only available when autocomplete is enabled")),e.mask&&(e.mask=!1,console.warn("list editor config error - mask option is only available when autocomplete is enabled")),e.allowEmpty&&(e.allowEmpty=!1,console.warn("list editor config error - allowEmpty option is only available when autocomplete is enabled")),e.listOnEmpty&&(e.listOnEmpty=!1,console.warn("list editor config error - listOnEmpty option is only available when autocomplete is enabled"))),e.filterRemote&&!(typeof e.valuesLookup=="function"||e.valuesURL)&&(e.filterRemote=!1,console.warn("list editor config error - filterRemote option should only be used when values list is populated from a remote source")),e}_bindInputEvents(e){e.addEventListener("focus",this._inputFocus.bind(this)),e.addEventListener("click",this._inputClick.bind(this)),e.addEventListener("blur",this._inputBlur.bind(this)),e.addEventListener("keydown",this._inputKeyDown.bind(this)),e.addEventListener("search",this._inputSearch.bind(this)),this.params.autocomplete&&e.addEventListener("keyup",this._inputKeyUp.bind(this))}_inputFocus(e){this.rebuildOptionsList()}_filter(){this.params.filterRemote?(clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.rebuildOptionsList()},this.params.filterDelay)):this._filterList()}_inputClick(e){e.stopPropagation()}_inputBlur(e){this.blurable&&(this.popup?this.popup.hide():this._resolveValue(!0))}_inputSearch(){this._clearChoices()}_inputKeyDown(e){switch(e.keyCode){case 38:this._keyUp(e);break;case 40:this._keyDown(e);break;case 37:case 39:this._keySide(e);break;case 13:this._keyEnter();break;case 27:this._keyEsc();break;case 36:case 35:this._keyHomeEnd(e);break;case 9:this._keyTab(e);break;default:this._keySelectLetter(e)}}_inputKeyUp(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:this._keyAutoCompLetter(e)}}_preventPopupBlur(){this.popup&&this.popup.blockHide(),setTimeout(()=>{this.popup&&this.popup.restoreHide()},10)}_preventBlur(){this.blurable=!1,setTimeout(()=>{this.blurable=!0},10)}_keyTab(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem,!0)}_keyUp(e){var n=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&n)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),n>0&&this._focusItem(this.displayItems[n-1]))}_keyDown(e){var n=this.displayItems.indexOf(this.focusedItem);(this.params.verticalNavigation=="editor"||this.params.verticalNavigation=="hybrid"&&n<this.displayItems.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),n<this.displayItems.length-1&&(n==-1?this._focusItem(this.displayItems[0]):this._focusItem(this.displayItems[n+1])))}_keySide(e){this.params.autocomplete||(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())}_keyEnter(e){this.params.autocomplete&&this.lastAction==="typing"?this._resolveValue(!0):this.focusedItem&&this._chooseItem(this.focusedItem)}_keyEsc(e){this._cancel()}_keyHomeEnd(e){this.params.autocomplete&&e.stopImmediatePropagation()}_keySelectLetter(e){this.params.autocomplete||(e.preventDefault(),e.keyCode>=38&&e.keyCode<=90&&this._scrollToValue(e.keyCode))}_keyAutoCompLetter(e){this._filter(),this.lastAction="typing",this.typing=!0}_scrollToValue(e){clearTimeout(this.filterTimeout);var n=String.fromCharCode(e).toLowerCase();this.filterTerm+=n.toLowerCase();var i=this.displayItems.find(r=>typeof r.label<"u"&&r.label.toLowerCase().startsWith(this.filterTerm));i&&this._focusItem(i),this.filterTimeout=setTimeout(()=>{this.filterTerm=""},800)}_focusItem(e){this.lastAction="focus",this.focusedItem&&this.focusedItem.element&&this.focusedItem.element.classList.remove("focused"),this.focusedItem=e,e&&e.element&&(e.element.classList.add("focused"),e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}headerFilterInitialListGen(){this._generateOptions(!0)}rebuildOptionsList(){this._generateOptions().then(this._sortOptions.bind(this)).then(this._buildList.bind(this)).then(this._showList.bind(this)).catch(e=>{Number.isInteger(e)||console.error("List generation error",e)})}_filterList(){this._buildList(this._filterOptions()),this._showList()}_generateOptions(e){var n=[],i=++this.listIteration;return this.filtered=!1,this.params.values?n=this.params.values:this.params.valuesURL?n=this._ajaxRequest(this.params.valuesURL,this.input.value):typeof this.params.valuesLookup=="function"?n=this.params.valuesLookup(this.cell,this.input.value):this.params.valuesLookup&&(n=this._uniqueColumnValues(this.params.valuesLookupField)),n instanceof Promise?(e||this._addPlaceholder(this.params.placeholderLoading),n.then().then(r=>this.listIteration===i?this._parseList(r):Promise.reject(i))):Promise.resolve(this._parseList(n))}_addPlaceholder(e){var n=document.createElement("div");typeof e=="function"&&(e=e(this.cell.getComponent(),this.listEl)),e&&(this._clearList(),e instanceof HTMLElement?n=e:(n.classList.add("tabulator-edit-list-placeholder"),n.innerHTML=e),this.listEl.appendChild(n),this._showList())}_ajaxRequest(e,n){var i=this.params.filterRemote?{term:n}:{};return e=No(e,{},i),fetch(e).then(r=>r.ok?r.json().catch(t=>(console.warn("List Ajax Load Error - Invalid JSON returned",t),Promise.reject(t))):(console.error("List Ajax Load Error - Connection Error: "+r.status,r.statusText),Promise.reject(r))).catch(r=>(console.error("List Ajax Load Error - Connection Error: ",r),Promise.reject(r)))}_uniqueColumnValues(e){var n={},i=this.table.getData(this.params.valuesLookup),r;return e?r=this.table.columnManager.getColumnByField(e):r=this.cell.getColumn()._getSelf(),r?i.forEach(t=>{var s=r.getFieldValue(t);this._emptyValueCheck(s)||(this.params.multiselect&&Array.isArray(s)?s.forEach(o=>{this._emptyValueCheck(o)||(n[o]=!0)}):n[s]=!0)}):(console.warn("unable to find matching column to create select lookup list:",e),n=[]),Object.keys(n)}_emptyValueCheck(e){return e===null||typeof e>"u"||e===""}_parseList(e){var n=[];return Array.isArray(e)||(e=Object.entries(e).map(([i,r])=>({label:r,value:i}))),e.forEach(i=>{typeof i!="object"&&(i={label:i,value:i}),this._parseListItem(i,n,0)}),!this.currentItems.length&&this.params.freetext&&(this.input.value=this.initialValues,this.typing=!0,this.lastAction="typing"),this.data=n,n}_parseListItem(e,n,i){var r={};e.options?r=this._parseListGroup(e,i+1):(r={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,selected:!1,visible:!0,level:i,original:e},this.initialValues&&this.initialValues.indexOf(e.value)>-1&&this._chooseItem(r,!0)),n.push(r)}_parseListGroup(e,n){var i={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1,visible:!0,level:n,options:[],original:e};return e.options.forEach(r=>{this._parseListItem(r,i.options,n)}),i}_sortOptions(e){var n;return this.params.sort&&(n=typeof this.params.sort=="function"?this.params.sort:this._defaultSortFunction.bind(this),this._sortGroup(n,e)),e}_sortGroup(e,n){n.sort((i,r)=>e(i.label,r.label,i.value,r.value,i.original,r.original)),n.forEach(i=>{i.group&&this._sortGroup(e,i.options)})}_defaultSortFunction(e,n){var i,r,t,s,o=0,a,l=/(\d+)|(\D+)/g,h=/\d/,c=0;if(this.params.sort==="desc"&&([e,n]=[n,e]),!e&&e!==0)c=!n&&n!==0?0:-1;else if(!n&&n!==0)c=1;else{if(isFinite(e)&&isFinite(n))return e-n;if(i=String(e).toLowerCase(),r=String(n).toLowerCase(),i===r)return 0;if(!(h.test(i)&&h.test(r)))return i>r?1:-1;for(i=i.match(l),r=r.match(l),a=i.length>r.length?r.length:i.length;o<a;)if(t=i[o],s=r[o++],t!==s)return isFinite(t)&&isFinite(s)?(t.charAt(0)==="0"&&(t="."+t),s.charAt(0)==="0"&&(s="."+s),t-s):t>s?1:-1;return i.length>r.length}return c}_filterOptions(){var e=this.params.filterFunc||this._defaultFilterFunc,n=this.input.value;return n?(this.filtered=!0,this.data.forEach(i=>{this._filterItem(e,n,i)})):this.filtered=!1,this.data}_filterItem(e,n,i){var r=!1;return i.group?(i.options.forEach(t=>{this._filterItem(e,n,t)&&(r=!0)}),i.visible=r):i.visible=e(n,i.label,i.value,i.original),i.visible}_defaultFilterFunc(e,n,i,r){return e=String(e).toLowerCase(),n!==null&&typeof n<"u"&&(String(n).toLowerCase().indexOf(e)>-1||String(i).toLowerCase().indexOf(e)>-1)}_clearList(){for(;this.listEl.firstChild;)this.listEl.removeChild(this.listEl.firstChild);this.displayItems=[]}_buildList(e){this._clearList(),e.forEach(n=>{this._buildItem(n)}),this.displayItems.length||this._addPlaceholder(this.params.placeholderEmpty)}_buildItem(e){var n=e.element,i;if(!this.filtered||e.visible){if(!n){if(n=document.createElement("div"),n.tabIndex=0,i=this.params.itemFormatter?this.params.itemFormatter(e.label,e.value,e.original,n):e.label,i instanceof HTMLElement?n.appendChild(i):n.innerHTML=i,e.group?n.classList.add("tabulator-edit-list-group"):n.classList.add("tabulator-edit-list-item"),n.classList.add("tabulator-edit-list-group-level-"+e.level),e.elementAttributes&&typeof e.elementAttributes=="object")for(let r in e.elementAttributes)r.charAt(0)=="+"?(r=r.slice(1),n.setAttribute(r,this.input.getAttribute(r)+e.elementAttributes["+"+r])):n.setAttribute(r,e.elementAttributes[r]);e.group?n.addEventListener("click",this._groupClick.bind(this,e)):n.addEventListener("click",this._itemClick.bind(this,e)),n.addEventListener("mousedown",this._preventBlur.bind(this)),e.element=n}this._styleItem(e),this.listEl.appendChild(n),e.group?e.options.forEach(r=>{this._buildItem(r)}):this.displayItems.push(e)}}_showList(){var e=this.popup&&this.popup.isVisible();if(this.input.parentNode){if(this.params.autocomplete&&this.input.value===""&&!this.params.listOnEmpty){this.popup&&this.popup.hide(!0);return}this._setListWidth(),this.popup||(this.popup=this.edit.popup(this.listEl)),this.popup.show(this.cell.getElement(),"bottom"),e||setTimeout(()=>{this.popup.hideOnBlur(this._resolveValue.bind(this,!0))},10)}}_styleItem(e){e&&e.element&&(e.selected?e.element.classList.add("active"):e.element.classList.remove("active"))}_itemClick(e,n){n.stopPropagation(),this._chooseItem(e)}_groupClick(e,n){n.stopPropagation()}_cancel(){this.popup.hide(!0),this.actions.cancel()}_clearChoices(){this.typing=!0,this.currentItems.forEach(e=>{e.selected=!1,this._styleItem(e)}),this.currentItems=[],this.focusedItem=null}_chooseItem(e,n){var i;this.typing=!1,this.params.multiselect?(i=this.currentItems.indexOf(e),i>-1?(this.currentItems.splice(i,1),e.selected=!1):(this.currentItems.push(e),e.selected=!0),this.input.value=this.currentItems.map(r=>r.label).join(","),this._styleItem(e)):(this.currentItems=[e],e.selected=!0,this.input.value=e.label,this._styleItem(e),n||this._resolveValue()),this._focusItem(e)}_resolveValue(e){var n,i;if(this.popup&&this.popup.hide(!0),this.params.multiselect)n=this.currentItems.map(r=>r.value);else if(e&&this.params.autocomplete&&this.typing)if(this.params.freetext||this.params.allowEmpty&&this.input.value==="")n=this.input.value;else{this.actions.cancel();return}else this.currentItems[0]?n=this.currentItems[0].value:(i=Array.isArray(this.initialValues)?this.initialValues[0]:this.initialValues,i===null||typeof i>"u"||i===""?n=i:n=this.params.emptyValue);n===""&&(n=this.params.emptyValue),this.actions.success(n),this.isFilter&&(this.initialValues=n&&!Array.isArray(n)?[n]:n,this.currentItems=[])}};function tc(u,e,n,i,r){var t=new ec(this,u,e,n,i,r);return t.input}function ic(u,e,n,i,r){var t=this,s=u.getElement(),o=u.getValue(),a=s.getElementsByTagName("svg").length||5,l=s.getElementsByTagName("svg")[0]?s.getElementsByTagName("svg")[0].getAttribute("width"):14,h=[],c=document.createElement("div"),d=document.createElementNS("http://www.w3.org/2000/svg","svg");function f(p){h.forEach(function(E,w){w<p?(t.table.browser=="ie"?E.setAttribute("class","tabulator-star-active"):E.classList.replace("tabulator-star-inactive","tabulator-star-active"),E.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):(t.table.browser=="ie"?E.setAttribute("class","tabulator-star-inactive"):E.classList.replace("tabulator-star-active","tabulator-star-inactive"),E.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function m(p){var E=document.createElement("span"),w=d.cloneNode(!0);h.push(w),E.addEventListener("mouseenter",function(O){O.stopPropagation(),O.stopImmediatePropagation(),f(p)}),E.addEventListener("mousemove",function(O){O.stopPropagation(),O.stopImmediatePropagation()}),E.addEventListener("click",function(O){O.stopPropagation(),O.stopImmediatePropagation(),n(p),s.blur()}),E.appendChild(w),c.appendChild(E)}function g(p){o=p,f(p)}if(s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.textOverflow="ellipsis",c.style.verticalAlign="middle",c.style.display="inline-block",c.style.padding="4px",d.setAttribute("width",l),d.setAttribute("height",l),d.setAttribute("viewBox","0 0 512 512"),d.setAttribute("xml:space","preserve"),d.style.padding="0 1px",r.elementAttributes&&typeof r.elementAttributes=="object")for(let p in r.elementAttributes)p.charAt(0)=="+"?(p=p.slice(1),c.setAttribute(p,c.getAttribute(p)+r.elementAttributes["+"+p])):c.setAttribute(p,r.elementAttributes[p]);for(var v=1;v<=a;v++)m(v);return o=Math.min(parseInt(o),a),f(o),c.addEventListener("mousemove",function(p){f(0)}),c.addEventListener("click",function(p){n(0)}),s.addEventListener("blur",function(p){i()}),s.addEventListener("keydown",function(p){switch(p.keyCode){case 39:g(o+1);break;case 37:g(o-1);break;case 13:n(o);break;case 27:i();break}}),c}function nc(u,e,n,i,r){var t=u.getElement(),s=typeof r.max>"u"?t.getElementsByTagName("div")[0]&&t.getElementsByTagName("div")[0].getAttribute("max")||100:r.max,o=typeof r.min>"u"?t.getElementsByTagName("div")[0]&&t.getElementsByTagName("div")[0].getAttribute("min")||0:r.min,a=(s-o)/100,l=u.getValue()||0,h=document.createElement("div"),c=document.createElement("div"),d,f;function m(){var g=window.getComputedStyle(t,null),v=a*Math.round(c.offsetWidth/((t.clientWidth-parseInt(g.getPropertyValue("padding-left"))-parseInt(g.getPropertyValue("padding-right")))/100))+o;n(v),t.setAttribute("aria-valuenow",v),t.setAttribute("aria-label",l)}if(h.style.position="absolute",h.style.right="0",h.style.top="0",h.style.bottom="0",h.style.width="5px",h.classList.add("tabulator-progress-handle"),c.style.display="inline-block",c.style.position="relative",c.style.height="100%",c.style.backgroundColor="#488CE9",c.style.maxWidth="100%",c.style.minWidth="0%",r.elementAttributes&&typeof r.elementAttributes=="object")for(let g in r.elementAttributes)g.charAt(0)=="+"?(g=g.slice(1),c.setAttribute(g,c.getAttribute(g)+r.elementAttributes["+"+g])):c.setAttribute(g,r.elementAttributes[g]);return t.style.padding="4px 4px",l=Math.min(parseFloat(l),s),l=Math.max(parseFloat(l),o),l=Math.round((l-o)/a),c.style.width=l+"%",t.setAttribute("aria-valuemin",o),t.setAttribute("aria-valuemax",s),c.appendChild(h),h.addEventListener("mousedown",function(g){d=g.screenX,f=c.offsetWidth}),h.addEventListener("mouseover",function(){h.style.cursor="ew-resize"}),t.addEventListener("mousemove",function(g){d&&(c.style.width=f+g.screenX-d+"px")}),t.addEventListener("mouseup",function(g){d&&(g.stopPropagation(),g.stopImmediatePropagation(),d=!1,f=!1,m())}),t.addEventListener("keydown",function(g){switch(g.keyCode){case 39:g.preventDefault(),c.style.width=c.clientWidth+t.clientWidth/100+"px";break;case 37:g.preventDefault(),c.style.width=c.clientWidth-t.clientWidth/100+"px";break;case 9:case 13:m();break;case 27:i();break}}),t.addEventListener("blur",function(){i()}),c}function rc(u,e,n,i,r){var t=u.getValue(),s=document.createElement("input"),o=r.tristate,a=typeof r.indeterminateValue>"u"?null:r.indeterminateValue,l=!1,h=Object.keys(r).includes("trueValue"),c=Object.keys(r).includes("falseValue");if(s.setAttribute("type","checkbox"),s.style.marginTop="5px",s.style.boxSizing="border-box",r.elementAttributes&&typeof r.elementAttributes=="object")for(let f in r.elementAttributes)f.charAt(0)=="+"?(f=f.slice(1),s.setAttribute(f,s.getAttribute(f)+r.elementAttributes["+"+f])):s.setAttribute(f,r.elementAttributes[f]);s.value=t,o&&(typeof t>"u"||t===a||t==="")&&(l=!0,s.indeterminate=!0),this.table.browser!="firefox"&&this.table.browser!="safari"&&e(function(){u.getType()==="cell"&&s.focus({preventScroll:!0})}),s.checked=h?t===r.trueValue:t===!0||t==="true"||t==="True"||t===1;function d(f){var m=s.checked;return h&&m?m=r.trueValue:c&&!m&&(m=r.falseValue),o?f?l?a:m:s.checked&&!l?(s.checked=!1,s.indeterminate=!0,l=!0,a):(l=!1,m):m}return s.addEventListener("change",function(f){n(d())}),s.addEventListener("blur",function(f){n(d(!0))}),s.addEventListener("keydown",function(f){f.keyCode==13&&n(d()),f.keyCode==27&&i()}),s}function sc(u,e,n,i,r){var t=u._getSelf().column,s,o,a;function l(h){var c=h.getValue(),d="input";switch(typeof c){case"number":d="number";break;case"boolean":d="tickCross";break;case"string":c.includes(`
`)&&(d="textarea");break}return d}return s=r.editorLookup?r.editorLookup(u):l(u),r.paramsLookup&&(a=typeof r.paramsLookup=="function"?r.paramsLookup(s,u):r.paramsLookup[s]),o=this.table.modules.edit.lookupEditor(s,t),o.call(this,u,e,n,i,a||{})}var oc={input:Jd,textarea:Qd,number:Xd,range:Yd,date:Zd,time:qd,datetime:_d,list:tc,star:ic,progress:nc,tickCross:rc,adaptable:sc};const Bi=class Bi extends Ce{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.convertEmptyValues=!1,this.editors=Bi.editors,this.registerTableOption("editTriggerEvent","focus"),this.registerTableOption("editorEmptyValue"),this.registerTableOption("editorEmptyValueFunc",this.emptyValueCheck.bind(this)),this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("editorEmptyValue"),this.registerColumnOption("editorEmptyValueFunc"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellIsEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("cell-value-changed",this.updateCellClass.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("row-layout",this.rowEditableCheck.bind(this)),this.subscribe("data-refreshing",this.cancelEdit.bind(this)),this.subscribe("clipboard-paste",this.pasteBlocker.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this,void 0)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this,void 0)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this,void 0)),Object.keys(this.table.options).includes("editorEmptyValue")&&(this.convertEmptyValues=!0)}pasteBlocker(e){if(this.currentCell)return!0}keybindingNavigateNext(e){var n=this.currentCell,i=this.options("tabEndNewRow");n&&(this.navigateNext(n,e)||i&&(n.getElement().firstChild.blur(),this.invalidEdit||(i===!0?i=this.table.addRow({}):typeof i=="function"?i=this.table.addRow(i(n.row.getComponent())):i=this.table.addRow(Object.assign({},i)),i.then(()=>{setTimeout(()=>{n.getComponent().navigateNext()})}))))}cellIsEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}updateCellClass(e){this.allowEdit(e)?e.getElement().classList.add("tabulator-editable"):e.getElement().classList.remove("tabulator-editable")}clearCellEdited(e){e||(e=this.table.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.table.modules.edit.clearEdited(n._getSelf())})}navigatePrev(e=this.currentCell,n){var i,r;if(e){if(n&&n.preventDefault(),i=this.navigateLeft(),i)return!0;if(r=this.table.rowManager.prevDisplayRow(e.row,!0),r&&(i=this.findPrevEditableCell(r,r.cells.length),i))return i.getComponent().edit(),!0}return!1}navigateNext(e=this.currentCell,n){var i,r;if(e){if(n&&n.preventDefault(),i=this.navigateRight(),i)return!0;if(r=this.table.rowManager.nextDisplayRow(e.row,!0),r&&(i=this.findNextEditableCell(r,-1),i))return i.getComponent().edit(),!0}return!1}navigateLeft(e=this.currentCell,n){var i,r;return e&&(n&&n.preventDefault(),i=e.getIndex(),r=this.findPrevEditableCell(e.row,i),r)?(r.getComponent().edit(),!0):!1}navigateRight(e=this.currentCell,n){var i,r;return e&&(n&&n.preventDefault(),i=e.getIndex(),r=this.findNextEditableCell(e.row,i),r)?(r.getComponent().edit(),!0):!1}navigateUp(e=this.currentCell,n){var i,r;return e&&(n&&n.preventDefault(),i=e.getIndex(),r=this.table.rowManager.prevDisplayRow(e.row,!0),r)?(r.cells[i].getComponent().edit(),!0):!1}navigateDown(e=this.currentCell,n){var i,r;return e&&(n&&n.preventDefault(),i=e.getIndex(),r=this.table.rowManager.nextDisplayRow(e.row,!0),r)?(r.cells[i].getComponent().edit(),!0):!1}findNextEditableCell(e,n){var i=!1;if(n<e.cells.length-1)for(var r=n+1;r<e.cells.length;r++){let t=e.cells[r];if(t.column.modules.edit&&Pe.elVisible(t.getElement())&&this.allowEdit(t)){i=t;break}}return i}findPrevEditableCell(e,n){var i=!1;if(n>0)for(var r=n-1;r>=0;r--){let t=e.cells[r];if(t.column.modules.edit&&Pe.elVisible(t.getElement())&&this.allowEdit(t)){i=t;break}}return i}initializeColumnCheck(e){typeof e.definition.editor<"u"&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}rowEditableCheck(e){e.getCells().forEach(n=>{n.column.modules.edit&&typeof n.column.modules.edit.check=="function"&&this.updateCellClass(n)})}initializeColumn(e){var n=Object.keys(e.definition).includes("editorEmptyValue"),i={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{},convertEmptyValues:n,editorEmptyValue:e.definition.editorEmptyValue,editorEmptyValueFunc:e.definition.editorEmptyValueFunc};i.editor=this.lookupEditor(e.definition.editor,e),i.editor&&(e.modules.edit=i)}lookupEditor(e,n){var i;switch(typeof e){case"string":this.editors[e]?i=this.editors[e]:console.warn("Editor Error - No such editor found: ",e);break;case"function":i=e;break;case"boolean":e===!0&&(typeof n.definition.formatter!="function"?this.editors[n.definition.formatter]?i=this.editors[n.definition.formatter]:i=this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",n.definition.formatter));break}return i}getCurrentCell(){return this.currentCell?this.currentCell.getComponent():!1}clearEditor(e){var n=this.currentCell,i;if(this.invalidEdit=!1,n){for(this.currentCell=!1,i=n.getElement(),this.dispatch("edit-editor-clear",n,e),i.classList.remove("tabulator-editing");i.firstChild;)i.removeChild(i.firstChild);n.row.getElement().classList.remove("tabulator-editing"),n.table.element.classList.remove("tabulator-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,n=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),(e.column.definition.editor=="textarea"||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,n),this.dispatch("edit-cancelled",e),this.dispatchExternal("cellEditCancelled",n)}}bindEditor(e){if(e.column.modules.edit){var n=this,i=e.getElement(!0);this.updateCellClass(e),i.setAttribute("tabindex",0),i.addEventListener("mousedown",function(r){r.button===2?r.preventDefault():n.mouseClick=!0}),this.options("editTriggerEvent")==="dblclick"&&i.addEventListener("dblclick",function(r){i.classList.contains("tabulator-editing")||(i.focus({preventScroll:!0}),n.edit(e,r,!1))}),(this.options("editTriggerEvent")==="focus"||this.options("editTriggerEvent")==="click")&&i.addEventListener("click",function(r){i.classList.contains("tabulator-editing")||(i.focus({preventScroll:!0}),n.edit(e,r,!1))}),this.options("editTriggerEvent")==="focus"&&i.addEventListener("focus",function(r){n.recursionBlock||n.edit(e,r,!1)})}}focusCellNoEvent(e,n){this.recursionBlock=!0,n&&this.table.browser==="ie"||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,n){this.focusCellNoEvent(e),this.edit(e,!1,n)}focusScrollAdjust(e){if(this.table.rowManager.getRenderMode()=="virtual"){var n=this.table.rowManager.element.scrollTop,i=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,r=e.row.getElement();r.offsetTop<n?this.table.rowManager.element.scrollTop-=n-r.offsetTop:r.offsetTop+r.offsetHeight>i&&(this.table.rowManager.element.scrollTop+=r.offsetTop+r.offsetHeight-i);var t=this.table.rowManager.element.scrollLeft,s=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,o=e.getElement();this.table.modExists("frozenColumns")&&(t+=parseInt(this.table.modules.frozenColumns.leftMargin||0),s-=parseInt(this.table.modules.frozenColumns.rightMargin||0)),this.table.options.renderHorizontal==="virtual"&&(t-=parseInt(this.table.columnManager.renderer.vDomPadLeft),s-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),o.offsetLeft<t?this.table.rowManager.element.scrollLeft-=t-o.offsetLeft:o.offsetLeft+o.offsetWidth>s&&(this.table.rowManager.element.scrollLeft+=o.offsetLeft+o.offsetWidth-s)}}allowEdit(e){var n=!!e.column.modules.edit;if(e.column.modules.edit)switch(typeof e.column.modules.edit.check){case"function":e.row.initialized&&(n=e.column.modules.edit.check(e.getComponent()));break;case"string":n=!!e.row.data[e.column.modules.edit.check];break;case"boolean":n=e.column.modules.edit.check;break}return n}edit(e,n,i){var r=this,t=!0,s=function(){},o=e.getElement(),a=!1,l,h,c;if(this.currentCell){!this.invalidEdit&&this.currentCell!==e&&this.cancelEdit();return}function d(p){if(r.currentCell===e&&!a){var E=r.chain("edit-success",[e,p],!0,!0);return E===!0||r.table.options.validationMode==="highlight"?(a=!0,r.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,r.editedCells.indexOf(e)==-1&&r.editedCells.push(e),p=r.transformEmptyValues(p,e),e.setValue(p,!0),E===!0):(a=!0,r.invalidEdit=!0,r.focusCellNoEvent(e,!0),s(),setTimeout(()=>{a=!1},10),!1)}}function f(){r.currentCell===e&&!a&&r.cancelEdit()}function m(p){s=p}if(e.column.modules.edit.blocked)return this.mouseClick=!1,this.blur(o),!1;if(n&&n.stopPropagation(),t=this.allowEdit(e),t||i){if(r.cancelEdit(),r.currentCell=e,this.focusScrollAdjust(e),h=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,n,h)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,h),this.dispatch("cell-editing",e),this.dispatchExternal("cellEditing",h),c=typeof e.column.modules.edit.params=="function"?e.column.modules.edit.params(h):e.column.modules.edit.params,l=e.column.modules.edit.editor.call(r,h,m,d,f,c),this.currentCell&&l!==!1)if(l instanceof Node){for(o.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-editing"),e.table.element.classList.add("tabulator-editing");o.firstChild;)o.removeChild(o.firstChild);o.appendChild(l),s();for(var g=o.children,v=0;v<g.length;v++)g[v].addEventListener("click",function(p){p.stopPropagation()})}else return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",l),this.blur(o),!1;else return this.blur(o),!1;return!0}else return this.mouseClick=!1,this.blur(o),!1}emptyValueCheck(e){return e===""||e===null||typeof e>"u"}transformEmptyValues(e,n){var i=n.column.modules.edit,r=i.convertEmptyValues||this.convertEmptyValues,t;return r&&(t=i.editorEmptyValueFunc||this.options("editorEmptyValueFunc"),t&&t(e)&&(e=i.convertEmptyValues?i.editorEmptyValue:this.options("editorEmptyValue"))),e}blur(e){this.confirm("edit-blur",[e])||e.blur()}getEditedCells(){var e=[];return this.editedCells.forEach(n=>{e.push(n.getComponent())}),e}clearEdited(e){var n;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,this.dispatch("edit-edited-clear",e)),n=this.editedCells.indexOf(e),n>-1&&this.editedCells.splice(n,1)}};te(Bi,"moduleName","edit"),te(Bi,"editors",oc);let yr=Bi;class Ts{constructor(e,n,i,r){this.type=e,this.columns=n,this.component=i||!1,this.indent=r||0}}class kn{constructor(e,n,i,r,t){this.value=e,this.component=n||!1,this.width=i,this.height=r,this.depth=t}}var ac={},lc={visible:function(){return this.rowManager.getVisibleRows(!1,!0)},all:function(){return this.rowManager.rows},selected:function(){return this.modules.selectRow.selectedRows},active:function(){return this.options.pagination?this.rowManager.getDisplayRows(this.rowManager.displayRows.length-2):this.rowManager.getDisplayRows()}};const Kt=class Kt extends Ce{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.colVisPropAttach="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,n,i,r){var t,s,o,a;return this.cloneTableStyle=n,this.config=e||{},this.colVisProp=r,this.colVisPropAttach=this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1),a=Kt.columnLookups[i],a&&(o=a.call(this.table),o=o.filter(l=>this.columnVisCheck(l))),t=this.config.columnHeaders!==!1?this.headersToExportRows(this.generateColumnGroupHeaders(o)):[],o&&(o=o.map(l=>l.getComponent())),s=this.bodyToExportRows(this.rowLookup(i),o),t.concat(s)}generateTable(e,n,i,r){var t=this.generateExportList(e,n,i,r);return this.generateTableElement(t)}rowLookup(e){var n=[],i;return typeof e=="function"?e.call(this.table).forEach(r=>{r=this.table.rowManager.findRow(r),r&&n.push(r)}):(i=Kt.rowLookups[e]||Kt.rowLookups.active,n=i.call(this.table)),Object.assign([],n)}generateColumnGroupHeaders(e){var n=[];return e||(e=this.config.columnGroups!==!1?this.table.columnManager.columns:this.table.columnManager.columnsByIndex),e.forEach(i=>{var r=this.processColumnGroup(i);r&&n.push(r)}),n}processColumnGroup(e){var n=e.columns,i=0,r=e.definition["title"+this.colVisPropAttach]||e.definition.title,t={title:r,column:e,depth:1};if(n.length){if(t.subGroups=[],t.width=0,n.forEach(s=>{var o=this.processColumnGroup(s);o&&(t.width+=o.width,t.subGroups.push(o),o.depth>i&&(i=o.depth))}),t.depth+=i,!t.width)return!1}else if(this.columnVisCheck(e))t.width=1;else return!1;return t}columnVisCheck(e){var n=e.definition[this.colVisProp];return this.config.rowHeaders===!1&&e.isRowHeader?!1:(typeof n=="function"&&(n=n.call(this.table,e.getComponent())),n===!1||n===!0?n:e.visible&&e.field)}headersToExportRows(e){var n=[],i=0,r=[];function t(s,o){var a=i-o;if(typeof n[o]>"u"&&(n[o]=[]),s.height=s.subGroups?1:a-s.depth+1,n[o].push(s),s.height>1)for(let l=1;l<s.height;l++)typeof n[o+l]>"u"&&(n[o+l]=[]),n[o+l].push(!1);if(s.width>1)for(let l=1;l<s.width;l++)n[o].push(!1);s.subGroups&&s.subGroups.forEach(function(l){t(l,o+1)})}return e.forEach(function(s){s.depth>i&&(i=s.depth)}),e.forEach(function(s){t(s,0)}),n.forEach(s=>{var o=[];s.forEach(a=>{if(a){let l=typeof a.title>"u"?"":a.title;o.push(new kn(l,a.column.getComponent(),a.width,a.height,a.depth))}else o.push(null)}),r.push(new Ts("header",o))}),r}bodyToExportRows(e,n=[]){var i=[];return n.length===0&&this.table.columnManager.columnsByIndex.forEach(r=>{this.columnVisCheck(r)&&n.push(r.getComponent())}),this.config.columnCalcs!==!1&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),e=e.filter(r=>{switch(r.type){case"group":return this.config.rowGroups!==!1;case"calc":return this.config.columnCalcs!==!1;case"row":return!(this.table.options.dataTree&&this.config.dataTree===!1&&r.modules.dataTree.parent)}return!0}),e.forEach((r,t)=>{var s=r.getData(this.colVisProp),o=[],a=0;switch(r.type){case"group":a=r.level,o.push(new kn(r.key,r.getComponent(),n.length,1));break;case"calc":case"row":n.forEach(l=>{o.push(new kn(l._column.getFieldValue(s),l,1,1))}),this.table.options.dataTree&&this.config.dataTree!==!1&&(a=r.modules.dataTree.index);break}i.push(new Ts(r.type,o,r.getComponent(),a))}),i}generateTableElement(e){var n=document.createElement("table"),i=document.createElement("thead"),r=document.createElement("tbody"),t=this.lookupTableStyles(),s=this.table.options["rowFormatter"+this.colVisPropAttach],o={};return o.rowFormatter=s!==null?s:this.table.options.rowFormatter,this.table.options.dataTree&&this.config.dataTree!==!1&&this.table.modExists("columnCalcs")&&(o.treeElementField=this.table.modules.dataTree.elementField),o.groupHeader=this.table.options["groupHeader"+this.colVisPropAttach],o.groupHeader&&!Array.isArray(o.groupHeader)&&(o.groupHeader=[o.groupHeader]),n.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),i,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((a,l)=>{let h;switch(a.type){case"header":i.appendChild(this.generateHeaderElement(a,o,t));break;case"group":r.appendChild(this.generateGroupElement(a,o,t));break;case"calc":r.appendChild(this.generateCalcElement(a,o,t));break;case"row":h=this.generateRowElement(a,o,t),this.mapElementStyles(l%2&&t.evenRow?t.evenRow:t.oddRow,h,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r.appendChild(h);break}}),i.innerHTML&&n.appendChild(i),n.appendChild(r),this.mapElementStyles(this.table.element,n,["border-top","border-left","border-right","border-bottom"]),n}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.styleRowHeader=e.firstRow.getElementsByClassName("tabulator-row-header")[0],e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}generateHeaderElement(e,n,i){var r=document.createElement("tr");return e.columns.forEach(t=>{if(t){var s=document.createElement("th"),o=t.component._column.definition.cssClass?t.component._column.definition.cssClass.split(" "):[];s.colSpan=t.width,s.rowSpan=t.height,s.innerHTML=t.value,this.cloneTableStyle&&(s.style.boxSizing="border-box"),o.forEach(function(a){s.classList.add(a)}),this.mapElementStyles(t.component.getElement(),s,["text-align","border-left","border-right","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(t.component._column.contentElement,s,["padding-top","padding-left","padding-right","padding-bottom"]),t.component._column.visible?this.mapElementStyles(t.component.getElement(),s,["width"]):t.component._column.definition.width&&(s.style.width=t.component._column.definition.width+"px"),t.component._column.parent&&t.component._column.parent.isGroup?this.mapElementStyles(t.component._column.parent.groupElement,s,["border-top"]):this.mapElementStyles(t.component.getElement(),s,["border-top"]),t.component._column.isGroup?this.mapElementStyles(t.component.getElement(),s,["border-bottom"]):this.mapElementStyles(this.table.columnManager.getElement(),s,["border-bottom"]),r.appendChild(s)}}),r}generateGroupElement(e,n,i){var r=document.createElement("tr"),t=document.createElement("td"),s=e.columns[0];return r.classList.add("tabulator-print-table-row"),n.groupHeader&&n.groupHeader[e.indent]?s.value=n.groupHeader[e.indent](s.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):n.groupHeader!==!1&&(s.value=e.component._group.generator(s.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)),t.colSpan=s.width,t.innerHTML=s.value,r.classList.add("tabulator-print-table-group"),r.classList.add("tabulator-group-level-"+e.indent),s.component.isVisible()&&r.classList.add("tabulator-group-visible"),this.mapElementStyles(i.firstGroup,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(i.firstGroup,t,["padding-top","padding-left","padding-right","padding-bottom"]),r.appendChild(t),r}generateCalcElement(e,n,i){var r=this.generateRowElement(e,n,i);return r.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(i.calcRow,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r}generateRowElement(e,n,i){var r=document.createElement("tr");if(r.classList.add("tabulator-print-table-row"),e.columns.forEach((t,s)=>{if(t){var o=document.createElement("td"),a=t.component._column,l=this.table,h=l.columnManager.findColumnIndex(a),c=t.value,d,f,m={modules:{},getValue:function(){return c},getField:function(){return a.definition.field},getElement:function(){return o},getType:function(){return"cell"},getColumn:function(){return a.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getTable:function(){return l},getComponent:function(){return m},column:a},g=a.definition.cssClass?a.definition.cssClass.split(" "):[];if(g.forEach(function(v){o.classList.add(v)}),this.table.modExists("format")&&this.config.formatCells!==!1)c=this.table.modules.format.formatExportValue(m,this.colVisProp);else switch(typeof c){case"object":c=c!==null?JSON.stringify(c):"";break;case"undefined":c="";break}c instanceof Node?o.appendChild(c):o.innerHTML=c,f=["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","text-align"],a.isRowHeader?(d=i.styleRowHeader,f.push("background-color")):d=i.styleCells&&i.styleCells[h]?i.styleCells[h]:i.firstCell,d&&(this.mapElementStyles(d,o,f),a.definition.align&&(o.style.textAlign=a.definition.align)),this.table.options.dataTree&&this.config.dataTree!==!1&&(n.treeElementField&&n.treeElementField==a.field||!n.treeElementField&&s==0)&&(e.component._row.modules.dataTree.controlEl&&o.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),o.firstChild),e.component._row.modules.dataTree.branchEl&&o.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),o.firstChild)),r.appendChild(o),m.modules.format&&m.modules.format.renderedCallback&&m.modules.format.renderedCallback()}}),n.rowFormatter&&e.type==="row"&&this.config.formatCells!==!1){let t=Object.assign(e.component);t.getElement=function(){return r},n.rowFormatter(e.component)}return r}generateHTMLTable(e){var n=document.createElement("div");return n.appendChild(this.generateTableElement(e)),n.innerHTML}getHtml(e,n,i,r){var t=this.generateExportList(i||this.table.options.htmlOutputConfig,n,e,r||"htmlOutput");return this.generateHTMLTable(t)}mapElementStyles(e,n,i){if(this.cloneTableStyle&&e&&n){var r={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var t=window.getComputedStyle(e);i.forEach(function(s){n.style[r[s]]||(n.style[r[s]]=t.getPropertyValue(s))})}}}};te(Kt,"moduleName","export"),te(Kt,"columnLookups",ac),te(Kt,"rowLookups",lc);let Er=Kt;var uc={"=":function(u,e,n,i){return e==u},"<":function(u,e,n,i){return e<u},"<=":function(u,e,n,i){return e<=u},">":function(u,e,n,i){return e>u},">=":function(u,e,n,i){return e>=u},"!=":function(u,e,n,i){return e!=u},regex:function(u,e,n,i){return typeof u=="string"&&(u=new RegExp(u)),u.test(e)},like:function(u,e,n,i){return u===null||typeof u>"u"?e===u:typeof e<"u"&&e!==null?String(e).toLowerCase().indexOf(u.toLowerCase())>-1:!1},keywords:function(u,e,n,i){var r=u.toLowerCase().split(typeof i.separator>"u"?" ":i.separator),t=String(e===null||typeof e>"u"?"":e).toLowerCase(),s=[];return r.forEach(o=>{t.includes(o)&&s.push(!0)}),i.matchAll?s.length===r.length:!!s.length},starts:function(u,e,n,i){return u===null||typeof u>"u"?e===u:typeof e<"u"&&e!==null?String(e).toLowerCase().startsWith(u.toLowerCase()):!1},ends:function(u,e,n,i){return u===null||typeof u>"u"?e===u:typeof e<"u"&&e!==null?String(e).toLowerCase().endsWith(u.toLowerCase()):!1},in:function(u,e,n,i){return Array.isArray(u)?u.length?u.indexOf(e)>-1:!0:(console.warn("Filter Error - filter value is not an array:",u),!1)}};const Bt=class Bt extends Ce{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerTableOption("placeholderHeaderFilter",!1),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.subscribe("placeholder",this.generatePlaceholder.bind(this)),this.table.options.filterMode==="remote"&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var n=this.table.columnManager.findColumn(e.field);if(n)this.setHeaderFilterValue(n,e.value);else return console.warn("Column Filter Error - No matching column found:",e.field),!1}),this.tableInitialized=!0}remoteFilterParams(e,n,i,r){return r.filter=this.getFilters(!0,!0),r}generatePlaceholder(e){if(this.table.options.placeholderHeaderFilter&&Object.keys(this.headerFilters).length)return this.table.options.placeholderHeaderFilter}userSetFilter(e,n,i,r){this.setFilter(e,n,i,r),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,n,i,r){this.addFilter(e,n,i,r),this.refreshFilter()}userSetHeaderFilterFocus(e){var n=this.table.columnManager.findColumn(e);if(n)this.setHeaderFilterFocus(n);else return console.warn("Column Filter Focus Error - No matching column found:",e),!1}userGetHeaderFilterValue(e){var n=this.table.columnManager.findColumn(e);if(n)return this.getHeaderFilterValue(n);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,n){var i=this.table.columnManager.findColumn(e);if(i)this.setHeaderFilterValue(i,n);else return console.warn("Column Filter Error - No matching column found:",e),!1}userRemoveFilter(e,n,i){this.removeFilter(e,n,i),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,n,i){return this.search("rows",e,n,i)}searchData(e,n,i){return this.search("data",e,n,i)}initializeColumnHeaderFilter(e){var n=e.definition;n.headerFilter&&this.initializeColumn(e)}initializeColumn(e,n){var i=this,r=e.getField();function t(s){var o=e.modules.filter.tagType=="input"&&e.modules.filter.attrType=="text"||e.modules.filter.tagType=="textarea"?"partial":"match",a="",l="",h;if(typeof e.modules.filter.prevSuccess>"u"||e.modules.filter.prevSuccess!==s){if(e.modules.filter.prevSuccess=s,e.modules.filter.emptyFunc(s))delete i.headerFilters[r];else{switch(e.modules.filter.value=s,typeof e.definition.headerFilterFunc){case"string":Bt.filters[e.definition.headerFilterFunc]?(a=e.definition.headerFilterFunc,h=function(c){var d=e.definition.headerFilterFuncParams||{},f=e.getFieldValue(c);return d=typeof d=="function"?d(s,f,c):d,Bt.filters[e.definition.headerFilterFunc](s,f,c,d)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":h=function(c){var d=e.definition.headerFilterFuncParams||{},f=e.getFieldValue(c);return d=typeof d=="function"?d(s,f,c):d,e.definition.headerFilterFunc(s,f,c,d)},a=h;break}if(!h)switch(o){case"partial":h=function(c){var d=e.getFieldValue(c);return typeof d<"u"&&d!==null?String(d).toLowerCase().indexOf(String(s).toLowerCase())>-1:!1},a="like";break;default:h=function(c){return e.getFieldValue(c)==s},a="="}i.headerFilters[r]={value:s,func:h,type:a}}e.modules.filter.value=s,l=JSON.stringify(i.headerFilters),i.prevHeaderFilterChangeCheck!==l&&(i.prevHeaderFilterChangeCheck=l,i.trackChanges(),i.refreshFilter())}return!0}e.modules.filter={success:t,attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,n,i){var r=this,t=e.modules.filter.success,s=e.getField(),o,a,l,h,c,d,f,m;e.modules.filter.value=n;function g(){}function v(p){m=p}if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),s){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(p){return!p&&p!==0},o=document.createElement("div"),o.classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":r.table.modules.edit.editors[e.definition.headerFilter]?(a=r.table.modules.edit.editors[e.definition.headerFilter],(e.definition.headerFilter==="tick"||e.definition.headerFilter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(p){return p!==!0&&p!==!1})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":a=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?a=e.modules.edit.editor:e.definition.formatter&&r.table.modules.edit.editors[e.definition.formatter]?(a=r.table.modules.edit.editors[e.definition.formatter],(e.definition.formatter==="tick"||e.definition.formatter==="tickCross")&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(p){return p!==!0&&p!==!1})):a=r.table.modules.edit.editors.input;break}if(a){if(h={getValue:function(){return typeof n<"u"?n:""},getField:function(){return e.definition.field},getElement:function(){return o},getColumn:function(){return e.getComponent()},getTable:()=>this.table,getType:()=>"header",getRow:function(){return{normalizeHeight:function(){}}}},f=e.definition.headerFilterParams||{},f=typeof f=="function"?f.call(r.table,h):f,l=a.call(this.table.modules.edit,h,v,t,g,f),!l){console.warn("Filter Error - Cannot add filter to "+s+" column, editor returned a value of false");return}if(!(l instanceof Node)){console.warn("Filter Error - Cannot add filter to "+s+" column, editor should return an instance of Node, the editor returned:",l);return}r.langBind("headerFilters|columns|"+e.definition.field,function(p){l.setAttribute("placeholder",typeof p<"u"&&p?p:e.definition.headerFilterPlaceholder||r.langText("headerFilters|default"))}),l.addEventListener("click",function(p){p.stopPropagation(),l.focus()}),l.addEventListener("focus",p=>{var E=this.table.columnManager.contentsElement.scrollLeft,w=this.table.rowManager.element.scrollLeft;E!==w&&(this.table.rowManager.scrollHorizontal(E),this.table.columnManager.scrollHorizontal(E))}),c=!1,d=function(p){c&&clearTimeout(c),c=setTimeout(function(){t(l.value)},r.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=l,e.modules.filter.attrType=l.hasAttribute("type")?l.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=l.tagName.toLowerCase(),e.definition.headerFilterLiveFilter!==!1&&(e.definition.headerFilter==="autocomplete"||e.definition.headerFilter==="tickCross"||(e.definition.editor==="autocomplete"||e.definition.editor==="tickCross")&&e.definition.headerFilter===!0||(l.addEventListener("keyup",d),l.addEventListener("search",d),e.modules.filter.attrType=="number"&&l.addEventListener("change",function(p){t(l.value)}),e.modules.filter.attrType=="text"&&this.table.browser!=="ie"&&l.setAttribute("type","search")),(e.modules.filter.tagType=="input"||e.modules.filter.tagType=="select"||e.modules.filter.tagType=="textarea")&&l.addEventListener("mousedown",function(p){p.stopPropagation()})),o.appendChild(l),e.contentElement.appendChild(o),i||r.headerFilterColumns.push(e),m&&m()}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,n){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,n,!0),e.modules.filter.success(n)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&(this.table.options.filterMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0))}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,n,i,r){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:n,value:i,params:r}]),this.addFilter(e)}addFilter(e,n,i,r){var t=!1;Array.isArray(e)||(e=[{field:e,type:n,value:i,params:r}]),e.forEach(s=>{s=this.findFilter(s),s&&(this.filterList.push(s),t=!0)}),t&&this.trackChanges()}findFilter(e){var n;if(Array.isArray(e))return this.findSubFilters(e);var i=!1;return typeof e.field=="function"?i=function(r){return e.field(r,e.type||{})}:Bt.filters[e.type]?(n=this.table.columnManager.getColumnByField(e.field),n?i=function(r){return Bt.filters[e.type](e.value,n.getFieldValue(r),r,e.params||{})}:i=function(r){return Bt.filters[e.type](e.value,r[e.field],r,e.params||{})}):console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=i,e.func?e:!1}findSubFilters(e){var n=[];return e.forEach(i=>{i=this.findFilter(i),i&&n.push(i)}),n.length?n:!1}getFilters(e,n){var i=[];return e&&(i=this.getHeaderFilters()),n&&i.forEach(function(r){typeof r.type=="function"&&(r.type="function")}),i=i.concat(this.filtersToArray(this.filterList,n)),i}filtersToArray(e,n){var i=[];return e.forEach(r=>{var t;Array.isArray(r)?i.push(this.filtersToArray(r,n)):(t={field:r.field,type:r.type,value:r.value},n&&typeof t.type=="function"&&(t.type="function"),i.push(t))}),i}getHeaderFilters(){var e=[];for(var n in this.headerFilters)e.push({field:n,type:this.headerFilters[n].type,value:this.headerFilters[n].value});return e}removeFilter(e,n,i){Array.isArray(e)||(e=[{field:e,type:n,value:i}]),e.forEach(r=>{var t=-1;typeof r.field=="object"?t=this.filterList.findIndex(s=>r===s):t=this.filterList.findIndex(s=>r.field===s.field&&r.type===s.type&&r.value===s.value),t>-1?this.filterList.splice(t,1):console.warn("Filter Error - No matching filter type found, ignoring: ",r.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{typeof e.modules.filter.value<"u"&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,n,i,r){var t=[],s=[];return Array.isArray(n)||(n=[{field:n,type:i,value:r}]),n.forEach(o=>{o=this.findFilter(o),o&&s.push(o)}),this.table.rowManager.rows.forEach(o=>{var a=!0;s.forEach(l=>{this.filterRecurse(l,o.getData())||(a=!1)}),a&&t.push(e==="data"?o.getData("data"):o.getComponent())}),t}filter(e,n){var i=[],r=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters(!0)),this.table.options.filterMode!=="remote"&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(t=>{this.filterRow(t)&&i.push(t)}):i=e.slice(0),this.subscribedExternal("dataFiltered")&&(i.forEach(t=>{r.push(t.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(!0),r)),i}filterRow(e,n){var i=!0,r=e.getData();this.filterList.forEach(s=>{this.filterRecurse(s,r)||(i=!1)});for(var t in this.headerFilters)this.headerFilters[t].func(r)||(i=!1);return i}filterRecurse(e,n){var i=!1;return Array.isArray(e)?e.forEach(r=>{this.filterRecurse(r,n)&&(i=!0)}):i=e.func(n),i}};te(Bt,"moduleName","filter"),te(Bt,"filters",uc);let Cr=Bt;function hc(u,e,n){return this.emptyToSpace(this.sanitizeHTML(u.getValue()))}function dc(u,e,n){return u.getValue()}function cc(u,e,n){return u.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(u.getValue()))}function fc(u,e,n){var i=parseFloat(u.getValue()),r="",t,s,o,a,l,h=e.decimal||".",c=e.thousand||",",d=e.negativeSign||"-",f=e.symbol||"",m=!!e.symbolAfter,g=typeof e.precision<"u"?e.precision:2;if(isNaN(i))return this.emptyToSpace(this.sanitizeHTML(u.getValue()));if(i<0&&(i=Math.abs(i),r=d),t=g!==!1?i.toFixed(g):i,t=String(t).split("."),s=t[0],o=t.length>1?h+t[1]:"",e.thousand!==!1)for(a=/(\d+)(\d{3})/;a.test(s);)s=s.replace(a,"$1"+c+"$2");return l=s+o,r===!0?(l="("+l+")",m?l+f:f+l):m?r+l+f:r+f+l}function pc(u,e,n){var i=u.getValue(),r=e.urlPrefix||"",t=e.download,s=i,o=document.createElement("a"),a;function l(h,c){var d=h.shift(),f=c[d];return h.length&&typeof f=="object"?l(h,f):f}if(e.labelField&&(a=u.getData(),s=l(e.labelField.split(this.table.options.nestedFieldSeparator),a)),e.label)switch(typeof e.label){case"string":s=e.label;break;case"function":s=e.label(u);break}if(s){if(e.urlField&&(a=u.getData(),i=Pe.retrieveNestedData(this.table.options.nestedFieldSeparator,e.urlField,a)),e.url)switch(typeof e.url){case"string":i=e.url;break;case"function":i=e.url(u);break}return o.setAttribute("href",r+i),e.target&&o.setAttribute("target",e.target),e.download&&(typeof t=="function"?t=t(u):t=t===!0?"":t,o.setAttribute("download",t)),o.innerHTML=this.emptyToSpace(this.sanitizeHTML(s)),o}else return"&nbsp;"}function mc(u,e,n){var i=document.createElement("img"),r=u.getValue();switch(e.urlPrefix&&(r=e.urlPrefix+u.getValue()),e.urlSuffix&&(r=r+e.urlSuffix),i.setAttribute("src",r),typeof e.height){case"number":i.style.height=e.height+"px";break;case"string":i.style.height=e.height;break}switch(typeof e.width){case"number":i.style.width=e.width+"px";break;case"string":i.style.width=e.width;break}return i.addEventListener("load",function(){u.getRow().normalizeHeight()}),i}function gc(u,e,n){var i=u.getValue(),r=u.getElement(),t=e.allowEmpty,s=e.allowTruthy,o=Object.keys(e).includes("trueValue"),a=typeof e.tickElement<"u"?e.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=typeof e.crossElement<"u"?e.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return o&&i===e.trueValue||!o&&(s&&i||i===!0||i==="true"||i==="True"||i===1||i==="1")?(r.setAttribute("aria-checked",!0),a||""):t&&(i==="null"||i===""||i===null||typeof i>"u")?(r.setAttribute("aria-checked","mixed"),""):(r.setAttribute("aria-checked",!1),l||"")}function vc(u,e,n){var i=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),r=e.inputFormat||"yyyy-MM-dd HH:mm:ss",t=e.outputFormat||"dd/MM/yyyy HH:mm:ss",s=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",o=u.getValue();if(typeof i<"u"){var a;return i.isDateTime(o)?a=o:r==="iso"?a=i.fromISO(String(o)):a=i.fromFormat(String(o),r),a.isValid?(e.timezone&&(a=a.setZone(e.timezone)),a.toFormat(t)):s===!0||!o?o:typeof s=="function"?s(o):s}else console.error("Format Error - 'datetime' formatter is dependant on luxon.js")}function bc(u,e,n){var i=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),r=e.inputFormat||"yyyy-MM-dd HH:mm:ss",t=typeof e.invalidPlaceholder<"u"?e.invalidPlaceholder:"",s=typeof e.suffix<"u"?e.suffix:!1,o=typeof e.unit<"u"?e.unit:"days",a=typeof e.humanize<"u"?e.humanize:!1,l=typeof e.date<"u"?e.date:i.now(),h=u.getValue();if(typeof i<"u"){var c;return i.isDateTime(h)?c=h:r==="iso"?c=i.fromISO(String(h)):c=i.fromFormat(String(h),r),c.isValid?a?c.diff(l,o).toHuman()+(s?" "+s:""):parseInt(c.diff(l,o)[o])+(s?" "+s:""):t===!0?h:typeof t=="function"?t(h):t}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")}function yc(u,e,n){var i=u.getValue();return typeof e[i]>"u"?(console.warn("Missing display value for "+i),i):e[i]}function Ec(u,e,n){var i=u.getValue(),r=u.getElement(),t=e&&e.stars?e.stars:5,s=document.createElement("span"),o=document.createElementNS("http://www.w3.org/2000/svg","svg"),a='<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',l='<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>';s.style.verticalAlign="middle",o.setAttribute("width","14"),o.setAttribute("height","14"),o.setAttribute("viewBox","0 0 512 512"),o.setAttribute("xml:space","preserve"),o.style.padding="0 1px",i=i&&!isNaN(i)?parseInt(i):0,i=Math.max(0,Math.min(i,t));for(var h=1;h<=t;h++){var c=o.cloneNode(!0);c.innerHTML=h<=i?a:l,s.appendChild(c)}return r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.setAttribute("aria-label",i),s}function Cc(u,e,n){var i=this.sanitizeHTML(u.getValue())||0,r=document.createElement("span"),t=e&&e.max?e.max:100,s=e&&e.min?e.min:0,o=e&&typeof e.color<"u"?e.color:["red","orange","green"],a="#666666",l,h;if(!(isNaN(i)||typeof u.getValue()>"u")){switch(r.classList.add("tabulator-traffic-light"),h=parseFloat(i)<=t?parseFloat(i):t,h=parseFloat(h)>=s?parseFloat(h):s,l=(t-s)/100,h=Math.round((h-s)/l),typeof o){case"string":a=o;break;case"function":a=o(i);break;case"object":if(Array.isArray(o)){var c=100/o.length,d=Math.floor(h/c);d=Math.min(d,o.length-1),d=Math.max(d,0),a=o[d];break}}return r.style.backgroundColor=a,r}}function Oc(u,e={},n){var i=this.sanitizeHTML(u.getValue())||0,r=u.getElement(),t=e.max?e.max:100,s=e.min?e.min:0,o=e.legendAlign?e.legendAlign:"center",a,l,h,c,d;switch(l=parseFloat(i)<=t?parseFloat(i):t,l=parseFloat(l)>=s?parseFloat(l):s,a=(t-s)/100,l=Math.round((l-s)/a),typeof e.color){case"string":h=e.color;break;case"function":h=e.color(i);break;case"object":if(Array.isArray(e.color)){let v=100/e.color.length,p=Math.floor(l/v);p=Math.min(p,e.color.length-1),p=Math.max(p,0),h=e.color[p];break}default:h="#2DC214"}switch(typeof e.legend){case"string":c=e.legend;break;case"function":c=e.legend(i);break;case"boolean":c=i;break;default:c=!1}switch(typeof e.legendColor){case"string":d=e.legendColor;break;case"function":d=e.legendColor(i);break;case"object":if(Array.isArray(e.legendColor)){let v=100/e.legendColor.length,p=Math.floor(l/v);p=Math.min(p,e.legendColor.length-1),p=Math.max(p,0),d=e.legendColor[p]}break;default:d="#000"}r.style.minWidth="30px",r.style.position="relative",r.setAttribute("aria-label",l);var f=document.createElement("div");f.style.display="inline-block",f.style.width=l+"%",f.style.backgroundColor=h,f.style.height="100%",f.setAttribute("data-max",t),f.setAttribute("data-min",s);var m=document.createElement("div");if(m.style.position="relative",m.style.width="100%",m.style.height="100%",c){var g=document.createElement("div");g.style.position="absolute",g.style.top=0,g.style.left=0,g.style.textAlign=o,g.style.width="100%",g.style.color=d,g.innerHTML=c}return n(function(){if(!(u instanceof jo)){var v=document.createElement("div");v.style.position="absolute",v.style.top="4px",v.style.bottom="4px",v.style.left="4px",v.style.right="4px",r.appendChild(v),r=v}r.appendChild(m),m.appendChild(f),c&&m.appendChild(g)}),""}function wc(u,e,n){return u.getElement().style.backgroundColor=this.sanitizeHTML(u.getValue()),""}function Rc(u,e,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'}function Tc(u,e,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'}function Mc(u,e,n){var i=u.getValue(),r=e.size||15,t=r+"px",s,o,a=e.hasOwnProperty("onValue")?e.onValue:!0,l=e.hasOwnProperty("offValue")?e.offValue:!1,h=e.onTruthy?i:i===a;return s=document.createElement("div"),s.classList.add("tabulator-toggle"),h?(s.classList.add("tabulator-toggle-on"),s.style.flexDirection="row-reverse",e.onColor&&(s.style.background=e.onColor)):e.offColor&&(s.style.background=e.offColor),s.style.width=2.5*r+"px",s.style.borderRadius=t,e.clickable&&s.addEventListener("click",c=>{u.setValue(h?l:a)}),o=document.createElement("div"),o.classList.add("tabulator-toggle-switch"),o.style.height=t,o.style.width=t,o.style.borderRadius=t,s.appendChild(o),s}function Sc(u,e,n){var i=document.createElement("span"),r=u.getRow(),t=u.getTable();return r.watchPosition(s=>{e.relativeToPage&&(s+=t.modules.page.getPageSize()*(t.modules.page.getPage()-1)),i.innerText=s}),i}function Pc(u,e,n){return u.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"}function Dc(u,e,n){var i,r,t;function s(o){var a=o.getValue(),l="plaintext";switch(typeof a){case"boolean":l="tickCross";break;case"string":a.includes(`
`)&&(l="textarea");break}return l}return i=e.formatterLookup?e.formatterLookup(u):s(u),e.paramsLookup&&(t=typeof e.paramsLookup=="function"?e.paramsLookup(i,u):e.paramsLookup[i]),r=this.table.modules.format.lookupFormatter(i),r.call(this,u,t||{},n)}function xc(u,e,n){var i=e.delimiter||",",r=u.getValue(),t=this.table,s;return e.valueMap&&(typeof e.valueMap=="string"?s=function(o){return o.map(a=>Pe.retrieveNestedData(t.options.nestedFieldSeparator,e.valueMap,a))}:s=e.valueMap),Array.isArray(r)?(s&&(r=s(r)),r.join(i)):r}function Lc(u,e,n){var i=e.indent||"	",r=typeof e.multiline>"u"?!0:e.multiline,t=e.replacer||null,s=u.getValue();return r&&(u.getElement().style.whiteSpace="pre-wrap"),JSON.stringify(s,t,i)}var Ac={plaintext:hc,html:dc,textarea:cc,money:fc,link:pc,image:mc,tickCross:gc,datetime:vc,datetimediff:bc,lookup:yc,star:Ec,traffic:Cc,progress:Oc,color:wc,buttonTick:Rc,buttonCross:Tc,toggle:Mc,rownum:Sc,handle:Pc,adaptable:Dc,array:xc,json:Lc};const $t=class $t extends Ce{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupTypeFormatter(e,""),typeof e.definition.formatterPrint<"u"&&(e.modules.format.print=this.lookupTypeFormatter(e,"Print")),typeof e.definition.formatterClipboard<"u"&&(e.modules.format.clipboard=this.lookupTypeFormatter(e,"Clipboard")),typeof e.definition.formatterHtmlOutput<"u"&&(e.modules.format.htmlOutput=this.lookupTypeFormatter(e,"HtmlOutput"))}lookupTypeFormatter(e,n){var i={params:e.definition["formatter"+n+"Params"]||{}},r=e.definition["formatter"+n];return i.formatter=this.lookupFormatter(r),i}lookupFormatter(e){var n;switch(typeof e){case"string":$t.formatters[e]?n=$t.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),n=$t.formatters.plaintext);break;case"function":n=e;break;default:n=$t.formatters.plaintext;break}return n}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,n,i){var r,t,s,o;return e.definition.titleFormatter?(r=this.lookupFormatter(e.definition.titleFormatter),s=a=>{e.titleFormatterRendered=a},o={getValue:function(){return n},getElement:function(){return i},getType:function(){return"header"},getColumn:function(){return e.getComponent()},getTable:()=>this.table},t=e.definition.titleFormatterParams||{},t=typeof t=="function"?t():t,r.call(this,o,t,s)):n}formatValue(e){var n=e.getComponent(),i=typeof e.column.modules.format.params=="function"?e.column.modules.format.params(n):e.column.modules.format.params;function r(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t,e.modules.format.rendered=!1}return e.column.modules.format.formatter.call(this,n,i,r)}formatExportValue(e,n){var i=e.column.modules.format[n],r;if(i){let t=function(s){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=s,e.modules.format.rendered=!1};return r=typeof i.params=="function"?i.params(e.getComponent()):i.params,i.formatter.call(this,e.getComponent(),r,t)}else return this.formatValue(e)}sanitizeHTML(e){if(e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=/]/g,function(i){return n[i]})}else return e}emptyToSpace(e){return e===null||typeof e>"u"||e===""?"&nbsp;":e}};te($t,"moduleName","format"),te($t,"formatters",Ac);let Or=$t;class Ho extends Ce{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.initializationMode="left",this.active=!1,this.blocked=!0,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("column-add",this.reinitializeColumns.bind(this)),this.subscribe("column-deleted",this.reinitializeColumns.bind(this)),this.subscribe("column-hide",this.reinitializeColumns.bind(this)),this.subscribe("column-show",this.reinitializeColumns.bind(this)),this.subscribe("columns-loaded",this.reinitializeColumns.bind(this)),this.subscribe("table-redraw",this.layout.bind(this)),this.subscribe("layout-refreshing",this.blockLayout.bind(this)),this.subscribe("layout-refreshed",this.unblockLayout.bind(this)),this.subscribe("scrollbar-vertical",this.adjustForScrollbar.bind(this))}blockLayout(){this.blocked=!0}unblockLayout(){this.blocked=!1}layoutCell(e){this.layoutElement(e.element,e.column)}reinitializeColumns(){this.reset(),this.table.columnManager.columnsByIndex.forEach(e=>{this.initializeColumn(e)}),this.layout()}initializeColumn(e){var n={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(n.position=this.initializationMode,this.initializationMode=="left"?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=n):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(n=>{n.calcs.top&&this.layoutRow(n.calcs.top),n.calcs.bottom&&this.layoutRow(n.calcs.bottom),n.groupList&&n.groupList.length&&this.layoutGroupCalcs(n.groupList)})}layoutColumnPosition(e){var n=[],i=0,r=0;this.leftColumns.forEach((t,s)=>{if(t.modules.frozen.marginValue=i,t.modules.frozen.margin=t.modules.frozen.marginValue+"px",t.visible&&(i+=t.getWidth()),s==this.leftColumns.length-1?t.modules.frozen.edge=!0:t.modules.frozen.edge=!1,t.parent.isGroup){var o=this.getColGroupParentElement(t);n.includes(o)||(this.layoutElement(o,t),n.push(o)),o.classList.toggle("tabulator-frozen-left",t.modules.frozen.edge&&t.modules.frozen.position==="left"),o.classList.toggle("tabulator-frozen-right",t.modules.frozen.edge&&t.modules.frozen.position==="right")}else this.layoutElement(t.getElement(),t);e&&t.cells.forEach(a=>{this.layoutElement(a.getElement(!0),t)})}),this.rightColumns.forEach((t,s)=>{t.modules.frozen.marginValue=r,t.modules.frozen.margin=t.modules.frozen.marginValue+"px",t.visible&&(r+=t.getWidth()),s==this.rightColumns.length-1?t.modules.frozen.edge=!0:t.modules.frozen.edge=!1,t.parent.isGroup?this.layoutElement(this.getColGroupParentElement(t),t):this.layoutElement(t.getElement(),t),e&&t.cells.forEach(o=>{this.layoutElement(o.getElement(!0),t)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&!this.blocked&&(this.layoutColumnPosition(),this.reinitializeRows(),this.layoutCalcRows())}reinitializeRows(){var e=this.table.rowManager.getVisibleRows(!0),n=this.table.rowManager.getRows().filter(i=>!e.includes(i));n.forEach(i=>{i.deinitialize()}),e.forEach(i=>{i.type==="row"&&this.layoutRow(i)})}layoutRow(e){this.table.options.layout==="fitDataFill"&&this.rightColumns.length&&(this.table.rowManager.getTableElement().style.minWidth="calc(100% - "+this.rightMargin+")"),this.leftColumns.forEach(n=>{var i=e.getCell(n);i&&this.layoutElement(i.getElement(!0),n)}),this.rightColumns.forEach(n=>{var i=e.getCell(n);i&&this.layoutElement(i.getElement(!0),n)})}layoutElement(e,n){var i;n.modules.frozen&&e&&(e.style.position="sticky",this.table.rtl?i=n.modules.frozen.position==="left"?"right":"left":i=n.modules.frozen.position,e.style[i]=n.modules.frozen.margin,e.classList.add("tabulator-frozen"),e.classList.toggle("tabulator-frozen-left",n.modules.frozen.edge&&n.modules.frozen.position==="left"),e.classList.toggle("tabulator-frozen-right",n.modules.frozen.edge&&n.modules.frozen.position==="right"))}adjustForScrollbar(e){this.rightColumns.length&&(this.table.columnManager.getContentsElement().style.width="calc(100% - "+e+"px)")}getFrozenColumns(){return this.leftColumns.concat(this.rightColumns)}_calcSpace(e,n){var i=0;for(let r=0;r<n;r++)e[r].visible&&(i+=e[r].getWidth());return i}}te(Ho,"moduleName","frozenColumns");class Ko extends Ce{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this)),this.registerTableOption("frozenRowsField","id"),this.registerTableOption("frozenRows",!1)}initialize(){var e=document.createDocumentFragment();this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),e.appendChild(document.createElement("br")),e.appendChild(this.topElement),this.table.columnManager.getContentsElement().insertBefore(e,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.subscribe("rows-visible",this.visibleRows.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10),this.table.options.frozenRows&&(this.subscribe("data-processed",this.initializeRows.bind(this)),this.subscribe("row-added",this.initializeRow.bind(this)),this.subscribe("table-redrawing",this.resizeHolderWidth.bind(this)),this.subscribe("column-resized",this.resizeHolderWidth.bind(this)),this.subscribe("column-show",this.resizeHolderWidth.bind(this)),this.subscribe("column-hide",this.resizeHolderWidth.bind(this))),this.resizeHolderWidth()}resizeHolderWidth(){this.topElement.style.minWidth=this.table.columnManager.headersElement.offsetWidth+"px"}initializeRows(){this.table.rowManager.getRows().forEach(e=>{this.initializeRow(e)})}initializeRow(e){var n=this.table.options.frozenRows,i=typeof n;i==="number"?e.getPosition()&&e.getPosition()+this.rows.length<=n&&this.freezeRow(e):i==="function"?n.call(this.table,e.getComponent())&&this.freezeRow(e):Array.isArray(n)&&n.includes(e.data[this.options("frozenRowsField")])&&this.freezeRow(e)}isRowFrozen(e){var n=this.rows.indexOf(e);return n>-1}isFrozen(){return!!this.rows.length}visibleRows(e,n){return this.rows.forEach(i=>{n.push(i)}),n}getRows(e){var n=e.slice(0);return this.rows.forEach(function(i){var r=n.indexOf(i);r>-1&&n.splice(r,1)}),n}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.rows.push(e),this.refreshData(!1,"display"),this.table.rowManager.adjustTableSize(),this.styleRows())}unfreezeRow(e){e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var n=this.rows.indexOf(e);if(n>-1){var i=e.getElement();i.parentNode&&i.parentNode.removeChild(i),this.rows.splice(n,1)}}styleRows(e){this.rows.forEach((n,i)=>{this.table.rowManager.styleRow(n,i)})}}te(Ko,"moduleName","frozenRows");class Ic{constructor(e){return this._group=e,this.type="GroupComponent",new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._group.groupManager.table.componentFunctionBinder.handle("group",n._group,i)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return this._group.parent?this._group.parent.getComponent():!1}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}scrollTo(e,n){return this._group.groupManager.table.rowManager.scrollToRow(this._group,e,n)}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class mi{constructor(e,n,i,r,t,s,o){this.groupManager=e,this.parent=n,this.key=r,this.level=i,this.field=t,this.hasSubGroups=i<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=o,this.rows=[],this.groups=[],this.groupList=[],this.generator=s,this.element=!1,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=o?o.visible:typeof e.startOpen[i]<"u"?e.startOpen[i]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(e){e||(this.groupList.length?this.groupList.forEach(function(n){n.wipe()}):this.rows.forEach(n=>{n.modules&&delete n.modules.group})),this.element=!1,this.arrowElement=!1,this.elementContents=!1}createElements(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),this.groupManager.table.options.movableRows!==!1&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var e=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]&&this.groupManager.allowedValues[e].forEach(n=>{this._createGroup(n,e)})}addBindings(){var e;this.groupManager.table.options.groupToggleElement&&(e=this.groupManager.table.options.groupToggleElement=="arrow"?this.arrowElement:this.element,e.addEventListener("click",n=>{this.groupManager.table.options.groupToggleElement==="arrow"&&(n.stopPropagation(),n.stopImmediatePropagation()),setTimeout(()=>{this.toggleVisibility()})}))}_createGroup(e,n){var i=n+"_"+e,r=new mi(this.groupManager,this,n,e,this.groupManager.groupIDLookups[n].field,this.groupManager.headerGenerator[n]||this.groupManager.headerGenerator[0],this.old?this.old.groups[i]:!1);this.groups[i]=r,this.groupList.push(r)}_addRowToGroup(e){var n=this.level+1;if(this.hasSubGroups){var i=this.groupManager.groupIDLookups[n].func(e.getData()),r=n+"_"+i;this.groupManager.allowedValues&&this.groupManager.allowedValues[n]?this.groups[r]&&this.groups[r].addRow(e):(this.groups[r]||this._createGroup(i,n),this.groups[r].addRow(e))}}_addRow(e){this.rows.push(e),e.modules.group=this}insertRow(e,n,i){var r=this.conformRowData({});e.updateData(r);var t=this.rows.indexOf(n);t>-1?i?this.rows.splice(t+1,0,e):this.rows.splice(t,0,e):i?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(e){this.arrowElement&&(this.arrowElement.style.marginLeft=e,this.groupList.forEach(function(n){n.scrollHeader(e)}))}getRowIndex(e){}conformRowData(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e}removeRow(e){var n=this.rows.indexOf(e),i=e.getElement();n>-1&&this.rows.splice(n,1),!this.groupManager.table.options.groupValues&&!this.rows.length?(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0)):(i.parentNode&&i.parentNode.removeChild(i),this.groupManager.blockRedraw||(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)))}removeGroup(e){var n=e.level+"_"+e.key,i;this.groups[n]&&(delete this.groups[n],i=this.groupList.indexOf(e),i>-1&&this.groupList.splice(i,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(){var e=[];return e.push(this),this._visSet(),this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.visible?this.groupList.length?this.groupList.forEach(function(n){e=e.concat(n.getHeadersAndRows())}):(this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&this.groupManager.table.options.columnCalcs!="table"&&this.groupManager.table.modExists("columnCalcs")&&(this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))),e}getData(e,n){var i=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach(r=>{i.push(r.getData(n||"data"))}),i}getRowCount(){var e=0;return this.groupList.length?this.groupList.forEach(n=>{e+=n.getRowCount()}):e=this.rows.length,e}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination?(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(e=>{var n=e.getHeadersAndRows();n.forEach(i=>{i.detachElement()})}):this.rows.forEach(e=>{var n=e.getElement();n.parentNode.removeChild(n)}),this.groupManager.updateGroupRows(!0)):this.groupManager.updateGroupRows(!0),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,this.groupManager.table.rowManager.getRenderMode()=="basic"&&!this.groupManager.table.options.pagination){this.element.classList.add("tabulator-group-visible");var e=this.generateElement();this.groupList.length?this.groupList.forEach(n=>{var i=n.getHeadersAndRows();i.forEach(r=>{var t=r.getElement();e.parentNode.insertBefore(t,e.nextSibling),r.initialize(),e=t})}):this.rows.forEach(n=>{var i=n.getElement();e.parentNode.insertBefore(i,e.nextSibling),n.initialize(),e=i}),this.groupManager.updateGroupRows(!0)}else this.groupManager.updateGroupRows(!0);this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var e=[];typeof this.visible=="function"&&(this.rows.forEach(function(n){e.push(n.getData())}),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))}getRowGroup(e){var n=!1;return this.groupList.length?this.groupList.forEach(function(i){var r=i.getRowGroup(e);r&&(n=r)}):this.rows.find(function(i){return i===e})&&(n=this),n}getSubGroups(e){var n=[];return this.groupList.forEach(function(i){n.push(e?i.getComponent():i)}),n}getRows(e,n){var i=[];return n&&this.groupList.length?this.groupList.forEach(r=>{i=i.concat(r.getRows(e,n))}):this.rows.forEach(function(r){i.push(e?r.getComponent():r)}),i}generateGroupHeaderContents(){var e=[],n=this.getRows(!1,!0);for(n.forEach(function(i){e.push(i.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);typeof this.elementContents=="string"?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(e=[]){return e.unshift(this.key),this.parent&&this.parent.getPath(e),e}getElement(){return this.elementContents?this.element:this.generateElement()}generateElement(){this.addBindings=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(e){(!this.initialized||e)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Pe.elVisible(this.element)&&this.initialize(!0)}setHeight(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}rendered(){}getComponent(){return this.component||(this.component=new Ic(this)),this.component}}class $o extends Ce{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayHandler=this.getRows.bind(this),this.blockRedraw=!1,this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.subscribe("table-destroy",this._blockRedrawing.bind(this)),this.subscribe("rows-wipe",this._blockRedrawing.bind(this)),this.subscribe("rows-wiped",this._restore_redrawing.bind(this)),this.table.options.groupBy&&(this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("table-built",this.configureGroupSetup.bind(this)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}_blockRedrawing(){this.blockRedraw=!0}_restore_redrawing(){this.blockRedraw=!1}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,n=this.table.options.groupStartOpen,i=this.table.options.groupHeader;if(this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(i)&&e.length>i.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(t,s)=>{this.headerGenerator[0]=(o,a,l)=>(typeof o>"u"?"":o)+"<span>("+a+" "+(a===1?t:s.groups.items)+")</span>"}),this.groupIDLookups=[],e)this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="table"&&this.table.options.columnCalcs!="both"&&this.table.modules.columnCalcs.removeCalcs();else if(this.table.modExists("columnCalcs")&&this.table.options.columnCalcs!="group"){var r=this.table.columnManager.getRealColumns();r.forEach(t=>{t.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),t.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()})}Array.isArray(e)||(e=[e]),e.forEach((t,s)=>{var o,a;typeof t=="function"?o=t:(a=this.table.columnManager.getColumnByField(t),a?o=function(l){return a.getFieldValue(l)}:o=function(l){return l[t]}),this.groupIDLookups.push({field:typeof t=="function"?!1:t,func:o,values:this.allowedValues?this.allowedValues[s]:!1})}),n&&(Array.isArray(n)||(n=[n]),n.forEach(t=>{}),this.startOpen=n),i&&(this.headerGenerator=Array.isArray(i)?i:[i])}else this.groupList=[],this.groups={}}rowSample(e,n){if(this.table.options.groupBy){var i=this.getGroups(!1)[0];n.push(i.getRows(!1)[0])}return n}virtualRenderFill(){var e=this.table.rowManager.tableElement,n=this.table.rowManager.getVisibleRows();if(this.table.options.groupBy)n=n.filter(i=>i.type!=="group"),e.style.minWidth=n.length?"":this.table.columnManager.getWidth()+"px";else return n}rowAddingIndex(e,n,i){if(this.table.options.groupBy){this.assignRowToGroup(e);var r=e.modules.group.rows;return r.length>1&&(!n||n&&r.indexOf(n)==-1?i?r[0]!==e&&(n=r[0],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!i)):r[r.length-1]!==e&&(n=r[r.length-1],this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!i)):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!i)),n}}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.initialized||this.initialize(),this.configureGroupSetup(),!e&&this.table.modExists("columnCalcs")&&this.table.options.columnCalcs===!0&&this.table.modules.columnCalcs.reinitializeCalcs(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return e.modules.group?e.modules.group.getComponent():!1}rowMoving(e,n,i){if(this.table.options.groupBy){!i&&n instanceof mi&&(n=this.table.rowManager.prevDisplayRow(e)||n);var r=n instanceof mi?n:n.modules.group,t=e instanceof mi?e:e.modules.group;r===t?this.table.rowManager.moveRowInArray(r.rows,e,n,i):(t&&t.removeRow(e),r.insertRow(e,n,i))}}rowDeleting(e){this.table.options.groupBy&&e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.table.options.groupBy&&this.updateGroupRows(!0)}cellUpdated(e){this.table.options.groupBy&&this.reassignRowToGroup(e.row)}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var n=[];return this.groupList.forEach(function(i){n.push(e?i.getComponent():i)}),n}getChildGroups(e){var n=[];return e||(e=this),e.groupList.forEach(i=>{i.groupList.length?n=n.concat(this.getChildGroups(i)):n.push(i)}),n}wipe(){this.table.options.groupBy&&(this.groupList.forEach(function(e){e.wipe()}),this.groupList=[],this.groups={})}pullGroupListData(e){var n=[];return e.forEach(i=>{var r={};r.level=0,r.rowCount=0,r.headerContent="";var t=[];i.hasSubGroups?(t=this.pullGroupListData(i.groupList),r.level=i.level,r.rowCount=t.length-i.groupList.length,r.headerContent=i.generator(i.key,r.rowCount,i.rows,i),n.push(r),n=n.concat(t)):(r.level=i.level,r.headerContent=i.generator(i.key,i.rows.length,i.rows,i),r.rowCount=i.getRows().length,n.push(r),i.getRows().forEach(s=>{n.push(s.getData("data"))}))}),n}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var n=!1;return this.options("dataTree")&&(e=this.table.modules.dataTree.getTreeParentRoot(e)),this.groupList.forEach(i=>{var r=i.getRowGroup(e);r&&(n=r)}),n}countGroups(){return this.groupList.length}generateGroups(e){var n=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(i=>{this.createGroup(i,0,n)}),e.forEach(i=>{this.assignRowToExistingGroup(i,n)})):e.forEach(i=>{this.assignRowToGroup(i,n)}),Object.values(n).forEach(i=>{i.wipe(!0)})}createGroup(e,n,i){var r=n+"_"+e,t;i=i||[],t=new mi(this,!1,n,e,this.groupIDLookups[0].field,this.headerGenerator[0],i[r]),this.groups[r]=t,this.groupList.push(t)}assignRowToExistingGroup(e,n){var i=this.groupIDLookups[0].func(e.getData()),r="0_"+i;this.groups[r]&&this.groups[r].addRow(e)}assignRowToGroup(e,n){var i=this.groupIDLookups[0].func(e.getData()),r=!this.groups["0_"+i];return r&&this.createGroup(i,0,n),this.groups["0_"+i].addRow(e),!r}reassignRowToGroup(e){if(e.type==="row"){var n=e.modules.group,i=n.getPath(),r=this.getExpectedPath(e),t;t=i.length==r.length&&i.every((s,o)=>s===r[o]),t||(n.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var n=[],i=e.getData();return this.groupIDLookups.forEach(r=>{n.push(r.func(i))}),n}updateGroupRows(e){var n=[];return this.blockRedraw||(this.groupList.forEach(i=>{n=n.concat(i.getHeadersAndRows())}),e&&this.refreshData(!0)),n}scrollHeaders(e){this.table.options.groupBy&&(this.table.options.renderHorizontal==="virtual"&&(e-=this.table.columnManager.renderer.vDomPadLeft),e=e+"px",this.groupList.forEach(n=>{n.scrollHeader(e)}))}removeGroup(e){var n=e.level+"_"+e.key,i;this.groups[n]&&(delete this.groups[n],i=this.groupList.indexOf(e),i>-1&&this.groupList.splice(i,1))}checkBasicModeGroupHeaderWidth(){var e=this.table.rowManager.tableElement,n=!0;this.table.rowManager.getDisplayRows().forEach((i,r)=>{this.table.rowManager.styleRow(i,r),e.appendChild(i.getElement()),i.initialize(!0),i.type!=="group"&&(n=!1)}),n?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}}te($o,"moduleName","groupRows");var Fc={cellEdit:function(u){u.component.setValueProcessData(u.data.oldValue),u.component.cellRendered()},rowAdd:function(u){u.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowDelete:function(u){var e=this.table.rowManager.addRowActual(u.data.data,u.data.pos,u.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(u.component,e),this.table.rowManager.checkPlaceholder()},rowMove:function(u){var e=u.data.posFrom-u.data.posTo>0;this.table.rowManager.moveRowActual(u.component,this.table.rowManager.getRowFromPosition(u.data.posFrom),e),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},Bc={cellEdit:function(u){u.component.setValueProcessData(u.data.newValue),u.component.cellRendered()},rowAdd:function(u){var e=this.table.rowManager.addRowActual(u.data.data,u.data.pos,u.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(u.component,e),this.table.rowManager.checkPlaceholder()},rowDelete:function(u){u.component.deleteActual(),this.table.rowManager.checkPlaceholder()},rowMove:function(u){this.table.rowManager.moveRowActual(u.component,this.table.rowManager.getRowFromPosition(u.data.posTo),u.data.after),this.table.rowManager.regenerateRowPositions(),this.table.rowManager.reRenderInPosition()}},Nc={undo:["ctrl + 90","meta + 90"],redo:["ctrl + 89","meta + 89"]},jc={undo:function(u){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(u.preventDefault(),this.table.modules.history.undo()))},redo:function(u){var e=!1;this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell,e||(u.preventDefault(),this.table.modules.history.redo()))}},Uc={keybindings:{bindings:Nc,actions:jc}};const Gt=class Gt extends Ce{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,n,i){this.action("rowMove",e,{posFrom:e.getPosition(),posTo:n.getPosition(),to:n,after:i})}rowAdded(e,n,i,r){this.action("rowAdd",e,{data:n,pos:i,index:r})}rowDeleted(e){var n,i;this.table.options.groupBy?(i=e.getComponent().getGroup()._getSelf().rows,n=i.indexOf(e),n&&(n=i[n-1])):(n=e.table.rowManager.getRowIndex(e),n&&(n=e.table.rowManager.rows[n-1])),this.action("rowDelete",e,{data:e.getData(),pos:!n,index:n})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,n,i){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:n,data:i}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var n=this.history.findIndex(function(i){return i.component===e});n>-1&&(this.history.splice(n,1),n<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return Gt.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Undo Error - No more history to undo":"History module not enabled"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return Gt.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}else return console.warn(this.options("history")?"History Redo Error - No more history to redo":"History module not enabled"),!1}_rebindRow(e,n){this.history.forEach(function(i){if(i.component instanceof et)i.component===e&&(i.component=n);else if(i.component instanceof ki&&i.component.row===e){var r=i.component.column.getField();r&&(i.component=n.getCell(r))}})}};te(Gt,"moduleName","history"),te(Gt,"moduleExtensions",Uc),te(Gt,"undoers",Fc),te(Gt,"redoers",Bc);let wr=Gt;class Go extends Ce{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&this.table.originalElement.tagName==="TABLE"&&(this.table.originalElement.childNodes.length?this.parseTable():console.warn("Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element."))}parseTable(){var e=this.table.originalElement,n=this.table.options,i=e.getElementsByTagName("th"),r=e.getElementsByTagName("tbody")[0],t=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),r=r?r.getElementsByTagName("tr"):[],this._extractOptions(e,n),i.length?this._extractHeaders(i,r):this._generateBlankHeaders(i,r);for(var s=0;s<r.length;s++){var o=r[s],a=o.getElementsByTagName("td"),l={};this.hasIndex||(l[n.index]=s);for(var h=0;h<a.length;h++){var c=a[h];typeof this.fieldIndex[h]<"u"&&(l[this.fieldIndex[h]]=c.innerHTML)}t.push(l)}n.data=t,this.dispatchExternal("htmlImported")}_extractOptions(e,n,i){var r=e.attributes,t=Object.keys(i||n),s={};t.forEach(h=>{s[h.toLowerCase()]=h});for(var o in r){var a=r[o],l;a&&typeof a=="object"&&a.name&&a.name.indexOf("tabulator-")===0&&(l=a.name.replace("tabulator-",""),typeof s[l]<"u"&&(n[s[l]]=this._attribValue(a.value)))}}_attribValue(e){return e==="true"?!0:e==="false"?!1:e}_findCol(e){var n=this.table.options.columns.find(i=>i.title===e);return n||!1}_extractHeaders(e,n){for(var i=0;i<e.length;i++){var r=e[i],t=!1,s=this._findCol(r.textContent),o;s?t=!0:s={title:r.textContent.trim()},s.field||(s.field=r.textContent.trim().toLowerCase().replaceAll(" ","_")),o=r.getAttribute("width"),o&&!s.width&&(s.width=o),this._extractOptions(r,s,this.table.columnManager.optionsList.registeredDefaults),this.fieldIndex[i]=s.field,s.field==this.table.options.index&&(this.hasIndex=!0),t||this.table.options.columns.push(s)}}_generateBlankHeaders(e,n){for(var i=0;i<e.length;i++){var r=e[i],t={title:"",field:"col"+i};this.fieldIndex[i]=t.field;var s=r.getAttribute("width");s&&(t.width=s),this.table.options.columns.push(t)}}}te(Go,"moduleName","htmlTableImport");function Wc(u){var e=[],n=0,i=0,r=!1;for(let t=0;t<u.length;t++){let s=u[t],o=u[t+1];if(e[n]||(e[n]=[]),e[n][i]||(e[n][i]=""),s=='"'&&r&&o=='"'){e[n][i]+=s,t++;continue}if(s=='"'){r=!r;continue}if(s==","&&!r){i++;continue}if(s=="\r"&&o==`
`&&!r){i=0,n++,t++;continue}if((s=="\r"||s==`
`)&&!r){i=0,n++;continue}e[n][i]+=s}return e}function zc(u){try{return JSON.parse(u)}catch(e){return console.warn("JSON Import Error - File contents is invalid JSON",e),Promise.reject()}}function Hc(u){return u}function Kc(u){var e=this.dependencyRegistry.lookup("XLSX"),n=e.read(u),i=n.Sheets[n.SheetNames[0]];return e.utils.sheet_to_json(i,{header:1})}var $c={csv:Wc,json:zc,array:Hc,xlsx:Kc};const Ni=class Ni extends Ce{constructor(e){super(e),this.registerTableOption("importFormat"),this.registerTableOption("importReader","text"),this.registerTableOption("importHeaderTransform"),this.registerTableOption("importValueTransform"),this.registerTableOption("importDataValidator"),this.registerTableOption("importFileValidator")}initialize(){this.registerTableFunction("import",this.importFromFile.bind(this)),this.table.options.importFormat&&(this.subscribe("data-loading",this.loadDataCheck.bind(this),10),this.subscribe("data-load",this.loadData.bind(this),10))}loadDataCheck(e){return this.table.options.importFormat&&(typeof e=="string"||Array.isArray(e)&&e.length&&Array.isArray(e))}loadData(e,n,i,r,t){return this.importData(this.lookupImporter(),e).then(this.structureData.bind(this)).catch(s=>(console.error("Import Error:",s||"Unable to import data"),Promise.reject(s)))}lookupImporter(e){var n;return e||(e=this.table.options.importFormat),typeof e=="string"?n=Ni.importers[e]:n=e,n||console.error("Import Error - Importer not found:",e),n}importFromFile(e,n,i){var r=this.lookupImporter(e);if(r)return this.pickFile(n,i).then(this.importData.bind(this,r)).then(this.structureData.bind(this)).then(this.mutateData.bind(this)).then(this.validateData.bind(this)).then(this.setData.bind(this)).catch(t=>(this.dispatch("import-error",t),this.dispatchExternal("importError",t),console.error("Import Error:",t||"Unable to import file"),this.table.dataLoader.alertError(),setTimeout(()=>{this.table.dataLoader.clearAlert()},3e3),Promise.reject(t)))}pickFile(e,n){return new Promise((i,r)=>{var t=document.createElement("input");t.type="file",t.accept=e,t.addEventListener("change",s=>{var o=t.files[0],a=new FileReader,l=this.validateFile(o);if(l===!0){switch(this.dispatch("import-importing",t.files),this.dispatchExternal("importImporting",t.files),n||this.table.options.importReader){case"buffer":a.readAsArrayBuffer(o);break;case"binary":a.readAsBinaryString(o);break;case"url":a.readAsDataURL(o);break;case"text":default:a.readAsText(o)}a.onload=h=>{i(a.result)},a.onerror=h=>{console.warn("File Load Error - Unable to read file"),r(h)}}else r(l)}),this.dispatch("import-choose"),this.dispatchExternal("importChoose"),t.click()})}importData(e,n){var i;return this.table.dataLoader.alertLoader(),new Promise((r,t)=>{setTimeout(()=>{i=e.call(this.table,n),i instanceof Promise||i?r(i):t()},10)})}structureData(e){var n=[];return Array.isArray(e)&&e.length&&Array.isArray(e[0])?(this.table.options.autoColumns?n=this.structureArrayToObject(e):n=this.structureArrayToColumns(e),n):e}mutateData(e){var n=[];return Array.isArray(e)?e.forEach(i=>{n.push(this.table.modules.mutator.transformRow(i,"import"))}):n=e,n}transformHeader(e){var n=[];if(this.table.options.importHeaderTransform)e.forEach(i=>{n.push(this.table.options.importHeaderTransform.call(this.table,i,e))});else return e;return n}transformData(e){var n=[];if(this.table.options.importValueTransform)e.forEach(i=>{n.push(this.table.options.importValueTransform.call(this.table,i,e))});else return e;return n}structureArrayToObject(e){var n=this.transformHeader(e.shift()),i=e.map(r=>{var t={};return r=this.transformData(r),n.forEach((s,o)=>{t[s]=r[o]}),t});return i}structureArrayToColumns(e){var n=[],i=this.transformHeader(e[0]),r=this.table.getColumns();return r[0]&&i[0]&&r[0].getDefinition().title===i[0]&&e.shift(),e.forEach(t=>{var s={};t=this.transformData(t),t.forEach((o,a)=>{var l=r[a];l&&(s[l.getField()]=o)}),n.push(s)}),n}validateFile(e){return this.table.options.importFileValidator?this.table.options.importFileValidator.call(this.table,e):!0}validateData(e){var n;return this.table.options.importDataValidator?(n=this.table.options.importDataValidator.call(this.table,e),n===!0?e:Promise.reject(n)):e}setData(e){return this.dispatch("import-imported",e),this.dispatchExternal("importImported",e),this.table.dataLoader.clearAlert(),this.table.setData(e)}};te(Ni,"moduleName","import"),te(Ni,"importers",$c);let Rr=Ni;class Vo extends Ce{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowMouseDown:"row-mousedown",rowMouseUp:"row-mouseup",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellMouseDown:"cell-mousedown",cellMouseUp:"cell-mouseup",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerMouseDown:"column-mousedown",headerMouseUp:"column-mouseup",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupMouseDown:"group-mousedown",groupMouseUp:"group-mouseup",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null},group:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerMouseDown"),this.registerColumnOption("headerMouseUp"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellMouseDown"),this.registerColumnOption("cellMouseUp"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this)),this.subscribe("scroll-horizontal",this.clearTouchWatchers.bind(this)),this.subscribe("scroll-vertical",this.clearTouchWatchers.bind(this))}clearTouchWatchers(){var e=Object.values(this.touchWatchers);e.forEach(n=>{for(let i in n)n[i]=null})}cellContentsSelectionFixer(e,n){var i;if(!(this.table.modExists("edit")&&this.table.modules.edit.currentCell===n)){e.preventDefault();try{document.selection?(i=document.body.createTextRange(),i.moveToElementText(n.getElement()),i.select()):window.getSelection&&(i=document.createRange(),i.selectNode(n.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(i))}catch{}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,n){n?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var n=this.eventMap[e];this.touchSubscribers[n+"-touchstart"]||(this.touchSubscribers[n+"-touchstart"]=this.handleTouch.bind(this,n,"start"),this.touchSubscribers[n+"-touchend"]=this.handleTouch.bind(this,n,"end"),this.subscribe(n+"-touchstart",this.touchSubscribers[n+"-touchstart"]),this.subscribe(n+"-touchend",this.touchSubscribers[n+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var n=!0,i=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let r in this.eventMap)this.eventMap[r]===i&&this.subscribers[r]&&(n=!1);n&&(this.unsubscribe(i+"-touchstart",this.touchSubscribers[i+"-touchstart"]),this.unsubscribe(i+"-touchend",this.touchSubscribers[i+"-touchend"]),delete this.touchSubscribers[i+"-touchstart"],delete this.touchSubscribers[i+"-touchend"])}}initializeColumn(e){var n=e.definition;for(let i in this.eventMap)n[i]&&(this.subscriptionChanged(i,!0),this.columnSubscribers[i]||(this.columnSubscribers[i]=[]),this.columnSubscribers[i].push(e))}handle(e,n,i){this.dispatchEvent(e,n,i)}handleTouch(e,n,i,r){var t=this.touchWatchers[e];switch(e==="column"&&(e="header"),n){case"start":t.tap=!0,clearTimeout(t.tapHold),t.tapHold=setTimeout(()=>{clearTimeout(t.tapHold),t.tapHold=null,t.tap=null,clearTimeout(t.tapDbl),t.tapDbl=null,this.dispatchEvent(e+"TapHold",i,r)},1e3);break;case"end":t.tap&&(t.tap=null,this.dispatchEvent(e+"Tap",i,r)),t.tapDbl?(clearTimeout(t.tapDbl),t.tapDbl=null,this.dispatchEvent(e+"DblTap",i,r)):t.tapDbl=setTimeout(()=>{clearTimeout(t.tapDbl),t.tapDbl=null},300),clearTimeout(t.tapHold),t.tapHold=null;break}}dispatchEvent(e,n,i){var r=i.getComponent(),t;this.columnSubscribers[e]&&(i instanceof ki?t=i.column.definition[e]:i instanceof ei&&(t=i.definition[e]),t&&t(n,r)),this.dispatchExternal(e,n,r)}}te(Vo,"moduleName","interaction");var Gc={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,navLeft:37,navRight:39,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35},Vc={keyBlock:function(u){u.stopPropagation(),u.preventDefault()},scrollPageUp:function(u){var e=this.table.rowManager,n=e.scrollTop-e.element.clientHeight;u.preventDefault(),e.displayRowsCount&&(n>=0?e.element.scrollTop=n:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(u){var e=this.table.rowManager,n=e.scrollTop+e.element.clientHeight,i=e.element.scrollHeight;u.preventDefault(),e.displayRowsCount&&(n<=i?e.element.scrollTop=n:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(u){var e=this.table.rowManager;u.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(u){var e=this.table.rowManager;u.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(u){this.dispatch("keybinding-nav-prev",u)},navNext:function(u){this.dispatch("keybinding-nav-next",u)},navLeft:function(u){this.dispatch("keybinding-nav-left",u)},navRight:function(u){this.dispatch("keybinding-nav-right",u)},navUp:function(u){this.dispatch("keybinding-nav-up",u)},navDown:function(u){this.dispatch("keybinding-nav-down",u)}};const Vt=class Vt extends Ce{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",{}),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,n={};this.watchKeys={},this.pressedKeys=[],e!==!1&&(Object.assign(n,Vt.bindings),Object.assign(n,e),this.mapBindings(n),this.bindEvents()),this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let n in e)Vt.actions[n]?e[n]&&(typeof e[n]!="object"&&(e[n]=[e[n]]),e[n].forEach(i=>{var r=Array.isArray(i)?i:[i];r.forEach(t=>{this.mapBinding(n,t)})})):console.warn("Key Binding Error - no such action:",n)}mapBinding(e,n){var i={action:Vt.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1},r=n.toString().toLowerCase().split(" ").join("").split("+");r.forEach(t=>{switch(t){case"ctrl":i.ctrl=!0;break;case"shift":i.shift=!0;break;case"meta":i.meta=!0;break;default:t=isNaN(t)?t.toUpperCase().charCodeAt(0):parseInt(t),i.keys.push(t),this.watchKeys[t]||(this.watchKeys[t]=[]),this.watchKeys[t].push(i)}})}bindEvents(){var e=this;this.keyupBinding=function(n){var i=n.keyCode,r=e.watchKeys[i];r&&(e.pressedKeys.push(i),r.forEach(function(t){e.checkBinding(n,t)}))},this.keydownBinding=function(n){var i=n.keyCode,r=e.watchKeys[i];if(r){var t=e.pressedKeys.indexOf(i);t>-1&&e.pressedKeys.splice(t,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,n){var i=!0;return e.ctrlKey==n.ctrl&&e.shiftKey==n.shift&&e.metaKey==n.meta?(n.keys.forEach(r=>{var t=this.pressedKeys.indexOf(r);t==-1&&(i=!1)}),i&&n.action.call(this,e),!0):!1}};te(Vt,"moduleName","keybindings"),te(Vt,"bindings",Gc),te(Vt,"actions",Vc);let Tr=Vt;class ko extends Ce{constructor(e){super(e),this.menuContainer=null,this.nestedMenuBlock=!1,this.currentComponent=null,this.rootPopup=null,this.columnSubscribers={},this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("rowDblClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerTableOption("groupDblClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerClickMenu"),this.registerColumnOption("headerDblClickMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("headerMenuIcon"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu"),this.registerColumnOption("dblClickMenu")}initialize(){this.deprecatedOptionsCheck(),this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeRowWatchers(){this.table.options.rowContextMenu&&(this.subscribe("row-contextmenu",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu)),this.table.on("rowTapHold",this.loadMenuEvent.bind(this,this.table.options.rowContextMenu))),this.table.options.rowClickMenu&&this.subscribe("row-click",this.loadMenuEvent.bind(this,this.table.options.rowClickMenu)),this.table.options.rowDblClickMenu&&this.subscribe("row-dblclick",this.loadMenuEvent.bind(this,this.table.options.rowDblClickMenu))}initializeGroupWatchers(){this.table.options.groupContextMenu&&(this.subscribe("group-contextmenu",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu)),this.table.on("groupTapHold",this.loadMenuEvent.bind(this,this.table.options.groupContextMenu))),this.table.options.groupClickMenu&&this.subscribe("group-click",this.loadMenuEvent.bind(this,this.table.options.groupClickMenu)),this.table.options.groupDblClickMenu&&this.subscribe("group-dblclick",this.loadMenuEvent.bind(this,this.table.options.groupDblClickMenu))}initializeColumn(e){var n=e.definition;n.headerContextMenu&&!this.columnSubscribers.headerContextMenu&&(this.columnSubscribers.headerContextMenu=this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextMenu),this.table.on("headerTapHold",this.loadMenuTableColumnEvent.bind(this,"headerContextMenu"))),n.headerClickMenu&&!this.columnSubscribers.headerClickMenu&&(this.columnSubscribers.headerClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerClickMenu"),this.subscribe("column-click",this.columnSubscribers.headerClickMenu)),n.headerDblClickMenu&&!this.columnSubscribers.headerDblClickMenu&&(this.columnSubscribers.headerDblClickMenu=this.loadMenuTableColumnEvent.bind(this,"headerDblClickMenu"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickMenu)),n.headerMenu&&this.initializeColumnHeaderMenu(e),n.contextMenu&&!this.columnSubscribers.contextMenu&&(this.columnSubscribers.contextMenu=this.loadMenuTableCellEvent.bind(this,"contextMenu"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextMenu),this.table.on("cellTapHold",this.loadMenuTableCellEvent.bind(this,"contextMenu"))),n.clickMenu&&!this.columnSubscribers.clickMenu&&(this.columnSubscribers.clickMenu=this.loadMenuTableCellEvent.bind(this,"clickMenu"),this.subscribe("cell-click",this.columnSubscribers.clickMenu)),n.dblClickMenu&&!this.columnSubscribers.dblClickMenu&&(this.columnSubscribers.dblClickMenu=this.loadMenuTableCellEvent.bind(this,"dblClickMenu"),this.subscribe("cell-dblclick",this.columnSubscribers.dblClickMenu))}initializeColumnHeaderMenu(e){var n=e.definition.headerMenuIcon,i;i=document.createElement("span"),i.classList.add("tabulator-header-popup-button"),n?(typeof n=="function"&&(n=n(e.getComponent())),n instanceof HTMLElement?i.appendChild(n):i.innerHTML=n):i.innerHTML="&vellip;",i.addEventListener("click",r=>{r.stopPropagation(),r.preventDefault(),this.loadMenuEvent(e.definition.headerMenu,r,e)}),e.titleElement.insertBefore(i,e.titleElement.firstChild)}loadMenuTableCellEvent(e,n,i){i._cell&&(i=i._cell),i.column.definition[e]&&this.loadMenuEvent(i.column.definition[e],n,i)}loadMenuTableColumnEvent(e,n,i){i._column&&(i=i._column),i.definition[e]&&this.loadMenuEvent(i.definition[e],n,i)}loadMenuEvent(e,n,i){i._group?i=i._group:i._row&&(i=i._row),e=typeof e=="function"?e.call(this.table,n,i.getComponent()):e,this.loadMenu(n,i,e)}loadMenu(e,n,i,r,t){var s=!(e instanceof MouseEvent),o=document.createElement("div"),a;if(o.classList.add("tabulator-menu"),s||e.preventDefault(),!(!i||!i.length)){if(r)a=t.child(o);else{if(this.nestedMenuBlock){if(this.rootPopup)return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.rootPopup&&this.rootPopup.hide(),this.rootPopup=a=this.popup(o)}i.forEach(l=>{var h=document.createElement("div"),c=l.label,d=l.disabled;l.separator?h.classList.add("tabulator-menu-separator"):(h.classList.add("tabulator-menu-item"),typeof c=="function"&&(c=c.call(this.table,n.getComponent())),c instanceof Node?h.appendChild(c):h.innerHTML=c,typeof d=="function"&&(d=d.call(this.table,n.getComponent())),d?(h.classList.add("tabulator-menu-item-disabled"),h.addEventListener("click",f=>{f.stopPropagation()})):l.menu&&l.menu.length?h.addEventListener("click",f=>{f.stopPropagation(),this.loadMenu(f,n,l.menu,h,a)}):l.action&&h.addEventListener("click",f=>{l.action(f,n.getComponent())}),l.menu&&l.menu.length&&h.classList.add("tabulator-menu-item-submenu")),o.appendChild(h)}),o.addEventListener("click",l=>{this.rootPopup&&this.rootPopup.hide()}),a.show(r||e),a===this.rootPopup&&(this.rootPopup.hideOnBlur(()=>{this.rootPopup=null,this.currentComponent&&(this.dispatch("menu-closed",i,a),this.dispatchExternal("menuClosed",this.currentComponent.getComponent()),this.currentComponent=null)}),this.currentComponent=n,this.dispatch("menu-opened",i,a),this.dispatchExternal("menuOpened",n.getComponent()))}}}te(ko,"moduleName","menu");class Jo extends Ce{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.table.options.movableColumns&&(this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("alert-show",this.abortMove.bind(this)))}abortMove(){clearTimeout(this.checkTimeout)}initializeColumn(e){var n=this,i={},r;!e.modules.frozen&&!e.isGroup&&!e.isRowHeader&&(r=e.getElement(),i.mousemove=(function(t){e.parent===n.moving.parent&&((n.touchMove?t.touches[0].pageX:t.pageX)-Pe.elOffset(r).left+n.table.columnManager.contentsElement.scrollLeft>e.getWidth()/2?(n.toCol!==e||!n.toColAfter)&&(r.parentNode.insertBefore(n.placeholderElement,r.nextSibling),n.moveColumn(e,!0)):(n.toCol!==e||n.toColAfter)&&(r.parentNode.insertBefore(n.placeholderElement,r),n.moveColumn(e,!1)))}).bind(n),r.addEventListener("mousedown",function(t){n.touchMove=!1,t.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(t,e)},n.checkPeriod))}),r.addEventListener("mouseup",function(t){t.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),n.bindTouchEvents(e)),e.modules.moveColumn=i}bindTouchEvents(e){var n=e.getElement(),i=!1,r,t,s,o,a,l;n.addEventListener("touchstart",h=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,r=e.nextColumn(),s=r?r.getWidth()/2:0,t=e.prevColumn(),o=t?t.getWidth()/2:0,a=0,l=0,i=!1,this.startMove(h,e)},this.checkPeriod)},{passive:!0}),n.addEventListener("touchmove",h=>{var c,d;this.moving&&(this.moveHover(h),i||(i=h.touches[0].pageX),c=h.touches[0].pageX-i,c>0?r&&c-a>s&&(d=r,d!==e&&(i=h.touches[0].pageX,d.getElement().parentNode.insertBefore(this.placeholderElement,d.getElement().nextSibling),this.moveColumn(d,!0))):t&&-c-l>o&&(d=t,d!==e&&(i=h.touches[0].pageX,d.getElement().parentNode.insertBefore(this.placeholderElement,d.getElement()),this.moveColumn(d,!1))),d&&(r=d.nextColumn(),a=s,s=r?r.getWidth()/2:0,t=d.prevColumn(),l=o,o=t?t.getWidth()/2:0))},{passive:!0}),n.addEventListener("touchend",h=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(h)})}startMove(e,n){var i=n.getElement(),r=this.table.columnManager.getContentsElement(),t=this.table.columnManager.getHeadersElement();this.table.modules.selectRange&&this.table.modules.selectRange.columnSelection&&this.table.modules.selectRange.mousedown&&this.table.modules.selectRange.selecting==="column"||(this.moving=n,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-Pe.elOffset(i).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=n.getWidth()+"px",this.placeholderElement.style.height=n.getHeight()+"px",i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),r.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=r.clientHeight-t.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e),this.dispatch("column-moving",e,this.moving))}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,n){var i=this.moving.getCells();this.toCol=e,this.toColAfter=n,n?e.getCells().forEach(function(r,t){var s=r.getElement(!0);s.parentNode&&i[t]&&s.parentNode.insertBefore(i[t].getElement(),s.nextSibling)}):e.getCells().forEach(function(r,t){var s=r.getElement(!0);s.parentNode&&i[t]&&s.parentNode.insertBefore(i[t].getElement(),s)})}endMove(e){(e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var n=this.table.columnManager.getContentsElement(),i=n.scrollLeft,r=(this.touchMove?e.touches[0].pageX:e.pageX)-Pe.elOffset(n).left+i,t;this.hoverElement.style.left=r-this.startX+"px",r-i<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{t=Math.max(0,i-5),this.table.rowManager.getElement().scrollLeft=t,this.autoScrollTimeout=!1},1))),i+n.clientWidth-r<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{t=Math.min(n.clientWidth,i+5),this.table.rowManager.getElement().scrollLeft=t,this.autoScrollTimeout=!1},1)))}}te(Jo,"moduleName","moveColumn");var kc={delete:function(u,e,n){u.delete()}},Jc={insert:function(u,e,n){return this.table.addRow(u.getData(),void 0,e),!0},add:function(u,e,n){return this.table.addRow(u.getData()),!0},update:function(u,e,n){return e?(e.update(u.getData()),!0):!1},replace:function(u,e,n){return e?(this.table.addRow(u.getData(),void 0,e),e.delete(),!0):!1}};const Xt=class Xt extends Ce{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(e){var n=this,i={};i.mouseup=(function(r){n.tableRowDrop(r,e)}).bind(n),i.mousemove=(function(r){var t;r.pageY-Pe.elOffset(e.element).top+n.table.rowManager.element.scrollTop>e.getHeight()/2?(n.toRow!==e||!n.toRowAfter)&&(t=e.getElement(),t.parentNode.insertBefore(n.placeholderElement,t.nextSibling),n.moveRow(e,!0)):(n.toRow!==e||n.toRowAfter)&&(t=e.getElement(),t.previousSibling&&(t.parentNode.insertBefore(n.placeholderElement,t),n.moveRow(e,!1)))}).bind(n),e.modules.moveRow=i}initializeRow(e){var n=this,i={},r;i.mouseup=(function(t){n.tableRowDrop(t,e)}).bind(n),i.mousemove=(function(t){var s=e.getElement();t.pageY-Pe.elOffset(s).top+n.table.rowManager.element.scrollTop>e.getHeight()/2?(n.toRow!==e||!n.toRowAfter)&&(s.parentNode.insertBefore(n.placeholderElement,s.nextSibling),n.moveRow(e,!0)):(n.toRow!==e||n.toRowAfter)&&(s.parentNode.insertBefore(n.placeholderElement,s),n.moveRow(e,!1))}).bind(n),this.hasHandle||(r=e.getElement(),r.addEventListener("mousedown",function(t){t.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(t,e)},n.checkPeriod))}),r.addEventListener("mouseup",function(t){t.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=i}initializeColumn(e){e.definition.rowHandle&&this.table.options.movableRows!==!1&&(this.hasHandle=!0)}initializeCell(e){if(e.column.definition.rowHandle&&this.table.options.movableRows!==!1){var n=this,i=e.getElement(!0);i.addEventListener("mousedown",function(r){r.which===1&&(n.checkTimeout=setTimeout(function(){n.startMove(r,e.row)},n.checkPeriod))}),i.addEventListener("mouseup",function(r){r.which===1&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),this.bindTouchEvents(e.row,i)}}bindTouchEvents(e,n){var i=!1,r,t,s,o,a,l;n.addEventListener("touchstart",h=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,r=e.nextRow(),s=r?r.getHeight()/2:0,t=e.prevRow(),o=t?t.getHeight()/2:0,a=0,l=0,i=!1,this.startMove(h,e)},this.checkPeriod)},{passive:!0}),this.moving,this.toRow,this.toRowAfter,n.addEventListener("touchmove",h=>{var c,d;this.moving&&(h.preventDefault(),this.moveHover(h),i||(i=h.touches[0].pageY),c=h.touches[0].pageY-i,c>0?r&&c-a>s&&(d=r,d!==e&&(i=h.touches[0].pageY,d.getElement().parentNode.insertBefore(this.placeholderElement,d.getElement().nextSibling),this.moveRow(d,!0))):t&&-c-l>o&&(d=t,d!==e&&(i=h.touches[0].pageY,d.getElement().parentNode.insertBefore(this.placeholderElement,d.getElement()),this.moveRow(d,!1))),d&&(r=d.nextRow(),a=s,s=r?r.getHeight()/2:0,t=d.prevRow(),l=o,o=t?t.getHeight()/2:0))}),n.addEventListener("touchend",h=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(h),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(e=>{(e.type==="row"||e.type==="group")&&e.modules.moveRow&&e.modules.moveRow.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)})}startMove(e,n){var i=n.getElement();this.setStartPosition(e,n),this.moving=n,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=n.getWidth()+"px",this.placeholderElement.style.height=n.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(n)):(i.parentNode.insertBefore(this.placeholderElement,i),i.parentNode.removeChild(i)),this.hoverElement=i.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.dispatchExternal("rowMoving",n.getComponent()),this.moveHover(e)}setStartPosition(e,n){var i=this.touchMove?e.touches[0].pageX:e.pageX,r=this.touchMove?e.touches[0].pageY:e.pageY,t,s;t=n.getElement(),this.connection?(s=t.getBoundingClientRect(),this.startX=s.left-i+window.pageXOffset,this.startY=s.top-r+window.pageYOffset):this.startY=r-t.getBoundingClientRect().top}endMove(e){(!e||e.which===1||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow?this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter):this.dispatchExternal("rowMoveCancelled",this.moving.getComponent()),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(e,n){this.toRow=e,this.toRowAfter=n}moveHover(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)}moveHoverTable(e){var n=this.table.rowManager.getElement(),i=n.scrollTop,r=(this.touchMove?e.touches[0].pageY:e.pageY)-n.getBoundingClientRect().top+i;this.hoverElement.style.top=Math.min(r-this.startY,this.table.rowManager.element.scrollHeight-this.hoverElement.offsetHeight)+"px"}moveHoverConnections(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"}elementRowDrop(e,n,i){this.dispatchExternal("movableRowsElementDrop",e,n,i?i.getComponent():!1)}connectToTables(e){var n;this.connectionSelectorsTables&&(n=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",n),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(i=>{typeof i=="string"?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(i))):this.connectionElements.push(i)}),this.connectionElements.forEach(i=>{var r=t=>{this.elementRowDrop(t,i,this.moving)};i.addEventListener("mouseup",r),i.tabulatorElementDropEvent=r,i.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",e),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(n=>{n.classList.remove("tabulator-movingrow-receiving"),n.removeEventListener("mouseup",n.tabulatorElementDropEvent),delete n.tabulatorElementDropEvent})}connect(e,n){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=n,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(i=>{i.type==="row"&&i.modules.moveRow&&i.modules.moveRow.mouseup&&i.getElement().addEventListener("mouseup",i.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",n,e),!0)}disconnect(e){e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(n=>{n.type==="row"&&n.modules.moveRow&&n.modules.moveRow.mouseup&&n.getElement().removeEventListener("mouseup",n.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",e)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(e,n,i){var r=!1;if(i){switch(typeof this.table.options.movableRowsSender){case"string":r=Xt.senders[this.table.options.movableRowsSender];break;case"function":r=this.table.options.movableRowsSender;break}r?r.call(this,this.moving?this.moving.getComponent():void 0,n?n.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),n?n.getComponent():void 0,e)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),n?n.getComponent():void 0,e);this.endMove()}tableRowDrop(e,n){var i=!1,r=!1;switch(e.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":i=Xt.receivers[this.table.options.movableRowsReceiver];break;case"function":i=this.table.options.movableRowsReceiver;break}i?r=i.call(this,this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),r?this.dispatchExternal("movableRowsReceived",this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable):this.dispatchExternal("movableRowsReceivedFailed",this.connectedRow.getComponent(),n?n.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:n,success:r})}commsReceived(e,n,i){switch(n){case"connect":return this.connect(e,i.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,i.row,i.success)}}};te(Xt,"moduleName","moveRow"),te(Xt,"senders",kc),te(Xt,"receivers",Jc);let Mr=Xt;var Qc={};const bi=class bi extends Ce{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard","import"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams"),this.registerColumnOption("mutatorImport"),this.registerColumnOption("mutatorImportParams"),this.registerColumnOption("mutateLink")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("cell-value-changed",this.mutateLink.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,n,i){return this.transformRow(n,"data",i)}initializeColumn(e){var n=!1,i={};this.allowedTypes.forEach(r=>{var t="mutator"+(r.charAt(0).toUpperCase()+r.slice(1)),s;e.definition[t]&&(s=this.lookupMutator(e.definition[t]),s&&(n=!0,i[t]={mutator:s,params:e.definition[t+"Params"]||{}}))}),n&&(e.modules.mutate=i)}lookupMutator(e){var n=!1;switch(typeof e){case"string":bi.mutators[e]?n=bi.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":n=e;break}return n}transformRow(e,n,i){var r="mutator"+(n.charAt(0).toUpperCase()+n.slice(1)),t;return this.enabled&&this.table.columnManager.traverse(s=>{var o,a,l;s.modules.mutate&&(o=s.modules.mutate[r]||s.modules.mutate.mutator||!1,o&&(t=s.getFieldValue(typeof i<"u"?i:e),(n=="data"&&!i||typeof t<"u")&&(l=s.getComponent(),a=typeof o.params=="function"?o.params(t,e,n,l):o.params,s.setFieldValue(e,o.mutator(t,e,n,a,l)))))}),e}transformCell(e,n){if(e.column.modules.mutate){var i=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,r={};if(i)return r=Object.assign(r,e.row.getData()),e.column.setFieldValue(r,n),i.mutator(n,r,"edit",i.params,e.getComponent())}return n}mutateLink(e){var n=e.column.definition.mutateLink;n&&(Array.isArray(n)||(n=[n]),n.forEach(i=>{var r=e.row.getCell(i);r&&r.setValue(r.getValue(),!0,!0)}))}enable(){this.enabled=!0}disable(){this.enabled=!1}};te(bi,"moduleName","mutator"),te(bi,"mutators",Qc);let Sr=bi;function Xc(u,e,n,i,r){var t=document.createElement("span"),s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),h=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",c=>{s.innerHTML=c}),this.table.modules.localize.langBind("pagination|counter|of",c=>{a.innerHTML=c}),this.table.modules.localize.langBind("pagination|counter|rows",c=>{h.innerHTML=c}),i?(o.innerHTML=" "+e+"-"+Math.min(e+u-1,i)+" ",l.innerHTML=" "+i+" ",t.appendChild(s),t.appendChild(o),t.appendChild(a),t.appendChild(l),t.appendChild(h)):(o.innerHTML=" 0 ",t.appendChild(s),t.appendChild(o),t.appendChild(h)),t}function Yc(u,e,n,i,r){var t=document.createElement("span"),s=document.createElement("span"),o=document.createElement("span"),a=document.createElement("span"),l=document.createElement("span"),h=document.createElement("span");return this.table.modules.localize.langBind("pagination|counter|showing",c=>{s.innerHTML=c}),o.innerHTML=" "+n+" ",this.table.modules.localize.langBind("pagination|counter|of",c=>{a.innerHTML=c}),l.innerHTML=" "+r+" ",this.table.modules.localize.langBind("pagination|counter|pages",c=>{h.innerHTML=c}),t.appendChild(s),t.appendChild(o),t.appendChild(a),t.appendChild(l),t.appendChild(h),t}var Zc={rows:Xc,pages:Yc};const ji=class ji extends Ce{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.element=null,this.pageCounterElement=null,this.pageCounter=null,this.size=0,this.page=1,this.count=5,this.max=1,this.remoteRowCountEstimate=null,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationCounter",!1),this.registerTableOption("paginationCounterElement",!1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("paginationOutOfRange",!1),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("footer-redraw",this.footerRedraw.bind(this)),this.table.options.paginationAddRow=="page"&&this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.table.options.paginationMode==="remote"&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePageCounter(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),this.table.options.progressiveLoad==="scroll"&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,n){var i=this.table.rowManager,r=i.getDisplayRows(),t;return n?r.length?t=r[0]:i.activeRows.length&&(t=i.activeRows[i.activeRows.length-1],n=!1):r.length&&(t=r[r.length-1],n=!(r.length<this.size)),{index:t,top:n}}calculatePageSizes(){var e,n;this.table.options.paginationSize?this.size=this.table.options.paginationSize:(e=document.createElement("div"),e.classList.add("tabulator-row"),e.style.visibility="hidden",n=document.createElement("div"),n.classList.add("tabulator-cell"),n.innerHTML="Page Row Test",e.appendChild(n),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.dispatchExternal("pageSizeChanged",this.size),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,n,i,r){return this.initialLoad||(this.progressiveLoad&&!i||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),r.page=this.page,this.size&&(r.size=this.size),r}userSetPageToRow(e){return this.table.options.pagination&&(e=this.table.rowManager.findRow(e),e)?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return this.table.options.pagination?(this.setPageSize(e),this.setPage(1)):!1}scrollVertical(e,n){var i,r,t;!n&&!this.table.dataLoader.loading&&(i=this.table.rowManager.getElement(),r=i.scrollHeight-i.clientHeight-e,t=this.table.options.progressiveLoadScrollMargin||i.clientHeight*2,r<t&&this.nextPage().catch(()=>{}))}restOnRenderBefore(e,n){return n||this.mode==="local"&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),e=document.createElement("button"),e.classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))e=this.table.options.paginationSizeSelector,this.pageSizes=e,this.pageSizes.indexOf(this.size)==-1&&e.unshift(this.size);else if(this.pageSizes.indexOf(this.size)==-1){e=[];for(let n=1;n<5;n++)e.push(this.size*n);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(n=>{var i=document.createElement("option");i.value=n,n===!0?this.langBind("pagination|all",function(r){i.innerHTML=r}):i.innerHTML=n,this.pageSizeSelect.appendChild(i)}),this.pageSizeSelect.value=this.size}}initializePageCounter(){var e=this.table.options.paginationCounter,n=null;e&&(typeof e=="function"?n=e:n=ji.pageCounters[e],n?(this.pageCounter=n,this.pageCounterElement=document.createElement("span"),this.pageCounterElement.classList.add("tabulator-page-counter")):console.warn("Pagination Error - No such page counter found: ",e))}initializePaginator(e){var n,i;e||(this.langBind("pagination|first",r=>{this.firstBut.innerHTML=r}),this.langBind("pagination|first_title",r=>{this.firstBut.setAttribute("aria-label",r),this.firstBut.setAttribute("title",r)}),this.langBind("pagination|prev",r=>{this.prevBut.innerHTML=r}),this.langBind("pagination|prev_title",r=>{this.prevBut.setAttribute("aria-label",r),this.prevBut.setAttribute("title",r)}),this.langBind("pagination|next",r=>{this.nextBut.innerHTML=r}),this.langBind("pagination|next_title",r=>{this.nextBut.setAttribute("aria-label",r),this.nextBut.setAttribute("title",r)}),this.langBind("pagination|last",r=>{this.lastBut.innerHTML=r}),this.langBind("pagination|last_title",r=>{this.lastBut.setAttribute("aria-label",r),this.lastBut.setAttribute("title",r)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(n=document.createElement("label"),this.langBind("pagination|page_size",r=>{this.pageSizeSelect.setAttribute("aria-label",r),this.pageSizeSelect.setAttribute("title",r),n.innerHTML=r}),this.element.appendChild(n),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",r=>{this.setPageSize(this.pageSizeSelect.value=="true"?!0:this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),this.table.options.paginationElement||(this.table.options.paginationCounter&&(this.table.options.paginationCounterElement?this.table.options.paginationCounterElement instanceof HTMLElement?this.table.options.paginationCounterElement.appendChild(this.pageCounterElement):typeof this.table.options.paginationCounterElement=="string"&&(i=document.querySelector(this.table.options.paginationCounterElement),i?i.appendChild(this.pageCounterElement):console.warn("Pagination Error - Unable to find element matching paginationCounterElement selector:",this.table.options.paginationCounterElement)):this.footerAppend(this.pageCounterElement)),this.footerAppend(this.element)),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setMaxRows(e){e?this.max=this.size===!0?1:Math.ceil(e/this.size):this.max=1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||(this.mode=="local"||e)&&(this.page=1,this.trackChanges())}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return e=parseInt(e),e>0&&e<=this.max||this.mode!=="local"?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var n=this.displayRows(-1),i=n.indexOf(e);if(i>-1){var r=this.size===!0?1:Math.ceil((i+1)/this.size);return this.setPage(r)}else return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){e!==!0&&(e=parseInt(e)),e>0&&(this.size=e,this.dispatchExternal("pageSizeChanged",e)),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageCounter(e,n,i){var r;if(this.pageCounter)switch(this.mode==="remote"&&(n=this.size,i=(this.page-1)*this.size+1,e=this.remoteRowCountEstimate),r=this.pageCounter.call(this,n,i,this.page,e,this.max),typeof r){case"object":if(r instanceof Node){for(;this.pageCounterElement.firstChild;)this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);this.pageCounterElement.appendChild(r)}else this.pageCounterElement.innerHTML="",r!=null&&console.warn("Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:",r);break;case"undefined":this.pageCounterElement.innerHTML="";break;default:this.pageCounterElement.innerHTML=r}}_setPageButtons(){let e=Math.floor((this.count-1)/2),n=Math.ceil((this.count-1)/2),i=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),r=this.page<=n?Math.min(this.count,this.max):Math.min(this.page+n,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);this.page==1?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let t=i;t<=r;t++)t>0&&t<=this.max&&this.pagesElement.appendChild(this._generatePageButton(t));this.footerRedraw()}_generatePageButton(e){var n=document.createElement("button");return n.classList.add("tabulator-page"),e==this.page&&n.classList.add("active"),n.setAttribute("type","button"),n.setAttribute("role","button"),this.langBind("pagination|page_title",i=>{n.setAttribute("aria-label",i+" "+e),n.setAttribute("title",i+" "+e)}),n.setAttribute("data-page",e),n.textContent=e,n.addEventListener("click",i=>{this.setPage(e)}),n}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var n=0,i,r,t,s,o=e.filter(a=>a.type==="row");if(this.mode=="local"){i=[],this.setMaxRows(e.length),this.size===!0?(r=0,t=e.length):(r=this.size*(this.page-1),t=r+parseInt(this.size)),this._setPageButtons();for(let a=r;a<t;a++){let l=e[a];l&&(i.push(l),l.type==="row"&&(s||(s=l),n++))}return this._setPageCounter(o.length,n,s?o.indexOf(s)+1:0),i}else return this._setPageButtons(),this._setPageCounter(o.length),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){var n,i;if(typeof e.last_page>"u"&&console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").last_page||"last_page")+"' property"),e.data)if(this.max=parseInt(e.last_page)||1,this.remoteRowCountEstimate=typeof e.last_row<"u"?e.last_row:e.last_page*this.size-(this.page==e.last_page?this.size-e.data.length:0),this.progressiveLoad){switch(this.mode){case"progressive_load":this.page==1?this.table.rowManager.setData(e.data,!1,this.page==1):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.page===1?e.data:this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,this.page!==1,this.page==1),n=this.table.options.progressiveLoadScrollMargin||this.table.rowManager.element.clientHeight*2,this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+n&&this.page<this.max&&setTimeout(()=>{this.nextPage()});break}return!1}else{if(this.page>this.max&&(console.warn("Remote Pagination Error - Server returned last page value lower than the current page"),i=this.options("paginationOutOfRange"),i))return this.setPage(typeof i=="function"?i.call(this,this.page,this.max):i);this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+(this.options("dataReceiveParams").data||"data")+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.containerElement;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}};te(ji,"moduleName","page"),te(ji,"pageCounters",Zc);let Pr=ji;var qc={local:function(u,e){var n=localStorage.getItem(u+"-"+e);return n?JSON.parse(n):!1},cookie:function(u,e){var n=document.cookie,i=u+"-"+e,r=n.indexOf(i+"="),t,s;return r>-1&&(n=n.slice(r),t=n.indexOf(";"),t>-1&&(n=n.slice(0,t)),s=n.replace(i+"=","")),s?JSON.parse(s):!1}},_c={local:function(u,e,n){localStorage.setItem(u+"-"+e,JSON.stringify(n))},cookie:function(u,e,n){var i=new Date;i.setDate(i.getDate()+1e4),document.cookie=u+"-"+e+"="+JSON.stringify(n)+"; expires="+i.toUTCString()}};const ht=class ht extends Ce{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}initialize(){if(this.table.options.persistence){var e=this.table.options.persistenceMode,n=this.table.options.persistenceID,i;this.mode=e!==!0?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?typeof this.table.options.persistenceReaderFunc=="function"?this.readFunc=this.table.options.persistenceReaderFunc:ht.readers[this.table.options.persistenceReaderFunc]?this.readFunc=ht.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):ht.readers[this.mode]?this.readFunc=ht.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?typeof this.table.options.persistenceWriterFunc=="function"?this.writeFunc=this.table.options.persistenceWriterFunc:ht.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=ht.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):ht.writers[this.mode]?this.writeFunc=ht.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(n||this.table.element.getAttribute("id")||""),this.config={sort:this.table.options.persistence===!0||this.table.options.persistence.sort,filter:this.table.options.persistence===!0||this.table.options.persistence.filter,headerFilter:this.table.options.persistence===!0||this.table.options.persistence.headerFilter,group:this.table.options.persistence===!0||this.table.options.persistence.group,page:this.table.options.persistence===!0||this.table.options.persistence.page,columns:this.table.options.persistence===!0?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(i=this.retrieveData("page"),i&&(typeof i.paginationSize<"u"&&(this.config.page===!0||this.config.page.size)&&(this.table.options.paginationSize=i.paginationSize),typeof i.paginationInitialPage<"u"&&(this.config.page===!0||this.config.page.page)&&(this.table.options.paginationInitialPage=i.paginationInitialPage))),this.config.group&&(i=this.retrieveData("group"),i&&(typeof i.groupBy<"u"&&(this.config.group===!0||this.config.group.groupBy)&&(this.table.options.groupBy=i.groupBy),typeof i.groupStartOpen<"u"&&(this.config.group===!0||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=i.groupStartOpen),typeof i.groupHeader<"u"&&(this.config.group===!0||this.config.group.groupHeader)&&(this.table.options.groupHeader=i.groupHeader))),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns"))),this.subscribe("table-built",this.tableBuilt.bind(this),0),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("filter-changed",this.eventSave.bind(this,"headerFilter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("column-width",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var e,n,i;this.config.sort&&(e=this.load("sort"),e&&(this.table.options.initialSort=e)),this.config.filter&&(n=this.load("filter"),n&&(this.table.options.initialFilter=n)),this.config.headerFilter&&(i=this.load("headerFilter"),i&&(this.table.options.initialHeaderFilter=i))}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e,!0)),!0}initializeColumn(e){var n,i;this.config.columns&&(this.defWatcherBlock=!0,n=e.getDefinition(),i=this.config.columns===!0?Object.keys(n):this.config.columns,i.forEach(r=>{var t=Object.getOwnPropertyDescriptor(n,r),s=n[r];t&&Object.defineProperty(n,r,{set:o=>{s=o,this.defWatcherBlock||this.save("columns"),t.set&&t.set(o)},get:()=>(t.get&&t.get(),s)})}),this.defWatcherBlock=!1)}load(e,n){var i=this.retrieveData(e);return n&&(i=i?this.mergeDefinition(n,i):n),i}retrieveData(e){return this.readFunc?this.readFunc(this.id,e):!1}mergeDefinition(e,n,i){var r=[];return n=n||[],n.forEach((t,s)=>{var o=this._findColumn(e,t),a;o&&(i?a=Object.keys(t):this.config.columns===!0||this.config.columns==null?(a=Object.keys(o),a.push("width")):a=this.config.columns,a.forEach(l=>{l!=="columns"&&typeof t[l]<"u"&&(o[l]=t[l])}),o.columns&&(o.columns=this.mergeDefinition(o.columns,t.columns)),r.push(o))}),e.forEach((t,s)=>{var o=this._findColumn(n,t);o||(r.length>s?r.splice(s,0,t):r.push(t))}),r}_findColumn(e,n){var i=n.columns?"group":n.field?"field":"object";return e.find(function(r){switch(i){case"group":return r.title===n.title&&r.columns.length===n.columns.length;case"field":return r.field===n.field;case"object":return r===n}})}save(e){var n={};switch(e){case"columns":n=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":n=this.table.modules.filter.getFilters();break;case"headerFilter":n=this.table.modules.filter.getHeaderFilters();break;case"sort":n=this.validateSorters(this.table.modules.sort.getSort());break;case"group":n=this.getGroupConfig();break;case"page":n=this.getPageConfig();break}this.writeFunc&&this.writeFunc(this.id,e,n)}validateSorters(e){return e.forEach(function(n){n.column=n.field,delete n.field}),e}getGroupConfig(){var e={};return this.config.group&&((this.config.group===!0||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(this.config.group===!0||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(this.config.group===!0||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((this.config.page===!0||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(this.config.page===!0||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var n=[],i=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(r=>{var t={},s=r.getDefinition(),o;r.isGroup?(t.title=s.title,t.columns=this.parseColumns(r.getColumns())):(t.field=r.getField(),this.config.columns===!0||this.config.columns==null?(o=Object.keys(s),o.push("width"),o.push("visible")):o=this.config.columns,o.forEach(a=>{switch(a){case"width":t.width=r.getWidth();break;case"visible":t.visible=r.visible;break;default:typeof s[a]!="function"&&i.indexOf(a)===-1&&(t[a]=s[a])}})),n.push(t)}),n}};te(ht,"moduleName","persistence"),te(ht,"moduleInitOrder",-10),te(ht,"readers",qc),te(ht,"writers",_c);let Dr=ht;class Qo extends Ce{constructor(e){super(e),this.columnSubscribers={},this.registerTableOption("rowContextPopup",!1),this.registerTableOption("rowClickPopup",!1),this.registerTableOption("rowDblClickPopup",!1),this.registerTableOption("groupContextPopup",!1),this.registerTableOption("groupClickPopup",!1),this.registerTableOption("groupDblClickPopup",!1),this.registerColumnOption("headerContextPopup"),this.registerColumnOption("headerClickPopup"),this.registerColumnOption("headerDblClickPopup"),this.registerColumnOption("headerPopup"),this.registerColumnOption("headerPopupIcon"),this.registerColumnOption("contextPopup"),this.registerColumnOption("clickPopup"),this.registerColumnOption("dblClickPopup"),this.registerComponentFunction("cell","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("column","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("row","popup",this._componentPopupCall.bind(this)),this.registerComponentFunction("group","popup",this._componentPopupCall.bind(this))}initialize(){this.initializeRowWatchers(),this.initializeGroupWatchers(),this.subscribe("column-init",this.initializeColumn.bind(this))}_componentPopupCall(e,n,i){this.loadPopupEvent(n,null,e,i)}initializeRowWatchers(){this.table.options.rowContextPopup&&(this.subscribe("row-contextmenu",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup)),this.table.on("rowTapHold",this.loadPopupEvent.bind(this,this.table.options.rowContextPopup))),this.table.options.rowClickPopup&&this.subscribe("row-click",this.loadPopupEvent.bind(this,this.table.options.rowClickPopup)),this.table.options.rowDblClickPopup&&this.subscribe("row-dblclick",this.loadPopupEvent.bind(this,this.table.options.rowDblClickPopup))}initializeGroupWatchers(){this.table.options.groupContextPopup&&(this.subscribe("group-contextmenu",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup)),this.table.on("groupTapHold",this.loadPopupEvent.bind(this,this.table.options.groupContextPopup))),this.table.options.groupClickPopup&&this.subscribe("group-click",this.loadPopupEvent.bind(this,this.table.options.groupClickPopup)),this.table.options.groupDblClickPopup&&this.subscribe("group-dblclick",this.loadPopupEvent.bind(this,this.table.options.groupDblClickPopup))}initializeColumn(e){var n=e.definition;n.headerContextPopup&&!this.columnSubscribers.headerContextPopup&&(this.columnSubscribers.headerContextPopup=this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"),this.subscribe("column-contextmenu",this.columnSubscribers.headerContextPopup),this.table.on("headerTapHold",this.loadPopupTableColumnEvent.bind(this,"headerContextPopup"))),n.headerClickPopup&&!this.columnSubscribers.headerClickPopup&&(this.columnSubscribers.headerClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerClickPopup"),this.subscribe("column-click",this.columnSubscribers.headerClickPopup)),n.headerDblClickPopup&&!this.columnSubscribers.headerDblClickPopup&&(this.columnSubscribers.headerDblClickPopup=this.loadPopupTableColumnEvent.bind(this,"headerDblClickPopup"),this.subscribe("column-dblclick",this.columnSubscribers.headerDblClickPopup)),n.headerPopup&&this.initializeColumnHeaderPopup(e),n.contextPopup&&!this.columnSubscribers.contextPopup&&(this.columnSubscribers.contextPopup=this.loadPopupTableCellEvent.bind(this,"contextPopup"),this.subscribe("cell-contextmenu",this.columnSubscribers.contextPopup),this.table.on("cellTapHold",this.loadPopupTableCellEvent.bind(this,"contextPopup"))),n.clickPopup&&!this.columnSubscribers.clickPopup&&(this.columnSubscribers.clickPopup=this.loadPopupTableCellEvent.bind(this,"clickPopup"),this.subscribe("cell-click",this.columnSubscribers.clickPopup)),n.dblClickPopup&&!this.columnSubscribers.dblClickPopup&&(this.columnSubscribers.dblClickPopup=this.loadPopupTableCellEvent.bind(this,"dblClickPopup"),this.subscribe("cell-click",this.columnSubscribers.dblClickPopup))}initializeColumnHeaderPopup(e){var n=e.definition.headerPopupIcon,i;i=document.createElement("span"),i.classList.add("tabulator-header-popup-button"),n?(typeof n=="function"&&(n=n(e.getComponent())),n instanceof HTMLElement?i.appendChild(n):i.innerHTML=n):i.innerHTML="&vellip;",i.addEventListener("click",r=>{r.stopPropagation(),r.preventDefault(),this.loadPopupEvent(e.definition.headerPopup,r,e)}),e.titleElement.insertBefore(i,e.titleElement.firstChild)}loadPopupTableCellEvent(e,n,i){i._cell&&(i=i._cell),i.column.definition[e]&&this.loadPopupEvent(i.column.definition[e],n,i)}loadPopupTableColumnEvent(e,n,i){i._column&&(i=i._column),i.definition[e]&&this.loadPopupEvent(i.definition[e],n,i)}loadPopupEvent(e,n,i,r){var t;function s(o){t=o}i._group?i=i._group:i._row&&(i=i._row),e=typeof e=="function"?e.call(this.table,n,i.getComponent(),s):e,this.loadPopup(n,i,e,t,r)}loadPopup(e,n,i,r,t){var s=!(e instanceof MouseEvent),o,a;i instanceof HTMLElement?o=i:(o=document.createElement("div"),o.innerHTML=i),o.classList.add("tabulator-popup"),o.addEventListener("click",l=>{l.stopPropagation()}),s||e.preventDefault(),a=this.popup(o),typeof r=="function"&&a.renderCallback(r),e?a.show(e):a.show(n.getElement(),t||"center"),a.hideOnBlur(()=>{this.dispatchExternal("popupClosed",n.getComponent())}),this.dispatchExternal("popupOpened",n.getComponent())}}te(Qo,"moduleName","popup");class Xo extends Ce{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.beforeprintEventHandler=null,this.afterprintEventHandler=null,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(this.beforeprintEventHandler=this.replaceTable.bind(this),this.afterprintEventHandler=this.cleanup.bind(this),window.addEventListener("beforeprint",this.beforeprintEventHandler),window.addEventListener("afterprint",this.afterprintEventHandler),this.subscribe("table-destroy",this.destroy.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}destroy(){this.table.options.printAsHtml&&(window.removeEventListener("beforeprint",this.beforeprintEventHandler),window.removeEventListener("afterprint",this.afterprintEventHandler))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.generateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,n,i){var r=window.scrollX,t=window.scrollY,s=document.createElement("div"),o=document.createElement("div"),a=this.table.modules.export.generateTable(typeof i<"u"?i:this.table.options.printConfig,typeof n<"u"?n:this.table.options.printStyled,e||this.table.options.printRowRange,"print"),l,h;this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(s.classList.add("tabulator-print-header"),l=typeof this.table.options.printHeader=="function"?this.table.options.printHeader.call(this.table):this.table.options.printHeader,typeof l=="string"?s.innerHTML=l:s.appendChild(l),this.element.appendChild(s)),this.element.appendChild(a),this.table.options.printFooter&&(o.classList.add("tabulator-print-footer"),h=typeof this.table.options.printFooter=="function"?this.table.options.printFooter.call(this.table):this.table.options.printFooter,typeof h=="string"?o.innerHTML=h:o.appendChild(h),this.element.appendChild(o)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,a),window.print(),this.cleanup(),window.scrollTo(r,t),this.manualBlock=!1}}te(Xo,"moduleName","print");class Yo extends Ce{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this,"cellsave")),this.subscribe("cell-value-save-after",this.unblock.bind(this,"cellsave")),this.subscribe("row-data-save-before",this.block.bind(this,"rowsave")),this.subscribe("row-data-save-after",this.unblock.bind(this,"rowsave")),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var n=this,i;this.currentVersion++,i=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments),t;return!n.blocked&&i===n.currentVersion&&(n.block("data-push"),r.forEach(s=>{n.table.rowManager.addRowActual(s,!1)}),t=n.origFuncs.push.apply(e,arguments),n.unblock("data-push")),t}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments),t;return!n.blocked&&i===n.currentVersion&&(n.block("data-unshift"),r.forEach(s=>{n.table.rowManager.addRowActual(s,!0)}),t=n.origFuncs.unshift.apply(e,arguments),n.unblock("data-unshift")),t}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var r,t;return!n.blocked&&i===n.currentVersion&&(n.block("data-shift"),n.data.length&&(r=n.table.rowManager.getRowFromDataObject(n.data[0]),r&&r.deleteActual()),t=n.origFuncs.shift.call(e),n.unblock("data-shift")),t}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var r,t;return!n.blocked&&i===n.currentVersion&&(n.block("data-pop"),n.data.length&&(r=n.table.rowManager.getRowFromDataObject(n.data[n.data.length-1]),r&&r.deleteActual()),t=n.origFuncs.pop.call(e),n.unblock("data-pop")),t}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments),t=r[0]<0?e.length+r[0]:r[0],s=r[1],o=r[2]?r.slice(2):!1,a,l;if(!n.blocked&&i===n.currentVersion){if(n.block("data-splice"),o&&(a=e[t]?n.table.rowManager.getRowFromDataObject(e[t]):!1,a?o.forEach(c=>{n.table.rowManager.addRowActual(c,!0,a,!0)}):(o=o.slice().reverse(),o.forEach(c=>{n.table.rowManager.addRowActual(c,!0,!1,!0)}))),s!==0){var h=e.slice(t,typeof r[1]>"u"?r[1]:t+s);h.forEach((c,d)=>{var f=n.table.rowManager.getRowFromDataObject(c);f&&f.deleteActual(d!==h.length-1)})}(o||s!==0)&&n.table.rowManager.reRenderInPosition(),l=n.origFuncs.splice.apply(e,arguments),n.unblock("data-splice")}return l}})}unwatchData(){if(this.data!==!1)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var n=e.getData();for(var i in n)this.watchKey(e,n,i);this.table.options.dataTree&&this.watchTreeChildren(e)}watchTreeChildren(e){var n=this,i=e.getData()[this.table.options.dataTreeChildField],r={};i&&(r.push=i.push,Object.defineProperty(i,"push",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-push");var t=r.push.apply(i,arguments);this.rebuildTree(e),n.unblock("tree-push")}return t}}),r.unshift=i.unshift,Object.defineProperty(i,"unshift",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-unshift");var t=r.unshift.apply(i,arguments);this.rebuildTree(e),n.unblock("tree-unshift")}return t}}),r.shift=i.shift,Object.defineProperty(i,"shift",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-shift");var t=r.shift.call(i);this.rebuildTree(e),n.unblock("tree-shift")}return t}}),r.pop=i.pop,Object.defineProperty(i,"pop",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-pop");var t=r.pop.call(i);this.rebuildTree(e),n.unblock("tree-pop")}return t}}),r.splice=i.splice,Object.defineProperty(i,"splice",{enumerable:!1,configurable:!0,value:()=>{if(!n.blocked){n.block("tree-splice");var t=r.splice.apply(i,arguments);this.rebuildTree(e),n.unblock("tree-splice")}return t}}))}rebuildTree(e){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}watchKey(e,n,i){var r=this,t=Object.getOwnPropertyDescriptor(n,i),s=n[i],o=this.currentVersion;Object.defineProperty(n,i,{set:a=>{if(s=a,!r.blocked&&o===r.currentVersion){r.block("key");var l={};l[i]=a,e.updateData(l),r.unblock("key")}t.set&&t.set(a)},get:()=>(t.get&&t.get(),s)})}unwatchRow(e){var n=e.getData();for(var i in n)Object.defineProperty(n,i,{value:n[i]})}block(e){this.blocked||(this.blocked=e)}unblock(e){this.blocked===e&&(this.blocked=!1)}}te(Yo,"moduleName","reactiveData");class Zo extends Ce{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.latestX=!1,this.handle=null,this.initialNextColumn=null,this.nextColumn=null,this.initialized=!1,this.registerColumnOption("resizable",!0),this.registerTableOption("resizableColumnFit",!1),this.registerTableOption("resizableColumnGuide",!1)}initialize(){this.subscribe("column-rendered",this.layoutColumnHeader.bind(this))}initializeEventWatchers(){this.initialized||(this.subscribe("cell-rendered",this.layoutCellHandles.bind(this)),this.subscribe("cell-delete",this.deInitializeComponent.bind(this)),this.subscribe("cell-height",this.resizeHandle.bind(this)),this.subscribe("column-moved",this.columnLayoutUpdated.bind(this)),this.subscribe("column-hide",this.deInitializeColumn.bind(this)),this.subscribe("column-show",this.columnLayoutUpdated.bind(this)),this.subscribe("column-width",this.columnWidthUpdated.bind(this)),this.subscribe("column-delete",this.deInitializeComponent.bind(this)),this.subscribe("column-height",this.resizeHandle.bind(this)),this.initialized=!0)}layoutCellHandles(e){e.row.type==="row"&&(this.deInitializeComponent(e),this.initializeColumn("cell",e,e.column,e.element))}layoutColumnHeader(e){e.definition.resizable&&(this.initializeEventWatchers(),this.deInitializeComponent(e),this.initializeColumn("header",e,e,e.element))}columnLayoutUpdated(e){var n=e.prevColumn();this.reinitializeColumn(e),n&&this.reinitializeColumn(n)}columnWidthUpdated(e){e.modules.frozen&&(this.table.modules.frozenColumns.leftColumns.includes(e)?this.table.modules.frozenColumns.leftColumns.forEach(n=>{this.reinitializeColumn(n)}):this.table.modules.frozenColumns.rightColumns.includes(e)&&this.table.modules.frozenColumns.rightColumns.forEach(n=>{this.reinitializeColumn(n)}))}frozenColumnOffset(e){var n=!1;return e.modules.frozen&&(n=e.modules.frozen.marginValue,e.modules.frozen.position==="left"?n+=e.getWidth()-3:n&&(n-=3)),n!==!1?n+"px":!1}reinitializeColumn(e){var n=this.frozenColumnOffset(e);e.cells.forEach(i=>{i.modules.resize&&i.modules.resize.handleEl&&(n&&(i.modules.resize.handleEl.style[e.modules.frozen.position]=n,i.modules.resize.handleEl.style["z-index"]=11),i.element.after(i.modules.resize.handleEl))}),e.modules.resize&&e.modules.resize.handleEl&&(n&&(e.modules.resize.handleEl.style[e.modules.frozen.position]=n),e.element.after(e.modules.resize.handleEl))}initializeColumn(e,n,i,r){var t=this,s=!1,o=i.definition.resizable,a={},l=i.getLastColumn();if(e==="header"&&(s=i.definition.formatter=="textarea"||i.definition.variableHeight,a={variableHeight:s}),(o===!0||o==e)&&this._checkResizability(l)){var h=document.createElement("span");h.className="tabulator-col-resize-handle",h.addEventListener("click",function(d){d.stopPropagation()});var c=function(d){t.startColumn=i,t.initialNextColumn=t.nextColumn=l.nextColumn(),t._mouseDown(d,l,h)};h.addEventListener("mousedown",c),h.addEventListener("touchstart",c,{passive:!0}),h.addEventListener("dblclick",d=>{var f=l.getWidth();d.stopPropagation(),l.reinitializeWidth(!0),f!==l.getWidth()&&(t.dispatch("column-resized",l),t.dispatchExternal("columnResized",l.getComponent()))}),i.modules.frozen&&(h.style.position="sticky",h.style[i.modules.frozen.position]=this.frozenColumnOffset(i)),a.handleEl=h,r.parentNode&&i.visible&&r.after(h)}n.modules.resize=a}deInitializeColumn(e){this.deInitializeComponent(e),e.cells.forEach(n=>{this.deInitializeComponent(n)})}deInitializeComponent(e){var n;e.modules.resize&&(n=e.modules.resize.handleEl,n&&n.parentElement&&n.parentElement.removeChild(n))}resizeHandle(e,n){e.modules.resize&&e.modules.resize.handleEl&&(e.modules.resize.handleEl.style.height=n)}resize(e,n){var i=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,r=i-this.startX,t=i-this.latestX,s,o;if(this.latestX=i,this.table.rtl&&(r=-r,t=-t),s=n.width==n.minWidth||n.width==n.maxWidth,n.setWidth(this.startWidth+r),o=n.width==n.minWidth||n.width==n.maxWidth,t<0&&(this.nextColumn=this.initialNextColumn),this.table.options.resizableColumnFit&&this.nextColumn&&!(s&&o)){let a=this.nextColumn.getWidth();t>0&&a<=this.nextColumn.minWidth&&(this.nextColumn=this.nextColumn.nextColumn()),this.nextColumn&&this.nextColumn.setWidth(this.nextColumn.getWidth()-t)}this.table.columnManager.rerenderColumns(!0),!this.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights()}calcGuidePosition(e,n,i){var r=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,t=i.getBoundingClientRect().x-this.table.element.getBoundingClientRect().x,s=this.table.element.getBoundingClientRect().x,o=n.element.getBoundingClientRect().left-s,a=r-this.startX,l=Math.max(t+a,o+n.minWidth);return n.maxWidth&&(l=Math.min(l,o+n.maxWidth)),l}_checkResizability(e){return e.definition.resizable}_mouseDown(e,n,i){var r=this,t;this.dispatchExternal("columnResizing",n.getComponent()),r.table.options.resizableColumnGuide&&(t=document.createElement("span"),t.classList.add("tabulator-col-resize-guide"),r.table.element.appendChild(t),setTimeout(()=>{t.style.left=r.calcGuidePosition(e,n,i)+"px"})),r.table.element.classList.add("tabulator-block-select");function s(a){r.table.options.resizableColumnGuide?t.style.left=r.calcGuidePosition(a,n,i)+"px":r.resize(a,n)}function o(a){r.table.options.resizableColumnGuide&&(r.resize(a,n),t.remove()),r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!1),r.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights(),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",s),i.removeEventListener("touchmove",s),i.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.startWidth!==n.getWidth()&&(r.table.columnManager.verticalAlignHeaders(),r.dispatch("column-resized",n),r.dispatchExternal("columnResized",n.getComponent()))}e.stopPropagation(),r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!0),r.startX=typeof e.clientX>"u"?e.touches[0].clientX:e.clientX,r.latestX=r.startX,r.startWidth=n.getWidth(),document.body.addEventListener("mousemove",s),document.body.addEventListener("mouseup",o),i.addEventListener("touchmove",s,{passive:!0}),i.addEventListener("touchend",o)}}te(Zo,"moduleName","resizeColumns");class qo extends Ce{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1),this.registerTableOption("resizableRowGuide",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var n=this,i=e.getElement(),r=document.createElement("div");r.className="tabulator-row-resize-handle";var t=document.createElement("div");t.className="tabulator-row-resize-handle prev",r.addEventListener("click",function(a){a.stopPropagation()});var s=function(a){n.startRow=e,n._mouseDown(a,e,r)};r.addEventListener("mousedown",s),r.addEventListener("touchstart",s,{passive:!0}),t.addEventListener("click",function(a){a.stopPropagation()});var o=function(a){var l=n.table.rowManager.prevDisplayRow(e);l&&(n.startRow=l,n._mouseDown(a,l,t))};t.addEventListener("mousedown",o),t.addEventListener("touchstart",o,{passive:!0}),i.appendChild(r),i.appendChild(t)}resize(e,n){n.setHeight(this.startHeight+((typeof e.screenY>"u"?e.touches[0].screenY:e.screenY)-this.startY))}calcGuidePosition(e,n,i){var r=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,t=i.getBoundingClientRect().y-this.table.element.getBoundingClientRect().y,s=this.table.element.getBoundingClientRect().y,o=n.element.getBoundingClientRect().top-s,a=r-this.startY;return Math.max(t+a,o)}_mouseDown(e,n,i){var r=this,t;r.dispatchExternal("rowResizing",n.getComponent()),r.table.options.resizableRowGuide&&(t=document.createElement("span"),t.classList.add("tabulator-row-resize-guide"),r.table.element.appendChild(t),setTimeout(()=>{t.style.top=r.calcGuidePosition(e,n,i)+"px"})),r.table.element.classList.add("tabulator-block-select");function s(a){r.table.options.resizableRowGuide?t.style.top=r.calcGuidePosition(a,n,i)+"px":r.resize(a,n)}function o(a){r.table.options.resizableRowGuide&&(r.resize(a,n),t.remove()),document.body.removeEventListener("mouseup",s),document.body.removeEventListener("mousemove",s),i.removeEventListener("touchmove",s),i.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.dispatchExternal("rowResized",n.getComponent())}e.stopPropagation(),r.startY=typeof e.screenY>"u"?e.touches[0].screenY:e.screenY,r.startHeight=n.getHeight(),document.body.addEventListener("mousemove",s),document.body.addEventListener("mouseup",o),i.addEventListener("touchmove",s,{passive:!0}),i.addEventListener("touchend",o)}}te(qo,"moduleName","resizeRows");class _o extends Ce{constructor(e){super(e),this.binding=!1,this.visibilityObserver=!1,this.resizeObserver=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.visible=!1,this.initialized=!1,this.initialRedraw=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var e=this.table,n;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),typeof IntersectionObserver<"u"&&typeof ResizeObserver<"u"&&e.rowManager.getRenderMode()==="virtual"?(this.initializeVisibilityObserver(),this.autoResize=!0,this.resizeObserver=new ResizeObserver(i=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var r=Math.floor(i[0].contentRect.height),t=Math.floor(i[0].contentRect.width);(this.tableHeight!=r||this.tableWidth!=t)&&(this.tableHeight=r,this.tableWidth=t,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.redrawTable())}}),this.resizeObserver.observe(e.element),n=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(n.getPropertyValue("max-height")||n.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(i=>{if(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell)){var r=Math.floor(i[0].contentRect.height),t=Math.floor(i[0].contentRect.width);(this.containerHeight!=r||this.containerWidth!=t)&&(this.containerHeight=r,this.containerWidth=t,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),this.redrawTable()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&(!e.modules.edit||e.modules.edit&&!e.modules.edit.currentCell))&&(e.columnManager.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}initializeVisibilityObserver(){this.visibilityObserver=new IntersectionObserver(e=>{this.visible=e[0].isIntersecting,this.initialized?this.visible&&(this.redrawTable(this.initialRedraw),this.initialRedraw=!1):(this.initialized=!0,this.initialRedraw=!this.visible)}),this.visibilityObserver.observe(this.table.element)}redrawTable(e){this.initialized&&this.visible&&(this.table.columnManager.rerenderColumns(!0),this.table.redraw(e))}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.resizeObserver&&this.resizeObserver.unobserve(this.table.element),this.visibilityObserver&&this.visibilityObserver.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}te(_o,"moduleName","resizeTable");function ef(u,e,n){var i=document.createElement("div"),r=u.getRow()._row.modules.responsiveLayout;i.classList.add("tabulator-responsive-collapse-toggle"),i.innerHTML=`<svg class='tabulator-responsive-collapse-toggle-open' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12" fill="none" stroke-width="3" stroke-linecap="round" />
  <line y1="7" x1="12" y2="17" x2="12" fill="none" stroke-width="3" stroke-linecap="round" />
</svg>

<svg class='tabulator-responsive-collapse-toggle-close' viewbox="0 0 24 24">
  <line x1="7" y1="12" x2="17" y2="12"  fill="none" stroke-width="3" stroke-linecap="round" />
</svg>`,u.getElement().classList.add("tabulator-row-handle");function t(s){var o=r.element;r.open=s,o&&(r.open?(i.classList.add("open"),o.style.display=""):(i.classList.remove("open"),o.style.display="none"))}return i.addEventListener("click",function(s){s.stopImmediatePropagation(),t(!r.open),u.getTable().rowManager.adjustTableSize()}),t(r.open),i}var tf={format:{formatters:{responsiveCollapse:ef}}};class xr extends Ce{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),this.table.options.responsiveLayout==="collapse"&&(this.subscribe("row-data-changed",this.generateCollapsedRowContent.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){["fitColumns","fitDataStretch"].indexOf(this.layoutMode())===-1&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.collapseFormatter&&(this.collapseFormatter=this.collapseFormatter.bind(this.table)),this.table.columnManager.columnsByIndex.forEach((n,i)=>{n.modules.responsive&&n.modules.responsive.order&&n.modules.responsive.visible&&(n.modules.responsive.index=i,e.push(n),!n.visible&&this.mode==="collapse"&&this.hiddenColumns.push(n))}),e=e.reverse(),e=e.sort((n,i)=>{var r=i.modules.responsive.order-n.modules.responsive.order;return r||i.modules.responsive.index-n.modules.responsive.index}),this.columns=e,this.mode==="collapse"&&this.generateCollapsedContent();for(let n of this.table.columnManager.columnsByIndex)if(n.definition.formatter=="responsiveCollapse"){this.collapseHandleColumn=n;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var n=e.getDefinition();e.modules.responsive={order:typeof n.responsive>"u"?1:n.responsive,visible:n.visible!==!1}}initializeRow(e){var n;e.type!=="calc"&&(n=document.createElement("div"),n.classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:n,open:this.collapseStartOpen},this.collapseStartOpen||(n.style.display="none"))}layoutRow(e){var n=e.getElement();e.modules.responsiveLayout&&(n.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,n){!n&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initializeResponsivity())}hideColumn(e){var n=this.hiddenColumns.length;e.hide(!1,!0),this.mode==="collapse"&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!n&&this.collapseHandleColumn.show())}showColumn(e){var n;e.show(!1,!0),e.setWidth(e.getWidth()),this.mode==="collapse"&&(n=this.hiddenColumns.indexOf(e),n>-1&&this.hiddenColumns.splice(n,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=!0;e;){let n=this.table.modules.layout.getMode()=="fitColumns"?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),i=(this.table.options.headerVisible?this.table.columnManager.element.clientWidth:this.table.element.clientWidth)-n;if(i<0){let r=this.columns[this.index];r?(this.hideColumn(r),this.index++):e=!1}else{let r=this.columns[this.index-1];r&&i>0&&i>=r.getWidth()?(this.showColumn(r),this.index--):e=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this.table.rowManager.getDisplayRows();e.forEach(n=>{this.generateCollapsedRowContent(n)})}generateCollapsedRowContent(e){var n,i;if(e.modules.responsiveLayout){for(n=e.modules.responsiveLayout.element;n.firstChild;)n.removeChild(n.firstChild);i=this.collapseFormatter(this.generateCollapsedRowData(e)),i&&n.appendChild(i),e.calcHeight(!0)}}generateCollapsedRowData(e){var n=e.getData(),i=[],r;return this.hiddenColumns.forEach(t=>{var s=t.getFieldValue(n);if(t.definition.title&&t.field)if(t.modules.format&&this.table.options.responsiveLayoutCollapseUseFormatters){let o=function(a){a()};r={value:!1,data:{},getValue:function(){return s},getData:function(){return n},getType:function(){return"cell"},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return t.getComponent()},getTable:()=>this.table},i.push({field:t.field,title:t.definition.title,value:t.modules.format.formatter.call(this.table.modules.format,r,t.modules.format.params,o)})}else i.push({field:t.field,title:t.definition.title,value:s})}),i}formatCollapsedData(e){var n=document.createElement("table");return e.forEach(i=>{var r=document.createElement("tr"),t=document.createElement("td"),s=document.createElement("td"),o,a=document.createElement("strong");t.appendChild(a),this.modules.localize.bind("columns|"+i.field,function(l){a.innerHTML=l||i.title}),i.value instanceof Node?(o=document.createElement("div"),o.appendChild(i.value),s.appendChild(o)):s.innerHTML=i.value,r.appendChild(t),r.appendChild(s),n.appendChild(r)}),Object.keys(e).length?n:""}}te(xr,"moduleName","responsiveLayout"),te(xr,"moduleExtensions",tf);function nf(u,e,n){var i=document.createElement("input"),r=!1;if(i.type="checkbox",i.setAttribute("aria-label","Select Row"),this.table.modExists("selectRow",!0))if(i.addEventListener("click",s=>{s.stopPropagation()}),typeof u.getRow=="function"){var t=u.getRow();t instanceof On?(i.addEventListener("change",s=>{this.table.options.selectableRowsRangeMode==="click"&&r?r=!1:t.toggleSelect()}),this.table.options.selectableRowsRangeMode==="click"&&i.addEventListener("click",s=>{r=!0,this.table.modules.selectRow.handleComplexRowClick(t._row,s)}),i.checked=t.isSelected&&t.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(t,i)):i=""}else i.addEventListener("change",s=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(e.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(i);return i}var rf={format:{formatters:{rowSelection:nf}}};class Lr extends Ce{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectableRows","highlight"),this.registerTableOption("selectableRowsRangeMode","drag"),this.registerTableOption("selectableRowsRollingSelection",!0),this.registerTableOption("selectableRowsPersistence",!0),this.registerTableOption("selectableRowsCheck",function(n,i){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){this.deprecatedOptionsCheck(),this.table.options.selectableRows==="highlight"&&this.table.options.selectableRange&&(this.table.options.selectableRows=!1),this.table.options.selectableRows!==!1&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectableRows&&!this.table.options.selectableRowsPersistence&&this.subscribe("data-refreshing",this.deselectRows.bind(this)))}deprecatedOptionsCheck(){}rowRetrieve(e,n){return e==="selected"?this.selectedRows:n}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){var n=this.selectedRows.length;this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],n&&e!==!0&&this._rowSelectionChanged()}initializeRow(e){var n=this,i=n.checkRowSelectability(e),r=e.getElement(),t=function(){setTimeout(function(){n.selecting=!1},50),document.body.removeEventListener("mouseup",t)};e.modules.select={selected:!1},r.classList.toggle("tabulator-selectable",i),r.classList.toggle("tabulator-unselectable",!i),n.checkRowSelectability(e)&&n.table.options.selectableRows&&n.table.options.selectableRows!="highlight"&&(n.table.options.selectableRowsRangeMode==="click"?r.addEventListener("click",this.handleComplexRowClick.bind(this,e)):(r.addEventListener("click",function(s){(!n.table.modExists("edit")||!n.table.modules.edit.getCurrentCell())&&n.table._clearSelection(),n.selecting||n.toggleRow(e)}),r.addEventListener("mousedown",function(s){if(s.shiftKey)return n.table._clearSelection(),n.selecting=!0,n.selectPrev=[],document.body.addEventListener("mouseup",t),document.body.addEventListener("keyup",t),n.toggleRow(e),!1}),r.addEventListener("mouseenter",function(s){n.selecting&&(n.table._clearSelection(),n.toggleRow(e),n.selectPrev[1]==e&&n.toggleRow(n.selectPrev[0]))}),r.addEventListener("mouseout",function(s){n.selecting&&(n.table._clearSelection(),n.selectPrev.unshift(e))})))}handleComplexRowClick(e,n){if(n.shiftKey){this.table._clearSelection(),this.lastClickedRow=this.lastClickedRow||e;var i=this.table.rowManager.getDisplayRowIndex(this.lastClickedRow),r=this.table.rowManager.getDisplayRowIndex(e),t=i<=r?i:r,s=i>=r?i:r,o=this.table.rowManager.getDisplayRows().slice(0),a=o.splice(t,s-t+1);n.ctrlKey||n.metaKey?(a.forEach(l=>{l!==this.lastClickedRow&&(this.table.options.selectableRows!==!0&&!this.isRowSelected(e)?this.selectedRows.length<this.table.options.selectableRows&&this.toggleRow(l):this.toggleRow(l))}),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.table.options.selectableRows!==!0&&a.length>this.table.options.selectableRows&&(a=a.slice(0,this.table.options.selectableRows)),this.selectRows(a)),this.table._clearSelection()}else n.ctrlKey||n.metaKey?(this.toggleRow(e),this.lastClickedRow=e):(this.deselectRows(void 0,!0),this.selectRows(e),this.lastClickedRow=e)}checkRowSelectability(e){return e&&e.type==="row"?this.table.options.selectableRowsCheck.call(this.table,e.getComponent()):!1}toggleRow(e){this.checkRowSelectability(e)&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var n=[],i,r;switch(typeof e){case"undefined":i=this.table.rowManager.rows;break;case"number":i=this.table.rowManager.findRow(e);break;case"string":i=this.table.rowManager.findRow(e),i||(i=this.table.rowManager.getRows(e));break;default:i=e;break}Array.isArray(i)?i.length&&(i.forEach(t=>{r=this._selectRow(t,!0,!0),r&&n.push(r)}),this._rowSelectionChanged(!1,n)):i&&this._selectRow(i,!1,!0)}_selectRow(e,n,i){if(!isNaN(this.table.options.selectableRows)&&this.table.options.selectableRows!==!0&&!i&&this.selectedRows.length>=this.table.options.selectableRows)if(this.table.options.selectableRowsRollingSelection)this._deselectRow(this.selectedRows[0]);else return!1;var r=this.table.rowManager.findRow(e);if(r){if(this.selectedRows.indexOf(r)==-1)return r.getElement().classList.add("tabulator-selected"),r.modules.select||(r.modules.select={}),r.modules.select.selected=!0,r.modules.select.checkboxEl&&(r.modules.select.checkboxEl.checked=!0),this.selectedRows.push(r),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(r,!0),this.dispatchExternal("rowSelected",r.getComponent()),this._rowSelectionChanged(n,r),r}else n||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return this.selectedRows.indexOf(e)!==-1}deselectRows(e,n){var i=[],r,t;switch(typeof e){case"undefined":r=Object.assign([],this.selectedRows);break;case"number":r=this.table.rowManager.findRow(e);break;case"string":r=this.table.rowManager.findRow(e),r||(r=this.table.rowManager.getRows(e));break;default:r=e;break}Array.isArray(r)?r.length&&(r.forEach(s=>{t=this._deselectRow(s,!0,!0),t&&i.push(t)}),this._rowSelectionChanged(n,[],i)):r&&this._deselectRow(r,n,!0)}_deselectRow(e,n){var i=this,r=i.table.rowManager.findRow(e),t,s;if(r){if(t=i.selectedRows.findIndex(function(o){return o==r}),t>-1)return s=r.getElement(),s&&s.classList.remove("tabulator-selected"),r.modules.select||(r.modules.select={}),r.modules.select.selected=!1,r.modules.select.checkboxEl&&(r.modules.select.checkboxEl.checked=!1),i.selectedRows.splice(t,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(r,!1),this.dispatchExternal("rowDeselected",r.getComponent()),i._rowSelectionChanged(n,void 0,r),r}else n||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getComponent())}),e}_rowSelectionChanged(e,n=[],i=[]){this.headerCheckboxElement&&(this.selectedRows.length===0?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||(Array.isArray(n)||(n=[n]),n=n.map(r=>r.getComponent()),Array.isArray(i)||(i=[i]),i=i.map(r=>r.getComponent()),this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows(),n,i))}registerRowSelectCheckbox(e,n){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=n}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,n){var i=this.table.modules.dataTree.getChildren(e,!0,!0);if(n)for(let r of i)this._selectRow(r,!0);else for(let r of i)this._deselectRow(r,!0)}}te(Lr,"moduleName","selectRow"),te(Lr,"moduleExtensions",rf);class sf{constructor(e){return this._range=e,new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._range.table.componentFunctionBinder.handle("range",n._range,i)}})}getElement(){return this._range.element}getData(){return this._range.getData()}getCells(){return this._range.getCells(!0,!0)}getStructuredCells(){return this._range.getStructuredCells()}getRows(){return this._range.getRows().map(e=>e.getComponent())}getColumns(){return this._range.getColumns().map(e=>e.getComponent())}getBounds(){return this._range.getBounds()}getTopEdge(){return this._range.top}getBottomEdge(){return this._range.bottom}getLeftEdge(){return this._range.left}getRightEdge(){return this._range.right}setBounds(e,n){this._range.destroyedGuard("setBounds")&&this._range.setBounds(e&&e._cell,n&&n._cell)}setStartBound(e){this._range.destroyedGuard("setStartBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}setEndBound(e){this._range.destroyedGuard("setEndBound")&&(this._range.setEndBound(e&&e._cell),this._range.rangeManager.layoutElement())}clearValues(){this._range.destroyedGuard("clearValues")&&this._range.clearValues()}remove(){this._range.destroyedGuard("remove")&&this._range.destroy(!0)}}class of extends qe{constructor(e,n,i,r){super(e),this.rangeManager=n,this.element=null,this.initialized=!1,this.initializing={start:!1,end:!1},this.destroyed=!1,this.top=0,this.bottom=0,this.left=0,this.right=0,this.table=e,this.start={row:0,col:0},this.end={row:0,col:0},this.rangeManager.rowHeader&&(this.left=1,this.right=1,this.start.col=1,this.end.col=1),this.initElement(),setTimeout(()=>{this.initBounds(i,r)})}initElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-range")}initBounds(e,n){this._updateMinMax(),e&&this.setBounds(e,n||e)}setStart(e,n){(this.start.row!==e||this.start.col!==n)&&(this.start.row=e,this.start.col=n,this.initializing.start=!0,this._updateMinMax())}setEnd(e,n){(this.end.row!==e||this.end.col!==n)&&(this.end.row=e,this.end.col=n,this.initializing.end=!0,this._updateMinMax())}setBounds(e,n,i){e&&this.setStartBound(e),this.setEndBound(n||e),this.rangeManager.layoutElement(i)}setStartBound(e){var n,i;e.type==="column"?this.rangeManager.columnSelection&&this.setStart(0,e.getPosition()-1):(n=e.row.position-1,i=e.column.getPosition()-1,e.column===this.rangeManager.rowHeader?this.setStart(n,1):this.setStart(n,i))}setEndBound(e){var n=this._getTableRows().length,i,r,t;e.type==="column"?this.rangeManager.columnSelection&&(this.rangeManager.selecting==="column"?this.setEnd(n-1,e.getPosition()-1):this.rangeManager.selecting==="cell"&&this.setEnd(0,e.getPosition()-1)):(i=e.row.position-1,r=e.column.getPosition()-1,t=e.column===this.rangeManager.rowHeader,this.rangeManager.selecting==="row"?this.setEnd(i,this._getTableColumns().length-1):this.rangeManager.selecting!=="row"&&t?this.setEnd(i,0):this.rangeManager.selecting==="column"?this.setEnd(n-1,r):this.setEnd(i,r))}_updateMinMax(){this.top=Math.min(this.start.row,this.end.row),this.bottom=Math.max(this.start.row,this.end.row),this.left=Math.min(this.start.col,this.end.col),this.right=Math.max(this.start.col,this.end.col),this.initialized?this.dispatchExternal("rangeChanged",this.getComponent()):this.initializing.start&&this.initializing.end&&(this.initialized=!0,this.dispatchExternal("rangeAdded",this.getComponent()))}_getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}_getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}layout(){var e=this.table.rowManager.renderer.vDomTop,n=this.table.rowManager.renderer.vDomBottom,i=this.table.columnManager.renderer.leftCol,r=this.table.columnManager.renderer.rightCol,t,s,o,a,l,h,c,d,f,m;this.table.options.renderHorizontal==="virtual"&&this.rangeManager.rowHeader&&(r+=1),e==null&&(e=0),n==null&&(n=1/0),i==null&&(i=0),r==null&&(r=1/0),this.overlaps(i,e,r,n)&&(t=Math.max(this.top,e),s=Math.min(this.bottom,n),o=Math.max(this.left,i),a=Math.min(this.right,r),l=this.rangeManager.getCell(t,o),h=this.rangeManager.getCell(s,a),c=l.getElement(),d=h.getElement(),f=l.row.getElement(),m=h.row.getElement(),this.element.classList.add("tabulator-range-active"),this.table.rtl?(this.element.style.right=f.offsetWidth-c.offsetLeft-c.offsetWidth+"px",this.element.style.width=c.offsetLeft+c.offsetWidth-d.offsetLeft+"px"):(this.element.style.left=f.offsetLeft+c.offsetLeft+"px",this.element.style.width=d.offsetLeft+d.offsetWidth-c.offsetLeft+"px"),this.element.style.top=f.offsetTop+"px",this.element.style.height=m.offsetTop+m.offsetHeight-f.offsetTop+"px")}atTopLeft(e){return e.row.position-1===this.top&&e.column.getPosition()-1===this.left}atBottomRight(e){return e.row.position-1===this.bottom&&e.column.getPosition()-1===this.right}occupies(e){return this.occupiesRow(e.row)&&this.occupiesColumn(e.column)}occupiesRow(e){return this.top<=e.position-1&&e.position-1<=this.bottom}occupiesColumn(e){return this.left<=e.getPosition()-1&&e.getPosition()-1<=this.right}overlaps(e,n,i,r){return!(this.left>i||e>this.right||this.top>r||n>this.bottom)}getData(){var e=[],n=this.getRows(),i=this.getColumns();return n.forEach(r=>{var t=r.getData(),s={};i.forEach(o=>{s[o.field]=t[o.field]}),e.push(s)}),e}getCells(e,n){var i=[],r=this.getRows(),t=this.getColumns();return e?i=r.map(s=>{var o=[];return s.getCells().forEach(a=>{t.includes(a.column)&&o.push(n?a.getComponent():a)}),o}):r.forEach(s=>{s.getCells().forEach(o=>{t.includes(o.column)&&i.push(n?o.getComponent():o)})}),i}getStructuredCells(){return this.getCells(!0,!0)}getRows(){return this._getTableRows().slice(this.top,this.bottom+1)}getColumns(){return this._getTableColumns().slice(this.left,this.right+1)}clearValues(){var e=this.getCells(),n=this.table.options.selectableRangeClearCellsValue;this.table.blockRedraw(),e.forEach(i=>{i.setValue(n)}),this.table.restoreRedraw()}getBounds(e){var n=this.getCells(!1,e),i={start:null,end:null};return n.length?(i.start=n[0],i.end=n[n.length-1]):console.warn("No bounds defined on range"),i}getComponent(){return this.component||(this.component=new sf(this)),this.component}destroy(e){this.destroyed=!0,this.element.remove(),e&&this.rangeManager.rangeRemoved(this),this.initialized&&this.dispatchExternal("rangeRemoved",this.getComponent())}destroyedGuard(e){return this.destroyed&&console.warn("You cannot call the "+e+" function on a destroyed range"),!this.destroyed}}var af={rangeJumpUp:["ctrl + 38","meta + 38"],rangeJumpDown:["ctrl + 40","meta + 40"],rangeJumpLeft:["ctrl + 37","meta + 37"],rangeJumpRight:["ctrl + 39","meta + 39"],rangeExpandUp:"shift + 38",rangeExpandDown:"shift + 40",rangeExpandLeft:"shift + 37",rangeExpandRight:"shift + 39",rangeExpandJumpUp:["ctrl + shift + 38","meta + shift + 38"],rangeExpandJumpDown:["ctrl + shift + 40","meta + shift + 40"],rangeExpandJumpLeft:["ctrl + shift + 37","meta + shift + 37"],rangeExpandJumpRight:["ctrl + shift + 39","meta + shift + 39"]},lf={rangeJumpLeft:function(u){this.dispatch("keybinding-nav-range",u,"left",!0,!1)},rangeJumpRight:function(u){this.dispatch("keybinding-nav-range",u,"right",!0,!1)},rangeJumpUp:function(u){this.dispatch("keybinding-nav-range",u,"up",!0,!1)},rangeJumpDown:function(u){this.dispatch("keybinding-nav-range",u,"down",!0,!1)},rangeExpandLeft:function(u){this.dispatch("keybinding-nav-range",u,"left",!1,!0)},rangeExpandRight:function(u){this.dispatch("keybinding-nav-range",u,"right",!1,!0)},rangeExpandUp:function(u){this.dispatch("keybinding-nav-range",u,"up",!1,!0)},rangeExpandDown:function(u){this.dispatch("keybinding-nav-range",u,"down",!1,!0)},rangeExpandJumpLeft:function(u){this.dispatch("keybinding-nav-range",u,"left",!0,!0)},rangeExpandJumpRight:function(u){this.dispatch("keybinding-nav-range",u,"right",!0,!0)},rangeExpandJumpUp:function(u){this.dispatch("keybinding-nav-range",u,"up",!0,!0)},rangeExpandJumpDown:function(u){this.dispatch("keybinding-nav-range",u,"down",!0,!0)}},uf={range:function(u){var e=[],n=this.table.modules.selectRange.activeRange,i=!1,r,t,s,o,a;return a=u.length,n&&(r=n.getBounds(),t=r.start,r.start===r.end&&(i=!0),t&&(e=this.table.rowManager.activeRows.slice(),s=e.indexOf(t.row),i?o=u.length:o=e.indexOf(r.end.row)-s+1,s>-1&&(this.table.blockRedraw(),e=e.slice(s,s+o),e.forEach((l,h)=>{l.updateData(u[h%a])}),this.table.restoreRedraw()))),e}},hf={range:function(u){var e=[],n=[],i=this.table.modules.selectRange.activeRange,r=!1,t,s,o,a,l;return i&&(t=i.getBounds(),s=t.start,t.start===t.end&&(r=!0),s&&(u=u.split(`
`),u.forEach(function(h){e.push(h.split("	"))}),e.length&&(a=this.table.columnManager.getVisibleColumnsByIndex(),l=a.indexOf(s.column),l>-1)))?(r?o=e[0].length:o=a.indexOf(t.end.column)-l+1,a=a.slice(l,l+o),e.forEach(h=>{var c={},d=h.length;a.forEach(function(f,m){c[f.field]=h[m%d]}),n.push(c)}),n):!1}},df={range:function(){var u=this.modules.selectRange.selectedColumns();return this.columnManager.rowHeader&&u.unshift(this.columnManager.rowHeader),u}},cf={range:function(){return this.modules.selectRange.selectedRows()}},ff={keybindings:{bindings:af,actions:lf},clipboard:{pasteActions:uf,pasteParsers:hf},export:{columnLookups:df,rowLookups:cf}};class ln extends Ce{constructor(e){super(e),this.selecting="cell",this.mousedown=!1,this.ranges=[],this.overlay=null,this.rowHeader=null,this.layoutChangeTimeout=null,this.columnSelection=!1,this.rowSelection=!1,this.maxRanges=0,this.activeRange=!1,this.blockKeydown=!1,this.keyDownEvent=this._handleKeyDown.bind(this),this.mouseUpEvent=this._handleMouseUp.bind(this),this.registerTableOption("selectableRange",!1),this.registerTableOption("selectableRangeColumns",!1),this.registerTableOption("selectableRangeRows",!1),this.registerTableOption("selectableRangeClearCells",!1),this.registerTableOption("selectableRangeClearCellsValue",void 0),this.registerTableOption("selectableRangeAutoFocus",!0),this.registerTableFunction("getRangesData",this.getRangesData.bind(this)),this.registerTableFunction("getRanges",this.getRanges.bind(this)),this.registerTableFunction("addRange",this.addRangeFromComponent.bind(this)),this.registerComponentFunction("cell","getRanges",this.cellGetRanges.bind(this)),this.registerComponentFunction("row","getRanges",this.rowGetRanges.bind(this)),this.registerComponentFunction("column","getRanges",this.colGetRanges.bind(this))}initialize(){this.options("selectableRange")&&(this.options("selectableRows")?console.warn("SelectRange functionality cannot be used in conjunction with row selection"):(this.maxRanges=this.options("selectableRange"),this.initializeTable(),this.initializeWatchers()),this.options("columns").findIndex(e=>e.frozen)>0&&console.warn("Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior."),this.options("columns").filter(e=>e.frozen)>1&&console.warn("Having multiple frozen columns with selectRange option may result in unpredictable behavior."))}initializeTable(){this.overlay=document.createElement("div"),this.overlay.classList.add("tabulator-range-overlay"),this.rangeContainer=document.createElement("div"),this.rangeContainer.classList.add("tabulator-range-container"),this.activeRangeCellElement=document.createElement("div"),this.activeRangeCellElement.classList.add("tabulator-range-cell-active"),this.overlay.appendChild(this.rangeContainer),this.overlay.appendChild(this.activeRangeCellElement),this.table.rowManager.element.addEventListener("keydown",this.keyDownEvent),this.resetRanges(),this.table.rowManager.element.appendChild(this.overlay),this.table.columnManager.element.setAttribute("tabindex",0),this.table.element.classList.add("tabulator-ranges")}initializeWatchers(){this.columnSelection=this.options("selectableRangeColumns"),this.rowSelection=this.options("selectableRangeRows"),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-mousedown",this.handleColumnMouseDown.bind(this)),this.subscribe("column-mousemove",this.handleColumnMouseMove.bind(this)),this.subscribe("column-resized",this.handleColumnResized.bind(this)),this.subscribe("column-moving",this.handleColumnMoving.bind(this)),this.subscribe("column-moved",this.handleColumnMoved.bind(this)),this.subscribe("column-width",this.layoutChange.bind(this)),this.subscribe("column-height",this.layoutChange.bind(this)),this.subscribe("column-resized",this.layoutChange.bind(this)),this.subscribe("columns-loaded",this.updateHeaderColumn.bind(this)),this.subscribe("cell-height",this.layoutChange.bind(this)),this.subscribe("cell-rendered",this.renderCell.bind(this)),this.subscribe("cell-mousedown",this.handleCellMouseDown.bind(this)),this.subscribe("cell-mousemove",this.handleCellMouseMove.bind(this)),this.subscribe("cell-click",this.handleCellClick.bind(this)),this.subscribe("cell-editing",this.handleEditingCell.bind(this)),this.subscribe("page-changed",this.redraw.bind(this)),this.subscribe("scroll-vertical",this.layoutChange.bind(this)),this.subscribe("scroll-horizontal",this.layoutChange.bind(this)),this.subscribe("data-destroy",this.tableDestroyed.bind(this)),this.subscribe("data-processed",this.resetRanges.bind(this)),this.subscribe("table-layout",this.layoutElement.bind(this)),this.subscribe("table-redraw",this.redraw.bind(this)),this.subscribe("table-destroy",this.tableDestroyed.bind(this)),this.subscribe("edit-editor-clear",this.finishEditingCell.bind(this)),this.subscribe("edit-blur",this.restoreFocus.bind(this)),this.subscribe("keybinding-nav-prev",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-next",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-left",this.keyNavigate.bind(this,"left")),this.subscribe("keybinding-nav-right",this.keyNavigate.bind(this,"right")),this.subscribe("keybinding-nav-up",this.keyNavigate.bind(this,"up")),this.subscribe("keybinding-nav-down",this.keyNavigate.bind(this,"down")),this.subscribe("keybinding-nav-range",this.keyNavigateRange.bind(this))}initializeColumn(e){this.columnSelection&&e.definition.headerSort&&this.options("headerSortClickElement")!=="icon"&&console.warn("Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'."),e.modules.edit}updateHeaderColumn(){var e;this.rowSelection&&(this.rowHeader=this.table.columnManager.getVisibleColumnsByIndex()[0],this.rowHeader&&(this.rowHeader.definition.cssClass=this.rowHeader.definition.cssClass+" tabulator-range-row-header",this.rowHeader.definition.headerSort&&console.warn("Using column headerSort with selectableRangeRows option may result in unpredictable behavior"),this.rowHeader.definition.editor&&console.warn("Using column editor with selectableRangeRows option may result in unpredictable behavior"))),this.table.modules.frozenColumns&&this.table.modules.frozenColumns.active&&(e=this.table.modules.frozenColumns.getFrozenColumns(),(e.length>1||e.length===1&&e[0]!==this.rowHeader)&&console.warn("Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior"))}getRanges(){return this.ranges.map(e=>e.getComponent())}getRangesData(){return this.ranges.map(e=>e.getData())}addRangeFromComponent(e,n){return e=e?e._cell:null,n=n?n._cell:null,this.addRange(e,n)}cellGetRanges(e){var n=[];return e.column===this.rowHeader?n=this.ranges.filter(i=>i.occupiesRow(e.row)):n=this.ranges.filter(i=>i.occupies(e)),n.map(i=>i.getComponent())}rowGetRanges(e){var n=this.ranges.filter(i=>i.occupiesRow(e));return n.map(i=>i.getComponent())}colGetRanges(e){var n=this.ranges.filter(i=>i.occupiesColumn(e));return n.map(i=>i.getComponent())}_handleMouseUp(e){this.mousedown=!1,document.removeEventListener("mouseup",this.mouseUpEvent)}_handleKeyDown(e){if(!this.blockKeydown&&(!this.table.modules.edit||this.table.modules.edit&&!this.table.modules.edit.currentCell)){if(e.key==="Enter"){if(this.table.modules.edit&&this.table.modules.edit.currentCell)return;this.table.modules.edit.editCell(this.getActiveCell()),e.preventDefault()}(e.key==="Backspace"||e.key==="Delete")&&this.options("selectableRangeClearCells")&&this.activeRange&&this.activeRange.clearValues()}}initializeFocus(e){var n;this.restoreFocus();try{document.selection?(n=document.body.createTextRange(),n.moveToElementText(e.getElement()),n.select()):window.getSelection&&(n=document.createRange(),n.selectNode(e.getElement()),window.getSelection().removeAllRanges(),window.getSelection().addRange(n))}catch{}}restoreFocus(e){return this.table.rowManager.element.focus(),!0}handleColumnResized(e){var n;this.selecting!=="column"&&this.selecting!=="all"||(n=this.ranges.some(i=>i.occupiesColumn(e)),n&&this.ranges.forEach(i=>{var r=i.getColumns(!0);r.forEach(t=>{t!==e&&t.setWidth(e.width)})}))}handleColumnMoving(e,n){this.resetRanges().setBounds(n),this.overlay.style.visibility="hidden"}handleColumnMoved(e,n,i){this.activeRange.setBounds(e),this.layoutElement()}handleColumnMouseDown(e,n){e.button===2&&(this.selecting==="column"||this.selecting==="all")&&this.activeRange.occupiesColumn(n)||this.table.options.movableColumns&&this.selecting==="column"&&this.activeRange.occupiesColumn(n)||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,n))}handleColumnMouseMove(e,n){n===this.rowHeader||!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,n,!0)}renderCell(e){var n=e.getElement(),i=this.ranges.findIndex(r=>r.occupies(e));n.classList.toggle("tabulator-range-selected",i!==-1),n.classList.toggle("tabulator-range-only-cell-selected",this.ranges.length===1&&this.ranges[0].atTopLeft(e)&&this.ranges[0].atBottomRight(e)),n.dataset.range=i}handleCellMouseDown(e,n){e.button===2&&(this.activeRange.occupies(n)||(this.selecting==="row"||this.selecting==="all")&&this.activeRange.occupiesRow(n.row))||(this.mousedown=!0,document.addEventListener("mouseup",this.mouseUpEvent),this.newSelection(e,n))}handleCellMouseMove(e,n){!this.mousedown||this.selecting==="all"||this.activeRange.setBounds(!1,n,!0)}handleCellClick(e,n){this.initializeFocus(n)}handleEditingCell(e){this.activeRange&&this.activeRange.setBounds(e)}finishEditingCell(){this.blockKeydown=!0,this.table.rowManager.element.focus(),setTimeout(()=>{this.blockKeydown=!1},10)}keyNavigate(e,n){this.navigate(!1,!1,e),n.preventDefault()}keyNavigateRange(e,n,i,r){this.navigate(i,r,n),e.preventDefault()}navigate(e,n,i){var r=!1,t,s,o,a,l,h,c,d,f,m,g;if(this.table.modules.edit&&this.table.modules.edit.currentCell)return!1;if(this.ranges.length>1&&(this.ranges=this.ranges.filter(v=>v===this.activeRange?(v.setEnd(v.start.row,v.start.col),!0):(v.destroy(),!1))),t=this.activeRange,o={top:t.top,bottom:t.bottom,left:t.left,right:t.right},s=n?t.end:t.start,a=s.row,l=s.col,e)switch(i){case"left":l=this.findJumpCellLeft(t.start.row,s.col);break;case"right":l=this.findJumpCellRight(t.start.row,s.col);break;case"up":a=this.findJumpCellUp(s.row,t.start.col);break;case"down":a=this.findJumpCellDown(s.row,t.start.col);break}else{if(n&&(this.selecting==="row"&&(i==="left"||i==="right")||this.selecting==="column"&&(i==="up"||i==="down")))return;switch(i){case"left":l=Math.max(l-1,0);break;case"right":l=Math.min(l+1,this.getTableColumns().length-1);break;case"up":a=Math.max(a-1,0);break;case"down":a=Math.min(a+1,this.getTableRows().length-1);break}}if(this.rowHeader&&l===0&&(l=1),n||t.setStart(a,l),t.setEnd(a,l),n||(this.selecting="cell"),r=o.top!==t.top||o.bottom!==t.bottom||o.left!==t.left||o.right!==t.right,r)return h=this.getRowByRangePos(t.end.row),c=this.getColumnByRangePos(t.end.col),d=h.getElement().getBoundingClientRect(),m=c.getElement().getBoundingClientRect(),f=this.table.rowManager.getElement().getBoundingClientRect(),g=this.table.columnManager.getElement().getBoundingClientRect(),d.top>=f.top&&d.bottom<=f.bottom||(h.getElement().parentNode&&c.getElement().parentNode?this.autoScroll(t,h.getElement(),c.getElement()):h.getComponent().scrollTo(void 0,!1)),m.left>=g.left+this.getRowHeaderWidth()&&m.right<=g.right||(h.getElement().parentNode&&c.getElement().parentNode?this.autoScroll(t,h.getElement(),c.getElement()):c.getComponent().scrollTo(void 0,!1)),this.layoutElement(),!0}rangeRemoved(e){this.ranges=this.ranges.filter(n=>n!==e),this.activeRange===e&&(this.ranges.length?this.activeRange=this.ranges[this.ranges.length-1]:this.addRange()),this.layoutElement()}findJumpRow(e,n,i,r,t){return i&&(n=n.reverse()),this.findJumpItem(r,t,n,function(s){return s.getData()[e.getField()]})}findJumpCol(e,n,i,r,t){return i&&(n=n.reverse()),this.findJumpItem(r,t,n,function(s){return e.getData()[s.getField()]})}findJumpItem(e,n,i,r){var t;for(let s of i){let o=r(s);if(e){if(t=s,o)break}else if(n){if(t=s,o)break}else if(o)t=s;else break}return t}findJumpCellLeft(e,n){var i=this.getRowByRangePos(e),r=this.getTableColumns(),t=this.isEmpty(i.getData()[r[n].getField()]),s=r[n-1]?this.isEmpty(i.getData()[r[n-1].getField()]):!1,o=this.rowHeader?r.slice(1,n):r.slice(0,n),a=this.findJumpCol(i,o,!0,t,s);return a?a.getPosition()-1:n}findJumpCellRight(e,n){var i=this.getRowByRangePos(e),r=this.getTableColumns(),t=this.isEmpty(i.getData()[r[n].getField()]),s=r[n+1]?this.isEmpty(i.getData()[r[n+1].getField()]):!1,o=this.findJumpCol(i,r.slice(n+1,r.length),!1,t,s);return o?o.getPosition()-1:n}findJumpCellUp(e,n){var i=this.getColumnByRangePos(n),r=this.getTableRows(),t=this.isEmpty(r[e].getData()[i.getField()]),s=r[e-1]?this.isEmpty(r[e-1].getData()[i.getField()]):!1,o=this.findJumpRow(i,r.slice(0,e),!0,t,s);return o?o.position-1:e}findJumpCellDown(e,n){var i=this.getColumnByRangePos(n),r=this.getTableRows(),t=this.isEmpty(r[e].getData()[i.getField()]),s=r[e+1]?this.isEmpty(r[e+1].getData()[i.getField()]):!1,o=this.findJumpRow(i,r.slice(e+1,r.length),!1,t,s);return o?o.position-1:e}newSelection(e,n){var i;if(n.type==="column"){if(!this.columnSelection)return;if(n===this.rowHeader){i=this.resetRanges(),this.selecting="all";var r,t=this.getCell(-1,-1);this.rowHeader?r=this.getCell(0,1):r=this.getCell(0,0),i.setBounds(r,t);return}else this.selecting="column"}else n.column===this.rowHeader?this.selecting="row":this.selecting="cell";e.shiftKey?this.activeRange.setBounds(!1,n):e.ctrlKey?this.addRange().setBounds(n):this.resetRanges().setBounds(n)}autoScroll(e,n,i){var r=this.table.rowManager.element,t,s,o,a;typeof n>"u"&&(n=this.getRowByRangePos(e.end.row).getElement()),typeof i>"u"&&(i=this.getColumnByRangePos(e.end.col).getElement()),t={left:i.offsetLeft,right:i.offsetLeft+i.offsetWidth,top:n.offsetTop,bottom:n.offsetTop+n.offsetHeight},s={left:r.scrollLeft+this.getRowHeaderWidth(),right:Math.ceil(r.scrollLeft+r.clientWidth),top:r.scrollTop,bottom:r.scrollTop+r.offsetHeight-this.table.rowManager.scrollbarWidth},o=s.left<t.left&&t.left<s.right&&s.left<t.right&&t.right<s.right,a=s.top<t.top&&t.top<s.bottom&&s.top<t.bottom&&t.bottom<s.bottom,o||(t.left<s.left?r.scrollLeft=t.left-this.getRowHeaderWidth():t.right>s.right&&(r.scrollLeft=Math.min(t.right-r.clientWidth,t.left-this.getRowHeaderWidth()))),a||(t.top<s.top?r.scrollTop=t.top:t.bottom>s.bottom&&(r.scrollTop=t.bottom-r.clientHeight))}layoutChange(){this.overlay.style.visibility="hidden",clearTimeout(this.layoutChangeTimeout),this.layoutChangeTimeout=setTimeout(this.layoutRanges.bind(this),200)}redraw(e){e&&(this.selecting="cell",this.resetRanges(),this.layoutElement())}layoutElement(e){var n;e?n=this.table.rowManager.getVisibleRows(!0):n=this.table.rowManager.getRows(),n.forEach(i=>{i.type==="row"&&(this.layoutRow(i),i.cells.forEach(r=>this.renderCell(r)))}),this.getTableColumns().forEach(i=>{this.layoutColumn(i)}),this.layoutRanges()}layoutRow(e){var n=e.getElement(),i=!1,r=this.ranges.some(t=>t.occupiesRow(e));this.selecting==="row"?i=r:this.selecting==="all"&&(i=!0),n.classList.toggle("tabulator-range-selected",i),n.classList.toggle("tabulator-range-highlight",r)}layoutColumn(e){var n=e.getElement(),i=!1,r=this.ranges.some(t=>t.occupiesColumn(e));this.selecting==="column"?i=r:this.selecting==="all"&&(i=!0),n.classList.toggle("tabulator-range-selected",i),n.classList.toggle("tabulator-range-highlight",r)}layoutRanges(){var e,n,i;this.table.initialized&&(e=this.getActiveCell(),e&&(n=e.getElement(),i=e.row.getElement(),this.table.rtl?this.activeRangeCellElement.style.right=i.offsetWidth-n.offsetLeft-n.offsetWidth+"px":this.activeRangeCellElement.style.left=i.offsetLeft+n.offsetLeft+"px",this.activeRangeCellElement.style.top=i.offsetTop+"px",this.activeRangeCellElement.style.width=n.offsetWidth+"px",this.activeRangeCellElement.style.height=i.offsetHeight+"px",this.ranges.forEach(r=>r.layout()),this.overlay.style.visibility="visible"))}getCell(e,n){var i;return n<0&&(n=this.getTableColumns().length+n,n<0)?null:(e<0&&(e=this.getTableRows().length+e),i=this.table.rowManager.getRowFromPosition(e+1),i?i.getCells(!1,!0).filter(r=>r.column.visible)[n]:null)}getActiveCell(){return this.getCell(this.activeRange.start.row,this.activeRange.start.col)}getRowByRangePos(e){return this.getTableRows()[e]}getColumnByRangePos(e){return this.getTableColumns()[e]}getTableRows(){return this.table.rowManager.getDisplayRows().filter(e=>e.type==="row")}getTableColumns(){return this.table.columnManager.getVisibleColumnsByIndex()}addRange(e,n){var i;return this.maxRanges!==!0&&this.ranges.length>=this.maxRanges&&this.ranges.shift().destroy(),i=new of(this.table,this,e,n),this.activeRange=i,this.ranges.push(i),this.rangeContainer.appendChild(i.element),i}resetRanges(){var e,n,i;return this.ranges.forEach(r=>r.destroy()),this.ranges=[],e=this.addRange(),this.table.rowManager.activeRows.length&&(i=this.table.rowManager.activeRows[0].cells.filter(r=>r.column.visible),n=i[this.rowHeader?1:0],n&&(e.setBounds(n),this.options("selectableRangeAutoFocus")&&this.initializeFocus(n))),e}tableDestroyed(){document.removeEventListener("mouseup",this.mouseUpEvent),this.table.rowManager.element.removeEventListener("keydown",this.keyDownEvent)}selectedRows(e){return e?this.activeRange.getRows().map(n=>n.getComponent()):this.activeRange.getRows()}selectedColumns(e){return e?this.activeRange.getColumns().map(n=>n.getComponent()):this.activeRange.getColumns()}getRowHeaderWidth(){return this.rowHeader?this.rowHeader.getElement().offsetWidth:0}isEmpty(e){return e==null||e===""}}te(ln,"moduleName","selectRange"),te(ln,"moduleInitOrder",1),te(ln,"moduleExtensions",ff);function pf(u,e,n,i,r,t,s){var o=s.alignEmptyValues,a=s.decimalSeparator,l=s.thousandSeparator,h=0;if(u=String(u),e=String(e),l&&(u=u.split(l).join(""),e=e.split(l).join("")),a&&(u=u.split(a).join("."),e=e.split(a).join(".")),u=parseFloat(u),e=parseFloat(e),isNaN(u))h=isNaN(e)?0:-1;else if(isNaN(e))h=1;else return u-e;return(o==="top"&&t==="desc"||o==="bottom"&&t==="asc")&&(h*=-1),h}function mf(u,e,n,i,r,t,s){var o=s.alignEmptyValues,a=0,l;if(!u)a=e?-1:0;else if(!e)a=1;else{switch(typeof s.locale){case"boolean":s.locale&&(l=this.langLocale());break;case"string":l=s.locale;break}return String(u).toLowerCase().localeCompare(String(e).toLowerCase(),l)}return(o==="top"&&t==="desc"||o==="bottom"&&t==="asc")&&(a*=-1),a}function ts(u,e,n,i,r,t,s){var o=this.table.dependencyRegistry.lookup(["luxon","DateTime"],"DateTime"),a=s.format||"dd/MM/yyyy HH:mm:ss",l=s.alignEmptyValues,h=0;if(typeof o<"u"){if(o.isDateTime(u)||(a==="iso"?u=o.fromISO(String(u)):u=o.fromFormat(String(u),a)),o.isDateTime(e)||(a==="iso"?e=o.fromISO(String(e)):e=o.fromFormat(String(e),a)),!u.isValid)h=e.isValid?-1:0;else if(!e.isValid)h=1;else return u-e;return(l==="top"&&t==="desc"||l==="bottom"&&t==="asc")&&(h*=-1),h}else console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}function gf(u,e,n,i,r,t,s){return s.format||(s.format="dd/MM/yyyy"),ts.call(this,u,e,n,i,r,t,s)}function vf(u,e,n,i,r,t,s){return s.format||(s.format="HH:mm"),ts.call(this,u,e,n,i,r,t,s)}function bf(u,e,n,i,r,t,s){var o=u===!0||u==="true"||u==="True"||u===1?1:0,a=e===!0||e==="true"||e==="True"||e===1?1:0;return o-a}function yf(u,e,n,i,r,t,s){var o=s.type||"length",a=s.alignEmptyValues,l=0,h=this.table,c;s.valueMap&&(typeof s.valueMap=="string"?c=function(f){return f.map(m=>Pe.retrieveNestedData(h.options.nestedFieldSeparator,s.valueMap,m))}:c=s.valueMap);function d(f){var m;switch(c&&(f=c(f)),o){case"length":m=f.length;break;case"sum":m=f.reduce(function(g,v){return g+v});break;case"max":m=Math.max.apply(null,f);break;case"min":m=Math.min.apply(null,f);break;case"avg":m=f.reduce(function(g,v){return g+v})/f.length;break;case"string":m=f.join("");break}return m}if(!Array.isArray(u))l=Array.isArray(e)?-1:0;else if(!Array.isArray(e))l=1;else return o==="string"?String(d(u)).toLowerCase().localeCompare(String(d(e)).toLowerCase()):d(e)-d(u);return(a==="top"&&t==="desc"||a==="bottom"&&t==="asc")&&(l*=-1),l}function Ef(u,e,n,i,r,t,s){var o=typeof u>"u"?0:1,a=typeof e>"u"?0:1;return o-a}function Cf(u,e,n,i,r,t,s){var o,a,l,h,c=0,d,f=/(\d+)|(\D+)/g,m=/\d/,g=s.alignEmptyValues,v=0;if(!u&&u!==0)v=!e&&e!==0?0:-1;else if(!e&&e!==0)v=1;else{if(isFinite(u)&&isFinite(e))return u-e;if(o=String(u).toLowerCase(),a=String(e).toLowerCase(),o===a)return 0;if(!(m.test(o)&&m.test(a)))return o>a?1:-1;for(o=o.match(f),a=a.match(f),d=o.length>a.length?a.length:o.length;c<d;)if(l=o[c],h=a[c++],l!==h)return isFinite(l)&&isFinite(h)?(l.charAt(0)==="0"&&(l="."+l),h.charAt(0)==="0"&&(h="."+h),l-h):l>h?1:-1;return o.length>a.length}return(g==="top"&&t==="desc"||g==="bottom"&&t==="asc")&&(v*=-1),v}var Of={number:pf,string:mf,date:gf,time:vf,datetime:ts,boolean:bf,array:yf,exists:Ef,alphanum:Cf};const Yt=class Yt extends Ce{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerTableOption("headerSortClickElement","header"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),this.table.options.sortMode==="remote"&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,n,i,r){var t=this.getSort();return t.forEach(s=>{delete s.column}),r.sort=t,r}userSetSort(e,n){this.setSort(e,n),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var n=!1,i,r;switch(typeof e.definition.sorter){case"string":Yt.sorters[e.definition.sorter]?n=Yt.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":n=e.definition.sorter;break}if(e.modules.sort={sorter:n,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},e.definition.headerSort!==!1){switch(i=e.getElement(),i.classList.add("tabulator-sortable"),r=document.createElement("div"),r.classList.add("tabulator-col-sorter"),this.table.options.headerSortClickElement){case"icon":r.classList.add("tabulator-col-sorter-element");break;case"header":i.classList.add("tabulator-col-sorter-element");break;default:i.classList.add("tabulator-col-sorter-element");break}switch(this.table.options.headerSortElement){case"function":break;case"object":r.appendChild(this.table.options.headerSortElement);break;default:r.innerHTML=this.table.options.headerSortElement}e.titleHolderElement.appendChild(r),e.modules.sort.element=r,this.setColumnHeaderSortIcon(e,"none"),this.table.options.headerSortClickElement==="icon"&&r.addEventListener("mousedown",t=>{t.stopPropagation()}),(this.table.options.headerSortClickElement==="icon"?r:i).addEventListener("click",t=>{var s="",o=[],a=!1;if(e.modules.sort){if(e.modules.sort.tristate)e.modules.sort.dir=="none"?s=e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?s=e.modules.sort.dir=="asc"?"desc":"asc":s="none";else switch(e.modules.sort.dir){case"asc":s="desc";break;case"desc":s="asc";break;default:s=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?(o=this.getSort(),a=o.findIndex(l=>l.field===e.getField()),a>-1?(o[a].dir=s,a=o.splice(a,1)[0],s!="none"&&o.push(a)):s!="none"&&o.push({column:e,dir:s}),this.setSort(o)):s=="none"?this.clear():this.setSort(e,s),this.refreshSort()}})}}refreshSort(){this.table.options.sortMode==="remote"?this.reloadData(null,!1,!1):this.refreshData(!0)}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var e=this,n=[];return e.sortList.forEach(function(i){i.column&&n.push({column:i.column.getComponent(),field:i.column.getField(),dir:i.dir})}),n}setSort(e,n){var i=this,r=[];Array.isArray(e)||(e=[{column:e,dir:n}]),e.forEach(function(t){var s;s=i.table.columnManager.findColumn(t.column),s?(t.column=s,r.push(t),i.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)}),i.sortList=r,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var n=this.table.rowManager.activeRows[0],i="string",r,t;if(n&&(n=n.getData(),r=e.getField(),r))switch(t=e.getFieldValue(n),typeof t){case"undefined":i="string";break;case"boolean":i="boolean";break;default:!isNaN(t)&&t!==""?i="number":t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum");break}return Yt.sorters[i]}sort(e,n){var i=this,r=this.table.options.sortOrderReverse?i.sortList.slice().reverse():i.sortList,t=[],s=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",i.getSort()),n||i.clearColumnHeaders(),this.table.options.sortMode!=="remote"?(r.forEach(function(o,a){var l;o.column&&(l=o.column.modules.sort,l&&(l.sorter||(l.sorter=i.findSorter(o.column)),o.params=typeof l.params=="function"?l.params(o.column.getComponent(),o.dir):l.params,t.push(o)),n||i.setColumnHeader(o.column,o.dir))}),t.length&&i._sortItems(e,t)):n||r.forEach(function(o,a){i.setColumnHeader(o.column,o.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(o=>{s.push(o.getComponent())}),this.dispatchExternal("dataSorted",i.getSort(),s)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(e=>{e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"),this.setColumnHeaderSortIcon(e,"none"))})}setColumnHeader(e,n){e.modules.sort.dir=n,e.getElement().setAttribute("aria-sort",n==="asc"?"ascending":"descending"),this.setColumnHeaderSortIcon(e,n)}setColumnHeaderSortIcon(e,n){var i=e.modules.sort.element,r;if(e.definition.headerSort&&typeof this.table.options.headerSortElement=="function"){for(;i.firstChild;)i.removeChild(i.firstChild);r=this.table.options.headerSortElement.call(this.table,e.getComponent(),n),typeof r=="object"?i.appendChild(r):i.innerHTML=r}}_sortItems(e,n){var i=n.length-1;e.sort((r,t)=>{for(var s,o=i;o>=0;o--){let a=n[o];if(s=this._sortRow(r,t,a.column,a.dir,a.params),s!==0)break}return s})}_sortRow(e,n,i,r,t){var s,o,a=r=="asc"?e:n,l=r=="asc"?n:e;return e=i.getFieldValue(a.getData()),n=i.getFieldValue(l.getData()),e=typeof e<"u"?e:"",n=typeof n<"u"?n:"",s=a.getComponent(),o=l.getComponent(),i.modules.sort.sorter.call(this,e,n,s,o,i.getComponent(),r,t)}};te(Yt,"moduleName","sort"),te(Yt,"sorters",Of);let Ar=Yt;class wf{constructor(e,n){this.columnCount=e,this.rowCount=n,this.columnString=[],this.columns=[],this.rows=[]}genColumns(e){var n=Math.max(this.columnCount,Math.max(...e.map(i=>i.length)));this.columnString=[],this.columns=[];for(let i=1;i<=n;i++)this.incrementChar(this.columnString.length-1),this.columns.push(this.columnString.join(""));return this.columns}genRows(e){var n=Math.max(this.rowCount,e.length);this.rows=[];for(let i=1;i<=n;i++)this.rows.push(i);return this.rows}incrementChar(e){let n=this.columnString[e];n?n!=="Z"?this.columnString[e]=String.fromCharCode(this.columnString[e].charCodeAt(0)+1):(this.columnString[e]="A",e?this.incrementChar(e-1):this.columnString.push("A")):this.columnString.push("A")}setRowCount(e){this.rowCount=e}setColumnCount(e){this.columnCount=e}}class ea{constructor(e){return this._sheet=e,new Proxy(this,{get:function(n,i,r){return typeof n[i]<"u"?n[i]:n._sheet.table.componentFunctionBinder.handle("sheet",n._sheet,i)}})}getTitle(){return this._sheet.title}getKey(){return this._sheet.key}getDefinition(){return this._sheet.getDefinition()}getData(){return this._sheet.getData()}setData(e){return this._sheet.setData(e)}clear(){return this._sheet.clear()}remove(){return this._sheet.remove()}active(){return this._sheet.active()}setTitle(e){return this._sheet.setTitle(e)}setRows(e){return this._sheet.setRows(e)}setColumns(e){return this._sheet.setColumns(e)}}class Ms extends qe{constructor(e,n){super(e.table),this.spreadsheetManager=e,this.definition=n,this.title=this.definition.title||"",this.key=this.definition.key||this.definition.title,this.rowCount=this.definition.rows,this.columnCount=this.definition.columns,this.data=this.definition.data||[],this.element=null,this.isActive=!1,this.grid=new wf(this.columnCount,this.rowCount),this.defaultColumnDefinition={width:100,headerHozAlign:"center",headerSort:!1},this.columnDefinition=Object.assign(this.defaultColumnDefinition,this.options("spreadsheetColumnDefinition")),this.columnDefs=[],this.rowDefs=[],this.columnFields=[],this.columns=[],this.rows=[],this.scrollTop=null,this.scrollLeft=null,this.initialize(),this.dispatchExternal("sheetAdded",this.getComponent())}initialize(){this.initializeElement(),this.initializeColumns(),this.initializeRows()}reinitialize(){this.initializeColumns(),this.initializeRows()}initializeElement(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tab"),this.element.innerText=this.title,this.element.addEventListener("click",()=>{this.spreadsheetManager.loadSheet(this)})}initializeColumns(){this.grid.setColumnCount(this.columnCount),this.columnFields=this.grid.genColumns(this.data),this.columnDefs=[],this.columnFields.forEach(e=>{var n=Object.assign({},this.columnDefinition);n.field=e,n.title=e,this.columnDefs.push(n)})}initializeRows(){var e;this.grid.setRowCount(this.rowCount),e=this.grid.genRows(this.data),this.rowDefs=[],e.forEach((n,i)=>{var r={_id:n},t=this.data[i];t&&t.forEach((s,o)=>{var a=this.columnFields[o];a&&(r[a]=s)}),this.rowDefs.push(r)})}unload(){this.isActive=!1,this.scrollTop=this.table.rowManager.scrollTop,this.scrollLeft=this.table.rowManager.scrollLeft,this.data=this.getData(!0),this.element.classList.remove("tabulator-spreadsheet-tab-active")}load(){var e=!this.isActive;this.isActive=!0,this.table.blockRedraw(),this.table.setData([]),this.table.setColumns(this.columnDefs),this.table.setData(this.rowDefs),this.table.restoreRedraw(),e&&this.scrollTop!==null&&(this.table.rowManager.element.scrollLeft=this.scrollLeft,this.table.rowManager.element.scrollTop=this.scrollTop),this.element.classList.add("tabulator-spreadsheet-tab-active"),this.dispatchExternal("sheetLoaded",this.getComponent())}getComponent(){return new ea(this)}getDefinition(){return{title:this.title,key:this.key,rows:this.rowCount,columns:this.columnCount,data:this.getData()}}getData(e){var n=[],i,r,t;return this.rowDefs.forEach(s=>{var o=[];this.columnFields.forEach(a=>{o.push(s[a])}),n.push(o)}),!e&&!this.options("spreadsheetOutputFull")&&(i=n.map(s=>s.findLastIndex(o=>typeof o<"u")+1),r=Math.max(...i),t=i.findLastIndex(s=>s>0)+1,n=n.slice(0,t),n=n.map(s=>s.slice(0,r))),n}setData(e){this.data=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}clear(){this.setData([])}setTitle(e){this.title=e,this.element.innerText=e,this.dispatchExternal("sheetUpdated",this.getComponent())}setRows(e){this.rowCount=e,this.initializeRows(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}setColumns(e){this.columnCount=e,this.reinitialize(),this.dispatchExternal("sheetUpdated",this.getComponent()),this.isActive&&this.load()}remove(){this.spreadsheetManager.removeSheet(this)}destroy(){this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.dispatchExternal("sheetRemoved",this.getComponent())}active(){this.spreadsheetManager.loadSheet(this)}}class ta extends Ce{constructor(e){super(e),this.sheets=[],this.element=null,this.registerTableOption("spreadsheet",!1),this.registerTableOption("spreadsheetRows",50),this.registerTableOption("spreadsheetColumns",50),this.registerTableOption("spreadsheetColumnDefinition",{}),this.registerTableOption("spreadsheetOutputFull",!1),this.registerTableOption("spreadsheetData",!1),this.registerTableOption("spreadsheetSheets",!1),this.registerTableOption("spreadsheetSheetTabs",!1),this.registerTableOption("spreadsheetSheetTabsElement",!1),this.registerTableFunction("setSheets",this.setSheets.bind(this)),this.registerTableFunction("addSheet",this.addSheet.bind(this)),this.registerTableFunction("getSheets",this.getSheets.bind(this)),this.registerTableFunction("getSheetDefinitions",this.getSheetDefinitions.bind(this)),this.registerTableFunction("setSheetData",this.setSheetData.bind(this)),this.registerTableFunction("getSheet",this.getSheet.bind(this)),this.registerTableFunction("getSheetData",this.getSheetData.bind(this)),this.registerTableFunction("clearSheet",this.clearSheet.bind(this)),this.registerTableFunction("removeSheet",this.removeSheetFunc.bind(this)),this.registerTableFunction("activeSheet",this.activeSheetFunc.bind(this))}initialize(){this.options("spreadsheet")&&(this.subscribe("table-initialized",this.tableInitialized.bind(this)),this.subscribe("data-loaded",this.loadRemoteData.bind(this)),this.table.options.index="_id",this.options("spreadsheetData")&&this.options("spreadsheetSheets")&&(console.warn("You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData"),this.table.options.spreadsheetData=!1),this.compatibilityCheck(),this.options("spreadsheetSheetTabs")&&this.initializeTabset())}compatibilityCheck(){this.options("data")&&console.warn("Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table"),this.options("pagination")&&console.warn("The spreadsheet module is not compatible with the pagination module"),this.options("groupBy")&&console.warn("The spreadsheet module is not compatible with the row grouping module"),this.options("responsiveCollapse")&&console.warn("The spreadsheet module is not compatible with the responsive collapse module")}initializeTabset(){this.element=document.createElement("div"),this.element.classList.add("tabulator-spreadsheet-tabs");var e=this.options("spreadsheetSheetTabsElement");e&&!(e instanceof HTMLElement)&&(e=document.querySelector(e),e||console.warn("Unable to find element matching spreadsheetSheetTabsElement selector:",this.options("spreadsheetSheetTabsElement"))),e?e.appendChild(this.element):this.footerAppend(this.element)}tableInitialized(){this.sheets.length?this.loadSheet(this.sheets[0]):this.options("spreadsheetSheets")?this.loadSheets(this.options("spreadsheetSheets")):this.options("spreadsheetData")&&this.loadData(this.options("spreadsheetData"))}loadRemoteData(e,n,i){return console.log("data",e,n,i),Array.isArray(e)?(this.table.dataLoader.clearAlert(),this.dispatchExternal("dataLoaded",e),!e.length||Array.isArray(e[0])?this.loadData(e):this.loadSheets(e)):console.error(`Spreadsheet Loading Error - Unable to process remote data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e),!1}loadData(e){var n={data:e};this.loadSheet(this.newSheet(n))}destroySheets(){this.sheets.forEach(e=>{e.destroy()}),this.sheets=[],this.activeSheet=null}loadSheets(e){Array.isArray(e)||(e=[]),this.destroySheets(),e.forEach(n=>{this.newSheet(n)}),this.loadSheet(this.sheets[0])}loadSheet(e){this.activeSheet!==e&&(this.activeSheet&&this.activeSheet.unload(),this.activeSheet=e,e.load())}newSheet(e={}){var n;return e.rows||(e.rows=this.options("spreadsheetRows")),e.columns||(e.columns=this.options("spreadsheetColumns")),n=new Ms(this,e),this.sheets.push(n),this.element&&this.element.appendChild(n.element),n}removeSheet(e){var n=this.sheets.indexOf(e),i;this.sheets.length>1?n>-1&&(this.sheets.splice(n,1),e.destroy(),this.activeSheet===e&&(i=this.sheets[n-1]||this.sheets[0],i?this.loadSheet(i):this.activeSheet=null)):console.warn("Unable to remove sheet, at least one sheet must be active")}lookupSheet(e){return e?e instanceof Ms?e:e instanceof ea?e._sheet:this.sheets.find(n=>n.key===e)||!1:this.activeSheet}setSheets(e){return this.loadSheets(e),this.getSheets()}addSheet(e){return this.newSheet(e).getComponent()}getSheetDefinitions(){return this.sheets.map(e=>e.getDefinition())}getSheets(){return this.sheets.map(e=>e.getComponent())}getSheet(e){var n=this.lookupSheet(e);return n?n.getComponent():!1}setSheetData(e,n){e&&!n&&(n=e,e=!1);var i=this.lookupSheet(e);return i?i.setData(n):!1}getSheetData(e){var n=this.lookupSheet(e);return n?n.getData():!1}clearSheet(e){var n=this.lookupSheet(e);return n?n.clear():!1}removeSheetFunc(e){var n=this.lookupSheet(e);n&&this.removeSheet(n)}activeSheetFunc(e){var n=this.lookupSheet(e);return n?this.loadSheet(n):!1}}te(ta,"moduleName","spreadsheet");class ia extends Ce{constructor(e){super(e),this.tooltipSubscriber=null,this.headerSubscriber=null,this.timeout=null,this.popupInstance=null,this.registerTableOption("tooltipDelay",300),this.registerColumnOption("tooltip"),this.registerColumnOption("headerTooltip")}initialize(){this.deprecatedOptionsCheck(),this.subscribe("column-init",this.initializeColumn.bind(this))}deprecatedOptionsCheck(){}initializeColumn(e){e.definition.headerTooltip&&!this.headerSubscriber&&(this.headerSubscriber=!0,this.subscribe("column-mousemove",this.mousemoveCheck.bind(this,"headerTooltip")),this.subscribe("column-mouseout",this.mouseoutCheck.bind(this,"headerTooltip"))),e.definition.tooltip&&!this.tooltipSubscriber&&(this.tooltipSubscriber=!0,this.subscribe("cell-mousemove",this.mousemoveCheck.bind(this,"tooltip")),this.subscribe("cell-mouseout",this.mouseoutCheck.bind(this,"tooltip")))}mousemoveCheck(e,n,i){var r=e==="tooltip"?i.column.definition.tooltip:i.definition.headerTooltip;r&&(this.clearPopup(),this.timeout=setTimeout(this.loadTooltip.bind(this,n,i,r),this.table.options.tooltipDelay))}mouseoutCheck(e,n,i){this.popupInstance||this.clearPopup()}clearPopup(e,n,i){clearTimeout(this.timeout),this.timeout=null,this.popupInstance&&this.popupInstance.hide()}loadTooltip(e,n,i){var r,t,s;function o(a){t=a}typeof i=="function"&&(i=i(e,n.getComponent(),o)),i instanceof HTMLElement?r=i:(r=document.createElement("div"),i===!0&&(n instanceof ki?i=n.value:n.definition.field?this.langBind("columns|"+n.definition.field,a=>{r.innerHTML=i=a||n.definition.title}):i=n.definition.title),r.innerHTML=i),(i||i===0||i===!1)&&(r.classList.add("tabulator-tooltip"),r.addEventListener("mousemove",a=>a.preventDefault()),this.popupInstance=this.popup(r),typeof t=="function"&&this.popupInstance.renderCallback(t),s=this.popupInstance.containerEventCoords(e),this.popupInstance.show(s.x+15,s.y+15).hideOnBlur(()=>{this.dispatchExternal("TooltipClosed",n.getComponent()),this.popupInstance=null}),this.dispatchExternal("TooltipOpened",n.getComponent()))}}te(ia,"moduleName","tooltip");var Rf={integer:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&Math.floor(e)===e)},float:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:(e=Number(e),!isNaN(e)&&isFinite(e)&&e%1!==0)},numeric:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:!isNaN(e)},string:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:isNaN(e)},alphanumeric:function(u,e,n){if(e===""||e===null||typeof e>"u")return!0;var i=new RegExp(/^[a-z0-9]+$/i);return i.test(e)},max:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)<=n},min:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:parseFloat(e)>=n},starts:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().startsWith(String(n).toLowerCase())},ends:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:String(e).toLowerCase().endsWith(String(n).toLowerCase())},minLength:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:String(e).length>=n},maxLength:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:String(e).length<=n},in:function(u,e,n){return e===""||e===null||typeof e>"u"?!0:(typeof n=="string"&&(n=n.split("|")),n.indexOf(e)>-1)},regex:function(u,e,n){if(e===""||e===null||typeof e>"u")return!0;var i=new RegExp(n);return i.test(e)},unique:function(u,e,n){if(e===""||e===null||typeof e>"u")return!0;var i=!0,r=u.getData(),t=u.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(s){var o=s.getData();o!==r&&e==t.getFieldValue(o)&&(i=!1)}),i},required:function(u,e,n){return e!==""&&e!==null&&typeof e<"u"}};const Ui=class Ui extends Ce{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("edit-success",this.editValidate.bind(this)),this.subscribe("edit-editor-clear",this.editorClear.bind(this)),this.subscribe("edit-edited-clear",this.editedClear.bind(this))}editValidate(e,n,i){var r=this.table.options.validationMode!=="manual"?this.validate(e.column.modules.validate,e,n):!0;return r!==!0&&setTimeout(()=>{e.getElement().classList.add("tabulator-validation-fail"),this.dispatchExternal("validationFailed",e.getComponent(),n,r)}),r}editorClear(e,n){n&&e.column.modules.validate&&this.cellValidate(e),e.getElement().classList.remove("tabulator-validation-fail")}editedClear(e){e.modules.validate&&(e.modules.validate.invalid=!1)}cellIsValid(e){return e.modules.validate&&e.modules.validate.invalid||!0}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var n=[];return e.cells.forEach(i=>{this.cellValidate(i)!==!0&&n.push(i.getComponent())}),n.length?n:!0}rowValidate(e){var n=[];return e.cells.forEach(i=>{this.cellValidate(i)!==!0&&n.push(i.getComponent())}),n.length?n:!0}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.clearValidation(n._getSelf())})}userValidate(e){var n=[];return this.table.rowManager.rows.forEach(i=>{i=i.getComponent();var r=i.validate();r!==!0&&(n=n.concat(r))}),n.length?n:!0}initializeColumnCheck(e){typeof e.definition.validator<"u"&&this.initializeColumn(e)}initializeColumn(e){var n=this,i=[],r;e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(t=>{r=n._extractValidator(t),r&&i.push(r)}):(r=this._extractValidator(e.definition.validator),r&&i.push(r)),e.modules.validate=i.length?i:!1)}_extractValidator(e){var n,i,r;switch(typeof e){case"string":return r=e.indexOf(":"),r>-1?(n=e.substring(0,r),i=e.substring(r+1)):n=e,this._buildValidator(n,i);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,n){var i=typeof e=="function"?e:Ui.validators[e];return i?{type:typeof e=="function"?"function":e,func:i,params:n}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,n,i){var r=this,t=[],s=this.invalidCells.indexOf(n);return e&&e.forEach(o=>{o.func.call(r,n.getComponent(),i,o.params)||t.push({type:o.type,parameters:o.params})}),n.modules.validate||(n.modules.validate={}),t.length?(n.modules.validate.invalid=t,this.table.options.validationMode!=="manual"&&n.getElement().classList.add("tabulator-validation-fail"),s==-1&&this.invalidCells.push(n)):(n.modules.validate.invalid=!1,n.getElement().classList.remove("tabulator-validation-fail"),s>-1&&this.invalidCells.splice(s,1)),t.length?t:!0}getInvalidCells(){var e=[];return this.invalidCells.forEach(n=>{e.push(n.getComponent())}),e}clearValidation(e){var n;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,n=this.invalidCells.indexOf(e),n>-1&&this.invalidCells.splice(n,1))}};te(Ui,"moduleName","validate"),te(Ui,"validators",Rf);let Ir=Ui;var Jn=Object.freeze({__proto__:null,AccessorModule:cr,AjaxModule:mr,ClipboardModule:gr,ColumnCalcsModule:vr,DataTreeModule:zo,DownloadModule:br,EditModule:yr,ExportModule:Er,FilterModule:Cr,FormatModule:Or,FrozenColumnsModule:Ho,FrozenRowsModule:Ko,GroupRowsModule:$o,HistoryModule:wr,HtmlTableImportModule:Go,ImportModule:Rr,InteractionModule:Vo,KeybindingsModule:Tr,MenuModule:ko,MoveColumnsModule:Jo,MoveRowsModule:Mr,MutatorModule:Sr,PageModule:Pr,PersistenceModule:Dr,PopupModule:Qo,PrintModule:Xo,ReactiveDataModule:Yo,ResizeColumnsModule:Zo,ResizeRowsModule:qo,ResizeTableModule:_o,ResponsiveLayoutModule:xr,SelectRangeModule:ln,SelectRowModule:Lr,SortModule:Ar,SpreadsheetModule:ta,TooltipModule:ia,ValidateModule:Ir}),Tf={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,debugInvalidComponentFuncs:!0,debugInitialization:!0,debugDeprecation:!0,height:!1,minHeight:!1,maxHeight:!1,columnHeaderVertAlign:"top",popupContainer:!1,columns:[],columnDefaults:{},rowHeader:!1,data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,rowHeight:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataLoaderErrorTimeout:3e3,dataSendParams:{},dataReceiveParams:{},dependencies:{}};class na{constructor(e,n,i={}){this.table=e,this.msgType=n,this.registeredDefaults=Object.assign({},i)}register(e,n){this.registeredDefaults[e]=n}generate(e,n={}){var i=Object.assign({},this.registeredDefaults),r=this.table.options.debugInvalidOptions||n.debugInvalidOptions===!0;Object.assign(i,e);for(let t in n)i.hasOwnProperty(t)||(r&&console.warn("Invalid "+this.msgType+" option:",t),i[t]=n.key);for(let t in i)t in n?i[t]=n[t]:Array.isArray(i[t])?i[t]=Object.assign([],i[t]):typeof i[t]=="object"&&i[t]!==null?i[t]=Object.assign({},i[t]):typeof i[t]>"u"&&delete i[t];return i}}class Rn extends qe{constructor(e){super(e),this.elementVertical=e.rowManager.element,this.elementHorizontal=e.columnManager.element,this.tableElement=e.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(e){}renderRows(){}renderColumns(){}rerenderRows(e){e&&e()}rerenderColumns(e,n){}renderRowCells(e){}rerenderRowCells(e,n){}scrollColumns(e,n){}scrollRows(e,n){}resize(){}scrollToRow(e){}scrollToRowNearestTop(e){}visibleRows(e){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(e,n){var i=e.getElement();n%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(e){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(e,n,i){var r=this.rows().indexOf(e),t=e.getElement(),s=0;return new Promise((o,a)=>{if(r>-1){if(typeof i>"u"&&(i=this.table.options.scrollToRowIfVisible),!i&&Pe.elVisible(t)&&(s=Pe.elOffset(t).top-Pe.elOffset(this.elementVertical).top,s>0&&s<this.elementVertical.clientHeight-t.offsetHeight))return o(),!1;switch(typeof n>"u"&&(n=this.table.options.scrollToRowPosition),n==="nearest"&&(n=this.scrollToRowNearestTop(e)?"top":"bottom"),this.scrollToRow(e),n){case"middle":case"center":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop+(t.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-t.offsetTop)/2:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop=this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-t.offsetTop)+t.offsetHeight:this.elementVertical.scrollTop=this.elementVertical.scrollTop-this.elementVertical.clientHeight+t.offsetHeight;break;case"top":this.elementVertical.scrollTop=t.offsetTop;break}o()}else console.warn("Scroll Error - Row not visible"),a("Scroll Error - Row not visible")})}}class Mf extends Rn{constructor(e){super(e)}renderRowCells(e,n){const i=document.createDocumentFragment();e.cells.forEach(r=>{i.appendChild(r.getElement())}),e.element.appendChild(i),n||e.cells.forEach(r=>{r.cellRendered()})}reinitializeColumnWidths(e){e.forEach(function(n){n.reinitializeWidth()})}}class Sf extends Rn{constructor(e){super(e),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.windowBuffer=200,this.visibleRows=null,this.initialized=!1,this.isFitData=!1,this.columns=[]}initialize(){this.compatibilityCheck(),this.layoutCheck(),this.vertScrollListen()}compatibilityCheck(){this.options("layout")=="fitDataTable"&&console.warn("Horizontal Virtual DOM is not compatible with fitDataTable layout mode"),this.options("responsiveLayout")&&console.warn("Horizontal Virtual DOM is not compatible with responsive columns"),this.options("rtl")&&console.warn("Horizontal Virtual DOM is not currently compatible with RTL text direction")}layoutCheck(){this.isFitData=this.options("layout").startsWith("fitData")}vertScrollListen(){this.subscribe("scroll-vertical",this.clearVisRowCache.bind(this)),this.subscribe("data-refreshed",this.clearVisRowCache.bind(this))}clearVisRowCache(){this.visibleRows=null}renderColumns(e,n){this.dataChange()}scrollColumns(e,n){this.scrollLeft!=e&&(this.scrollLeft=e,this.scroll(e-(this.vDomScrollPosLeft+this.windowBuffer)))}calcWindowBuffer(){var e=this.elementVertical.clientWidth;this.table.columnManager.columnsByIndex.forEach(n=>{if(n.visible){var i=n.getWidth();i>e&&(e=i)}}),this.windowBuffer=e*2}rerenderColumns(e,n){var i={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol},r=0;e&&!this.initialized||(this.clear(),this.calcWindowBuffer(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.windowBuffer,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,this.table.columnManager.columnsByIndex.forEach(t=>{var s={},o;t.visible&&(t.modules.frozen||(o=t.getWidth(),s.leftPos=r,s.rightPos=r+o,s.width=o,this.isFitData&&(s.fitDataCheck=t.modules.vdomHoz?t.modules.vdomHoz.fitDataCheck:!0),r+o>this.vDomScrollPosLeft&&r<this.vDomScrollPosRight?(this.leftCol==-1&&(this.leftCol=this.columns.length,this.vDomPadLeft=r),this.rightCol=this.columns.length):this.leftCol!==-1&&(this.vDomPadRight+=o),this.columns.push(t),t.modules.vdomHoz=s,r+=o))}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,n||(!e||this.reinitChanged(i))&&this.reinitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft)}renderRowCells(e){if(this.initialized)this.initializeRow(e);else{const n=document.createDocumentFragment();e.cells.forEach(i=>{n.appendChild(i.getElement())}),e.element.appendChild(n),e.cells.forEach(i=>{i.cellRendered()})}}rerenderRowCells(e,n){this.reinitializeRow(e,n)}reinitializeColumnWidths(e){for(let n=this.leftCol;n<=this.rightCol;n++){let i=this.columns[n];i&&i.reinitializeWidth()}}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var e=!1,n,i;if(this.isFitData){if(this.table.columnManager.columnsByIndex.forEach(r=>{!r.definition.width&&r.visible&&(e=!0)}),e&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.windowBuffer,n=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows())[0],n)){i=n.getElement(),n.generateCells(),this.tableElement.appendChild(i);for(let r=0;r<n.cells.length;r++){let t=n.cells[r];i.appendChild(t.getElement()),t.column.reinitializeWidth()}i.parentNode.removeChild(i),this.rerenderColumns(!1,!0)}}else this.options("layout")==="fitColumns"&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(e){var n=!0;return e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol?!0:(e.cols.forEach((i,r)=>{i!==this.columns[r]&&(n=!1)}),!n)}reinitializeRows(){var e=this.getVisibleRows(),n=this.table.rowManager.getRows().filter(i=>!e.includes(i));e.forEach(i=>{this.reinitializeRow(i,!0)}),n.forEach(i=>{i.deinitialize()})}getVisibleRows(){return this.visibleRows||(this.visibleRows=this.table.rowManager.getVisibleRows()),this.visibleRows}scroll(e){this.vDomScrollPosLeft+=e,this.vDomScrollPosRight+=e,Math.abs(e)>this.windowBuffer/2?this.rerenderColumns():e>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(e,n,i){for(let r=e;r<n;r++){let t=this.columns[r];t.modules.vdomHoz.leftPos+=i,t.modules.vdomHoz.rightPos+=i}}addColRight(){for(var e=!1,n=!0;n;){let i=this.columns[this.rightCol+1];i&&i.modules.vdomHoz.leftPos<=this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var t=r.getCell(i);r.getElement().insertBefore(t.getElement(),r.getCell(this.columns[this.rightCol]).getElement().nextSibling),t.cellRendered()}}),this.fitDataColActualWidthCheck(i),this.rightCol++,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.rightCol=this.rightCol)}),this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=i.getWidth()):n=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}addColLeft(){for(var e=!1,n=!0;n;){let i=this.columns[this.leftCol-1];if(i)if(i.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft){e=!0,this.getVisibleRows().forEach(t=>{if(t.type!=="group"){var s=t.getCell(i);t.getElement().insertBefore(s.getElement(),t.getCell(this.columns[this.leftCol]).getElement()),s.cellRendered()}}),this.leftCol--,this.getVisibleRows().forEach(t=>{t.type!=="group"&&(t.modules.vdomHoz.leftCol=this.leftCol)}),this.leftCol<=0?this.vDomPadLeft=0:this.vDomPadLeft-=i.getWidth();let r=this.fitDataColActualWidthCheck(i);r&&(this.scrollLeft=this.elementVertical.scrollLeft=this.elementVertical.scrollLeft+r,this.vDomPadRight-=r)}else n=!1;else n=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}removeColRight(){for(var e=!1,n=!0;n;){let i=this.columns[this.rightCol];i&&i.modules.vdomHoz.leftPos>this.vDomScrollPosRight?(e=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var t=r.getCell(i);try{r.getElement().removeChild(t.getElement())}catch(s){console.warn("Could not removeColRight",s.message)}}}),this.vDomPadRight+=i.getWidth(),this.rightCol--,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.rightCol=this.rightCol)})):n=!1}e&&(this.tableElement.style.paddingRight=this.vDomPadRight+"px")}removeColLeft(){for(var e=!1,n=!0;n;){let i=this.columns[this.leftCol];i&&i.modules.vdomHoz.rightPos<this.vDomScrollPosLeft?(e=!0,this.getVisibleRows().forEach(r=>{if(r.type!=="group"){var t=r.getCell(i);try{r.getElement().removeChild(t.getElement())}catch(s){console.warn("Could not removeColLeft",s.message)}}}),this.vDomPadLeft+=i.getWidth(),this.leftCol++,this.getVisibleRows().forEach(r=>{r.type!=="group"&&(r.modules.vdomHoz.leftCol=this.leftCol)})):n=!1}e&&(this.tableElement.style.paddingLeft=this.vDomPadLeft+"px")}fitDataColActualWidthCheck(e){var n,i;return e.modules.vdomHoz.fitDataCheck&&(e.reinitializeWidth(),n=e.getWidth(),i=n-e.modules.vdomHoz.width,i&&(e.modules.vdomHoz.rightPos+=i,e.modules.vdomHoz.width=n,this.colPositionAdjust(this.columns.indexOf(e)+1,this.columns.length,i)),e.modules.vdomHoz.fitDataCheck=!1),i}initializeRow(e){if(e.type!=="group"){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol},this.table.modules.frozenColumns&&this.table.modules.frozenColumns.leftColumns.forEach(n=>{this.appendCell(e,n)});for(let n=this.leftCol;n<=this.rightCol;n++)this.appendCell(e,this.columns[n]);this.table.modules.frozenColumns&&this.table.modules.frozenColumns.rightColumns.forEach(n=>{this.appendCell(e,n)})}}appendCell(e,n){if(n&&n.visible){let i=e.getCell(n);e.getElement().appendChild(i.getElement()),i.cellRendered()}}reinitializeRow(e,n){if(e.type!=="group"&&(n||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol)){for(var i=e.getElement();i.firstChild;)i.removeChild(i.firstChild);this.initializeRow(e)}}}class Pf extends qe{constructor(e){super(e),this.blockHozScrollEvent=!1,this.headersElement=null,this.contentsElement=null,this.rowHeader=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new na(this.table,"column definition",Wo),this.redrawBlock=!1,this.redrawBlockUpdate=null,this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.contentsElement=this.createHeaderContentsElement(),this.element=this.createHeaderElement(),this.contentsElement.insertBefore(this.headersElement,this.contentsElement.firstChild),this.element.insertBefore(this.contentsElement,this.element.firstChild),this.initializeScrollWheelWatcher(),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("scrollbar-vertical",this.padVerticalScrollbar.bind(this))}padVerticalScrollbar(e){this.table.rtl?this.headersElement.style.marginLeft=e+"px":this.headersElement.style.marginRight=e+"px"}initializeRenderer(){var e,n={virtual:Sf,basic:Mf};typeof this.table.options.renderHorizontal=="string"?e=n[this.table.options.renderHorizontal]:e=this.table.options.renderHorizontal,e?(this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",this.table.options.renderHorizontal)}createHeadersElement(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e.setAttribute("role","row"),e}createHeaderContentsElement(){var e=document.createElement("div");return e.classList.add("tabulator-header-contents"),e.setAttribute("role","rowgroup"),e}createHeaderElement(){var e=document.createElement("div");return e.classList.add("tabulator-header"),e.setAttribute("role","rowgroup"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e}getElement(){return this.element}getContentsElement(){return this.contentsElement}getHeadersElement(){return this.headersElement}scrollHorizontal(e){this.contentsElement.scrollLeft=e,this.scrollLeft=e,this.renderer.scrollColumns(e)}initializeScrollWheelWatcher(){this.contentsElement.addEventListener("wheel",e=>{var n;e.deltaX&&(n=this.contentsElement.scrollLeft+e.deltaX,this.table.rowManager.scrollHorizontal(n),this.table.columnManager.scrollHorizontal(n))})}generateColumnsFromRowData(e){var n=[],i={},r=this.table.options.autoColumns==="full"?e:[e[0]],t=this.table.options.autoColumnsDefinitions;if(e&&e.length){if(r.forEach(s=>{Object.keys(s).forEach((o,a)=>{let l=s[o],h;i[o]?i[o]!==!0&&typeof l<"u"&&(i[o].sorter=this.calculateSorterFromValue(l),i[o]=!0):(h={field:o,title:o,sorter:this.calculateSorterFromValue(l)},n.splice(a,0,h),i[o]=typeof l>"u"?h:!0)})}),t)switch(typeof t){case"function":this.table.options.columns=t.call(this.table,n);break;case"object":Array.isArray(t)?n.forEach(s=>{var o=t.find(a=>a.field===s.field);o&&Object.assign(s,o)}):n.forEach(s=>{t[s.field]&&Object.assign(s,t[s.field])}),this.table.options.columns=n;break}else this.table.options.columns=n;this.setColumns(this.table.options.columns)}}calculateSorterFromValue(e){var n;switch(typeof e){case"undefined":n="string";break;case"boolean":n="boolean";break;case"number":n="number";break;case"object":Array.isArray(e)?n="array":n="string";break;default:!isNaN(e)&&e!==""?n="number":e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?n="alphanum":n="string";break}return n}setColumns(e,n){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),this.dispatchExternal("columnsLoading"),this.table.options.rowHeader&&(this.rowHeader=new ei(this.table.options.rowHeader===!0?{}:this.table.options.rowHeader,this,!0),this.columns.push(this.rowHeader),this.headersElement.appendChild(this.rowHeader.getElement()),this.rowHeader.columnRendered()),e.forEach((i,r)=>{this._addColumn(i)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.subscribedExternal("columnsLoaded")&&this.dispatchExternal("columnsLoaded",this.getComponents()),this.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(e,n,i){var r=new ei(e,this),t=r.getElement(),s=i&&this.findColumnIndex(i);if(n&&this.rowHeader&&(!i||i===this.rowHeader)&&(n=!1,i=this.rowHeader,s=0),i&&s>-1){var o=i.getTopColumn(),a=this.columns.indexOf(o),l=o.getElement();n?(this.columns.splice(a,0,r),l.parentNode.insertBefore(t,l)):(this.columns.splice(a+1,0,r),l.parentNode.insertBefore(t,l.nextSibling))}else n?(this.columns.unshift(r),this.headersElement.insertBefore(r.getElement(),this.headersElement.firstChild)):(this.columns.push(r),this.headersElement.appendChild(r.getElement()));return r.columnRendered(),r}registerColumnField(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)}registerColumnPosition(e){this.columnsByIndex.push(e)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(e){e.reRegisterPosition()})}verticalAlignHeaders(){var e=0;this.redrawBlock||(this.headersElement.style.height="",this.columns.forEach(n=>{n.clearVerticalAlign()}),this.columns.forEach(n=>{var i=n.getHeight();i>e&&(e=i)}),this.headersElement.style.height=e+"px",this.columns.forEach(n=>{n.verticalAlign(this.table.options.columnHeaderVertAlign,e)}),this.table.rowManager.adjustTableSize())}findColumn(e){var n;if(typeof e=="object"){if(e instanceof ei)return e;if(e instanceof Uo)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return n=[],this.columns.forEach(r=>{n.push(r),n=n.concat(r.getColumns(!0))}),n.find(r=>r.element===e)||!1}else return this.columnsByField[e]||!1;return!1}getColumnByField(e){return this.columnsByField[e]}getColumnsByFieldRoot(e){var n=[];return Object.keys(this.columnsByField).forEach(i=>{var r=this.table.options.nestedFieldSeparator?i.split(this.table.options.nestedFieldSeparator)[0]:i;r===e&&n.push(this.columnsByField[i])}),n}getColumnByIndex(e){return this.columnsByIndex[e]}getFirstVisibleColumn(){var e=this.columnsByIndex.findIndex(n=>n.visible);return e>-1?this.columnsByIndex[e]:!1}getVisibleColumnsByIndex(){return this.columnsByIndex.filter(e=>e.visible)}getColumns(){return this.columns}findColumnIndex(e){return this.columnsByIndex.findIndex(n=>e===n)}getRealColumns(){return this.columnsByIndex}traverse(e){this.columnsByIndex.forEach((n,i)=>{e(n,i)})}getDefinitions(e){var n=[];return this.columnsByIndex.forEach(i=>{(!e||e&&i.visible)&&n.push(i.getDefinition())}),n}getDefinitionTree(){var e=[];return this.columns.forEach(n=>{e.push(n.getDefinition(!0))}),e}getComponents(e){var n=[],i=e?this.columns:this.columnsByIndex;return i.forEach(r=>{n.push(r.getComponent())}),n}getWidth(){var e=0;return this.columnsByIndex.forEach(n=>{n.visible&&(e+=n.getWidth())}),e}moveColumn(e,n,i){n.element.parentNode.insertBefore(e.element,n.element),i&&n.element.parentNode.insertBefore(n.element,e.element),this.moveColumnActual(e,n,i),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(e,n,i){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,n,i):this._moveColumnInArray(this.columns,e,n,i),this._moveColumnInArray(this.columnsByIndex,e,n,i,!0),this.rerenderColumns(!0),this.dispatch("column-moved",e,n,i),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",e.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(e,n,i,r,t){var s=e.indexOf(n),o,a=[];s>-1&&(e.splice(s,1),o=e.indexOf(i),o>-1?r&&(o=o+1):o=s,e.splice(o,0,n),t&&(a=this.chain("column-moving-rows",[n,i,r],null,[])||[],a=a.concat(this.table.rowManager.rows),a.forEach(function(l){if(l.cells.length){var h=l.cells.splice(s,1)[0];l.cells.splice(o,0,h)}})))}scrollToColumn(e,n,i){var r=0,t=e.getLeftOffset(),s=0,o=e.getElement();return new Promise((a,l)=>{if(typeof n>"u"&&(n=this.table.options.scrollToColumnPosition),typeof i>"u"&&(i=this.table.options.scrollToColumnIfVisible),e.visible){switch(n){case"middle":case"center":s=-this.element.clientWidth/2;break;case"right":s=o.clientWidth-this.headersElement.clientWidth;break}if(!i&&t>0&&t+o.offsetWidth<this.element.clientWidth)return!1;r=t+s,r=Math.max(Math.min(r,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(r),this.scrollHorizontal(r),a()}else console.warn("Scroll Error - Column not visible"),l("Scroll Error - Column not visible")})}generateCells(e){var n=[];return this.columnsByIndex.forEach(i=>{n.push(i.generateCell(e))}),n}getFlexBaseWidth(){var e=this.table.element.clientWidth,n=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(e-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(i){var r,t,s;i.visible&&(r=i.definition.width||0,t=parseInt(i.minWidth),typeof r=="string"?r.indexOf("%")>-1?s=e/100*parseInt(r):s=parseInt(r):s=r,n+=s>t?s:t)}),n}addColumn(e,n,i){return new Promise((r,t)=>{var s=this._addColumn(e,n,i);this._reIndexColumns(),this.dispatch("column-add",e,n,i),this.layoutMode()!="fitColumns"&&s.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.rerenderColumns(),r(s)})}deregisterColumn(e){var n=e.getField(),i;n&&delete this.columnsByField[n],i=this.columnsByIndex.indexOf(e),i>-1&&this.columnsByIndex.splice(i,1),i=this.columns.indexOf(e),i>-1&&this.columns.splice(i,1),this.verticalAlignHeaders(),this.redraw()}rerenderColumns(e,n){this.redrawBlock?(e===!1||e===!0&&this.redrawBlockUpdate===null)&&(this.redrawBlockUpdate=e):this.renderer.rerenderColumns(e,n)}blockRedraw(){this.redrawBlock=!0,this.redrawBlockUpdate=null}restoreRedraw(){this.redrawBlock=!1,this.verticalAlignHeaders(),this.renderer.rerenderColumns(this.redrawBlockUpdate)}redraw(e){Pe.elVisible(this.element)&&this.verticalAlignHeaders(),e&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",e)||this.layoutRefresh(e),this.dispatch("table-redraw",e),this.table.footerManager.redraw()}}class Df extends Rn{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.scrollTop=0,e.scrollLeft=0,e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility=""}renderRows(){var e=this.tableElement,n=!0,i=document.createDocumentFragment(),r=this.rows();r.forEach((t,s)=>{this.styleRow(t,s),t.initialize(!1,!0),t.type!=="group"&&(n=!1),i.appendChild(t.getElement())}),e.appendChild(i),r.forEach(t=>{t.rendered(),t.heightInitialized||t.calcHeight(!0)}),r.forEach(t=>{t.heightInitialized||t.setCellHeight()}),n?e.style.minWidth=this.table.columnManager.getWidth()+"px":e.style.minWidth=""}rerenderRows(e){this.clearRows(),e&&e(),this.renderRows(),this.rows().length||this.table.rowManager.tableEmpty()}scrollToRowNearestTop(e){var n=Pe.elOffset(e.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-n)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-n))}scrollToRow(e){var n=e.getElement();this.elementVertical.scrollTop=Pe.elOffset(n).top-Pe.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(e){return this.rows()}}class xf extends Rn{constructor(e){super(e),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var e=this.tableElement;e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(e){for(var n=this.elementVertical.scrollTop,i=!1,r=!1,t=this.table.rowManager.scrollLeft,s=this.rows(),o=this.vDomTop;o<=this.vDomBottom;o++)if(s[o]){var a=n-s[o].getElement().offsetTop;if(r===!1||Math.abs(a)<r)r=a,i=o;else break}s.forEach(l=>{l.deinitializeHeight()}),e&&e(),this.rows().length?this._virtualRenderFill(i===!1?this.rows.length-1:i,!0,r||0):(this.clear(),this.table.rowManager.tableEmpty()),this.scrollColumns(t)}scrollColumns(e){this.table.rowManager.scrollHorizontal(e)}scrollRows(e,n){var i=e-this.vDomScrollPosTop,r=e-this.vDomScrollPosBottom,t=this.vDomWindowBuffer*2,s=this.rows();if(this.scrollTop=e,-i>t||r>t){var o=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*s.length)),this.scrollColumns(o)}else n?(i<0&&this._addTopRow(s,-i),r<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(s,-r):this.vDomScrollPosBottom=this.scrollTop)):(r>=0&&this._addBottomRow(s,r),i>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(s,i):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(e){var n=this.rows().indexOf(e);return!(Math.abs(this.vDomTop-n)>Math.abs(this.vDomBottom-n))}scrollToRow(e){var n=this.rows().indexOf(e);n>-1&&this._virtualRenderFill(n,!0)}visibleRows(e){var n=this.elementVertical.scrollTop,i=this.elementVertical.clientHeight+n,r=!1,t=0,s=0,o=this.rows();if(e)t=this.vDomTop,s=this.vDomBottom;else for(var a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a])if(r)if(i-o[a].getElement().offsetTop>=0)s=a;else break;else if(n-o[a].getElement().offsetTop>=0)t=a;else if(r=!0,i-o[a].getElement().offsetTop>=0)s=a;else break;return o.slice(t,s+1)}_virtualRenderFill(e,n,i){var r=this.tableElement,t=this.elementVertical,s=0,o=0,a=0,l=0,h=0,c=0,d=this.rows(),f=d.length,m=0,g,v,p=[],E=0,w=0,O=this.table.rowManager.fixedHeight,T=this.elementVertical.clientHeight,S=this.table.options.rowHeight,M=!0;if(e=e||0,i=i||0,!e)this.clear();else{for(;r.firstChild;)r.removeChild(r.firstChild);l=(f-e+1)*this.vDomRowHeight,l<T&&(e-=Math.ceil((T-l)/this.vDomRowHeight),e<0&&(e=0)),s=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),e),e-=s}if(f&&Pe.elVisible(this.elementVertical)){for(this.vDomTop=e,this.vDomBottom=e-1,O||this.table.options.maxHeight?(S&&(w=T/S+this.vDomWindowBuffer/S),w=Math.max(this.vDomWindowMinTotalRows,Math.ceil(w))):w=f;(w==f||o<=T+this.vDomWindowBuffer||E<this.vDomWindowMinTotalRows)&&this.vDomBottom<f-1;){for(p=[],v=document.createDocumentFragment(),c=0;c<w&&this.vDomBottom<f-1;)m=this.vDomBottom+1,g=d[m],this.styleRow(g,m),g.initialize(!1,!0),!g.heightInitialized&&!this.table.options.rowHeight&&g.clearCellHeight(),v.appendChild(g.getElement()),p.push(g),this.vDomBottom++,c++;if(!p.length)break;r.appendChild(v),p.forEach(P=>{P.rendered(),P.heightInitialized||P.calcHeight(!0)}),p.forEach(P=>{P.heightInitialized||P.setCellHeight()}),p.forEach(P=>{a=P.getHeight(),E<s?h+=a:o+=a,a>this.vDomWindowBuffer&&(this.vDomWindowBuffer=a*2),E++}),M=this.table.rowManager.adjustTableSize(),T=this.elementVertical.clientHeight,M&&(O||this.table.options.maxHeight)&&(S=o/E,w=Math.max(this.vDomWindowMinTotalRows,Math.ceil(T/S+this.vDomWindowBuffer/S)))}e?(this.vDomTopPad=n?this.vDomRowHeight*this.vDomTop+i:this.scrollTop-h,this.vDomBottomPad=this.vDomBottom==f-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-o-h,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((o+h)/E),this.vDomBottomPad=this.vDomRowHeight*(f-this.vDomBottom-1),this.vDomScrollHeight=h+o+this.vDomBottomPad-T),r.style.paddingTop=this.vDomTopPad+"px",r.style.paddingBottom=this.vDomBottomPad+"px",n&&(this.scrollTop=this.vDomTopPad+h+i-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-T:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-T),this.elementVertical.scrollWidth>this.elementVertical.clientWidth&&n&&(this.scrollTop+=this.elementVertical.offsetHeight-T),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,t.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(e,n){for(var i=this.tableElement,r=[],t=0,s=this.vDomTop-1,o=0,a=!0;a;)if(this.vDomTop){let l=e[s],h,c;l&&o<this.vDomMaxRenderChain?(h=l.getHeight()||this.vDomRowHeight,c=l.initialized,n>=h?(this.styleRow(l,s),i.insertBefore(l.getElement(),i.firstChild),(!l.initialized||!l.heightInitialized)&&r.push(l),l.initialize(),c||(h=l.getElement().offsetHeight,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2)),n-=h,t+=h,this.vDomTop--,s--,o++):a=!1):a=!1}else a=!1;for(let l of r)l.clearCellHeight();this._quickNormalizeRowHeight(r),t&&(this.vDomTopPad-=t,this.vDomTopPad<0&&(this.vDomTopPad=s*this.vDomRowHeight),s<1&&(this.vDomTopPad=0),i.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=t)}_removeTopRow(e,n){for(var i=[],r=0,t=0,s=!0;s;){let o=e[this.vDomTop],a;o&&t<this.vDomMaxRenderChain?(a=o.getHeight()||this.vDomRowHeight,n>=a?(this.vDomTop++,n-=a,r+=a,i.push(o),t++):s=!1):s=!1}for(let o of i){let a=o.getElement();a.parentNode&&a.parentNode.removeChild(a)}r&&(this.vDomTopPad+=r,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?r:r+this.vDomWindowBuffer)}_addBottomRow(e,n){for(var i=this.tableElement,r=[],t=0,s=this.vDomBottom+1,o=0,a=!0;a;){let l=e[s],h,c;l&&o<this.vDomMaxRenderChain?(h=l.getHeight()||this.vDomRowHeight,c=l.initialized,n>=h?(this.styleRow(l,s),i.appendChild(l.getElement()),(!l.initialized||!l.heightInitialized)&&r.push(l),l.initialize(),c||(h=l.getElement().offsetHeight,h>this.vDomWindowBuffer&&(this.vDomWindowBuffer=h*2)),n-=h,t+=h,this.vDomBottom++,s++,o++):a=!1):a=!1}for(let l of r)l.clearCellHeight();this._quickNormalizeRowHeight(r),t&&(this.vDomBottomPad-=t,(this.vDomBottomPad<0||s==e.length-1)&&(this.vDomBottomPad=0),i.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=t)}_removeBottomRow(e,n){for(var i=[],r=0,t=0,s=!0;s;){let o=e[this.vDomBottom],a;o&&t<this.vDomMaxRenderChain?(a=o.getHeight()||this.vDomRowHeight,n>=a?(this.vDomBottom--,n-=a,r+=a,i.push(o),t++):s=!1):s=!1}for(let o of i){let a=o.getElement();a.parentNode&&a.parentNode.removeChild(a)}r&&(this.vDomBottomPad+=r,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=r)}_quickNormalizeRowHeight(e){for(let n of e)n.calcHeight();for(let n of e)n.setCellHeight()}}class Lf extends qe{constructor(e){super(e),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.placeholder=null,this.placeholderContents=null,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRenderInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.scrollbarWidth=0,this.renderer=null}createHolderElement(){var e=document.createElement("div");return e.classList.add("tabulator-tableholder"),e.setAttribute("tabindex",0),e}createTableElement(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e.setAttribute("role","rowgroup"),e}initializePlaceholder(){var e=this.table.options.placeholder;if(typeof e=="function"&&(e=e.call(this.table)),e=this.chain("placeholder",[e],e,e)||e,e){let n=document.createElement("div");if(n.classList.add("tabulator-placeholder"),typeof e=="string"){let i=document.createElement("div");i.classList.add("tabulator-placeholder-contents"),i.innerHTML=e,n.appendChild(i),this.placeholderContents=i}else typeof HTMLElement<"u"&&e instanceof HTMLElement?(n.appendChild(e),this.placeholderContents=e):(console.warn("Invalid placeholder provided, must be string or HTML Element",e),this.el=null);this.placeholder=n}}getElement(){return this.element}getTableElement(){return this.tableElement}initialize(){this.initializePlaceholder(),this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var e=this.element.scrollLeft,n=this.scrollLeft>e,i=this.element.scrollTop,r=this.scrollTop>i;this.scrollLeft!=e&&(this.scrollLeft=e,this.dispatch("scroll-horizontal",e,n),this.dispatchExternal("scrollHorizontal",e,n),this._positionPlaceholder()),this.scrollTop!=i&&(this.scrollTop=i,this.renderer.scrollRows(i,r),this.dispatch("scroll-vertical",i,r),this.dispatchExternal("scrollVertical",i,r))})}findRow(e){if(typeof e=="object"){if(e instanceof et)return e;if(e instanceof On)return e._getSelf()||!1;if(typeof HTMLElement<"u"&&e instanceof HTMLElement)return this.rows.find(i=>i.getElement()===e)||!1;if(e===null)return!1}else return typeof e>"u"?!1:this.rows.find(i=>i.data[this.table.options.index]==e)||!1;return!1}getRowFromDataObject(e){var n=this.rows.find(i=>i.data===e);return n||!1}getRowFromPosition(e){return this.getDisplayRows().find(n=>n.type==="row"&&n.getPosition()===e&&n.isDisplayed())}scrollToRow(e,n,i){return this.renderer.scrollToRowPosition(e,n,i)}setData(e,n,i){return new Promise((r,t)=>{n&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(e,!0):this.reRenderInPosition(()=>{this._setDataActual(e)}):(this.table.options.autoColumns&&i&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(e),this.resetScroll(),this._setDataActual(e)),r()})}_setDataActual(e,n){this.dispatchExternal("dataProcessing",e),this._wipeElements(),Array.isArray(e)?(this.dispatch("data-processing",e),e.forEach((i,r)=>{if(i&&typeof i=="object"){var t=new et(i,this);this.rows.push(t)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",i)}),this.refreshActiveData(!1,!1,n),this.dispatch("data-processed",e),this.dispatchExternal("dataProcessed",e)):console.error(`Data Loading Error - Unable to process data due to invalid data type 
Expecting: array 
Received: `,typeof e,`
Data:     `,e)}_wipeElements(){this.dispatch("rows-wipe"),this.destroy(),this.adjustTableSize(),this.dispatch("rows-wiped")}destroy(){this.rows.forEach(e=>{e.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0}deleteRow(e,n){var i=this.rows.indexOf(e),r=this.activeRows.indexOf(e);r>-1&&this.activeRows.splice(r,1),i>-1&&this.rows.splice(i,1),this.setActiveRows(this.activeRows),this.displayRowIterator(t=>{var s=t.indexOf(e);s>-1&&t.splice(s,1)}),n||this.reRenderInPosition(),this.regenerateRowPositions(),this.dispatchExternal("rowDeleted",e.getComponent()),this.displayRowsCount||this.tableEmpty(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(e,n,i,r){var t=this.addRowActual(e,n,i,r);return t}addRows(e,n,i,r){var t=[];return new Promise((s,o)=>{n=this.findAddRowPos(n),Array.isArray(e)||(e=[e]),(typeof i>"u"&&n||typeof i<"u"&&!n)&&e.reverse(),e.forEach((a,l)=>{var h=this.addRow(a,n,i,!0);t.push(h),this.dispatch("row-added",h,a,n,i)}),this.refreshActiveData(r?"displayPipeline":!1,!1,!0),this.regenerateRowPositions(),this.displayRowsCount&&this._clearPlaceholder(),s(t)})}findAddRowPos(e){return typeof e>"u"&&(e=this.table.options.addRowPos),e==="pos"&&(e=!0),e==="bottom"&&(e=!1),e}addRowActual(e,n,i,r){var t=e instanceof et?e:new et(e||{},this),s=this.findAddRowPos(n),o=-1,a,l;return i||(l=this.chain("row-adding-position",[t,s],null,{index:i,top:s}),i=l.index,s=l.top),typeof i<"u"&&(i=this.findRow(i)),i=this.chain("row-adding-index",[t,i,s],null,i),i&&(o=this.rows.indexOf(i)),i&&o>-1?(a=this.activeRows.indexOf(i),this.displayRowIterator(function(h){var c=h.indexOf(i);c>-1&&h.splice(s?c:c+1,0,t)}),a>-1&&this.activeRows.splice(s?a:a+1,0,t),this.rows.splice(s?o:o+1,0,t)):s?(this.displayRowIterator(function(h){h.unshift(t)}),this.activeRows.unshift(t),this.rows.unshift(t)):(this.displayRowIterator(function(h){h.push(t)}),this.activeRows.push(t),this.rows.push(t)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",t.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),r||this.reRenderInPosition(),t}moveRow(e,n,i){this.dispatch("row-move",e,n,i),this.moveRowActual(e,n,i),this.regenerateRowPositions(),this.dispatch("row-moved",e,n,i),this.dispatchExternal("rowMoved",e.getComponent())}moveRowActual(e,n,i){this.moveRowInArray(this.rows,e,n,i),this.moveRowInArray(this.activeRows,e,n,i),this.displayRowIterator(r=>{this.moveRowInArray(r,e,n,i)}),this.dispatch("row-moving",e,n,i)}moveRowInArray(e,n,i,r){var t,s,o,a;if(n!==i&&(t=e.indexOf(n),t>-1&&(e.splice(t,1),s=e.indexOf(i),s>-1?r?e.splice(s+1,0,n):e.splice(s,0,n):e.splice(t,0,n)),e===this.getDisplayRows())){o=t<s?t:s,a=s>t?s:t+1;for(let l=o;l<=a;l++)e[l]&&this.styleRow(e[l],l)}}clearData(){this.setData([])}getRowIndex(e){return this.findRowIndex(e,this.rows)}getDisplayRowIndex(e){var n=this.getDisplayRows().indexOf(e);return n>-1?n:!1}nextDisplayRow(e,n){var i=this.getDisplayRowIndex(e),r=!1;return i!==!1&&i<this.displayRowsCount-1&&(r=this.getDisplayRows()[i+1]),r&&(!(r instanceof et)||r.type!="row")?this.nextDisplayRow(r,n):r}prevDisplayRow(e,n){var i=this.getDisplayRowIndex(e),r=!1;return i&&(r=this.getDisplayRows()[i-1]),n&&r&&(!(r instanceof et)||r.type!="row")?this.prevDisplayRow(r,n):r}findRowIndex(e,n){var i;return e=this.findRow(e),e&&(i=n.indexOf(e),i>-1)?i:!1}getData(e,n){var i=[],r=this.getRows(e);return r.forEach(function(t){t.type=="row"&&i.push(t.getData(n||"data"))}),i}getComponents(e){var n=[],i=this.getRows(e);return i.forEach(function(r){n.push(r.getComponent())}),n}getDataCount(e){var n=this.getRows(e);return n.length}scrollHorizontal(e){this.scrollLeft=e,this.element.scrollLeft=e,this.dispatch("scroll-horizontal",e)}registerDataPipelineHandler(e,n){typeof n<"u"?(this.dataPipeline.push({handler:e,priority:n}),this.dataPipeline.sort((i,r)=>i.priority-r.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(e,n){typeof n<"u"?(this.displayPipeline.push({handler:e,priority:n}),this.displayPipeline.sort((i,r)=>i.priority-r.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(e,n,i){var r=this.table,t="",s=0,o=["all","dataPipeline","display","displayPipeline","end"];if(!this.table.destroyed){if(typeof e=="function")if(s=this.dataPipeline.findIndex(a=>a.handler===e),s>-1)t="dataPipeline",n&&(s==this.dataPipeline.length-1?t="display":s++);else if(s=this.displayPipeline.findIndex(a=>a.handler===e),s>-1)t="displayPipeline",n&&(s==this.displayPipeline.length-1?t="end":s++);else{console.error("Unable to refresh data, invalid handler provided",e);return}else t=e||"all",s=0;if(this.redrawBlock){(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===t&&s<this.redrawBlockRestoreConfig.index||o.indexOf(t)<o.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:e,skipStage:n,renderInPosition:i,stage:t,index:s});return}else Pe.elVisible(this.element)?i?this.reRenderInPosition(this.refreshPipelines.bind(this,e,t,s,i)):(this.refreshPipelines(e,t,s,i),e||this.table.columnManager.renderer.renderColumns(),this.renderTable(),r.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0)):this.refreshPipelines(e,t,s,i),this.dispatch("data-refreshed")}}refreshPipelines(e,n,i,r){switch(this.dispatch("data-refreshing"),(!e||!this.activeRowsPipeline[0])&&(this.activeRowsPipeline[0]=this.rows.slice(0)),n){case"all":case"dataPipeline":for(let t=i;t<this.dataPipeline.length;t++){let s=this.dataPipeline[t].handler(this.activeRowsPipeline[t].slice(0));this.activeRowsPipeline[t+1]=s||this.activeRowsPipeline[t].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);case"display":i=0,this.resetDisplayRows();case"displayPipeline":for(let t=i;t<this.displayPipeline.length;t++){let s=this.displayPipeline[t].handler((t?this.getDisplayRows(t-1):this.activeRows).slice(0),r);this.setDisplayRows(s||this.getDisplayRows(t-1).slice(0),t)}case"end":this.regenerateRowPositions()}this.getDisplayRows().length&&this._clearPlaceholder()}regenerateRowPositions(){var e=this.getDisplayRows(),n=1;e.forEach(i=>{i.type==="row"&&(i.setPosition(n),n++)})}setActiveRows(e){this.activeRows=this.activeRows=Object.assign([],e),this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}setDisplayRows(e,n){this.displayRows[n]=e,n==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length)}getDisplayRows(e){return typeof e>"u"?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]}getVisibleRows(e,n){var i=Object.assign([],this.renderer.visibleRows(!n));return e&&(i=this.chain("rows-visible",[n],i,i)),i}displayRowIterator(e){this.activeRowsPipeline.forEach(e),this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(e){var n=[];switch(e){case"active":n=this.activeRows;break;case"display":n=this.table.rowManager.getDisplayRows();break;case"visible":n=this.getVisibleRows(!1,!0);break;default:n=this.chain("rows-retrieve",e,null,this.rows)||this.rows}return n}reRenderInPosition(e){this.redrawBlock?e?e():this.redrawBlockRenderInPosition=!0:(this.dispatchExternal("renderStarted"),this.renderer.rerenderRows(e),this.fixedHeight||this.adjustTableSize(),this.scrollBarCheck(),this.dispatchExternal("renderComplete"))}scrollBarCheck(){var e=0;this.element.scrollHeight>this.element.clientHeight&&(e=this.element.offsetWidth-this.element.clientWidth),e!==this.scrollbarWidth&&(this.scrollbarWidth=e,this.dispatch("scrollbar-vertical",e))}initializeRenderer(){var e,n={virtual:xf,basic:Df};typeof this.table.options.renderVertical=="string"?e=n[this.table.options.renderVertical]:e=this.table.options.renderVertical,e?(this.renderMode=this.table.options.renderVertical,this.renderer=new e(this.table,this.element,this.tableElement),this.renderer.initialize(),(this.table.element.clientHeight||this.table.options.height)&&!(this.table.options.minHeight&&this.table.options.maxHeight)?this.fixedHeight=!0:this.fixedHeight=!1):console.error("Unable to find matching renderer:",this.table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.fixedHeight||this.adjustTableSize(),this.layoutRefresh(!0))):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.scrollBarCheck(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}tableEmpty(){this.renderEmptyScroll(),this._showPlaceholder()}checkPlaceholder(){this.displayRowsCount?this._clearPlaceholder():this.tableEmpty()}_showPlaceholder(){this.placeholder&&(this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.initializePlaceholder(),this.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.placeholder),this._positionPlaceholder(),this.adjustTableSize())}_clearPlaceholder(){this.placeholder&&this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder),this.tableElement.style.minWidth="",this.tableElement.style.display=""}_positionPlaceholder(){this.placeholder&&this.placeholder.parentNode&&(this.placeholder.style.width=this.table.columnManager.getWidth()+"px",this.placeholderContents.style.width=this.table.rowManager.element.clientWidth+"px",this.placeholderContents.style.marginLeft=this.scrollLeft+"px")}styleRow(e,n){var i=e.getElement();n%2?(i.classList.add("tabulator-row-even"),i.classList.remove("tabulator-row-odd")):(i.classList.add("tabulator-row-odd"),i.classList.remove("tabulator-row-even"))}normalizeHeight(e){this.activeRows.forEach(function(n){n.normalizeHeight(e)})}adjustTableSize(){let e=this.element.clientHeight,n,i=!1;if(this.renderer.verticalFillMode==="fill"){let r=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));if(this.fixedHeight){n=isNaN(this.table.options.minHeight)?this.table.options.minHeight:this.table.options.minHeight+"px";const t="calc(100% - "+r+"px)";this.element.style.minHeight=n||"calc(100% - "+r+"px)",this.element.style.height=t,this.element.style.maxHeight=t}else this.element.style.height="",this.element.style.height=this.table.element.clientHeight-r+"px",this.element.scrollTop=this.scrollTop;this.renderer.resize(),!this.fixedHeight&&e!=this.element.clientHeight&&(i=!0,this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw()),this.scrollBarCheck()}return this._positionPlaceholder(),i}reinitialize(){this.rows.forEach(function(e){e.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRenderInPosition&&this.reRenderInPosition(),this.redrawBlockRenderInPosition=!1}redraw(e){this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(this.scrollLeft))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,this.table.browser==="ie"){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))}}class Af extends qe{constructor(e){super(e),this.active=!1,this.element=this.createElement(),this.containerElement=this.createContainerElement(),this.external=!1}initialize(){this.initializeElement()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e}createContainerElement(){var e=document.createElement("div");return e.classList.add("tabulator-footer-contents"),this.element.appendChild(e),e}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":this.table.options.footerElement[0]==="<"?this.containerElement.innerHTML=this.table.options.footerElement:(this.external=!0,this.containerElement=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;break}}getElement(){return this.element}append(e){this.activate(),this.containerElement.appendChild(e),this.table.rowManager.adjustTableSize()}prepend(e){this.activate(),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(e){e.parentNode.removeChild(e),this.deactivate()}deactivate(e){(!this.element.firstChild||e)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display=""))}redraw(){this.dispatch("footer-redraw")}}class If extends qe{constructor(e){super(e),this.el=null,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","mouseup","mousedown","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.pseudoTrackers={row:{subscriber:null,target:null},cell:{subscriber:null,target:null},group:{subscriber:null,target:null},column:{subscriber:null,target:null}},this.pseudoTracking=!1}initialize(){this.el=this.table.element,this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var e={};this.listeners.forEach(n=>{e[n]={handler:null,components:[]}}),this.listeners=e}bindPseudoEvents(){Object.keys(this.pseudoTrackers).forEach(e=>{this.pseudoTrackers[e].subscriber=this.pseudoMouseEnter.bind(this,e),this.subscribe(e+"-mouseover",this.pseudoTrackers[e].subscriber)}),this.pseudoTracking=!0}pseudoMouseEnter(e,n,i){this.pseudoTrackers[e].target!==i&&(this.pseudoTrackers[e].target&&this.dispatch(e+"-mouseleave",n,this.pseudoTrackers[e].target),this.pseudoMouseLeave(e,n),this.pseudoTrackers[e].target=i,this.dispatch(e+"-mouseenter",n,i))}pseudoMouseLeave(e,n){var i=Object.keys(this.pseudoTrackers),r={row:["cell"],cell:["row"]};i=i.filter(t=>{var s=r[e];return t!==e&&(!s||s&&!s.includes(t))}),i.forEach(t=>{var s=this.pseudoTrackers[t].target;this.pseudoTrackers[t].target&&(this.dispatch(t+"-mouseleave",n,s),this.pseudoTrackers[t].target=null)})}bindSubscriptionWatchers(){var e=Object.keys(this.listeners),n=Object.values(this.componentMap);for(let i of n)for(let r of e){let t=i+"-"+r;this.subscriptionChange(t,this.subscriptionChanged.bind(this,i,r))}this.subscribe("table-destroy",this.clearWatchers.bind(this))}subscriptionChanged(e,n,i){var r=this.listeners[n].components,t=r.indexOf(e),s=!1;i?t===-1&&(r.push(e),s=!0):this.subscribed(e+"-"+n)||t>-1&&(r.splice(t,1),s=!0),(n==="mouseenter"||n==="mouseleave")&&!this.pseudoTracking&&this.bindPseudoEvents(),s&&this.updateEventListeners()}updateEventListeners(){for(let e in this.listeners){let n=this.listeners[e];n.components.length?n.handler||(n.handler=this.track.bind(this,e),this.el.addEventListener(e,n.handler)):n.handler&&(this.el.removeEventListener(e,n.handler),n.handler=null)}}track(e,n){var i=n.composedPath&&n.composedPath()||n.path,r=this.findTargets(i);r=this.bindComponents(e,r),this.triggerEvents(e,n,r),this.pseudoTracking&&(e=="mouseover"||e=="mouseleave")&&!Object.keys(r).length&&this.pseudoMouseLeave("none",n)}findTargets(e){var n={};let i=Object.keys(this.componentMap);for(let r of e){let t=r.classList?[...r.classList]:[];if(t.filter(a=>this.abortClasses.includes(a)).length)break;let o=t.filter(a=>i.includes(a));for(let a of o)n[this.componentMap[a]]||(n[this.componentMap[a]]=r)}return n.group&&n.group===n.row&&delete n.row,n}bindComponents(e,n){var i=Object.keys(n).reverse(),r=this.listeners[e],t={},s={},o={};for(let a of i){let l,h=n[a],c=this.previousTargets[a];if(c&&c.target===h)l=c.component;else switch(a){case"row":case"group":(r.components.includes("row")||r.components.includes("cell")||r.components.includes("group"))&&(l=this.table.rowManager.getVisibleRows(!0).find(f=>f.getElement()===h),n.row&&n.row.parentNode&&n.row.parentNode.closest(".tabulator-row")&&(n[a]=!1));break;case"column":r.components.includes("column")&&(l=this.table.columnManager.findColumn(h));break;case"cell":r.components.includes("cell")&&(t.row instanceof et?l=t.row.findCell(h):n.row&&console.warn("Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?"));break}l&&(t[a]=l,o[a]={target:h,component:l})}return this.previousTargets=o,Object.keys(n).forEach(a=>{let l=t[a];s[a]=l}),s}triggerEvents(e,n,i){var r=this.listeners[e];for(let t in i)i[t]&&r.components.includes(t)&&this.dispatch(t+"-"+e,n,i[t])}clearWatchers(){for(let e in this.listeners){let n=this.listeners[e];n.handler&&(this.el.removeEventListener(e,n.handler),n.handler=null)}}}class Ff{constructor(e){this.table=e,this.bindings={}}bind(e,n,i){this.bindings[e]||(this.bindings[e]={}),this.bindings[e][n]?console.warn("Unable to bind component handler, a matching function name is already bound",e,n,i):this.bindings[e][n]=i}handle(e,n,i){if(this.bindings[e]&&this.bindings[e][i]&&typeof this.bindings[e][i].bind=="function")return this.bindings[e][i].bind(null,n);i!=="then"&&typeof i=="string"&&!i.startsWith("_")&&this.table.options.debugInvalidComponentFuncs&&console.error("The "+e+" component does not have a "+i+" function, have you checked that you have the correct Tabulator module installed?")}}class Bf extends qe{constructor(e){super(e),this.requestOrder=0,this.loading=!1}initialize(){}load(e,n,i,r,t,s){var o=++this.requestOrder;if(this.table.destroyed)return Promise.resolve();if(this.dispatchExternal("dataLoading",e),e&&(e.indexOf("{")==0||e.indexOf("[")==0)&&(e=JSON.parse(e)),this.confirm("data-loading",[e,n,i,t])){this.loading=!0,t||this.alertLoader(),n=this.chain("data-params",[e,i,t],n||{},n||{}),n=this.mapParams(n,this.table.options.dataSendParams);var a=this.chain("data-load",[e,n,i,t],!1,Promise.resolve([]));return a.then(l=>{if(this.table.destroyed)console.warn("Data Load Response Blocked - Table has been destroyed");else{!Array.isArray(l)&&typeof l=="object"&&(l=this.mapParams(l,this.objectInvert(this.table.options.dataReceiveParams)));var h=this.chain("data-loaded",[l],null,l);o==this.requestOrder?(this.clearAlert(),h!==!1&&(this.dispatchExternal("dataLoaded",h),this.table.rowManager.setData(h,r,typeof s>"u"?!r:s))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}}).catch(l=>{console.error("Data Load Error: ",l),this.dispatchExternal("dataLoadError",l),t||this.alertError(),setTimeout(()=>{this.clearAlert()},this.table.options.dataLoaderErrorTimeout)}).finally(()=>{this.loading=!1})}else return this.dispatchExternal("dataLoaded",e),e||(e=[]),this.table.rowManager.setData(e,r,typeof s>"u"?!r:s),Promise.resolve()}mapParams(e,n){var i={};for(let r in e)i[n.hasOwnProperty(r)?n[r]:r]=e[r];return i}objectInvert(e){var n={};for(let i in e)n[e[i]]=i;return n}blockActiveLoad(){this.requestOrder++}alertLoader(){var e=typeof this.table.options.dataLoader=="function"?this.table.options.dataLoader():this.table.options.dataLoader;e&&this.table.alertManager.alert(this.table.options.dataLoaderLoading||this.langText("data|loading"))}alertError(){this.table.alertManager.alert(this.table.options.dataLoaderError||this.langText("data|error"),"error")}clearAlert(){this.table.alertManager.clear()}}class Nf{constructor(e,n,i){this.table=e,this.events={},this.optionsList=n||{},this.subscriptionNotifiers={},this.dispatch=i?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=i}subscriptionChange(e,n){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(n),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n),this._notifySubscriptionChange(e,!0)}unsubscribe(e,n){var i;if(this.events[e])if(n)if(i=this.events[e].findIndex(r=>r===n),i>-1)this.events[e].splice(i,1);else{console.warn("Cannot remove event, no matching event found:",e,n);return}else delete this.events[e];else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_notifySubscriptionChange(e,n){var i=this.subscriptionNotifiers[e];i&&i.forEach(r=>{r(n)})}_dispatch(){var e=Array.from(arguments),n=e.shift(),i;return this.events[n]&&this.events[n].forEach((r,t)=>{let s=r.apply(this.table,e);t||(i=s)}),i}_debugDispatch(){var e=Array.from(arguments),n=e[0];return e[0]="ExternalEvent:"+e[0],(this.debug===!0||this.debug.includes(n))&&console.log(...e),this._dispatch(...arguments)}}class jf{constructor(e){this.events={},this.subscriptionNotifiers={},this.dispatch=e?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=e?this._debugChain.bind(this):this._chain.bind(this),this.confirm=e?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=e}subscriptionChange(e,n){this.subscriptionNotifiers[e]||(this.subscriptionNotifiers[e]=[]),this.subscriptionNotifiers[e].push(n),this.subscribed(e)&&this._notifySubscriptionChange(e,!0)}subscribe(e,n,i=1e4){this.events[e]||(this.events[e]=[]),this.events[e].push({callback:n,priority:i}),this.events[e].sort((r,t)=>r.priority-t.priority),this._notifySubscriptionChange(e,!0)}unsubscribe(e,n){var i;if(this.events[e]){if(n)if(i=this.events[e].findIndex(r=>r.callback===n),i>-1)this.events[e].splice(i,1);else{console.warn("Cannot remove event, no matching event found:",e,n);return}}else{console.warn("Cannot remove event, no events set on:",e);return}this._notifySubscriptionChange(e,!1)}subscribed(e){return this.events[e]&&this.events[e].length}_chain(e,n,i,r){var t=i;return Array.isArray(n)||(n=[n]),this.subscribed(e)?(this.events[e].forEach((s,o)=>{t=s.callback.apply(this,n.concat([t]))}),t):typeof r=="function"?r():r}_confirm(e,n){var i=!1;return Array.isArray(n)||(n=[n]),this.subscribed(e)&&this.events[e].forEach((r,t)=>{r.callback.apply(this,n)&&(i=!0)}),i}_notifySubscriptionChange(e,n){var i=this.subscriptionNotifiers[e];i&&i.forEach(r=>{r(n)})}_dispatch(){var e=Array.from(arguments),n=e.shift();this.events[n]&&this.events[n].forEach(i=>{i.callback.apply(this,e)})}_debugDispatch(){var e=Array.from(arguments),n=e[0];return e[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...e),this._dispatch(...arguments)}_debugChain(){var e=Array.from(arguments),n=e[0];return e[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...e),this._chain(...arguments)}_debugConfirm(){var e=Array.from(arguments),n=e[0];return e[0]="InternalEvent:"+n,(this.debug===!0||this.debug.includes(n))&&console.log(...e),this._confirm(...arguments)}}class Uf extends qe{constructor(e){super(e)}_warnUser(){this.options("debugDeprecation")&&console.warn(...arguments)}check(e,n,i){var r="";return typeof this.options(e)<"u"?(r="Deprecated Setup Option - Use of the %c"+e+"%c option is now deprecated",n?(r=r+", Please use the %c"+n+"%c option instead",this._warnUser(r,"font-weight: bold;","font-weight: normal;","font-weight: bold;","font-weight: normal;"),i&&(this.table.options[n]=this.table.options[e])):this._warnUser(r,"font-weight: bold;","font-weight: normal;"),!1):!0}checkMsg(e,n){return typeof this.options(e)<"u"?(this._warnUser("%cDeprecated Setup Option - Use of the %c"+e+" %c option is now deprecated, "+n,"font-weight: normal;","font-weight: bold;","font-weight: normal;"),!1):!0}msg(e){this._warnUser(e)}}class Wf extends qe{constructor(e){super(e),this.deps={},this.props={}}initialize(){this.deps=Object.assign({},this.options("dependencies"))}lookup(e,n,i){if(Array.isArray(e)){for(const t of e){var r=this.lookup(t,n,!0);if(r)break}if(r)return r;this.error(e)}else return n?this.lookupProp(e,n,i):this.lookupKey(e,i)}lookupProp(e,n,i){var r;if(this.props[e]&&this.props[e][n])return this.props[e][n];if(r=this.lookupKey(e,i),r)return this.props[e]||(this.props[e]={}),this.props[e][n]=r[n]||r,this.props[e][n]}lookupKey(e,n){var i;return this.deps[e]?i=this.deps[e]:window[e]?(this.deps[e]=window[e],i=this.deps[e]):n||this.error(e),i}error(e){console.error("Unable to find dependency",e,"Please check documentation and ensure you have imported the required library into your project")}}function zf(u,e){e&&this.table.columnManager.renderer.reinitializeColumnWidths(u),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function Ss(u,e){u.forEach(function(n){n.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function Hf(u,e){var n=0,i=this.table.rowManager.element.clientWidth,r=0,t=!1;u.forEach((s,o)=>{s.widthFixed||s.reinitializeWidth(),(this.table.options.responsiveLayout?s.modules.responsive.visible:s.visible)&&(t=s),s.visible&&(n+=s.getWidth())}),t?(r=i-n+t.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(t.setWidth(0),this.table.modules.responsiveLayout.update()),r>0?t.setWidth(r):t.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}function Kf(u,e){var n=this.table.rowManager.element.getBoundingClientRect().width,i=0,r=0,t=0,s=0,o=[],a=[],l=0,h=0,c=0;function d(m){var g;return typeof m=="string"?m.indexOf("%")>-1?g=n/100*parseInt(m):g=parseInt(m):g=m,g}function f(m,g,v,p){var E=[],w=0,O=0,T=0,S=t,M=0,P=0,y=[];function C(R){return v*(R.column.definition.widthGrow||1)}function b(R){return d(R.width)-v*(R.column.definition.widthShrink||0)}return m.forEach(function(R,D){var I=p?b(R):C(R);R.column.minWidth>=I?E.push(R):R.column.maxWidth&&R.column.maxWidth<I?(R.width=R.column.maxWidth,g-=R.column.maxWidth,S-=p?R.column.definition.widthShrink||1:R.column.definition.widthGrow||1,S&&(v=Math.floor(g/S))):(y.push(R),P+=p?R.column.definition.widthShrink||1:R.column.definition.widthGrow||1)}),E.length?(E.forEach(function(R){w+=p?R.width-R.column.minWidth:R.column.minWidth,R.width=R.column.minWidth}),O=g-w,T=P?Math.floor(O/P):O,M=f(y,O,T,p)):(M=P?g-Math.floor(g/P)*P:g,y.forEach(function(R){R.width=p?b(R):C(R)})),M}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(n-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),u.forEach(function(m){var g,v,p;m.visible&&(g=m.definition.width,v=parseInt(m.minWidth),g?(p=d(g),i+=p>v?p:v,m.definition.widthShrink&&(a.push({column:m,width:p>v?p:v}),l+=m.definition.widthShrink)):(o.push({column:m,width:0}),t+=m.definition.widthGrow||1))}),r=n-i,s=Math.floor(r/t),c=f(o,r,s,!1),o.length&&c>0&&(o[o.length-1].width+=c),o.forEach(function(m){r-=m.width}),h=Math.abs(c)+r,h>0&&l&&(c=f(a,h,Math.floor(h/l),!0)),c&&a.length&&(a[a.length-1].width-=c),o.forEach(function(m){m.column.setWidth(m.width)}),a.forEach(function(m){m.column.setWidth(m.width)})}var $f={fitData:zf,fitDataFill:Ss,fitDataTable:Ss,fitDataStretch:Hf,fitColumns:Kf};const yi=class yi extends Ce{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;yi.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode),this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){e.definition.widthGrow&&(e.definition.widthGrow=Number(e.definition.widthGrow)),e.definition.widthShrink&&(e.definition.widthShrink=Number(e.definition.widthShrink))}getMode(){return this.mode}layout(e){var n=this.table.columnManager.columnsByIndex.find(i=>i.definition.variableHeight||i.definition.formatter==="textarea");this.dispatch("layout-refreshing"),yi.modes[this.mode].call(this,this.table.columnManager.columnsByIndex,e),n&&this.table.rowManager.normalizeHeight(!0),this.dispatch("layout-refreshed")}};te(yi,"moduleName","layout"),te(yi,"modes",$f);let Fr=yi;var Gf={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All",counter:{showing:"Showing",of:"of",rows:"rows",pages:"pages"}},headerFilters:{default:"filter column...",columns:{}}}};const Wi=class Wi extends Ce{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Pe.deepClone(Wi.langs),this.table.options.columnDefaults.headerFilterPlaceholder!==!1&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}installLang(e,n){this.langList[e]?this._setLangProp(this.langList[e],n):this.langList[e]=n}_setLangProp(e,n){for(let i in n)e[i]&&typeof e[i]=="object"?this._setLangProp(e[i],n[i]):e[i]=n[i]}setLocale(e){e=e||"default";function n(i,r){for(var t in i)typeof i[t]=="object"?(r[t]||(r[t]={}),n(i[t],r[t])):r[t]=i[t]}if(e===!0&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let i=e.split("-")[0];this.langList[i]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,i),e=i):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=Pe.deepClone(this.langList.default||{}),e!="default"&&n(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,n){var i=n?e+"|"+n:e,r=i.split("|"),t=this._getLangElement(r,this.locale);return t||""}_getLangElement(e,n){var i=this.lang;return e.forEach(function(r){var t;i&&(t=i[r],typeof t<"u"?i=t:i=!1)}),i}bind(e,n){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(n),n(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(n=>{n(this.getText(e),this.lang)})}};te(Wi,"moduleName","localize"),te(Wi,"langs",Gf);let Br=Wi;class ra extends Ce{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var n=[],i;return i=this.table.constructor.registry.lookupTable(e),i.forEach(r=>{this.table!==r&&n.push(r)}),n}send(e,n,i,r){var t=this.getConnections(e);t.forEach(s=>{s.tableComms(this.table.element,n,i,r)}),!t.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,n,i,r){if(this.table.modExists(n))return this.table.modules[n].commsReceived(e,i,r);console.warn("Inter-table Comms Error - no such module:",n)}}te(ra,"moduleName","comms");var Vf=Object.freeze({__proto__:null,CommsModule:ra,LayoutModule:Fr,LocalizeModule:Br});const pt=class pt{static findTable(e){var n=pt.registry.lookupTable(e,!0);return Array.isArray(n)&&!n.length?!1:n}};te(pt,"registry",{tables:[],register(e){pt.registry.tables.push(e)},deregister(e){var n=pt.registry.tables.indexOf(e);n>-1&&pt.registry.tables.splice(n,1)},lookupTable(e,n){var i=[],r,t;if(typeof e=="string"){if(r=document.querySelectorAll(e),r.length)for(var s=0;s<r.length;s++)t=pt.registry.matchElement(r[s]),t&&i.push(t)}else typeof HTMLElement<"u"&&e instanceof HTMLElement||e instanceof pt?(t=pt.registry.matchElement(e),t&&i.push(t)):Array.isArray(e)?e.forEach(function(o){i=i.concat(pt.registry.lookupTable(o))}):n||console.warn("Table Connection Error - Invalid Selector",e);return i},matchElement(e){return pt.registry.tables.find(function(n){return e instanceof pt?n===e:n.element===e})}});let Nr=pt;const Se=class Se extends Nr{constructor(){super()}static initializeModuleBinder(e){Se.modulesRegistered||(Se.modulesRegistered=!0,Se._registerModules(Vf,!0),e&&Se._registerModules(e))}static _extendModule(e,n,i){if(Se.moduleBindings[e]){var r=Se.moduleBindings[e][n];if(r)if(typeof i=="object")for(let t in i)r[t]=i[t];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",n)}else console.warn("Module Error - module does not exist:",e)}static _registerModules(e,n){var i=Object.values(e);n&&i.forEach(r=>{r.prototype.moduleCore=!0}),Se._registerModule(i)}static _registerModule(e){Array.isArray(e)||(e=[e]),e.forEach(n=>{Se._registerModuleBinding(n),Se._registerModuleExtensions(n)})}static _registerModuleBinding(e){e.moduleName?Se.moduleBindings[e.moduleName]=e:console.error("Unable to bind module, no moduleName defined",e.moduleName)}static _registerModuleExtensions(e){var n=e.moduleExtensions;if(e.moduleExtensions)for(let i in n){let r=n[i];if(Se.moduleBindings[i])for(let t in r)Se._extendModule(i,t,r[t]);else{Se.moduleExtensions[i]||(Se.moduleExtensions[i]={});for(let t in r)Se.moduleExtensions[i][t]||(Se.moduleExtensions[i][t]={}),Object.assign(Se.moduleExtensions[i][t],r[t])}}Se._extendModuleFromQueue(e)}static _extendModuleFromQueue(e){var n=Se.moduleExtensions[e.moduleName];if(n)for(let i in n)Se._extendModule(e.moduleName,i,n[i])}_bindModules(){var e=[],n=[],i=[];this.modules={};for(var r in Se.moduleBindings){let t=Se.moduleBindings[r],s=new t(this);this.modules[r]=s,t.prototype.moduleCore?this.modulesCore.push(s):t.moduleInitOrder?t.moduleInitOrder<0?e.push(s):n.push(s):i.push(s)}e.sort((t,s)=>t.moduleInitOrder>s.moduleInitOrder?1:-1),n.sort((t,s)=>t.moduleInitOrder>s.moduleInitOrder?1:-1),this.modulesRegular=e.concat(i.concat(n))}};te(Se,"moduleBindings",{}),te(Se,"moduleExtensions",{}),te(Se,"modulesRegistered",!1),te(Se,"defaultModules",!1);let jr=Se;class kf extends qe{constructor(e){super(e),this.element=this._createAlertElement(),this.msgElement=this._createMsgElement(),this.type=null,this.element.appendChild(this.msgElement)}_createAlertElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert"),e}_createMsgElement(){var e=document.createElement("div");return e.classList.add("tabulator-alert-msg"),e.setAttribute("role","alert"),e}_typeClass(){return"tabulator-alert-state-"+this.type}alert(e,n="msg"){if(e){for(this.clear(),this.dispatch("alert-show",n),this.type=n;this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.add(this._typeClass()),typeof e=="function"&&(e=e()),e instanceof HTMLElement?this.msgElement.appendChild(e):this.msgElement.innerHTML=e,this.table.element.appendChild(this.element)}}clear(){this.dispatch("alert-hide",this.type),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.msgElement.classList.remove(this._typeClass())}}const Nt=class Nt extends jr{static extendModule(){Nt.initializeModuleBinder(),Nt._extendModule(...arguments)}static registerModule(){Nt.initializeModuleBinder(),Nt._registerModule(...arguments)}constructor(e,n,i){super(),Nt.initializeModuleBinder(i),this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.alertManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Ff(this),this.dataLoader=!1,this.modules={},this.modulesCore=[],this.modulesRegular=[],this.deprecationAdvisor=new Uf(this),this.optionsList=new na(this,"table constructor"),this.dependencyRegistry=new Wf(this),this.initialized=!1,this.destroyed=!1,this.initializeElement(e)&&(this.initializeCoreSystems(n),setTimeout(()=>{this._create()})),this.constructor.registry.register(this)}initializeElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement?(this.element=e,!0):typeof e=="string"?(this.element=document.querySelector(e),this.element?!0:(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initializeCoreSystems(e){this.columnManager=new Pf(this),this.rowManager=new Lf(this),this.footerManager=new Af(this),this.dataLoader=new Bf(this),this.alertManager=new kf(this),this._bindModules(),this.options=this.optionsList.generate(Nt.defaultOptions,e),this._clearObjectPointers(),this._mapDeprecatedFunctionality(),this.externalEvents=new Nf(this,this.options,this.options.debugEventsExternal),this.eventBus=new jf(this.options.debugEventsInternal),this.interactionMonitor=new If(this),this.dataLoader.initialize(),this.footerManager.initialize(),this.dependencyRegistry.initialize()}_mapDeprecatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this.initialized=!0,this._loadInitialData().finally(()=>{this.eventBus.dispatch("table-initialized"),this.externalEvents.dispatch("tableBuilt")})}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if(e.direction!=="rtl")break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),Array.isArray(this.options.data)&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var e=this.element,n=this.options,i;if(e.tagName==="TABLE"){this.originalElement=this.element,i=document.createElement("div");var r=e.attributes;for(var t in r)typeof r[t]=="object"&&i.setAttribute(r[t].name,r[t].value);e.parentNode.replaceChild(i,e),this.element=e=i}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",e.style.height=n.height),n.minHeight!==!1&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",e.style.minHeight=n.minHeight),n.maxHeight!==!1&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",e.style.maxHeight=n.maxHeight)}_initializeTable(){var e=this.element,n=this.options;this.interactionMonitor.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modulesCore.forEach(i=>{i.initialize()}),e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),n.footerElement&&this.footerManager.activate(),n.autoColumns&&n.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modulesRegular.forEach(i=>{i.initialize()}),this.columnManager.setColumns(n.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){return this.dataLoader.load(this.options.data).finally(()=>{this.columnManager.verticalAlignHeaders()})}destroy(){var e=this.element;for(this.destroyed=!0,this.constructor.registry.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.destroy();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator"),this.externalEvents.dispatch("tableDestroyed")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):e.indexOf("Mac OS")>-1?(this.browser="safari",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.slice(0,4))}initGuard(e,n){var i,r;return this.options.debugInitialization&&!this.initialized&&(e||(i=new Error().stack.split(`
`),r=i[0]=="Error"?i[2]:i[1],r[0]==" "?e=r.trim().split(" ")[1].split(".")[1]:e=r.trim().split("@")[0]),console.warn("Table Not Initialized - Calling the "+e+" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function."+(n?" "+n:""))),this.initialized}blockRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-blocking"),this.rowManager.blockRedraw(),this.columnManager.blockRedraw(),this.eventBus.dispatch("redraw-blocked")}restoreRedraw(){this.initGuard(),this.eventBus.dispatch("redraw-restoring"),this.rowManager.restoreRedraw(),this.columnManager.restoreRedraw(),this.eventBus.dispatch("redraw-restored")}setData(e,n,i){return this.initGuard(!1,"To set initial data please use the 'data' property in the table constructor."),this.dataLoader.load(e,n,i,!1)}clearData(){this.initGuard(),this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,n,i){return this.initGuard(),this.dataLoader.load(e,n,i,!0,!0)}updateData(e){var n=0;return this.initGuard(),new Promise((i,r)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(t=>{var s=this.rowManager.findRow(t[this.options.index]);s?(n++,s.updateData(t).then(()=>{n--,n||i()}).catch(o=>{r("Update Error - Unable to update row",t,o)})):r("Update Error - Unable to find row",t)}):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))})}addData(e,n,i){return this.initGuard(),new Promise((r,t)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,n,i).then(s=>{var o=[];s.forEach(function(a){o.push(a.getComponent())}),r(o)}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})}updateOrAddData(e){var n=[],i=0;return this.initGuard(),new Promise((r,t)=>{this.dataLoader.blockActiveLoad(),typeof e=="string"&&(e=JSON.parse(e)),e&&e.length>0?e.forEach(s=>{var o=this.rowManager.findRow(s[this.options.index]);i++,o?o.updateData(s).then(()=>{i--,n.push(o.getComponent()),i||r(n)}):this.rowManager.addRows(s).then(a=>{i--,n.push(a[0].getComponent()),i||r(n)})}):(console.warn("Update Error - No data provided"),t("Update Error - No data provided"))})}getRow(e){var n=this.rowManager.findRow(e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e){var n=this.rowManager.getRowFromPosition(e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var n=[];this.initGuard(),Array.isArray(e)||(e=[e]);for(let i of e){let r=this.rowManager.findRow(i,!0);if(r)n.push(r);else return console.error("Delete Error - No matching row found:",i),Promise.reject("Delete Error - No matching row found")}return n.sort((i,r)=>this.rowManager.rows.indexOf(i)>this.rowManager.rows.indexOf(r)?1:-1),n.forEach(i=>{i.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,n,i){return this.initGuard(),typeof e=="string"&&(e=JSON.parse(e)),this.rowManager.addRows(e,n,i,!0).then(r=>r[0].getComponent())}updateOrAddRow(e,n){var i=this.rowManager.findRow(e);return this.initGuard(),typeof n=="string"&&(n=JSON.parse(n)),i?i.updateData(n).then(()=>i.getComponent()):this.rowManager.addRows(n).then(r=>r[0].getComponent())}updateRow(e,n){var i=this.rowManager.findRow(e);return this.initGuard(),typeof n=="string"&&(n=JSON.parse(n)),i?i.updateData(n).then(()=>Promise.resolve(i.getComponent())):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,n,i){var r=this.rowManager.findRow(e);return r?this.rowManager.scrollToRow(r,n,i):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,n,i){var r=this.rowManager.findRow(e);this.initGuard(),r?r.moveToRow(n,i):console.warn("Move Error - No matching row found:",e)}getRows(e){return this.rowManager.getComponents(e)}getRowPosition(e){var n=this.rowManager.findRow(e);return n?n.getPosition():(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initGuard(!1,"To set initial columns please use the 'columns' property in the table constructor"),this.columnManager.setColumns(e)}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var n=this.columnManager.findColumn(e);return n?n.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.show();else return console.warn("Column Show Error - No matching column found:",e),!1}hideColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.hide();else return console.warn("Column Hide Error - No matching column found:",e),!1}toggleColumn(e){var n=this.columnManager.findColumn(e);if(this.initGuard(),n)n.visible?n.hide():n.show();else return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1}addColumn(e,n,i){var r=this.columnManager.findColumn(i);return this.initGuard(),this.columnManager.addColumn(e,n,r).then(t=>t.getComponent())}deleteColumn(e){var n=this.columnManager.findColumn(e);return this.initGuard(),n?n.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,n){var i=this.columnManager.findColumn(e);return this.initGuard(),i?i.updateDefinition(n):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,n,i){var r=this.columnManager.findColumn(e),t=this.columnManager.findColumn(n);this.initGuard(),r?t?this.columnManager.moveColumn(r,t,i):console.warn("Move Error - No matching column found:",t):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,n,i){return new Promise((r,t)=>{var s=this.columnManager.findColumn(e);return s?this.columnManager.scrollToColumn(s,n,i):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initGuard(),this.columnManager.redraw(e),this.rowManager.redraw(e)}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw(!0)}on(e,n){this.externalEvents.subscribe(e,n)}off(e,n){this.externalEvents.unsubscribe(e,n)}dispatchEvent(){var e=Array.from(arguments);e.shift(),this.externalEvents.dispatch(...arguments)}alert(e,n){this.initGuard(),this.alertManager.alert(e,n)}clearAlert(){this.initGuard(),this.alertManager.clear()}modExists(e,n){return this.modules[e]?!0:(n&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var n=this.modules[e];return n||console.error("Tabulator module not installed: "+e),n}};te(Nt,"defaultOptions",Tf);let Ur=Nt;var Di=Ur;class Jf extends Di{static extendModule(){Di.initializeModuleBinder(Jn),Di._extendModule(...arguments)}static registerModule(){Di.initializeModuleBinder(Jn),Di._registerModule(...arguments)}constructor(e,n,i){super(e,n,Jn)}}var Qf=Jf,un={exports:{}},Xf=un.exports,Ps;function Yf(){return Ps||(Ps=1,function(u,e){var n={};(function(r,t){u.exports=t()})(typeof self<"u"?self:Xf,function(){return function(i){var r={};function t(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return i[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=i,t.c=r,t.d=function(s,o,a){t.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},t.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(o,"a",o),o},t.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},t.p="",t(t.s=245)}([function(i,r,t){var s=t(9),o=t(71),a=t(4),l=t(8),h=t(73).f,c=t(148),d=t(15),f=t(58),m=t(39),g=t(13),v=function(p){var E=function(w,O,T){if(this instanceof E){switch(arguments.length){case 0:return new p;case 1:return new p(w);case 2:return new p(w,O)}return new p(w,O,T)}return o(p,this,arguments)};return E.prototype=p.prototype,E};i.exports=function(p,E){var w=p.target,O=p.global,T=p.stat,S=p.proto,M=O?s:T?s[w]:(s[w]||{}).prototype,P=O?d:d[w]||m(d,w,{})[w],y=P.prototype,C,b,R,D,I,x,A,N,F;for(D in E)C=c(O?D:w+(T?".":"#")+D,p.forced),b=!C&&M&&g(M,D),x=P[D],b&&(p.dontCallGetSet?(F=h(M,D),A=F&&F.value):A=M[D]),I=b&&A?A:E[D],!(b&&typeof x==typeof I)&&(p.bind&&b?N=f(I,s):p.wrap&&b?N=v(I):S&&l(I)?N=a(I):N=I,(p.sham||I&&I.sham||x&&x.sham)&&m(N,"sham",!0),m(P,D,N),S&&(R=w+"Prototype",g(d,R)||m(d,R,{}),m(d[R],D,I),p.real&&y&&!y[D]&&m(y,D,I)))}},function(i,r){function t(s){return s&&s.__esModule?s:{default:s}}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){Object.defineProperty(r,"__esModule",{value:!0});var s=t(288);t.d(r,"default",function(){return s.a});var o=t(124);t.d(r,"VERSION",function(){return o.VERSION}),t.d(r,"restArguments",function(){return o.restArguments}),t.d(r,"isObject",function(){return o.isObject}),t.d(r,"isNull",function(){return o.isNull}),t.d(r,"isUndefined",function(){return o.isUndefined}),t.d(r,"isBoolean",function(){return o.isBoolean}),t.d(r,"isElement",function(){return o.isElement}),t.d(r,"isString",function(){return o.isString}),t.d(r,"isNumber",function(){return o.isNumber}),t.d(r,"isDate",function(){return o.isDate}),t.d(r,"isRegExp",function(){return o.isRegExp}),t.d(r,"isError",function(){return o.isError}),t.d(r,"isSymbol",function(){return o.isSymbol}),t.d(r,"isArrayBuffer",function(){return o.isArrayBuffer}),t.d(r,"isDataView",function(){return o.isDataView}),t.d(r,"isArray",function(){return o.isArray}),t.d(r,"isFunction",function(){return o.isFunction}),t.d(r,"isArguments",function(){return o.isArguments}),t.d(r,"isFinite",function(){return o.isFinite}),t.d(r,"isNaN",function(){return o.isNaN}),t.d(r,"isTypedArray",function(){return o.isTypedArray}),t.d(r,"isEmpty",function(){return o.isEmpty}),t.d(r,"isMatch",function(){return o.isMatch}),t.d(r,"isEqual",function(){return o.isEqual}),t.d(r,"isMap",function(){return o.isMap}),t.d(r,"isWeakMap",function(){return o.isWeakMap}),t.d(r,"isSet",function(){return o.isSet}),t.d(r,"isWeakSet",function(){return o.isWeakSet}),t.d(r,"keys",function(){return o.keys}),t.d(r,"allKeys",function(){return o.allKeys}),t.d(r,"values",function(){return o.values}),t.d(r,"pairs",function(){return o.pairs}),t.d(r,"invert",function(){return o.invert}),t.d(r,"functions",function(){return o.functions}),t.d(r,"methods",function(){return o.methods}),t.d(r,"extend",function(){return o.extend}),t.d(r,"extendOwn",function(){return o.extendOwn}),t.d(r,"assign",function(){return o.assign}),t.d(r,"defaults",function(){return o.defaults}),t.d(r,"create",function(){return o.create}),t.d(r,"clone",function(){return o.clone}),t.d(r,"tap",function(){return o.tap}),t.d(r,"get",function(){return o.get}),t.d(r,"has",function(){return o.has}),t.d(r,"mapObject",function(){return o.mapObject}),t.d(r,"identity",function(){return o.identity}),t.d(r,"constant",function(){return o.constant}),t.d(r,"noop",function(){return o.noop}),t.d(r,"toPath",function(){return o.toPath}),t.d(r,"property",function(){return o.property}),t.d(r,"propertyOf",function(){return o.propertyOf}),t.d(r,"matcher",function(){return o.matcher}),t.d(r,"matches",function(){return o.matches}),t.d(r,"times",function(){return o.times}),t.d(r,"random",function(){return o.random}),t.d(r,"now",function(){return o.now}),t.d(r,"escape",function(){return o.escape}),t.d(r,"unescape",function(){return o.unescape}),t.d(r,"templateSettings",function(){return o.templateSettings}),t.d(r,"template",function(){return o.template}),t.d(r,"result",function(){return o.result}),t.d(r,"uniqueId",function(){return o.uniqueId}),t.d(r,"chain",function(){return o.chain}),t.d(r,"iteratee",function(){return o.iteratee}),t.d(r,"partial",function(){return o.partial}),t.d(r,"bind",function(){return o.bind}),t.d(r,"bindAll",function(){return o.bindAll}),t.d(r,"memoize",function(){return o.memoize}),t.d(r,"delay",function(){return o.delay}),t.d(r,"defer",function(){return o.defer}),t.d(r,"throttle",function(){return o.throttle}),t.d(r,"debounce",function(){return o.debounce}),t.d(r,"wrap",function(){return o.wrap}),t.d(r,"negate",function(){return o.negate}),t.d(r,"compose",function(){return o.compose}),t.d(r,"after",function(){return o.after}),t.d(r,"before",function(){return o.before}),t.d(r,"once",function(){return o.once}),t.d(r,"findKey",function(){return o.findKey}),t.d(r,"findIndex",function(){return o.findIndex}),t.d(r,"findLastIndex",function(){return o.findLastIndex}),t.d(r,"sortedIndex",function(){return o.sortedIndex}),t.d(r,"indexOf",function(){return o.indexOf}),t.d(r,"lastIndexOf",function(){return o.lastIndexOf}),t.d(r,"find",function(){return o.find}),t.d(r,"detect",function(){return o.detect}),t.d(r,"findWhere",function(){return o.findWhere}),t.d(r,"each",function(){return o.each}),t.d(r,"forEach",function(){return o.forEach}),t.d(r,"map",function(){return o.map}),t.d(r,"collect",function(){return o.collect}),t.d(r,"reduce",function(){return o.reduce}),t.d(r,"foldl",function(){return o.foldl}),t.d(r,"inject",function(){return o.inject}),t.d(r,"reduceRight",function(){return o.reduceRight}),t.d(r,"foldr",function(){return o.foldr}),t.d(r,"filter",function(){return o.filter}),t.d(r,"select",function(){return o.select}),t.d(r,"reject",function(){return o.reject}),t.d(r,"every",function(){return o.every}),t.d(r,"all",function(){return o.all}),t.d(r,"some",function(){return o.some}),t.d(r,"any",function(){return o.any}),t.d(r,"contains",function(){return o.contains}),t.d(r,"includes",function(){return o.includes}),t.d(r,"include",function(){return o.include}),t.d(r,"invoke",function(){return o.invoke}),t.d(r,"pluck",function(){return o.pluck}),t.d(r,"where",function(){return o.where}),t.d(r,"max",function(){return o.max}),t.d(r,"min",function(){return o.min}),t.d(r,"shuffle",function(){return o.shuffle}),t.d(r,"sample",function(){return o.sample}),t.d(r,"sortBy",function(){return o.sortBy}),t.d(r,"groupBy",function(){return o.groupBy}),t.d(r,"indexBy",function(){return o.indexBy}),t.d(r,"countBy",function(){return o.countBy}),t.d(r,"partition",function(){return o.partition}),t.d(r,"toArray",function(){return o.toArray}),t.d(r,"size",function(){return o.size}),t.d(r,"pick",function(){return o.pick}),t.d(r,"omit",function(){return o.omit}),t.d(r,"first",function(){return o.first}),t.d(r,"head",function(){return o.head}),t.d(r,"take",function(){return o.take}),t.d(r,"initial",function(){return o.initial}),t.d(r,"last",function(){return o.last}),t.d(r,"rest",function(){return o.rest}),t.d(r,"tail",function(){return o.tail}),t.d(r,"drop",function(){return o.drop}),t.d(r,"compact",function(){return o.compact}),t.d(r,"flatten",function(){return o.flatten}),t.d(r,"without",function(){return o.without}),t.d(r,"uniq",function(){return o.uniq}),t.d(r,"unique",function(){return o.unique}),t.d(r,"union",function(){return o.union}),t.d(r,"intersection",function(){return o.intersection}),t.d(r,"difference",function(){return o.difference}),t.d(r,"unzip",function(){return o.unzip}),t.d(r,"transpose",function(){return o.transpose}),t.d(r,"zip",function(){return o.zip}),t.d(r,"object",function(){return o.object}),t.d(r,"range",function(){return o.range}),t.d(r,"chunk",function(){return o.chunk}),t.d(r,"mixin",function(){return o.mixin})},function(i,r){i.exports=function(t){try{return!!t()}catch{return!0}}},function(i,r,t){var s=t(72),o=Function.prototype,a=o.bind,l=o.call,h=s&&a.bind(l,l);i.exports=s?function(c){return c&&h(c)}:function(c){return c&&function(){return l.apply(c,arguments)}}},function(i,r,t){var s=t(9),o=t(75),a=t(13),l=t(112),h=t(55),c=t(146),d=o("wks"),f=s.Symbol,m=f&&f.for,g=c?f:f&&f.withoutSetter||l;i.exports=function(v){if(!a(d,v)||!(h||typeof d[v]=="string")){var p="Symbol."+v;h&&a(f,v)?d[v]=f[v]:c&&m?d[v]=m(p):d[v]=g(p)}return d[v]}},function(i,r,t){(function(s){t.d(r,"e",function(){return o}),t.d(r,"p",function(){return a}),t.d(r,"a",function(){return l}),t.d(r,"c",function(){return h}),t.d(r,"d",function(){return c}),t.d(r,"o",function(){return d}),t.d(r,"q",function(){return f}),t.d(r,"t",function(){return m}),t.d(r,"i",function(){return g}),t.d(r,"r",function(){return v}),t.d(r,"s",function(){return p}),t.d(r,"k",function(){return E}),t.d(r,"m",function(){return w}),t.d(r,"j",function(){return O}),t.d(r,"l",function(){return T}),t.d(r,"g",function(){return S}),t.d(r,"f",function(){return M}),t.d(r,"h",function(){return P}),t.d(r,"n",function(){return y}),t.d(r,"b",function(){return C});var o="1.12.1",a=typeof self=="object"&&self.self===self&&self||typeof s=="object"&&s.global===s&&s||Function("return this")()||{},l=Array.prototype,h=Object.prototype,c=typeof Symbol<"u"?Symbol.prototype:null,d=l.push,f=l.slice,m=h.toString,g=h.hasOwnProperty,v=typeof ArrayBuffer<"u",p=typeof DataView<"u",E=Array.isArray,w=Object.keys,O=Object.create,T=v&&ArrayBuffer.isView,S=isNaN,M=isFinite,P=!{toString:null}.propertyIsEnumerable("toString"),y=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],C=Math.pow(2,53)-1}).call(r,t(108))},function(i,r,t){var s=t(15),o=t(13),a=t(142),l=t(34).f;i.exports=function(h){var c=s.Symbol||(s.Symbol={});o(c,h)||l(c,h,{value:a.f(h)})}},function(i,r){i.exports=function(t){return typeof t=="function"}},function(i,r,t){(function(s){var o=function(a){return a&&a.Math==Math&&a};i.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(r,t(108))},function(i,r,t){i.exports=t(248)},function(i,r,t){var s=t(72),o=Function.prototype.call;i.exports=s?o.bind(o):function(){return o.apply(o,arguments)}},function(i,r,t){var s=t(4);i.exports=s({}.isPrototypeOf)},function(i,r,t){var s=t(4),o=t(33),a=s({}.hasOwnProperty);i.exports=Object.hasOwn||function(h,c){return a(o(h),c)}},function(i,r,t){r.a=h;var s=t(50),o=t(6),a=t(41),l=t(177);function h(c){if(!Object(s.a)(c))return[];if(o.m)return Object(o.m)(c);var d=[];for(var f in c)Object(a.a)(c,f)&&d.push(f);return o.h&&Object(l.a)(c,d),d}},function(i,r){i.exports={}},function(i,r,t){r.a=o;var s=t(6);function o(a){var l="[object "+a+"]";return function(h){return s.t.call(h)===l}}},function(i,r,t){var s=t(8);i.exports=function(o){return typeof o=="object"?o!==null:s(o)}},function(i,r,t){var s=t(15),o=t(9),a=t(8),l=function(h){return a(h)?h:void 0};i.exports=function(h,c){return arguments.length<2?l(s[h])||l(o[h]):s[h]&&s[h][c]||o[h]&&o[h][c]}},function(i,r,t){r.a=l;var s=t(23),o=t(187),a=t(188);function l(h,c,d){return s.a.iteratee!==a.a?s.a.iteratee(h,c):Object(o.a)(h,c,d)}},function(i,r,t){var s=t(3);i.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(i,r,t){var s=t(17),o=String,a=TypeError;i.exports=function(l){if(s(l))return l;throw a(o(l)+" is not an object")}},function(i,r,t){r.a=s;function s(o,a){return a=a==null?o.length-1:+a,function(){for(var l=Math.max(arguments.length-a,0),h=Array(l),c=0;c<l;c++)h[c]=arguments[c+a];switch(a){case 0:return o.call(this,h);case 1:return o.call(this,arguments[0],h);case 2:return o.call(this,arguments[0],arguments[1],h)}var d=Array(a+1);for(c=0;c<a;c++)d[c]=arguments[c];return d[a]=h,o.apply(this,d)}}},function(i,r,t){r.a=o;var s=t(6);function o(a){if(a instanceof o)return a;if(!(this instanceof o))return new o(a);this._wrapped=a}o.VERSION=s.e,o.prototype.value=function(){return this._wrapped},o.prototype.valueOf=o.prototype.toJSON=o.prototype.value,o.prototype.toString=function(){return String(this._wrapped)}},function(i,r,t){var s=t(175),o=t(30);r.a=Object(s.a)(o.a)},function(i,r,t){i.exports=t(360)},function(i,r,t){var s=t(15);i.exports=function(o){return s[o+"Prototype"]}},function(i,r,t){var s=t(1),o=s(t(25)),a=s(t(10)),l=t(2),h=t(500),c=t(2),d=c.extend,f=t(67),m=t(43),g=t(31),v=g.getSessionToken,p=t(106),E=function(y,C){var b,R=new Date().getTime(),D=h(R+y);if(C){var I;return(0,o.default)(I="".concat(D,",")).call(I,R,",master")}return(0,o.default)(b="".concat(D,",")).call(b,R)},w=function(y,C){C?y["X-LC-Sign"]=E(f.applicationKey):y["X-LC-Key"]=f.applicationKey},O=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=arguments.length>1?arguments[1]:void 0,b={"X-LC-Id":f.applicationId,"Content-Type":"application/json;charset=UTF-8"},R=!1;return typeof y.useMasterKey=="boolean"?R=y.useMasterKey:typeof f._config.useMasterKey=="boolean"&&(R=f._config.useMasterKey),R?f.masterKey?C?b["X-LC-Sign"]=E(f.masterKey,!0):b["X-LC-Key"]="".concat(f.masterKey,",master"):(console.warn("masterKey is not set, fall back to use appKey"),w(b,C)):w(b,C),f.hookKey&&(b["X-LC-Hook-Key"]=f.hookKey),f._config.production!==null&&(b["X-LC-Prod"]=String(f._config.production)),b["X-LC-UA"]=f._sharedConfig.userAgent,a.default.resolve().then(function(){var D=v(y);if(D)b["X-LC-Session"]=D;else if(!f._config.disableCurrentUser)return f.User.currentAsync().then(function(I){return I&&I._sessionToken&&(b["X-LC-Session"]=I._sessionToken),b});return b})},T=function(y){var C=y.service,b=C===void 0?"api":C,R=y.version,D=R===void 0?"1.1":R,I=y.path,x=f._config.serverURLs[b];if(!x)throw new Error("undefined server URL for ".concat(b));return x.charAt(x.length-1)!=="/"&&(x+="/"),x+=D,I&&(x+=I),x},S=function(y){var C=y.service,b=y.version,R=y.method,D=y.path,I=y.query,x=y.data,A=y.authOptions,N=y.signKey,F=N===void 0?!0:N;if(!(f.applicationId&&(f.applicationKey||f.masterKey)))throw new Error("Not initialized");f._appRouter&&f._appRouter.refresh();var B=f._config.requestTimeout,L=T({service:C,path:D,version:b});return O(A,F).then(function(W){return p({method:R,url:L,query:I,data:x,headers:W,timeout:B}).catch(function(z){var j={code:z.code||-1,error:z.message||z.responseText};if(z.response&&z.response.code)j=z.response;else if(z.responseText)try{j=JSON.parse(z.responseText)}catch{}if(j.rawMessage=j.rawMessage||j.error,!f._sharedConfig.keepErrorRawMessage){var H,K;j.error+=(0,o.default)(H=(0,o.default)(K=" [".concat(z.statusCode||"N/A"," ")).call(K,R," ")).call(H,L,"]")}var Z=new m(j.code,j.error);throw delete j.error,l.extend(Z,j)})})},M=function(y,C,b,R,D,I,x){var A="";if(y&&(A+="/".concat(y)),C&&(A+="/".concat(C)),b&&(A+="/".concat(b)),D&&D._fetchWhenSave)throw new Error("_fetchWhenSave should be in the query");if(D&&D._where)throw new Error("_where should be in the query");return R&&R.toLowerCase()==="get"&&(x=d({},x,D),D=null),S({method:R,path:A,query:x,data:D,authOptions:I})};f.request=S,i.exports={_request:M,request:S}},function(i,r,t){var s=t(8),o=t(57),a=TypeError;i.exports=function(l){if(s(l))return l;throw a(o(l)+" is not a function")}},function(i,r,t){var s=t(16),o=t(6),a=Object(s.a)("Function"),l=o.p.document&&o.p.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof l!="function"&&(a=function(h){return typeof h=="function"||!1}),r.a=a},function(i,r,t){var s=t(176);r.a=Object(s.a)("length")},function(i,r,t){var s=t(1),o=s(t(53)),a=s(t(220)),l=s(t(10)),h=t(2),c=function(P){return h.isNull(P)||h.isUndefined(P)},d=function(P){return h.isArray(P)?P:P==null?[]:[P]},f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=(0,o.default)(P),C=P.include,b=P.includeACL,R={};return y&&(R.keys=d(y).join(",")),C&&(R.include=d(C).join(",")),b&&(R.returnACL=b),R},m=function(P){if(P.sessionToken)return P.sessionToken;if(P.user&&typeof P.user.getSessionToken=="function")return P.user.getSessionToken()},g=function(P){return function(y){return P(y),y}},v=function(){},p=function(P,y,C){var b;return y&&y.hasOwnProperty("constructor")?b=y.constructor:b=function(){P.apply(this,arguments)},h.extend(b,P),v.prototype=P.prototype,b.prototype=new v,y&&h.extend(b.prototype,y),C&&h.extend(b,C),b.prototype.constructor=b,b.__super__=P.prototype,b},E=typeof wx>"u"?function(M){return new Date(M)}:function(M){return new Date(Date.parse(M))},w=function(P,y,C){var b=y.split("."),R=b.pop(),D=P;return b.forEach(function(I){D[I]===void 0&&(D[I]={}),D=D[I]}),D[R]=C,P},O=function(P,y){for(var C=y.split("."),b=C[0],R=C.pop(),D=P,I=0;I<C.length;I++)if(D=D[C[I]],D===void 0)return[void 0,void 0,R];var x=D[R];return[x,D,R,b]},T=function(P){return h.isObject(P)&&(0,a.default)(P)===Object.prototype},S=function M(P,y){return P()?y().then(function(){return M(P,y)}):l.default.resolve()};i.exports={isNullOrUndefined:c,ensureArray:d,transformFetchOptions:f,getSessionToken:m,tap:g,inherits:p,parseDate:E,setValue:w,findValue:O,isPlainObject:T,continueWhile:S}},function(i,r){i.exports=!0},function(i,r,t){var s=t(74),o=Object;i.exports=function(a){return o(s(a))}},function(i,r,t){var s=t(20),o=t(147),a=t(149),l=t(21),h=t(88),c=TypeError,d=Object.defineProperty,f=Object.getOwnPropertyDescriptor,m="enumerable",g="configurable",v="writable";r.f=s?a?function(E,w,O){if(l(E),w=h(w),l(O),typeof E=="function"&&w==="prototype"&&"value"in O&&v in O&&!O[v]){var T=f(E,w);T&&T[v]&&(E[w]=O.value,O={configurable:g in O?O[g]:T[g],enumerable:m in O?O[m]:T[m],writable:!1})}return d(E,w,O)}:d:function(E,w,O){if(l(E),w=h(w),l(O),o)try{return d(E,w,O)}catch{}if("get"in O||"set"in O)throw c("Accessors not supported");return"value"in O&&(E[w]=O.value),E}},function(i,r,t){var s=t(109),o=t(74);i.exports=function(a){return s(o(a))}},function(i,r,t){var s=t(259);i.exports=function(o){return s(o.length)}},function(i,r,t){i.exports=t(372)},function(i,r,t){i.exports=t(227)},function(i,r,t){var s=t(20),o=t(34),a=t(44);i.exports=s?function(l,h,c){return o.f(l,h,a(1,c))}:function(l,h,c){return l[h]=c,l}},function(i,r,t){var s=t(47),o=String;i.exports=function(a){if(s(a)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return o(a)}},function(i,r,t){r.a=o;var s=t(6);function o(a,l){return a!=null&&s.i.call(a,l)}},function(i,r,t){i.exports=t(365)},function(i,r,t){var s=t(1),o=s(t(387)),a=s(t(220)),l=t(2);function h(c,d){if(this instanceof h&&this.constructor){var f=new Error(d);return(0,o.default)(f,(0,a.default)(this)),f.code=c,f}return new h(c,d)}h.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),(0,o.default)(h,Error),l.extend(h,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,MISSING_CONTENT_TYPE:126,MISSING_CONTENT_LENGTH:127,INVALID_CONTENT_LENGTH:128,FILE_TOO_LARGE:129,FILE_SAVE_ERROR:130,FILE_DELETE_ERROR:153,DUPLICATE_VALUE:137,INVALID_ROLE_NAME:139,EXCEEDED_QUOTA:140,SCRIPT_FAILED:141,VALIDATION_ERROR:142,INVALID_IMAGE_DATA:150,UNSAVED_FILE_ERROR:151,INVALID_PUSH_TIME_ERROR:152,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252,X_DOMAIN_REQUEST:602}),i.exports=h},function(i,r){i.exports=function(t,s){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:s}}},function(i,r,t){var s=t(18);i.exports=s("navigator","userAgent")||""},function(i,r){i.exports={}},function(i,r,t){var s=t(121),o=t(8),a=t(54),l=t(5),h=l("toStringTag"),c=Object,d=a(function(){return arguments}())=="Arguments",f=function(m,g){try{return m[g]}catch{}};i.exports=s?a:function(m){var g,v,p;return m===void 0?"Undefined":m===null?"Null":typeof(v=f(g=c(m),h))=="string"?v:d?a(g):(p=a(g))=="Object"&&o(g.callee)?"Arguments":p}},function(i,r,t){var s=t(39);i.exports=function(o,a,l,h){return h&&h.enumerable?o[a]=l:s(o,a,l),o}},function(i,r,t){var s=t(28),o=function(a){var l,h;this.promise=new a(function(c,d){if(l!==void 0||h!==void 0)throw TypeError("Bad Promise constructor");l=c,h=d}),this.resolve=s(l),this.reject=s(h)};i.exports.f=function(a){return new o(a)}},function(i,r,t){r.a=s;function s(o){var a=typeof o;return a==="function"||a==="object"&&!!o}},function(i,r,t){var s=t(6),o=t(16);r.a=s.k||Object(o.a)("Array")},function(i,r,t){r.a=l;var s=t(83),o=t(24),a=t(14);function l(h,c,d){c=Object(s.a)(c,d);var f,m;if(Object(o.a)(h))for(f=0,m=h.length;f<m;f++)c(h[f],f,h);else{var g=Object(a.a)(h);for(f=0,m=g.length;f<m;f++)c(h[g[f]],g[f],h)}return h}},function(i,r,t){i.exports=t(378)},function(i,r,t){var s=t(4),o=s({}.toString),a=s("".slice);i.exports=function(l){return a(o(l),8,-1)}},function(i,r,t){var s=t(56),o=t(3);i.exports=!!Object.getOwnPropertySymbols&&!o(function(){var a=Symbol();return!String(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(i,r,t){var s=t(9),o=t(45),a=s.process,l=s.Deno,h=a&&a.versions||l&&l.version,c=h&&h.v8,d,f;c&&(d=c.split("."),f=d[0]>0&&d[0]<4?1:+(d[0]+d[1])),!f&&o&&(d=o.match(/Edge\/(\d+)/),(!d||d[1]>=74)&&(d=o.match(/Chrome\/(\d+)/),d&&(f=+d[1]))),i.exports=f},function(i,r){var t=String;i.exports=function(s){try{return t(s)}catch{return"Object"}}},function(i,r,t){var s=t(4),o=t(28),a=t(72),l=s(s.bind);i.exports=function(h,c){return o(h),c===void 0?h:a?l(h,c):function(){return h.apply(c,arguments)}}},function(i,r,t){var s=t(21),o=t(152),a=t(118),l=t(93),h=t(153),c=t(113),d=t(91),f=">",m="<",g="prototype",v="script",p=d("IE_PROTO"),E=function(){},w=function(P){return m+v+f+P+m+"/"+v+f},O=function(P){P.write(w("")),P.close();var y=P.parentWindow.Object;return P=null,y},T=function(){var P=c("iframe"),y="java"+v+":",C;return P.style.display="none",h.appendChild(P),P.src=String(y),C=P.contentWindow.document,C.open(),C.write(w("document.F=Object")),C.close(),C.F},S,M=function(){try{S=new ActiveXObject("htmlfile")}catch{}M=typeof document<"u"?document.domain&&S?O(S):T():O(S);for(var P=a.length;P--;)delete M[g][a[P]];return M()};l[p]=!0,i.exports=Object.create||function(y,C){var b;return y!==null?(E[g]=s(y),b=new E,E[g]=null,b[p]=y):b=M(),C===void 0?b:o.f(b,C)}},function(i,r,t){var s=t(35),o=t(122),a=t(46),l=t(95),h=t(34).f,c=t(157),d=t(32),f=t(20),m="Array Iterator",g=l.set,v=l.getterFor(m);i.exports=c(Array,"Array",function(E,w){g(this,{type:m,target:s(E),index:0,kind:w})},function(){var E=v(this),w=E.target,O=E.kind,T=E.index++;return!w||T>=w.length?(E.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:T,done:!1}:O=="values"?{value:w[T],done:!1}:{value:[T,w[T]],done:!1}},"values");var p=a.Arguments=a.Array;if(o("keys"),o("values"),o("entries"),!d&&f&&p.name!=="values")try{h(p,"name",{value:"values"})}catch{}},function(i,r,t){var s=t(121),o=t(34).f,a=t(39),l=t(13),h=t(266),c=t(5),d=c("toStringTag");i.exports=function(f,m,g,v){if(f){var p=g?f:f.prototype;l(p,d)||o(p,d,{configurable:!0,value:m}),v&&!s&&a(p,"toString",h)}}},function(i,r,t){var s=t(9);i.exports=s.Promise},function(i,r,t){t(60);var s=t(287),o=t(9),a=t(47),l=t(39),h=t(46),c=t(5),d=c("toStringTag");for(var f in s){var m=o[f],g=m&&m.prototype;g&&a(g)!==d&&l(g,d,f),h[f]=h.Array}},function(i,r,t){r.a=o;var s=t(14);function o(a){for(var l=Object(s.a)(a),h=l.length,c=Array(h),d=0;d<h;d++)c[d]=a[l[d]];return c}},function(i,r,t){r.a=h;var s=t(30),o=t(24),a=t(51),l=t(127);function h(c,d,f,m){if(m=m||[],!d&&d!==0)d=1/0;else if(d<=0)return m.concat(c);for(var g=m.length,v=0,p=Object(s.a)(c);v<p;v++){var E=c[v];if(Object(o.a)(E)&&(Object(a.a)(E)||Object(l.a)(E)))if(d>1)h(E,d-1,f,m),g=m.length;else for(var w=0,O=E.length;w<O;)m[g++]=E[w++];else f||(m[g++]=E)}return m}},function(i,r,t){r.a=l;var s=t(19),o=t(24),a=t(14);function l(h,c,d){c=Object(s.a)(c,d);for(var f=!Object(o.a)(h)&&Object(a.a)(h),m=(f||h).length,g=Array(m),v=0;v<m;v++){var p=f?f[v]:v;g[v]=c(h[p],p,h)}return g}},function(i,r,t){(function(s){var o=t(1),a=o(t(10)),l=o(t(25)),h=o(t(42)),c=o(t(217)),d=o(t(37)),f=o(t(68)),m=o(t(53)),g=t(2),v=t(219),p=t(69),E=t(31),w=E.inherits,O=E.parseDate,T=t(222),S=t(70),M=S.setAdapters,P=S.adapterManager,y=s.AV||{};y._config={serverURLs:{},useMasterKey:!1,production:null,realtime:null,requestTimeout:null};var C="LeanCloud-JS-SDK/".concat(T);y._sharedConfig={userAgent:C,liveQueryRealtime:null},P.on("platformInfo",function(b){var R=C;if(b)if(b.userAgent)R=b.userAgent;else{var D=b.name;b.version&&(D+="/".concat(b.version)),b.extra&&(D+="; ".concat(b.extra)),R+=" (".concat(D,")")}y._sharedConfig.userAgent=R}),y._getAVPath=function(b){if(!y.applicationId)throw new Error("You need to call AV.initialize before using AV.");if(b||(b=""),!g.isString(b))throw new Error("Tried to get a localStorage path that wasn't a String.");return b[0]==="/"&&(b=b.substring(1)),"AV/"+y.applicationId+"/"+b},y._installationId=null,y._getInstallationId=function(){if(y._installationId)return a.default.resolve(y._installationId);var b=y._getAVPath("installationId");return y.localStorage.getItemAsync(b).then(function(R){return y._installationId=R,y._installationId?R:(y._installationId=R=v(),y.localStorage.setItemAsync(b,R).then(function(){return R}))})},y._subscriptionId=null,y._refreshSubscriptionId=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y._getAVPath("subscriptionId"),R=y._subscriptionId=v();return y.localStorage.setItemAsync(b,R).then(function(){return R})},y._getSubscriptionId=function(){if(y._subscriptionId)return a.default.resolve(y._subscriptionId);var b=y._getAVPath("subscriptionId");return y.localStorage.getItemAsync(b).then(function(R){return y._subscriptionId=R,y._subscriptionId||(R=y._refreshSubscriptionId(b)),R})},y._parseDate=O,y._extend=function(b,R){var D=w(this,b,R);return D.extend=this.extend,D},y._encode=function(b,R,D){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(b instanceof y.Object){if(D)throw new Error("AV.Objects not allowed here");return!R||g.include(R,b)||!b._hasData?b._toPointer():b._toFullJSON((0,l.default)(R).call(R,b),I)}if(b instanceof y.ACL)return b.toJSON();if(g.isDate(b))return I?{__type:"Date",iso:b.toJSON()}:b.toJSON();if(b instanceof y.GeoPoint)return b.toJSON();if(g.isArray(b))return(0,h.default)(g).call(g,b,function(x){return y._encode(x,R,D,I)});if(g.isRegExp(b))return b.source;if(b instanceof y.Relation||b instanceof y.Op)return b.toJSON();if(b instanceof y.File){if(!b.url()&&!b.id)throw new Error("Tried to save an object containing an unsaved file.");return b._toFullJSON(R,I)}return g.isObject(b)?g.mapObject(b,function(x,A){return y._encode(x,R,D,I)}):b},y._decode=function(b,R){if(!g.isObject(b)||g.isDate(b))return b;if(g.isArray(b))return(0,h.default)(g).call(g,b,function(W){return y._decode(W)});if(b instanceof y.Object||b instanceof y.File||b instanceof y.Op||b instanceof y.GeoPoint||b instanceof y.ACL)return b;if(R==="ACL")return new y.ACL(b);if(b.__op)return y.Op._decode(b);var D;if(b.__type==="Pointer"){D=b.className;var I=y.Object._create(D);if((0,c.default)(b).length>3){var x=g.clone(b);delete x.__type,delete x.className,I._finishFetch(x,!0)}else I._finishFetch({objectId:b.objectId},!1);return I}if(b.__type==="Object"){D=b.className;var A=g.clone(b);delete A.__type,delete A.className;var N=y.Object._create(D);return N._finishFetch(A,!0),N}if(b.__type==="Date")return y._parseDate(b.iso);if(b.__type==="GeoPoint")return new y.GeoPoint({latitude:b.latitude,longitude:b.longitude});if(b.__type==="Relation"){if(!R)throw new Error("key missing decoding a Relation");var F=new y.Relation(null,R);return F.targetClassName=b.className,F}if(b.__type==="File"){var B=new y.File(b.name),L=g.clone(b);return delete L.__type,B._finishFetch(L),B}return g.mapObject(b,y._decode)},y.parseJSON=y._decode,y.parse=function(b){return y.parseJSON(JSON.parse(b))},y.stringify=function(b){return(0,d.default)(y._encode(b,[],!1,!0))},y._encodeObjectOrArray=function(b){var R=function(I){return I&&I._toFullJSON&&(I=I._toFullJSON([])),g.mapObject(I,function(x){return y._encode(x,[])})};return g.isArray(b)?(0,h.default)(b).call(b,function(D){return R(D)}):R(b)},y._arrayEach=g.each,y._traverse=function(b,R,D){return b instanceof y.Object?(D=D||[],(0,f.default)(g).call(g,D,b)>=0?void 0:(D.push(b),y._traverse(b.attributes,R,D),R(b))):b instanceof y.Relation||b instanceof y.File?R(b):g.isArray(b)?(g.each(b,function(I,x){var A=y._traverse(I,R,D);A&&(b[x]=A)}),R(b)):(g.isObject(b)&&y._each(b,function(I,x){var A=y._traverse(I,R,D);A&&(b[x]=A)}),R(b))},y._objectEach=y._each=function(b,R){g.isObject(b)?g.each((0,m.default)(g).call(g,b),function(D){R(b[D],D)}):g.each(b,R)},y.debug={enable:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"leancloud*";return p.enable(R)},disable:p.disable},y.setAdapters=M,i.exports=y}).call(r,t(108))},function(i,r,t){i.exports=t(374)},function(i,r,t){function s(m){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(v){return typeof v}:s=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s(m)}r.log=l,r.formatArgs=a,r.save=h,r.load=c,r.useColors=o,r.storage=d(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!!this.useColors){var g="color: "+this.color;m.splice(1,0,g,"color: inherit");var v=0,p=0;m[0].replace(/%[a-zA-Z%]/g,function(E){E!=="%%"&&(v++,E==="%c"&&(p=v))}),m.splice(p,0,g)}}function l(){var m;return(typeof console>"u"?"undefined":s(console))==="object"&&console.log&&(m=console).log.apply(m,arguments)}function h(m){try{m?r.storage.setItem("debug",m):r.storage.removeItem("debug")}catch{}}function c(){var m;try{m=r.storage.getItem("debug")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=n.DEBUG),m}function d(){try{return localStorage}catch{}}i.exports=t(383)(r);var f=i.exports.formatters;f.j=function(m){try{return JSON.stringify(m)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}},function(i,r,t){var s=t(1),o=s(t(53)),a=t(2),l=t(223),h=t(31),c=h.inherits,d=c(l,{constructor:function(){l.apply(this),this._adapters={}},getAdapter:function(g){var v=this._adapters[g];if(v===void 0)throw new Error("".concat(g," adapter is not configured"));return v},setAdapters:function(g){var v=this;a.extend(this._adapters,g),(0,o.default)(a).call(a,g).forEach(function(p){return v.emit(p,g[p])})}}),f=new d;i.exports={getAdapter:f.getAdapter.bind(f),setAdapters:f.setAdapters.bind(f),adapterManager:f}},function(i,r,t){var s=t(72),o=Function.prototype,a=o.apply,l=o.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(s?l.bind(a):function(){return l.apply(a,arguments)})},function(i,r,t){var s=t(3);i.exports=!s(function(){var o=(function(){}).bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},function(i,r,t){var s=t(20),o=t(11),a=t(145),l=t(44),h=t(35),c=t(88),d=t(13),f=t(147),m=Object.getOwnPropertyDescriptor;r.f=s?m:function(v,p){if(v=h(v),p=c(p),f)try{return m(v,p)}catch{}if(d(v,p))return l(!o(a.f,v,p),v[p])}},function(i,r){var t=TypeError;i.exports=function(s){if(s==null)throw t("Can't call method on "+s);return s}},function(i,r,t){var s=t(32),o=t(111);(i.exports=function(a,l){return o[a]||(o[a]=l!==void 0?l:{})})("versions",[]).push({version:"3.23.3",mode:s?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE",source:"https://github.com/zloirock/core-js"})},function(i,r,t){var s=t(58),o=t(11),a=t(21),l=t(57),h=t(154),c=t(36),d=t(12),f=t(155),m=t(94),g=t(156),v=TypeError,p=function(w,O){this.stopped=w,this.result=O},E=p.prototype;i.exports=function(w,O,T){var S=T&&T.that,M=!!(T&&T.AS_ENTRIES),P=!!(T&&T.IS_ITERATOR),y=!!(T&&T.INTERRUPTED),C=s(O,S),b,R,D,I,x,A,N,F=function(L){return b&&g(b,"normal",L),new p(!0,L)},B=function(L){return M?(a(L),y?C(L[0],L[1],F):C(L[0],L[1])):y?C(L,F):C(L)};if(P)b=w;else{if(R=m(w),!R)throw v(l(w)+" is not iterable");if(h(R)){for(D=0,I=c(w);I>D;D++)if(x=B(w[D]),x&&d(E,x))return x;return new p(!1)}b=f(w,R)}for(A=b.next;!(N=o(A,b)).done;){try{x=B(N.value)}catch(L){g(b,"throw",L)}if(typeof x=="object"&&x&&d(E,x))return x}return new p(!1)}},function(i,r){i.exports=function(t){try{return{error:!1,value:t()}}catch(s){return{error:!0,value:s}}}},function(i,r,t){var s=t(9),o=t(62),a=t(8),l=t(148),h=t(123),c=t(5),d=t(277),f=t(32),m=t(56),g=o&&o.prototype,v=c("species"),p=!1,E=a(s.PromiseRejectionEvent),w=l("Promise",function(){var O=h(o),T=O!==String(o);if(!T&&m===66||f&&!(g.catch&&g.finally))return!0;if(m>=51&&/native code/.test(O))return!1;var S=new o(function(y){y(1)}),M=function(y){y(function(){},function(){})},P=S.constructor={};return P[v]=M,p=S.then(function(){})instanceof M,p?!T&&d&&!E:!0});i.exports={CONSTRUCTOR:w,REJECTION_EVENT:E,SUBCLASSING:p}},function(i,r,t){var s=t(286).charAt,o=t(40),a=t(95),l=t(157),h="String Iterator",c=a.set,d=a.getterFor(h);l(String,"String",function(f){c(this,{type:h,string:o(f),index:0})},function(){var m=d(this),g=m.string,v=m.index,p;return v>=g.length?{value:void 0,done:!0}:(p=s(g,v),m.index+=p.length,{value:p,done:!1})})},function(i,r,t){t.d(r,"a",function(){return a}),t.d(r,"b",function(){return l});var s=t(6),o=t(294),a=s.s&&Object(o.a)(new DataView(new ArrayBuffer(8))),l=typeof Map<"u"&&Object(o.a)(new Map)},function(i,r,t){r.a=l;var s=t(50),o=t(6),a=t(177);function l(h){if(!Object(s.a)(h))return[];var c=[];for(var d in h)c.push(d);return o.h&&Object(a.a)(h,c),c}},function(i,r,t){r.a=o;var s=t(23);t(186);function o(a){return s.a.toPath(a)}},function(i,r,t){r.a=s;function s(o,a,l){if(a===void 0)return o;switch(l??3){case 1:return function(h){return o.call(a,h)};case 3:return function(h,c,d){return o.call(a,h,c,d)};case 4:return function(h,c,d,f){return o.call(a,h,c,d,f)}}return function(){return o.apply(a,arguments)}}},function(i,r,t){r.a=a;var s=t(19),o=t(52);function a(l,h,c){var d=[];return h=Object(s.a)(h,c),Object(o.a)(l,function(f,m,g){h(f,m,g)&&d.push(f)}),d}},function(i,r,t){r.a=l;var s=t(24),o=t(64),a=t(202);function l(h,c,d,f){return Object(s.a)(h)||(h=Object(o.a)(h)),(typeof d!="number"||f)&&(d=0),Object(a.a)(h,c,d)>=0}},function(i,r,t){var s=t(54);i.exports=Array.isArray||function(a){return s(a)=="Array"}},function(i,r,t){i.exports=t(230)},function(i,r,t){var s=t(252),o=t(89);i.exports=function(a){var l=s(a,"string");return o(l)?l:l+""}},function(i,r,t){var s=t(18),o=t(8),a=t(12),l=t(146),h=Object;i.exports=l?function(c){return typeof c=="symbol"}:function(c){var d=s("Symbol");return o(d)&&a(d.prototype,h(c))}},function(i,r,t){var s=t(13),o=t(8),a=t(33),l=t(91),h=t(150),c=l("IE_PROTO"),d=Object,f=d.prototype;i.exports=h?d.getPrototypeOf:function(m){var g=a(m);if(s(g,c))return g[c];var v=g.constructor;return o(v)&&g instanceof v?v.prototype:g instanceof d?f:null}},function(i,r,t){var s=t(75),o=t(112),a=s("keys");i.exports=function(l){return a[l]||(a[l]=o(l))}},function(i,r,t){var s=t(4),o=t(21),a=t(255);i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var l=!1,h={},c;try{c=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),c(h,[]),l=h instanceof Array}catch{}return function(f,m){return o(f),a(m),l?c(f,m):f.__proto__=m,f}}():void 0)},function(i,r){i.exports={}},function(i,r,t){var s=t(47),o=t(110),a=t(46),l=t(5),h=l("iterator");i.exports=function(c){if(c!=null)return o(c,h)||o(c,"@@iterator")||a[s(c)]}},function(i,r,t){var s=t(264),o=t(9),a=t(4),l=t(17),h=t(39),c=t(13),d=t(111),f=t(91),m=t(93),g="Object already initialized",v=o.TypeError,p=o.WeakMap,E,w,O,T=function(R){return O(R)?w(R):E(R,{})},S=function(R){return function(D){var I;if(!l(D)||(I=w(D)).type!==R)throw v("Incompatible receiver, "+R+" required");return I}};if(s||d.state){var M=d.state||(d.state=new p),P=a(M.get),y=a(M.has),C=a(M.set);E=function(R,D){if(y(M,R))throw new v(g);return D.facade=R,C(M,R,D),D},w=function(R){return P(M,R)||{}},O=function(R){return y(M,R)}}else{var b=f("state");m[b]=!0,E=function(R,D){if(c(R,b))throw new v(g);return D.facade=R,h(R,b,D),D},w=function(R){return c(R,b)?R[b]:{}},O=function(R){return c(R,b)}}i.exports={set:E,get:w,has:O,enforce:T,getterFor:S}},function(i,r){},function(i,r,t){var s=t(54),o=t(9);i.exports=s(o.process)=="process"},function(i,r,t){var s=t(4),o=t(3),a=t(8),l=t(47),h=t(18),c=t(123),d=function(){},f=[],m=h("Reflect","construct"),g=/^\s*(?:class|function)\b/,v=s(g.exec),p=!g.exec(d),E=function(T){if(!a(T))return!1;try{return m(d,f,T),!0}catch{return!1}},w=function(T){if(!a(T))return!1;switch(l(T)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!v(g,c(T))}catch{return!0}};w.sham=!0,i.exports=!m||o(function(){var O;return E(E.call)||!E(Object)||!E(function(){O=!0})||O})?w:E},function(i,r,t){var s=t(4);i.exports=s([].slice)},function(i,r,t){r.a=a;var s=t(131),o=t(178);function a(l){return l=Object(s.a)({},l),function(h){return Object(o.a)(h,l)}}},function(i,r,t){var s=t(22),o=t(194),a=t(23),l=Object(s.a)(function(h,c){var d=l.placeholder,f=function(){for(var m=0,g=c.length,v=Array(g),p=0;p<g;p++)v[p]=c[p]===d?arguments[m++]:c[p];for(;m<arguments.length;)v.push(arguments[m++]);return Object(o.a)(h,f,this,this,v)};return f});l.placeholder=a.a,r.a=l},function(i,r,t){r.a=a;var s=t(19),o=t(52);function a(l,h){return function(c,d,f){var m=h?[[],[]]:{};return d=Object(s.a)(d,f),Object(o.a)(c,function(g,v){var p=d(g,v,c);l(m,g,p)}),m}}},function(i,r,t){var s=t(88),o=t(34),a=t(44);i.exports=function(l,h,c){var d=s(h);d in l?o.f(l,d,a(0,c)):l[d]=c}},function(i,r,t){var s=t(3),o=t(5),a=t(56),l=o("species");i.exports=function(h){return a>=51||!s(function(){var c=[],d=c.constructor={};return d[l]=function(){return{foo:1}},c[h](Boolean).foo!==1})}},function(i,r,t){var s=t(58),o=t(4),a=t(109),l=t(33),h=t(36),c=t(216),d=o([].push),f=function(m){var g=m==1,v=m==2,p=m==3,E=m==4,w=m==6,O=m==7,T=m==5||w;return function(S,M,P,y){for(var C=l(S),b=a(C),R=s(M,P),D=h(b),I=0,x=y||c,A=g?x(S,D):v||O?x(S,0):void 0,N,F;D>I;I++)if((T||I in b)&&(N=b[I],F=R(N,I,C),m))if(g)A[I]=F;else if(F)switch(m){case 3:return!0;case 5:return N;case 6:return I;case 2:d(A,N)}else switch(m){case 4:return!1;case 7:d(A,N)}return w?-1:p||E?E:A}};i.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},function(i,r,t){var s=t(1),o=s(t(141)),a=s(t(436)),l=s(t(42)),h=s(t(217)),c=s(t(37)),d=s(t(25));t(2);var f=t(441),m=f.timeout,g=t(69),v=g("leancloud:request"),p=g("leancloud:request:error"),E=t(70),w=E.getAdapter,O=0,T=function(M){var P=M.method,y=M.url,C=M.query,b=M.data,R=M.headers,D=R===void 0?{}:R,I=M.timeout,x=M.onprogress;if(C){var A,N,F,B=(0,a.default)(A=(0,l.default)(N=(0,h.default)(C)).call(N,function(j){var H,K=C[j];if(K!==void 0){var Z=(0,o.default)(K)==="object"?(0,c.default)(K):K;return(0,d.default)(H="".concat(encodeURIComponent(j),"=")).call(H,encodeURIComponent(Z))}})).call(A,function(j){return j}).join("&");y=(0,d.default)(F="".concat(y,"?")).call(F,B)}var L=O++;v("request(%d) %s %s %o %o %o",L,P,y,C,b,D);var W=w("request"),z=W(y,{method:P,headers:D,data:b,onprogress:x}).then(function(j){if(v("response(%d) %d %O %o",L,j.status,j.data||j.text,j.header),j.ok===!1){var H=new Error;throw H.response=j,H}return j.data}).catch(function(j){throw j.response&&(g.enabled("leancloud:request")||p("request(%d) %s %s %o %o %o",L,P,y,C,b,D),p("response(%d) %d %O %o",L,j.response.status,j.response.data||j.response.text,j.response.header),j.statusCode=j.response.status,j.responseText=j.response.text,j.response=j.response.data),j});return I?m(z,I):z};i.exports=T},function(i,r,t){i.exports=t(446)},function(i,r){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(t=window)}i.exports=t},function(i,r,t){var s=t(4),o=t(3),a=t(54),l=Object,h=s("".split);i.exports=o(function(){return!l("z").propertyIsEnumerable(0)})?function(c){return a(c)=="String"?h(c,""):l(c)}:l},function(i,r,t){var s=t(28);i.exports=function(o,a){var l=o[a];return l==null?void 0:s(l)}},function(i,r,t){var s=t(9),o=t(254),a="__core-js_shared__",l=s[a]||o(a,{});i.exports=l},function(i,r,t){var s=t(4),o=0,a=Math.random(),l=s(1 .toString);i.exports=function(h){return"Symbol("+(h===void 0?"":h)+")_"+l(++o+a,36)}},function(i,r,t){var s=t(9),o=t(17),a=s.document,l=o(a)&&o(a.createElement);i.exports=function(h){return l?a.createElement(h):{}}},function(i,r,t){var s=t(151),o=t(118),a=o.concat("length","prototype");r.f=Object.getOwnPropertyNames||function(h){return s(h,a)}},function(i,r,t){var s=t(35),o=t(116),a=t(36),l=function(h){return function(c,d,f){var m=s(c),g=a(m),v=o(f,g),p;if(h&&d!=d){for(;g>v;)if(p=m[v++],p!=p)return!0}else for(;g>v;v++)if((h||v in m)&&m[v]===d)return h||v||0;return!h&&-1}};i.exports={includes:l(!0),indexOf:l(!1)}},function(i,r,t){var s=t(117),o=Math.max,a=Math.min;i.exports=function(l,h){var c=s(l);return c<0?o(c+h,0):a(c,h)}},function(i,r,t){var s=t(258);i.exports=function(o){var a=+o;return a!==a||a===0?0:s(a)}},function(i,r){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(i,r){r.f=Object.getOwnPropertySymbols},function(i,r,t){var s=t(151),o=t(118);i.exports=Object.keys||function(l){return s(l,o)}},function(i,r,t){var s=t(5),o=s("toStringTag"),a={};a[o]="z",i.exports=String(a)==="[object z]"},function(i,r){i.exports=function(){}},function(i,r,t){var s=t(4),o=t(8),a=t(111),l=s(Function.toString);o(a.inspectSource)||(a.inspectSource=function(h){return l(h)}),i.exports=a.inspectSource},function(i,r,t){Object.defineProperty(r,"__esModule",{value:!0});var s=t(6);t.d(r,"VERSION",function(){return s.e});var o=t(22);t.d(r,"restArguments",function(){return o.a});var a=t(50);t.d(r,"isObject",function(){return a.a});var l=t(289);t.d(r,"isNull",function(){return l.a});var h=t(167);t.d(r,"isUndefined",function(){return h.a});var c=t(168);t.d(r,"isBoolean",function(){return c.a});var d=t(290);t.d(r,"isElement",function(){return d.a});var f=t(125);t.d(r,"isString",function(){return f.a});var m=t(169);t.d(r,"isNumber",function(){return m.a});var g=t(291);t.d(r,"isDate",function(){return g.a});var v=t(292);t.d(r,"isRegExp",function(){return v.a});var p=t(293);t.d(r,"isError",function(){return p.a});var E=t(170);t.d(r,"isSymbol",function(){return E.a});var w=t(171);t.d(r,"isArrayBuffer",function(){return w.a});var O=t(126);t.d(r,"isDataView",function(){return O.a});var T=t(51);t.d(r,"isArray",function(){return T.a});var S=t(29);t.d(r,"isFunction",function(){return S.a});var M=t(127);t.d(r,"isArguments",function(){return M.a});var P=t(295);t.d(r,"isFinite",function(){return P.a});var y=t(172);t.d(r,"isNaN",function(){return y.a});var C=t(173);t.d(r,"isTypedArray",function(){return C.a});var b=t(297);t.d(r,"isEmpty",function(){return b.a});var R=t(178);t.d(r,"isMatch",function(){return R.a});var D=t(298);t.d(r,"isEqual",function(){return D.a});var I=t(300);t.d(r,"isMap",function(){return I.a});var x=t(301);t.d(r,"isWeakMap",function(){return x.a});var A=t(302);t.d(r,"isSet",function(){return A.a});var N=t(303);t.d(r,"isWeakSet",function(){return N.a});var F=t(14);t.d(r,"keys",function(){return F.a});var B=t(81);t.d(r,"allKeys",function(){return B.a});var L=t(64);t.d(r,"values",function(){return L.a});var W=t(304);t.d(r,"pairs",function(){return W.a});var z=t(179);t.d(r,"invert",function(){return z.a});var j=t(180);t.d(r,"functions",function(){return j.a}),t.d(r,"methods",function(){return j.a});var H=t(181);t.d(r,"extend",function(){return H.a});var K=t(131);t.d(r,"extendOwn",function(){return K.a}),t.d(r,"assign",function(){return K.a});var Z=t(182);t.d(r,"defaults",function(){return Z.a});var Q=t(305);t.d(r,"create",function(){return Q.a});var V=t(184);t.d(r,"clone",function(){return V.a});var ee=t(306);t.d(r,"tap",function(){return ee.a});var ue=t(185);t.d(r,"get",function(){return ue.a});var q=t(307);t.d(r,"has",function(){return q.a});var he=t(308);t.d(r,"mapObject",function(){return he.a});var fe=t(133);t.d(r,"identity",function(){return fe.a});var Ne=t(174);t.d(r,"constant",function(){return Ne.a});var je=t(189);t.d(r,"noop",function(){return je.a});var Le=t(186);t.d(r,"toPath",function(){return Le.a});var ke=t(134);t.d(r,"property",function(){return ke.a});var He=t(309);t.d(r,"propertyOf",function(){return He.a});var _e=t(100);t.d(r,"matcher",function(){return _e.a}),t.d(r,"matches",function(){return _e.a});var ze=t(310);t.d(r,"times",function(){return ze.a});var Ke=t(190);t.d(r,"random",function(){return Ke.a});var lt=t(135);t.d(r,"now",function(){return lt.a});var Ft=t(311);t.d(r,"escape",function(){return Ft.a});var vt=t(312);t.d(r,"unescape",function(){return vt.a});var nt=t(193);t.d(r,"templateSettings",function(){return nt.a});var Ye=t(314);t.d(r,"template",function(){return Ye.a});var Je=t(315);t.d(r,"result",function(){return Je.a});var ut=t(316);t.d(r,"uniqueId",function(){return ut.a});var re=t(317);t.d(r,"chain",function(){return re.a});var de=t(188);t.d(r,"iteratee",function(){return de.a});var Oe=t(101);t.d(r,"partial",function(){return Oe.a});var ye=t(195);t.d(r,"bind",function(){return ye.a});var Re=t(318);t.d(r,"bindAll",function(){return Re.a});var $=t(319);t.d(r,"memoize",function(){return $.a});var X=t(196);t.d(r,"delay",function(){return X.a});var Y=t(320);t.d(r,"defer",function(){return Y.a});var oe=t(321);t.d(r,"throttle",function(){return oe.a});var ge=t(322);t.d(r,"debounce",function(){return ge.a});var De=t(323);t.d(r,"wrap",function(){return De.a});var rt=t(136);t.d(r,"negate",function(){return rt.a});var An=t(324);t.d(r,"compose",function(){return An.a});var ui=t(325);t.d(r,"after",function(){return ui.a});var In=t(197);t.d(r,"before",function(){return In.a});var Fn=t(326);t.d(r,"once",function(){return Fn.a});var Bn=t(198);t.d(r,"findKey",function(){return Bn.a});var Nn=t(137);t.d(r,"findIndex",function(){return Nn.a});var Xi=t(200);t.d(r,"findLastIndex",function(){return Xi.a});var jn=t(201);t.d(r,"sortedIndex",function(){return jn.a});var hi=t(202);t.d(r,"indexOf",function(){return hi.a});var Un=t(327);t.d(r,"lastIndexOf",function(){return Un.a});var Yi=t(204);t.d(r,"find",function(){return Yi.a}),t.d(r,"detect",function(){return Yi.a});var Wn=t(328);t.d(r,"findWhere",function(){return Wn.a});var Si=t(52);t.d(r,"each",function(){return Si.a}),t.d(r,"forEach",function(){return Si.a});var Zi=t(66);t.d(r,"map",function(){return Zi.a}),t.d(r,"collect",function(){return Zi.a});var Pi=t(329);t.d(r,"reduce",function(){return Pi.a}),t.d(r,"foldl",function(){return Pi.a}),t.d(r,"inject",function(){return Pi.a});var qi=t(330);t.d(r,"reduceRight",function(){return qi.a}),t.d(r,"foldr",function(){return qi.a});var _i=t(84);t.d(r,"filter",function(){return _i.a}),t.d(r,"select",function(){return _i.a});var G=t(331);t.d(r,"reject",function(){return G.a});var ne=t(332);t.d(r,"every",function(){return ne.a}),t.d(r,"all",function(){return ne.a});var ve=t(333);t.d(r,"some",function(){return ve.a}),t.d(r,"any",function(){return ve.a});var Ae=t(85);t.d(r,"contains",function(){return Ae.a}),t.d(r,"includes",function(){return Ae.a}),t.d(r,"include",function(){return Ae.a});var st=t(334);t.d(r,"invoke",function(){return st.a});var Wt=t(138);t.d(r,"pluck",function(){return Wt.a});var Dt=t(335);t.d(r,"where",function(){return Dt.a});var di=t(206);t.d(r,"max",function(){return di.a});var Jt=t(336);t.d(r,"min",function(){return Jt.a});var zn=t(337);t.d(r,"shuffle",function(){return zn.a});var La=t(207);t.d(r,"sample",function(){return La.a});var Aa=t(338);t.d(r,"sortBy",function(){return Aa.a});var Ia=t(339);t.d(r,"groupBy",function(){return Ia.a});var Fa=t(340);t.d(r,"indexBy",function(){return Fa.a});var Ba=t(341);t.d(r,"countBy",function(){return Ba.a});var Na=t(342);t.d(r,"partition",function(){return Na.a});var ja=t(343);t.d(r,"toArray",function(){return ja.a});var Ua=t(344);t.d(r,"size",function(){return Ua.a});var Wa=t(208);t.d(r,"pick",function(){return Wa.a});var za=t(346);t.d(r,"omit",function(){return za.a});var Hn=t(347);t.d(r,"first",function(){return Hn.a}),t.d(r,"head",function(){return Hn.a}),t.d(r,"take",function(){return Hn.a});var Ha=t(209);t.d(r,"initial",function(){return Ha.a});var Ka=t(348);t.d(r,"last",function(){return Ka.a});var Kn=t(210);t.d(r,"rest",function(){return Kn.a}),t.d(r,"tail",function(){return Kn.a}),t.d(r,"drop",function(){return Kn.a});var $a=t(349);t.d(r,"compact",function(){return $a.a});var Ga=t(350);t.d(r,"flatten",function(){return Ga.a});var Va=t(351);t.d(r,"without",function(){return Va.a});var ss=t(212);t.d(r,"uniq",function(){return ss.a}),t.d(r,"unique",function(){return ss.a});var ka=t(352);t.d(r,"union",function(){return ka.a});var Ja=t(353);t.d(r,"intersection",function(){return Ja.a});var Qa=t(211);t.d(r,"difference",function(){return Qa.a});var os=t(213);t.d(r,"unzip",function(){return os.a}),t.d(r,"transpose",function(){return os.a});var Xa=t(354);t.d(r,"zip",function(){return Xa.a});var Ya=t(355);t.d(r,"object",function(){return Ya.a});var Za=t(356);t.d(r,"range",function(){return Za.a});var qa=t(357);t.d(r,"chunk",function(){return qa.a});var _a=t(358);t.d(r,"mixin",function(){return _a.a});var el=t(359);t.d(r,"default",function(){return el.a})},function(i,r,t){var s=t(16);r.a=Object(s.a)("String")},function(i,r,t){var s=t(16),o=t(29),a=t(171),l=t(80),h=Object(s.a)("DataView");function c(d){return d!=null&&Object(o.a)(d.getInt8)&&Object(a.a)(d.buffer)}r.a=l.a?c:h},function(i,r,t){var s=t(16),o=t(41),a=Object(s.a)("Arguments");(function(){a(arguments)||(a=function(l){return Object(o.a)(l,"callee")})})(),r.a=a},function(i,r,t){var s=t(176);r.a=Object(s.a)("byteLength")},function(i,r,t){r.a=l,t.d(r,"b",function(){return m}),t.d(r,"d",function(){return g}),t.d(r,"c",function(){return v});var s=t(30),o=t(29),a=t(81);function l(p){var E=Object(s.a)(p);return function(w){if(w==null)return!1;var O=Object(a.a)(w);if(Object(s.a)(O))return!1;for(var T=0;T<E;T++)if(!Object(o.a)(w[p[T]]))return!1;return p!==g||!Object(o.a)(w[h])}}var h="forEach",c="has",d=["clear","delete"],f=["get",c,"set"],m=d.concat(h,f),g=d.concat(f),v=["add"].concat(d,h,c)},function(i,r,t){r.a=s;function s(o,a){return function(l){var h=arguments.length;if(a&&(l=Object(l)),h<2||l==null)return l;for(var c=1;c<h;c++)for(var d=arguments[c],f=o(d),m=f.length,g=0;g<m;g++){var v=f[g];(!a||l[v]===void 0)&&(l[v]=d[v])}return l}}},function(i,r,t){var s=t(130),o=t(14);r.a=Object(s.a)(o.a)},function(i,r,t){r.a=s;function s(o,a){for(var l=a.length,h=0;h<l;h++){if(o==null)return;o=o[a[h]]}return l?o:void 0}},function(i,r,t){r.a=s;function s(o){return o}},function(i,r,t){r.a=a;var s=t(132),o=t(82);function a(l){return l=Object(o.a)(l),function(h){return Object(s.a)(h,l)}}},function(i,r,t){r.a=Date.now||function(){return new Date().getTime()}},function(i,r,t){r.a=s;function s(o){return function(){return!o.apply(this,arguments)}}},function(i,r,t){var s=t(199);r.a=Object(s.a)(1)},function(i,r,t){r.a=a;var s=t(66),o=t(134);function a(l,h){return Object(s.a)(l,Object(o.a)(h))}},function(i,r,t){var s=t(3);i.exports=function(o,a){var l=[][o];return!!l&&s(function(){l.call(null,a||function(){return 1},1)})}},function(i,r,t){i.exports=t(228)},function(i,r,t){var s=t(229),o=t(431);function a(l){"@babel/helpers - typeof";return i.exports=a=typeof s=="function"&&typeof o=="symbol"?function(h){return typeof h}:function(h){return h&&typeof s=="function"&&h.constructor===s&&h!==s.prototype?"symbol":typeof h},i.exports.__esModule=!0,i.exports.default=i.exports,a(l)}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){var s=t(5);r.f=s},function(i,r,t){i.exports=t(475)},function(i,r,t){i.exports=t(235)},function(i,r,t){var s={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!s.call({1:2},1);r.f=a?function(h){var c=o(this,h);return!!c&&c.enumerable}:s},function(i,r,t){var s=t(55);i.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(i,r,t){var s=t(20),o=t(3),a=t(113);i.exports=!s&&!o(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},function(i,r,t){var s=t(3),o=t(8),a=/#|\.prototype\./,l=function(m,g){var v=c[h(m)];return v==f?!0:v==d?!1:o(g)?s(g):!!g},h=l.normalize=function(m){return String(m).replace(a,".").toLowerCase()},c=l.data={},d=l.NATIVE="N",f=l.POLYFILL="P";i.exports=l},function(i,r,t){var s=t(20),o=t(3);i.exports=s&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(i,r,t){var s=t(3);i.exports=!s(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},function(i,r,t){var s=t(4),o=t(13),a=t(35),l=t(115).indexOf,h=t(93),c=s([].push);i.exports=function(d,f){var m=a(d),g=0,v=[],p;for(p in m)!o(h,p)&&o(m,p)&&c(v,p);for(;f.length>g;)o(m,p=f[g++])&&(~l(v,p)||c(v,p));return v}},function(i,r,t){var s=t(20),o=t(149),a=t(34),l=t(21),h=t(35),c=t(120);r.f=s&&!o?Object.defineProperties:function(f,m){l(f);for(var g=h(m),v=c(m),p=v.length,E=0,w;p>E;)a.f(f,w=v[E++],g[w]);return f}},function(i,r,t){var s=t(18);i.exports=s("document","documentElement")},function(i,r,t){var s=t(5),o=t(46),a=s("iterator"),l=Array.prototype;i.exports=function(h){return h!==void 0&&(o.Array===h||l[a]===h)}},function(i,r,t){var s=t(11),o=t(28),a=t(21),l=t(57),h=t(94),c=TypeError;i.exports=function(d,f){var m=arguments.length<2?h(d):f;if(o(m))return a(s(m,d));throw c(l(d)+" is not iterable")}},function(i,r,t){var s=t(11),o=t(21),a=t(110);i.exports=function(l,h,c){var d,f;o(l);try{if(d=a(l,"return"),!d){if(h==="throw")throw c;return c}d=s(d,l)}catch(m){f=!0,d=m}if(h==="throw")throw c;if(f)throw d;return o(d),c}},function(i,r,t){var s=t(0),o=t(11),a=t(32),l=t(158),h=t(8),c=t(265),d=t(90),f=t(92),m=t(61),g=t(39),v=t(48),p=t(5),E=t(46),w=t(159),O=l.PROPER,T=l.CONFIGURABLE,S=w.IteratorPrototype,M=w.BUGGY_SAFARI_ITERATORS,P=p("iterator"),y="keys",C="values",b="entries",R=function(){return this};i.exports=function(D,I,x,A,N,F,B){c(x,I,A);var L=function(ue){if(ue===N&&K)return K;if(!M&&ue in j)return j[ue];switch(ue){case y:return function(){return new x(this,ue)};case C:return function(){return new x(this,ue)};case b:return function(){return new x(this,ue)}}return function(){return new x(this)}},W=I+" Iterator",z=!1,j=D.prototype,H=j[P]||j["@@iterator"]||N&&j[N],K=!M&&H||L(N),Z=I=="Array"&&j.entries||H,Q,V,ee;if(Z&&(Q=d(Z.call(new D)),Q!==Object.prototype&&Q.next&&(!a&&d(Q)!==S&&(f?f(Q,S):h(Q[P])||v(Q,P,R)),m(Q,W,!0,!0),a&&(E[W]=R))),O&&N==C&&H&&H.name!==C&&(!a&&T?g(j,"name",C):(z=!0,K=function(){return o(H,this)})),N)if(V={values:L(C),keys:F?K:L(y),entries:L(b)},B)for(ee in V)(M||z||!(ee in j))&&v(j,ee,V[ee]);else s({target:I,proto:!0,forced:M||z},V);return(!a||B)&&j[P]!==K&&v(j,P,K,{name:N}),E[I]=K,V}},function(i,r,t){var s=t(20),o=t(13),a=Function.prototype,l=s&&Object.getOwnPropertyDescriptor,h=o(a,"name"),c=h&&(function(){}).name==="something",d=h&&(!s||s&&l(a,"name").configurable);i.exports={EXISTS:h,PROPER:c,CONFIGURABLE:d}},function(i,r,t){var s=t(3),o=t(8),a=t(59),l=t(90),h=t(48),c=t(5),d=t(32),f=c("iterator"),m=!1,g,v,p;[].keys&&(p=[].keys(),"next"in p?(v=l(l(p)),v!==Object.prototype&&(g=v)):m=!0);var E=g==null||s(function(){var w={};return g[f].call(w)!==w});E?g={}:d&&(g=a(g)),o(g[f])||h(g,f,function(){return this}),i.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:m}},function(i,r,t){var s=t(21),o=t(161),a=t(5),l=a("species");i.exports=function(h,c){var d=s(h).constructor,f;return d===void 0||(f=s(d)[l])==null?c:o(f)}},function(i,r,t){var s=t(98),o=t(57),a=TypeError;i.exports=function(l){if(s(l))return l;throw a(o(l)+" is not a constructor")}},function(i,r,t){var s=t(9),o=t(71),a=t(58),l=t(8),h=t(13),c=t(3),d=t(153),f=t(99),m=t(113),g=t(271),v=t(163),p=t(97),E=s.setImmediate,w=s.clearImmediate,O=s.process,T=s.Dispatch,S=s.Function,M=s.MessageChannel,P=s.String,y=0,C={},b="onreadystatechange",R,D,I,x;try{R=s.location}catch{}var A=function(L){if(h(C,L)){var W=C[L];delete C[L],W()}},N=function(L){return function(){A(L)}},F=function(L){A(L.data)},B=function(L){s.postMessage(P(L),R.protocol+"//"+R.host)};(!E||!w)&&(E=function(W){g(arguments.length,1);var z=l(W)?W:S(W),j=f(arguments,1);return C[++y]=function(){o(z,void 0,j)},D(y),y},w=function(W){delete C[W]},p?D=function(L){O.nextTick(N(L))}:T&&T.now?D=function(L){T.now(N(L))}:M&&!v?(I=new M,x=I.port2,I.port1.onmessage=F,D=a(x.postMessage,x)):s.addEventListener&&l(s.postMessage)&&!s.importScripts&&R&&R.protocol!=="file:"&&!c(B)?(D=B,s.addEventListener("message",F,!1)):b in m("script")?D=function(L){d.appendChild(m("script"))[b]=function(){d.removeChild(this),A(L)}}:D=function(L){setTimeout(N(L),0)}),i.exports={set:E,clear:w}},function(i,r,t){var s=t(45);i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(i,r,t){var s=t(62),o=t(165),a=t(78).CONSTRUCTOR;i.exports=a||!o(function(l){s.all(l).then(void 0,function(){})})},function(i,r,t){var s=t(5),o=s("iterator"),a=!1;try{var l=0,h={next:function(){return{done:!!l++}},return:function(){a=!0}};h[o]=function(){return this},Array.from(h,function(){throw 2})}catch{}i.exports=function(c,d){if(!d&&!a)return!1;var f=!1;try{var m={};m[o]=function(){return{next:function(){return{done:f=!0}}}},c(m)}catch{}return f}},function(i,r,t){var s=t(21),o=t(17),a=t(49);i.exports=function(l,h){if(s(l),o(h)&&h.constructor===l)return h;var c=a.f(l),d=c.resolve;return d(h),c.promise}},function(i,r,t){r.a=s;function s(o){return o===void 0}},function(i,r,t){r.a=o;var s=t(6);function o(a){return a===!0||a===!1||s.t.call(a)==="[object Boolean]"}},function(i,r,t){var s=t(16);r.a=Object(s.a)("Number")},function(i,r,t){var s=t(16);r.a=Object(s.a)("Symbol")},function(i,r,t){var s=t(16);r.a=Object(s.a)("ArrayBuffer")},function(i,r,t){r.a=a;var s=t(6),o=t(169);function a(l){return Object(o.a)(l)&&Object(s.g)(l)}},function(i,r,t){var s=t(6),o=t(126),a=t(174),l=t(296),h=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function c(d){return s.l?Object(s.l)(d)&&!Object(o.a)(d):Object(l.a)(d)&&h.test(s.t.call(d))}r.a=s.r?c:Object(a.a)(!1)},function(i,r,t){r.a=s;function s(o){return function(){return o}}},function(i,r,t){r.a=o;var s=t(6);function o(a){return function(l){var h=a(l);return typeof h=="number"&&h>=0&&h<=s.b}}},function(i,r,t){r.a=s;function s(o){return function(a){return a==null?void 0:a[o]}}},function(i,r,t){r.a=h;var s=t(6),o=t(29),a=t(41);function l(c){for(var d={},f=c.length,m=0;m<f;++m)d[c[m]]=!0;return{contains:function(g){return d[g]},push:function(g){return d[g]=!0,c.push(g)}}}function h(c,d){d=l(d);var f=s.n.length,m=c.constructor,g=Object(o.a)(m)&&m.prototype||s.c,v="constructor";for(Object(a.a)(c,v)&&!d.contains(v)&&d.push(v);f--;)v=s.n[f],v in c&&c[v]!==g[v]&&!d.contains(v)&&d.push(v)}},function(i,r,t){r.a=o;var s=t(14);function o(a,l){var h=Object(s.a)(l),c=h.length;if(a==null)return!c;for(var d=Object(a),f=0;f<c;f++){var m=h[f];if(l[m]!==d[m]||!(m in d))return!1}return!0}},function(i,r,t){r.a=o;var s=t(14);function o(a){for(var l={},h=Object(s.a)(a),c=0,d=h.length;c<d;c++)l[a[h[c]]]=h[c];return l}},function(i,r,t){r.a=o;var s=t(29);function o(a){var l=[];for(var h in a)Object(s.a)(a[h])&&l.push(h);return l.sort()}},function(i,r,t){var s=t(130),o=t(81);r.a=Object(s.a)(o.a)},function(i,r,t){var s=t(130),o=t(81);r.a=Object(s.a)(o.a,!0)},function(i,r,t){r.a=l;var s=t(50),o=t(6);function a(){return function(){}}function l(h){if(!Object(s.a)(h))return{};if(o.j)return Object(o.j)(h);var c=a();c.prototype=h;var d=new c;return c.prototype=null,d}},function(i,r,t){r.a=l;var s=t(50),o=t(51),a=t(181);function l(h){return Object(s.a)(h)?Object(o.a)(h)?h.slice():Object(a.a)({},h):h}},function(i,r,t){r.a=l;var s=t(82),o=t(132),a=t(167);function l(h,c,d){var f=Object(o.a)(h,Object(s.a)(c));return Object(a.a)(f)?d:f}},function(i,r,t){r.a=a;var s=t(23),o=t(51);function a(l){return Object(o.a)(l)?l:[l]}s.a.toPath=a},function(i,r,t){r.a=f;var s=t(133),o=t(29),a=t(50),l=t(51),h=t(100),c=t(134),d=t(83);function f(m,g,v){return m==null?s.a:Object(o.a)(m)?Object(d.a)(m,g,v):Object(a.a)(m)&&!Object(l.a)(m)?Object(h.a)(m):Object(c.a)(m)}},function(i,r,t){r.a=a;var s=t(23),o=t(187);function a(l,h){return Object(o.a)(l,h,1/0)}s.a.iteratee=a},function(i,r,t){r.a=s;function s(){}},function(i,r,t){r.a=s;function s(o,a){return a==null&&(a=o,o=0),o+Math.floor(Math.random()*(a-o+1))}},function(i,r,t){r.a=o;var s=t(14);function o(a){var l=function(f){return a[f]},h="(?:"+Object(s.a)(a).join("|")+")",c=RegExp(h),d=RegExp(h,"g");return function(f){return f=f==null?"":""+f,c.test(f)?f.replace(d,l):f}}},function(i,r,t){r.a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}},function(i,r,t){var s=t(23);r.a=s.a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}},function(i,r,t){r.a=a;var s=t(183),o=t(50);function a(l,h,c,d,f){if(!(d instanceof h))return l.apply(c,f);var m=Object(s.a)(l.prototype),g=l.apply(m,f);return Object(o.a)(g)?g:m}},function(i,r,t){var s=t(22),o=t(29),a=t(194);r.a=Object(s.a)(function(l,h,c){if(!Object(o.a)(l))throw new TypeError("Bind must be called on a function");var d=Object(s.a)(function(f){return Object(a.a)(l,d,h,this,c.concat(f))});return d})},function(i,r,t){var s=t(22);r.a=Object(s.a)(function(o,a,l){return setTimeout(function(){return o.apply(null,l)},a)})},function(i,r,t){r.a=s;function s(o,a){var l;return function(){return--o>0&&(l=a.apply(this,arguments)),o<=1&&(a=null),l}}},function(i,r,t){r.a=a;var s=t(19),o=t(14);function a(l,h,c){h=Object(s.a)(h,c);for(var d=Object(o.a)(l),f,m=0,g=d.length;m<g;m++)if(f=d[m],h(l[f],f,l))return f}},function(i,r,t){r.a=a;var s=t(19),o=t(30);function a(l){return function(h,c,d){c=Object(s.a)(c,d);for(var f=Object(o.a)(h),m=l>0?0:f-1;m>=0&&m<f;m+=l)if(c(h[m],m,h))return m;return-1}}},function(i,r,t){var s=t(199);r.a=Object(s.a)(-1)},function(i,r,t){r.a=a;var s=t(19),o=t(30);function a(l,h,c,d){c=Object(s.a)(c,d,1);for(var f=c(h),m=0,g=Object(o.a)(l);m<g;){var v=Math.floor((m+g)/2);c(l[v])<f?m=v+1:g=v}return m}},function(i,r,t){var s=t(201),o=t(137),a=t(203);r.a=Object(a.a)(1,o.a,s.a)},function(i,r,t){r.a=l;var s=t(30),o=t(6),a=t(172);function l(h,c,d){return function(f,m,g){var v=0,p=Object(s.a)(f);if(typeof g=="number")h>0?v=g>=0?g:Math.max(g+p,v):p=g>=0?Math.min(g+1,p):g+p+1;else if(d&&g&&p)return g=d(f,m),f[g]===m?g:-1;if(m!==m)return g=c(o.q.call(f,v,p),a.a),g>=0?g+v:-1;for(g=h>0?v:p-1;g>=0&&g<p;g+=h)if(f[g]===m)return g;return-1}}},function(i,r,t){r.a=l;var s=t(24),o=t(137),a=t(198);function l(h,c,d){var f=Object(s.a)(h)?o.a:a.a,m=f(h,c,d);if(m!==void 0&&m!==-1)return h[m]}},function(i,r,t){r.a=l;var s=t(24),o=t(14),a=t(83);function l(h){var c=function(d,f,m,g){var v=!Object(s.a)(d)&&Object(o.a)(d),p=(v||d).length,E=h>0?0:p-1;for(g||(m=d[v?v[E]:E],E+=h);E>=0&&E<p;E+=h){var w=v?v[E]:E;m=f(m,d[w],w,d)}return m};return function(d,f,m,g){var v=arguments.length>=3;return c(d,Object(a.a)(f,g,4),m,v)}}},function(i,r,t){r.a=h;var s=t(24),o=t(64),a=t(19),l=t(52);function h(c,d,f){var m=-1/0,g=-1/0,v,p;if(d==null||typeof d=="number"&&typeof c[0]!="object"&&c!=null){c=Object(s.a)(c)?c:Object(o.a)(c);for(var E=0,w=c.length;E<w;E++)v=c[E],v!=null&&v>m&&(m=v)}else d=Object(a.a)(d,f),Object(l.a)(c,function(O,T,S){p=d(O,T,S),(p>g||p===-1/0&&m===-1/0)&&(m=O,g=p)});return m}},function(i,r,t){r.a=c;var s=t(24),o=t(184),a=t(64),l=t(30),h=t(190);function c(d,f,m){if(f==null||m)return Object(s.a)(d)||(d=Object(a.a)(d)),d[Object(h.a)(d.length-1)];var g=Object(s.a)(d)?Object(o.a)(d):Object(a.a)(d),v=Object(l.a)(g);f=Math.max(Math.min(f,v),0);for(var p=v-1,E=0;E<f;E++){var w=Object(h.a)(E,p),O=g[E];g[E]=g[w],g[w]=O}return g.slice(0,f)}},function(i,r,t){var s=t(22),o=t(29),a=t(83),l=t(81),h=t(345),c=t(65);r.a=Object(s.a)(function(d,f){var m={},g=f[0];if(d==null)return m;Object(o.a)(g)?(f.length>1&&(g=Object(a.a)(g,f[1])),f=Object(l.a)(d)):(g=h.a,f=Object(c.a)(f,!1,!1),d=Object(d));for(var v=0,p=f.length;v<p;v++){var E=f[v],w=d[E];g(w,E,d)&&(m[E]=w)}return m})},function(i,r,t){r.a=o;var s=t(6);function o(a,l,h){return s.q.call(a,0,Math.max(0,a.length-(l==null||h?1:l)))}},function(i,r,t){r.a=o;var s=t(6);function o(a,l,h){return s.q.call(a,l==null||h?1:l)}},function(i,r,t){var s=t(22),o=t(65),a=t(84),l=t(85);r.a=Object(s.a)(function(h,c){return c=Object(o.a)(c,!0,!0),Object(a.a)(h,function(d){return!Object(l.a)(c,d)})})},function(i,r,t){r.a=h;var s=t(168),o=t(19),a=t(30),l=t(85);function h(c,d,f,m){Object(s.a)(d)||(m=f,f=d,d=!1),f!=null&&(f=Object(o.a)(f,m));for(var g=[],v=[],p=0,E=Object(a.a)(c);p<E;p++){var w=c[p],O=f?f(w,p,c):w;d&&!f?((!p||v!==O)&&g.push(w),v=O):f?Object(l.a)(v,O)||(v.push(O),g.push(w)):Object(l.a)(g,w)||g.push(w)}return g}},function(i,r,t){r.a=l;var s=t(206),o=t(30),a=t(138);function l(h){for(var c=h&&Object(s.a)(h,o.a).length||0,d=Array(c),f=0;f<c;f++)d[f]=Object(a.a)(h,f);return d}},function(i,r,t){r.a=o;var s=t(23);function o(a,l){return a._chain?Object(s.a)(l).chain():l}},function(i,r,t){var s=t(0),o=t(3),a=t(86),l=t(17),h=t(33),c=t(36),d=t(363),f=t(103),m=t(216),g=t(104),v=t(5),p=t(56),E=v("isConcatSpreadable"),w=p>=51||!o(function(){var M=[];return M[E]=!1,M.concat()[0]!==M}),O=g("concat"),T=function(M){if(!l(M))return!1;var P=M[E];return P!==void 0?!!P:a(M)},S=!w||!O;s({target:"Array",proto:!0,arity:1,forced:S},{concat:function(P){var y=h(this),C=m(y,0),b=0,R,D,I,x,A;for(R=-1,I=arguments.length;R<I;R++)if(A=R===-1?y:arguments[R],T(A))for(x=c(A),d(b+x),D=0;D<x;D++,b++)D in A&&f(C,b,A[D]);else d(b+1),f(C,b++,A);return C.length=b,C}})},function(i,r,t){var s=t(364);i.exports=function(o,a){return new(s(o))(a===0?0:a)}},function(i,r,t){i.exports=t(369)},function(i,r,t){var s=t(0),o=t(18),a=t(71),l=t(11),h=t(4),c=t(3),d=t(86),f=t(8),m=t(17),g=t(89),v=t(99),p=t(55),E=o("JSON","stringify"),w=h(/./.exec),O=h("".charAt),T=h("".charCodeAt),S=h("".replace),M=h(1 .toString),P=/[\uD800-\uDFFF]/g,y=/^[\uD800-\uDBFF]$/,C=/^[\uDC00-\uDFFF]$/,b=!p||c(function(){var x=o("Symbol")();return E([x])!="[null]"||E({a:x})!="{}"||E(Object(x))!="{}"}),R=c(function(){return E("\uDF06\uD834")!=='"\\udf06\\ud834"'||E("\uDEAD")!=='"\\udead"'}),D=function(x,A){var N=v(arguments),F=A;if(!(!m(A)&&x===void 0||g(x)))return d(A)||(A=function(B,L){if(f(F)&&(L=l(F,this,B,L)),!g(L))return L}),N[1]=A,a(E,null,N)},I=function(x,A,N){var F=O(N,A-1),B=O(N,A+1);return w(y,x)&&!w(C,B)||w(C,x)&&!w(y,F)?"\\u"+M(T(x,0),16):x};E&&s({target:"JSON",stat:!0,arity:3,forced:b||R},{stringify:function(A,N,F){var B=v(arguments),L=a(b?D:E,null,B);return R&&typeof L=="string"?S(L,P,I):L}})},function(i,r,t){var s=t(381),o=t(382);function a(l,h,c){var d=h&&c||0;typeof l=="string"&&(h=l==="binary"?new Array(16):null,l=null),l=l||{};var f=l.random||(l.rng||s)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,h)for(var m=0;m<16;++m)h[d+m]=f[m];return h||o(f)}i.exports=a},function(i,r,t){i.exports=t(221)},function(i,r,t){var s=t(385);i.exports=s},function(i,r,t){i.exports="4.15.2"},function(i,r,t){var s=Object.prototype.hasOwnProperty,o="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(o=!1));function l(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function h(){this._events=new a,this._eventsCount=0}h.prototype.eventNames=function(){var d=[],f,m;if(this._eventsCount===0)return d;for(m in f=this._events)s.call(f,m)&&d.push(o?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},h.prototype.listeners=function(d,f){var m=o?o+d:d,g=this._events[m];if(f)return!!g;if(!g)return[];if(g.fn)return[g.fn];for(var v=0,p=g.length,E=new Array(p);v<p;v++)E[v]=g[v].fn;return E},h.prototype.emit=function(d,f,m,g,v,p){var E=o?o+d:d;if(!this._events[E])return!1;var w=this._events[E],O=arguments.length,T,S;if(w.fn){switch(w.once&&this.removeListener(d,w.fn,void 0,!0),O){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,m),!0;case 4:return w.fn.call(w.context,f,m,g),!0;case 5:return w.fn.call(w.context,f,m,g,v),!0;case 6:return w.fn.call(w.context,f,m,g,v,p),!0}for(S=1,T=new Array(O-1);S<O;S++)T[S-1]=arguments[S];w.fn.apply(w.context,T)}else{var M=w.length,P;for(S=0;S<M;S++)switch(w[S].once&&this.removeListener(d,w[S].fn,void 0,!0),O){case 1:w[S].fn.call(w[S].context);break;case 2:w[S].fn.call(w[S].context,f);break;case 3:w[S].fn.call(w[S].context,f,m);break;case 4:w[S].fn.call(w[S].context,f,m,g);break;default:if(!T)for(P=1,T=new Array(O-1);P<O;P++)T[P-1]=arguments[P];w[S].fn.apply(w[S].context,T)}}return!0},h.prototype.on=function(d,f,m){var g=new l(f,m||this),v=o?o+d:d;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],g]:this._events[v].push(g):(this._events[v]=g,this._eventsCount++),this},h.prototype.once=function(d,f,m){var g=new l(f,m||this,!0),v=o?o+d:d;return this._events[v]?this._events[v].fn?this._events[v]=[this._events[v],g]:this._events[v].push(g):(this._events[v]=g,this._eventsCount++),this},h.prototype.removeListener=function(d,f,m,g){var v=o?o+d:d;if(!this._events[v])return this;if(!f)return--this._eventsCount===0?this._events=new a:delete this._events[v],this;var p=this._events[v];if(p.fn)p.fn===f&&(!g||p.once)&&(!m||p.context===m)&&(--this._eventsCount===0?this._events=new a:delete this._events[v]);else{for(var E=0,w=[],O=p.length;E<O;E++)(p[E].fn!==f||g&&!p[E].once||m&&p[E].context!==m)&&w.push(p[E]);w.length?this._events[v]=w.length===1?w[0]:w:--this._eventsCount===0?this._events=new a:delete this._events[v]}return this},h.prototype.removeAllListeners=function(d){var f;return d?(f=o?o+d:d,this._events[f]&&(--this._eventsCount===0?this._events=new a:delete this._events[f])):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=o,h.EventEmitter=h,i.exports=h},function(i,r,t){var s=t(1),o=s(t(10)),a=t(70),l=a.getAdapter,h=["getItem","setItem","removeItem","clear"],c={get async(){return l("storage").async}};h.forEach(function(d){c[d+"Async"]=function(){var f=l("storage");return o.default.resolve(f[d].apply(f,arguments))},c[d]=function(){var f=l("storage");if(!f.async)return f[d].apply(f,arguments);var m=new Error("Synchronous API ["+d+"] is not available in this runtime.");throw m.code="SYNC_API_NOT_AVAILABLE",m}}),i.exports=c},function(i,r,t){var s=t(1),o=s(t(25)),a=s(t(37)),l=t(224),h=t(67),c=r.removeAsync=l.removeItemAsync.bind(l),d=function(m,g){try{m=JSON.parse(m)}catch{return null}if(m){var v=m.expiredAt&&m.expiredAt<Date.now();return v?c(g).then(function(){return null}):m.value}return null};r.getAsync=function(f){var m;return f=(0,o.default)(m="AV/".concat(h.applicationId,"/")).call(m,f),l.getItemAsync(f).then(function(g){return d(g,f)})},r.setAsync=function(f,m,g){var v,p={value:m};return typeof g=="number"&&(p.expiredAt=Date.now()+g),l.setItemAsync((0,o.default)(v="AV/".concat(h.applicationId,"/")).call(v,f),(0,a.default)(p))}},function(i,r,t){var s=t(388);i.exports=s},function(i,r,t){var s=t(391);i.exports=s},function(i,r,t){var s=t(394);i.exports=s},function(i,r,t){i.exports=t(397)},function(i,r,t){var s=t(400);t(63),i.exports=s},function(i,r,t){var s=t(116),o=t(36),a=t(103),l=Array,h=Math.max;i.exports=function(c,d,f){for(var m=o(c),g=s(d,m),v=s(f===void 0?m:f,m),p=l(h(v-g,0)),E=0;g<v;g++,E++)a(p,E,c[g]);return p.length=E,p}},function(i,r,t){var s=t(11),o=t(18),a=t(5),l=t(48);i.exports=function(){var h=o("Symbol"),c=h&&h.prototype,d=c&&c.valueOf,f=a("toPrimitive");c&&!c[f]&&l(c,f,function(m){return s(d,this)},{arity:1})}},function(i,r,t){var s=t(55);i.exports=s&&!!Symbol.for&&!!Symbol.keyFor},function(i,r,t){var s=t(7);s("iterator")},function(i,r,t){var s=t(435);t(63),i.exports=s},function(i,r,t){i.exports=t(237)},function(i,r,t){var s=t(454);i.exports=s},function(i,r,t){i.exports=t(458)},function(i,r,t){var s=t(4),o=t(28),a=t(17),l=t(13),h=t(99),c=t(72),d=Function,f=s([].concat),m=s([].join),g={},v=function(p,E,w){if(!l(g,E)){for(var O=[],T=0;T<E;T++)O[T]="a["+T+"]";g[E]=d("C,a","return new C("+m(O,",")+")")}return g[E](p,w)};i.exports=c?d.bind:function(E){var w=o(this),O=w.prototype,T=h(arguments,1),S=function(){var P=f(T,h(arguments));return this instanceof S?v(w,P.length,P):w.apply(E,P)};return a(O)&&(S.prototype=O),S}},function(i,r,t){i.exports=t(479)},function(i,r,t){i.exports=t(482)},function(i,r){var t={utf8:{stringToBytes:function(s){return t.bin.stringToBytes(unescape(encodeURIComponent(s)))},bytesToString:function(s){return decodeURIComponent(escape(t.bin.bytesToString(s)))}},bin:{stringToBytes:function(s){for(var o=[],a=0;a<s.length;a++)o.push(s.charCodeAt(a)&255);return o},bytesToString:function(s){for(var o=[],a=0;a<s.length;a++)o.push(String.fromCharCode(s[a]));return o.join("")}}};i.exports=t},function(i,r){i.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(i,r,t){var s=t(1),o=s(t(87)),a=s(t(144));function l(c){"@babel/helpers - typeof";return typeof o.default=="function"&&typeof a.default=="symbol"?l=function(f){return typeof f}:l=function(f){return f&&typeof o.default=="function"&&f.constructor===o.default&&f!==o.default.prototype?"symbol":typeof f},l(c)}function h(c){return c!==null&&l(c)==="object"}i.exports=h},function(i,r,t){var s=t(246),o=t(544);i.exports=o(s)},function(i,r,t){i.exports=t(247)},function(i,r,t){var s=t(1),o=s(t(10));/*!
 * LeanCloud JavaScript SDK
 * https://leancloud.cn
 *
 * Copyright 2016 LeanCloud.cn, Inc.
 * The LeanCloud JavaScript SDK is freely distributable under the MIT license.
 */var a=t(2),l=t(67);l._=a,l.version=t(222),l.Promise=o.default,l.localStorage=t(224),l.Cache=t(225),l.Error=t(43),t(390),t(442)(l),t(443)(l),t(444)(l),t(445)(l),t(450)(l),t(451)(l),t(504)(l),t(530)(l),t(531)(l),t(533)(l),t(534)(l),t(535)(l),t(536)(l),t(537)(l),t(538)(l),t(539)(l),t(540)(l),t(541)(l),l.Conversation=t(542),t(543),i.exports=l},function(i,r,t){var s=t(249);t(63),i.exports=s},function(i,r,t){t(250),t(60),t(96),t(267),t(283),t(284),t(285),t(79);var s=t(15);i.exports=s.Promise},function(i,r,t){t(251)},function(i,r,t){var s=t(0),o=t(12),a=t(90),l=t(92),h=t(256),c=t(59),d=t(39),f=t(44),m=t(260),g=t(261),v=t(76),p=t(262),E=t(5),w=t(263),O=E("toStringTag"),T=Error,S=[].push,M=function(C,b){var R=arguments.length>2?arguments[2]:void 0,D=o(P,this),I;l?I=l(new T,D?a(this):P):(I=D?this:c(P),d(I,O,"Error")),b!==void 0&&d(I,"message",p(b)),w&&d(I,"stack",m(I.stack,1)),g(I,R);var x=[];return v(C,S,{that:x}),d(I,"errors",x),I};l?l(M,T):h(M,T,{name:!0});var P=M.prototype=c(T.prototype,{constructor:f(1,M),message:f(1,""),name:f(1,"AggregateError")});s({global:!0,constructor:!0,arity:2},{AggregateError:M})},function(i,r,t){var s=t(11),o=t(17),a=t(89),l=t(110),h=t(253),c=t(5),d=TypeError,f=c("toPrimitive");i.exports=function(m,g){if(!o(m)||a(m))return m;var v=l(m,f),p;if(v){if(g===void 0&&(g="default"),p=s(v,m,g),!o(p)||a(p))return p;throw d("Can't convert object to primitive value")}return g===void 0&&(g="number"),h(m,g)}},function(i,r,t){var s=t(11),o=t(8),a=t(17),l=TypeError;i.exports=function(h,c){var d,f;if(c==="string"&&o(d=h.toString)&&!a(f=s(d,h))||o(d=h.valueOf)&&!a(f=s(d,h))||c!=="string"&&o(d=h.toString)&&!a(f=s(d,h)))return f;throw l("Can't convert object to primitive value")}},function(i,r,t){var s=t(9),o=Object.defineProperty;i.exports=function(a,l){try{o(s,a,{value:l,configurable:!0,writable:!0})}catch{s[a]=l}return l}},function(i,r,t){var s=t(8),o=String,a=TypeError;i.exports=function(l){if(typeof l=="object"||s(l))return l;throw a("Can't set "+o(l)+" as a prototype")}},function(i,r,t){var s=t(13),o=t(257),a=t(73),l=t(34);i.exports=function(h,c,d){for(var f=o(c),m=l.f,g=a.f,v=0;v<f.length;v++){var p=f[v];!s(h,p)&&!(d&&s(d,p))&&m(h,p,g(c,p))}}},function(i,r,t){var s=t(18),o=t(4),a=t(114),l=t(119),h=t(21),c=o([].concat);i.exports=s("Reflect","ownKeys")||function(f){var m=a.f(h(f)),g=l.f;return g?c(m,g(f)):m}},function(i,r){var t=Math.ceil,s=Math.floor;i.exports=Math.trunc||function(a){var l=+a;return(l>0?s:t)(l)}},function(i,r,t){var s=t(117),o=Math.min;i.exports=function(a){return a>0?o(s(a),9007199254740991):0}},function(i,r,t){var s=t(4),o=Error,a=s("".replace),l=function(d){return String(o(d).stack)}("zxcasd"),h=/\n\s*at [^:]*:[^\n]*/,c=h.test(l);i.exports=function(d,f){if(c&&typeof d=="string"&&!o.prepareStackTrace)for(;f--;)d=a(d,h,"");return d}},function(i,r,t){var s=t(17),o=t(39);i.exports=function(a,l){s(l)&&"cause"in l&&o(a,"cause",l.cause)}},function(i,r,t){var s=t(40);i.exports=function(o,a){return o===void 0?arguments.length<2?"":a:s(o)}},function(i,r,t){var s=t(3),o=t(44);i.exports=!s(function(){var a=Error("a");return"stack"in a?(Object.defineProperty(a,"stack",o(1,7)),a.stack!==7):!0})},function(i,r,t){var s=t(9),o=t(8),a=t(123),l=s.WeakMap;i.exports=o(l)&&/native code/.test(a(l))},function(i,r,t){var s=t(159).IteratorPrototype,o=t(59),a=t(44),l=t(61),h=t(46),c=function(){return this};i.exports=function(d,f,m,g){var v=f+" Iterator";return d.prototype=o(s,{next:a(+!g,m)}),l(d,v,!1,!0),h[v]=c,d}},function(i,r,t){var s=t(121),o=t(47);i.exports=s?{}.toString:function(){return"[object "+o(this)+"]"}},function(i,r,t){t(268),t(278),t(279),t(280),t(281),t(282)},function(i,r,t){var s=t(0),o=t(32),a=t(97),l=t(9),h=t(11),c=t(48),d=t(92),f=t(61),m=t(269),g=t(28),v=t(8),p=t(17),E=t(270),w=t(160),O=t(162).set,T=t(272),S=t(275),M=t(77),P=t(276),y=t(95),C=t(62),b=t(78),R=t(49),D="Promise",I=b.CONSTRUCTOR,x=b.REJECTION_EVENT,A=b.SUBCLASSING,N=y.getterFor(D),F=y.set,B=C&&C.prototype,L=C,W=B,z=l.TypeError,j=l.document,H=l.process,K=R.f,Z=K,Q=!!(j&&j.createEvent&&l.dispatchEvent),V="unhandledrejection",ee="rejectionhandled",ue=0,q=1,he=2,fe=1,Ne=2,je,Le,ke,He,_e=function(re){var de;return p(re)&&v(de=re.then)?de:!1},ze=function(re,de){var Oe=de.value,ye=de.state==q,Re=ye?re.ok:re.fail,$=re.resolve,X=re.reject,Y=re.domain,oe,ge,De;try{Re?(ye||(de.rejection===Ne&&nt(de),de.rejection=fe),Re===!0?oe=Oe:(Y&&Y.enter(),oe=Re(Oe),Y&&(Y.exit(),De=!0)),oe===re.promise?X(z("Promise-chain cycle")):(ge=_e(oe))?h(ge,oe,$,X):$(oe)):X(Oe)}catch(rt){Y&&!De&&Y.exit(),X(rt)}},Ke=function(re,de){re.notified||(re.notified=!0,T(function(){for(var Oe=re.reactions,ye;ye=Oe.get();)ze(ye,re);re.notified=!1,de&&!re.rejection&&Ft(re)}))},lt=function(re,de,Oe){var ye,Re;Q?(ye=j.createEvent("Event"),ye.promise=de,ye.reason=Oe,ye.initEvent(re,!1,!0),l.dispatchEvent(ye)):ye={promise:de,reason:Oe},!x&&(Re=l["on"+re])?Re(ye):re===V&&S("Unhandled promise rejection",Oe)},Ft=function(re){h(O,l,function(){var de=re.facade,Oe=re.value,ye=vt(re),Re;if(ye&&(Re=M(function(){a?H.emit("unhandledRejection",Oe,de):lt(V,de,Oe)}),re.rejection=a||vt(re)?Ne:fe,Re.error))throw Re.value})},vt=function(re){return re.rejection!==fe&&!re.parent},nt=function(re){h(O,l,function(){var de=re.facade;a?H.emit("rejectionHandled",de):lt(ee,de,re.value)})},Ye=function(re,de,Oe){return function(ye){re(de,ye,Oe)}},Je=function(re,de,Oe){re.done||(re.done=!0,Oe&&(re=Oe),re.value=de,re.state=he,Ke(re,!0))},ut=function(re,de,Oe){if(!re.done){re.done=!0,Oe&&(re=Oe);try{if(re.facade===de)throw z("Promise can't be resolved itself");var ye=_e(de);ye?T(function(){var Re={done:!1};try{h(ye,de,Ye(ut,Re,re),Ye(Je,Re,re))}catch($){Je(Re,$,re)}}):(re.value=de,re.state=q,Ke(re,!1))}catch(Re){Je({done:!1},Re,re)}}};if(I&&(L=function(de){E(this,W),g(de),h(je,this);var Oe=N(this);try{de(Ye(ut,Oe),Ye(Je,Oe))}catch(ye){Je(Oe,ye)}},W=L.prototype,je=function(de){F(this,{type:D,done:!1,notified:!1,parent:!1,reactions:new P,rejection:!1,state:ue,value:void 0})},je.prototype=c(W,"then",function(de,Oe){var ye=N(this),Re=K(w(this,L));return ye.parent=!0,Re.ok=v(de)?de:!0,Re.fail=v(Oe)&&Oe,Re.domain=a?H.domain:void 0,ye.state==ue?ye.reactions.add(Re):T(function(){ze(Re,ye)}),Re.promise}),Le=function(){var re=new je,de=N(re);this.promise=re,this.resolve=Ye(ut,de),this.reject=Ye(Je,de)},R.f=K=function(re){return re===L||re===ke?new Le(re):Z(re)},!o&&v(C)&&B!==Object.prototype)){He=B.then,A||c(B,"then",function(de,Oe){var ye=this;return new L(function(Re,$){h(He,ye,Re,$)}).then(de,Oe)},{unsafe:!0});try{delete B.constructor}catch{}d&&d(B,W)}s({global:!0,constructor:!0,wrap:!0,forced:I},{Promise:L}),f(L,D,!1,!0),m(D)},function(i,r,t){var s=t(18),o=t(34),a=t(5),l=t(20),h=a("species");i.exports=function(c){var d=s(c),f=o.f;l&&d&&!d[h]&&f(d,h,{configurable:!0,get:function(){return this}})}},function(i,r,t){var s=t(12),o=TypeError;i.exports=function(a,l){if(s(l,a))return a;throw o("Incorrect invocation")}},function(i,r){var t=TypeError;i.exports=function(s,o){if(s<o)throw t("Not enough arguments");return s}},function(i,r,t){var s=t(9),o=t(58),a=t(73).f,l=t(162).set,h=t(163),c=t(273),d=t(274),f=t(97),m=s.MutationObserver||s.WebKitMutationObserver,g=s.document,v=s.process,p=s.Promise,E=a(s,"queueMicrotask"),w=E&&E.value,O,T,S,M,P,y,C,b;w||(O=function(){var R,D;for(f&&(R=v.domain)&&R.exit();T;){D=T.fn,T=T.next;try{D()}catch(I){throw T?M():S=void 0,I}}S=void 0,R&&R.enter()},!h&&!f&&!d&&m&&g?(P=!0,y=g.createTextNode(""),new m(O).observe(y,{characterData:!0}),M=function(){y.data=P=!P}):!c&&p&&p.resolve?(C=p.resolve(void 0),C.constructor=p,b=o(C.then,C),M=function(){b(O)}):f?M=function(){v.nextTick(O)}:(l=o(l,s),M=function(){l(O)})),i.exports=w||function(R){var D={fn:R,next:void 0};S&&(S.next=D),T||(T=D,M()),S=D}},function(i,r,t){var s=t(45),o=t(9);i.exports=/ipad|iphone|ipod/i.test(s)&&o.Pebble!==void 0},function(i,r,t){var s=t(45);i.exports=/web0s(?!.*chrome)/i.test(s)},function(i,r,t){var s=t(9);i.exports=function(o,a){var l=s.console;l&&l.error&&(arguments.length==1?l.error(o):l.error(o,a))}},function(i,r){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(s){var o={item:s,next:null};this.head?this.tail.next=o:this.head=o,this.tail=o},get:function(){var s=this.head;if(s)return this.head=s.next,this.tail===s&&(this.tail=null),s.item}},i.exports=t},function(i,r){i.exports=typeof window=="object"&&typeof Deno!="object"},function(i,r,t){var s=t(0),o=t(11),a=t(28),l=t(49),h=t(77),c=t(76),d=t(164);s({target:"Promise",stat:!0,forced:d},{all:function(m){var g=this,v=l.f(g),p=v.resolve,E=v.reject,w=h(function(){var O=a(g.resolve),T=[],S=0,M=1;c(m,function(P){var y=S++,C=!1;M++,o(O,g,P).then(function(b){C||(C=!0,T[y]=b,--M||p(T))},E)}),--M||p(T)});return w.error&&E(w.value),v.promise}})},function(i,r,t){var s=t(0),o=t(32),a=t(78).CONSTRUCTOR,l=t(62),h=t(18),c=t(8),d=t(48),f=l&&l.prototype;if(s({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(g){return this.then(void 0,g)}}),!o&&c(l)){var m=h("Promise").prototype.catch;f.catch!==m&&d(f,"catch",m,{unsafe:!0})}},function(i,r,t){var s=t(0),o=t(11),a=t(28),l=t(49),h=t(77),c=t(76),d=t(164);s({target:"Promise",stat:!0,forced:d},{race:function(m){var g=this,v=l.f(g),p=v.reject,E=h(function(){var w=a(g.resolve);c(m,function(O){o(w,g,O).then(v.resolve,p)})});return E.error&&p(E.value),v.promise}})},function(i,r,t){var s=t(0),o=t(11),a=t(49),l=t(78).CONSTRUCTOR;s({target:"Promise",stat:!0,forced:l},{reject:function(c){var d=a.f(this);return o(d.reject,void 0,c),d.promise}})},function(i,r,t){var s=t(0),o=t(18),a=t(32),l=t(62),h=t(78).CONSTRUCTOR,c=t(166),d=o("Promise"),f=a&&!h;s({target:"Promise",stat:!0,forced:a||h},{resolve:function(g){return c(f&&this===d?l:this,g)}})},function(i,r,t){var s=t(0),o=t(11),a=t(28),l=t(49),h=t(77),c=t(76);s({target:"Promise",stat:!0},{allSettled:function(f){var m=this,g=l.f(m),v=g.resolve,p=g.reject,E=h(function(){var w=a(m.resolve),O=[],T=0,S=1;c(f,function(M){var P=T++,y=!1;S++,o(w,m,M).then(function(C){y||(y=!0,O[P]={status:"fulfilled",value:C},--S||v(O))},function(C){y||(y=!0,O[P]={status:"rejected",reason:C},--S||v(O))})}),--S||v(O)});return E.error&&p(E.value),g.promise}})},function(i,r,t){var s=t(0),o=t(11),a=t(28),l=t(18),h=t(49),c=t(77),d=t(76),f="No one promise resolved";s({target:"Promise",stat:!0},{any:function(g){var v=this,p=l("AggregateError"),E=h.f(v),w=E.resolve,O=E.reject,T=c(function(){var S=a(v.resolve),M=[],P=0,y=1,C=!1;d(g,function(b){var R=P++,D=!1;y++,o(S,v,b).then(function(I){D||C||(C=!0,w(I))},function(I){D||C||(D=!0,M[R]=I,--y||O(new p(M,f)))})}),--y||O(new p(M,f))});return T.error&&O(T.value),E.promise}})},function(i,r,t){var s=t(0),o=t(32),a=t(62),l=t(3),h=t(18),c=t(8),d=t(160),f=t(166),m=t(48),g=a&&a.prototype,v=!!a&&l(function(){g.finally.call({then:function(){}},function(){})});if(s({target:"Promise",proto:!0,real:!0,forced:v},{finally:function(E){var w=d(this,h("Promise")),O=c(E);return this.then(O?function(T){return f(w,E()).then(function(){return T})}:E,O?function(T){return f(w,E()).then(function(){throw T})}:E)}}),!o&&c(a)){var p=h("Promise").prototype.finally;g.finally!==p&&m(g,"finally",p,{unsafe:!0})}},function(i,r,t){var s=t(4),o=t(117),a=t(40),l=t(74),h=s("".charAt),c=s("".charCodeAt),d=s("".slice),f=function(m){return function(g,v){var p=a(l(g)),E=o(v),w=p.length,O,T;return E<0||E>=w?m?"":void 0:(O=c(p,E),O<55296||O>56319||E+1===w||(T=c(p,E+1))<56320||T>57343?m?h(p,E):O:m?d(p,E,E+2):(O-55296<<10)+(T-56320)+65536)}};i.exports={codeAt:f(!1),charAt:f(!0)}},function(i,r){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(i,r,t){var s=t(124),o=Object(s.mixin)(s);o._=o,r.a=o},function(i,r,t){r.a=s;function s(o){return o===null}},function(i,r,t){r.a=s;function s(o){return!!(o&&o.nodeType===1)}},function(i,r,t){var s=t(16);r.a=Object(s.a)("Date")},function(i,r,t){var s=t(16);r.a=Object(s.a)("RegExp")},function(i,r,t){var s=t(16);r.a=Object(s.a)("Error")},function(i,r,t){var s=t(16);r.a=Object(s.a)("Object")},function(i,r,t){r.a=a;var s=t(6),o=t(170);function a(l){return!Object(o.a)(l)&&Object(s.f)(l)&&!isNaN(parseFloat(l))}},function(i,r,t){var s=t(175),o=t(128);r.a=Object(s.a)(o.a)},function(i,r,t){r.a=c;var s=t(30),o=t(51),a=t(125),l=t(127),h=t(14);function c(d){if(d==null)return!0;var f=Object(s.a)(d);return typeof f=="number"&&(Object(o.a)(d)||Object(a.a)(d)||Object(l.a)(d))?f===0:Object(s.a)(Object(h.a)(d))===0}},function(i,r,t){r.a=w;var s=t(23),o=t(6),a=t(128),l=t(173),h=t(29),c=t(80),d=t(126),f=t(14),m=t(41),g=t(299),v="[object DataView]";function p(O,T,S,M){if(O===T)return O!==0||1/O===1/T;if(O==null||T==null)return!1;if(O!==O)return T!==T;var P=typeof O;return P!=="function"&&P!=="object"&&typeof T!="object"?!1:E(O,T,S,M)}function E(O,T,S,M){O instanceof s.a&&(O=O._wrapped),T instanceof s.a&&(T=T._wrapped);var P=o.t.call(O);if(P!==o.t.call(T))return!1;if(c.a&&P=="[object Object]"&&Object(d.a)(O)){if(!Object(d.a)(T))return!1;P=v}switch(P){case"[object RegExp]":case"[object String]":return""+O==""+T;case"[object Number]":return+O!=+O?+T!=+T:+O==0?1/+O===1/T:+O==+T;case"[object Date]":case"[object Boolean]":return+O==+T;case"[object Symbol]":return o.d.valueOf.call(O)===o.d.valueOf.call(T);case"[object ArrayBuffer]":case v:return E(Object(g.a)(O),Object(g.a)(T),S,M)}var y=P==="[object Array]";if(!y&&Object(l.a)(O)){var C=Object(a.a)(O);if(C!==Object(a.a)(T))return!1;if(O.buffer===T.buffer&&O.byteOffset===T.byteOffset)return!0;y=!0}if(!y){if(typeof O!="object"||typeof T!="object")return!1;var b=O.constructor,R=T.constructor;if(b!==R&&!(Object(h.a)(b)&&b instanceof b&&Object(h.a)(R)&&R instanceof R)&&"constructor"in O&&"constructor"in T)return!1}S=S||[],M=M||[];for(var D=S.length;D--;)if(S[D]===O)return M[D]===T;if(S.push(O),M.push(T),y){if(D=O.length,D!==T.length)return!1;for(;D--;)if(!p(O[D],T[D],S,M))return!1}else{var I=Object(f.a)(O),x;if(D=I.length,Object(f.a)(T).length!==D)return!1;for(;D--;)if(x=I[D],!(Object(m.a)(T,x)&&p(O[x],T[x],S,M)))return!1}return S.pop(),M.pop(),!0}function w(O,T){return p(O,T)}},function(i,r,t){r.a=o;var s=t(128);function o(a){return new Uint8Array(a.buffer||a,a.byteOffset||0,Object(s.a)(a))}},function(i,r,t){var s=t(16),o=t(80),a=t(129);r.a=o.b?Object(a.a)(a.b):Object(s.a)("Map")},function(i,r,t){var s=t(16),o=t(80),a=t(129);r.a=o.b?Object(a.a)(a.d):Object(s.a)("WeakMap")},function(i,r,t){var s=t(16),o=t(80),a=t(129);r.a=o.b?Object(a.a)(a.c):Object(s.a)("Set")},function(i,r,t){var s=t(16);r.a=Object(s.a)("WeakSet")},function(i,r,t){r.a=o;var s=t(14);function o(a){for(var l=Object(s.a)(a),h=l.length,c=Array(h),d=0;d<h;d++)c[d]=[l[d],a[l[d]]];return c}},function(i,r,t){r.a=a;var s=t(183),o=t(131);function a(l,h){var c=Object(s.a)(l);return h&&Object(o.a)(c,h),c}},function(i,r,t){r.a=s;function s(o,a){return a(o),o}},function(i,r,t){r.a=a;var s=t(41),o=t(82);function a(l,h){h=Object(o.a)(h);for(var c=h.length,d=0;d<c;d++){var f=h[d];if(!Object(s.a)(l,f))return!1;l=l[f]}return!!c}},function(i,r,t){r.a=a;var s=t(19),o=t(14);function a(l,h,c){h=Object(s.a)(h,c);for(var d=Object(o.a)(l),f=d.length,m={},g=0;g<f;g++){var v=d[g];m[v]=h(l[v],v,l)}return m}},function(i,r,t){r.a=a;var s=t(189),o=t(185);function a(l){return l==null?s.a:function(h){return Object(o.a)(l,h)}}},function(i,r,t){r.a=o;var s=t(83);function o(a,l,h){var c=Array(Math.max(0,a));l=Object(s.a)(l,h,1);for(var d=0;d<a;d++)c[d]=l(d);return c}},function(i,r,t){var s=t(191),o=t(192);r.a=Object(s.a)(o.a)},function(i,r,t){var s=t(191),o=t(313);r.a=Object(s.a)(o.a)},function(i,r,t){var s=t(179),o=t(192);r.a=Object(s.a)(o.a)},function(i,r,t){r.a=f;var s=t(182),o=t(23);t(193);var a=/(.)^/,l={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},h=/\\|'|\r|\n|\u2028|\u2029/g;function c(m){return"\\"+l[m]}var d=/^\s*(\w|\$)+\s*$/;function f(m,g,v){!g&&v&&(g=v),g=Object(s.a)({},g,o.a.templateSettings);var p=RegExp([(g.escape||a).source,(g.interpolate||a).source,(g.evaluate||a).source].join("|")+"|$","g"),E=0,w="__p+='";m.replace(p,function(M,P,y,C,b){return w+=m.slice(E,b).replace(h,c),E=b+M.length,P?w+=`'+
((__t=(`+P+`))==null?'':_.escape(__t))+
'`:y?w+=`'+
((__t=(`+y+`))==null?'':__t)+
'`:C&&(w+=`';
`+C+`
__p+='`),M}),w+=`';
`;var O=g.variable;if(O){if(!d.test(O))throw new Error(O)}else w=`with(obj||{}){
`+w+`}
`,O="obj";w=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+w+`return __p;
`;var T;try{T=new Function(O,"_",w)}catch(M){throw M.source=w,M}var S=function(M){return T.call(this,M,o.a)};return S.source="function("+O+`){
`+w+"}",S}},function(i,r,t){r.a=a;var s=t(29),o=t(82);function a(l,h,c){h=Object(o.a)(h);var d=h.length;if(!d)return Object(s.a)(c)?c.call(l):c;for(var f=0;f<d;f++){var m=l==null?void 0:l[h[f]];m===void 0&&(m=c,f=d),l=Object(s.a)(m)?m.call(l):m}return l}},function(i,r,t){r.a=o;var s=0;function o(a){var l=++s+"";return a?a+l:l}},function(i,r,t){r.a=o;var s=t(23);function o(a){var l=Object(s.a)(a);return l._chain=!0,l}},function(i,r,t){var s=t(22),o=t(65),a=t(195);r.a=Object(s.a)(function(l,h){h=Object(o.a)(h,!1,!1);var c=h.length;if(c<1)throw new Error("bindAll must be passed function names");for(;c--;){var d=h[c];l[d]=Object(a.a)(l[d],l)}return l})},function(i,r,t){r.a=o;var s=t(41);function o(a,l){var h=function(c){var d=h.cache,f=""+(l?l.apply(this,arguments):c);return Object(s.a)(d,f)||(d[f]=a.apply(this,arguments)),d[f]};return h.cache={},h}},function(i,r,t){var s=t(101),o=t(196),a=t(23);r.a=Object(s.a)(o.a,a.a,1)},function(i,r,t){r.a=o;var s=t(135);function o(a,l,h){var c,d,f,m,g=0;h||(h={});var v=function(){g=h.leading===!1?0:Object(s.a)(),c=null,m=a.apply(d,f),c||(d=f=null)},p=function(){var E=Object(s.a)();!g&&h.leading===!1&&(g=E);var w=l-(E-g);return d=this,f=arguments,w<=0||w>l?(c&&(clearTimeout(c),c=null),g=E,m=a.apply(d,f),c||(d=f=null)):!c&&h.trailing!==!1&&(c=setTimeout(v,w)),m};return p.cancel=function(){clearTimeout(c),g=0,c=d=f=null},p}},function(i,r,t){r.a=a;var s=t(22),o=t(135);function a(l,h,c){var d,f,m,g,v,p=function(){var w=Object(o.a)()-f;h>w?d=setTimeout(p,h-w):(d=null,c||(g=l.apply(v,m)),d||(m=v=null))},E=Object(s.a)(function(w){return v=this,m=w,f=Object(o.a)(),d||(d=setTimeout(p,h),c&&(g=l.apply(v,m))),g});return E.cancel=function(){clearTimeout(d),d=m=v=null},E}},function(i,r,t){r.a=o;var s=t(101);function o(a,l){return Object(s.a)(l,a)}},function(i,r,t){r.a=s;function s(){var o=arguments,a=o.length-1;return function(){for(var l=a,h=o[a].apply(this,arguments);l--;)h=o[l].call(this,h);return h}}},function(i,r,t){r.a=s;function s(o,a){return function(){if(--o<1)return a.apply(this,arguments)}}},function(i,r,t){var s=t(101),o=t(197);r.a=Object(s.a)(o.a,2)},function(i,r,t){var s=t(200),o=t(203);r.a=Object(o.a)(-1,s.a)},function(i,r,t){r.a=a;var s=t(204),o=t(100);function a(l,h){return Object(s.a)(l,Object(o.a)(h))}},function(i,r,t){var s=t(205);r.a=Object(s.a)(1)},function(i,r,t){var s=t(205);r.a=Object(s.a)(-1)},function(i,r,t){r.a=l;var s=t(84),o=t(136),a=t(19);function l(h,c,d){return Object(s.a)(h,Object(o.a)(Object(a.a)(c)),d)}},function(i,r,t){r.a=l;var s=t(19),o=t(24),a=t(14);function l(h,c,d){c=Object(s.a)(c,d);for(var f=!Object(o.a)(h)&&Object(a.a)(h),m=(f||h).length,g=0;g<m;g++){var v=f?f[g]:g;if(!c(h[v],v,h))return!1}return!0}},function(i,r,t){r.a=l;var s=t(19),o=t(24),a=t(14);function l(h,c,d){c=Object(s.a)(c,d);for(var f=!Object(o.a)(h)&&Object(a.a)(h),m=(f||h).length,g=0;g<m;g++){var v=f?f[g]:g;if(c(h[v],v,h))return!0}return!1}},function(i,r,t){var s=t(22),o=t(29),a=t(66),l=t(132),h=t(82);r.a=Object(s.a)(function(c,d,f){var m,g;return Object(o.a)(d)?g=d:(d=Object(h.a)(d),m=d.slice(0,-1),d=d[d.length-1]),Object(a.a)(c,function(v){var p=g;if(!p){if(m&&m.length&&(v=Object(l.a)(v,m)),v==null)return;p=v[d]}return p==null?p:p.apply(v,f)})})},function(i,r,t){r.a=a;var s=t(84),o=t(100);function a(l,h){return Object(s.a)(l,Object(o.a)(h))}},function(i,r,t){r.a=h;var s=t(24),o=t(64),a=t(19),l=t(52);function h(c,d,f){var m=1/0,g=1/0,v,p;if(d==null||typeof d=="number"&&typeof c[0]!="object"&&c!=null){c=Object(s.a)(c)?c:Object(o.a)(c);for(var E=0,w=c.length;E<w;E++)v=c[E],v!=null&&v<m&&(m=v)}else d=Object(a.a)(d,f),Object(l.a)(c,function(O,T,S){p=d(O,T,S),(p<g||p===1/0&&m===1/0)&&(m=O,g=p)});return m}},function(i,r,t){r.a=o;var s=t(207);function o(a){return Object(s.a)(a,1/0)}},function(i,r,t){r.a=l;var s=t(19),o=t(138),a=t(66);function l(h,c,d){var f=0;return c=Object(s.a)(c,d),Object(o.a)(Object(a.a)(h,function(m,g,v){return{value:m,index:f++,criteria:c(m,g,v)}}).sort(function(m,g){var v=m.criteria,p=g.criteria;if(v!==p){if(v>p||v===void 0)return 1;if(v<p||p===void 0)return-1}return m.index-g.index}),"value")}},function(i,r,t){var s=t(102),o=t(41);r.a=Object(s.a)(function(a,l,h){Object(o.a)(a,h)?a[h].push(l):a[h]=[l]})},function(i,r,t){var s=t(102);r.a=Object(s.a)(function(o,a,l){o[l]=a})},function(i,r,t){var s=t(102),o=t(41);r.a=Object(s.a)(function(a,l,h){Object(o.a)(a,h)?a[h]++:a[h]=1})},function(i,r,t){var s=t(102);r.a=Object(s.a)(function(o,a,l){o[l?0:1].push(a)},!0)},function(i,r,t){r.a=m;var s=t(51),o=t(6),a=t(125),l=t(24),h=t(66),c=t(133),d=t(64),f=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function m(g){return g?Object(s.a)(g)?o.q.call(g):Object(a.a)(g)?g.match(f):Object(l.a)(g)?Object(h.a)(g,c.a):Object(d.a)(g):[]}},function(i,r,t){r.a=a;var s=t(24),o=t(14);function a(l){return l==null?0:Object(s.a)(l)?l.length:Object(o.a)(l).length}},function(i,r,t){r.a=s;function s(o,a,l){return a in l}},function(i,r,t){var s=t(22),o=t(29),a=t(136),l=t(66),h=t(65),c=t(85),d=t(208);r.a=Object(s.a)(function(f,m){var g=m[0],v;return Object(o.a)(g)?(g=Object(a.a)(g),m.length>1&&(v=m[1])):(m=Object(l.a)(Object(h.a)(m,!1,!1),String),g=function(p,E){return!Object(c.a)(m,E)}),Object(d.a)(f,g,v)})},function(i,r,t){r.a=o;var s=t(209);function o(a,l,h){return a==null||a.length<1?l==null||h?void 0:[]:l==null||h?a[0]:Object(s.a)(a,a.length-l)}},function(i,r,t){r.a=o;var s=t(210);function o(a,l,h){return a==null||a.length<1?l==null||h?void 0:[]:l==null||h?a[a.length-1]:Object(s.a)(a,Math.max(0,a.length-l))}},function(i,r,t){r.a=o;var s=t(84);function o(a){return Object(s.a)(a,Boolean)}},function(i,r,t){r.a=o;var s=t(65);function o(a,l){return Object(s.a)(a,l,!1)}},function(i,r,t){var s=t(22),o=t(211);r.a=Object(s.a)(function(a,l){return Object(o.a)(a,l)})},function(i,r,t){var s=t(22),o=t(212),a=t(65);r.a=Object(s.a)(function(l){return Object(o.a)(Object(a.a)(l,!0,!0))})},function(i,r,t){r.a=a;var s=t(30),o=t(85);function a(l){for(var h=[],c=arguments.length,d=0,f=Object(s.a)(l);d<f;d++){var m=l[d];if(!Object(o.a)(h,m)){var g;for(g=1;g<c&&Object(o.a)(arguments[g],m);g++);g===c&&h.push(m)}}return h}},function(i,r,t){var s=t(22),o=t(213);r.a=Object(s.a)(o.a)},function(i,r,t){r.a=o;var s=t(30);function o(a,l){for(var h={},c=0,d=Object(s.a)(a);c<d;c++)l?h[a[c]]=l[c]:h[a[c][0]]=a[c][1];return h}},function(i,r,t){r.a=s;function s(o,a,l){a==null&&(a=o||0,o=0),l||(l=a<o?-1:1);for(var h=Math.max(Math.ceil((a-o)/l),0),c=Array(h),d=0;d<h;d++,o+=l)c[d]=o;return c}},function(i,r,t){r.a=o;var s=t(6);function o(a,l){if(l==null||l<1)return[];for(var h=[],c=0,d=a.length;c<d;)h.push(s.q.call(a,c,c+=l));return h}},function(i,r,t){r.a=c;var s=t(23),o=t(52),a=t(180),l=t(6),h=t(214);function c(d){return Object(o.a)(Object(a.a)(d),function(f){var m=s.a[f]=d[f];s.a.prototype[f]=function(){var g=[this._wrapped];return l.o.apply(g,arguments),Object(h.a)(this,m.apply(s.a,g))}}),s.a}},function(i,r,t){var s=t(23),o=t(52),a=t(6),l=t(214);Object(o.a)(["pop","push","reverse","shift","sort","splice","unshift"],function(h){var c=a.a[h];s.a.prototype[h]=function(){var d=this._wrapped;return d!=null&&(c.apply(d,arguments),(h==="shift"||h==="splice")&&d.length===0&&delete d[0]),Object(l.a)(this,d)}}),Object(o.a)(["concat","join","slice"],function(h){var c=a.a[h];s.a.prototype[h]=function(){var d=this._wrapped;return d!=null&&(d=c.apply(d,arguments)),Object(l.a)(this,d)}}),r.a=s.a},function(i,r,t){var s=t(361);i.exports=s},function(i,r,t){var s=t(12),o=t(362),a=Array.prototype;i.exports=function(l){var h=l.concat;return l===a||s(a,l)&&h===a.concat?o:h}},function(i,r,t){t(215);var s=t(26);i.exports=s("Array").concat},function(i,r){var t=TypeError,s=9007199254740991;i.exports=function(o){if(o>s)throw t("Maximum allowed index exceeded");return o}},function(i,r,t){var s=t(86),o=t(98),a=t(17),l=t(5),h=l("species"),c=Array;i.exports=function(d){var f;return s(d)&&(f=d.constructor,o(f)&&(f===c||s(f.prototype))?f=void 0:a(f)&&(f=f[h],f===null&&(f=void 0))),f===void 0?c:f}},function(i,r,t){var s=t(366);i.exports=s},function(i,r,t){var s=t(12),o=t(367),a=Array.prototype;i.exports=function(l){var h=l.map;return l===a||s(a,l)&&h===a.map?o:h}},function(i,r,t){t(368);var s=t(26);i.exports=s("Array").map},function(i,r,t){var s=t(0),o=t(105).map,a=t(104),l=a("map");s({target:"Array",proto:!0,forced:!l},{map:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}})},function(i,r,t){var s=t(370);i.exports=s},function(i,r,t){t(371);var s=t(15);i.exports=s.Object.keys},function(i,r,t){var s=t(0),o=t(33),a=t(120),l=t(3),h=l(function(){a(1)});s({target:"Object",stat:!0,forced:h},{keys:function(d){return a(o(d))}})},function(i,r,t){var s=t(373);i.exports=s},function(i,r,t){t(218);var s=t(15),o=t(71);s.JSON||(s.JSON={stringify:JSON.stringify}),i.exports=function(l,h,c){return o(s.JSON.stringify,null,arguments)}},function(i,r,t){var s=t(375);i.exports=s},function(i,r,t){var s=t(12),o=t(376),a=Array.prototype;i.exports=function(l){var h=l.indexOf;return l===a||s(a,l)&&h===a.indexOf?o:h}},function(i,r,t){t(377);var s=t(26);i.exports=s("Array").indexOf},function(i,r,t){var s=t(0),o=t(4),a=t(115).indexOf,l=t(139),h=o([].indexOf),c=!!h&&1/h([1],1,-0)<0,d=l("indexOf");s({target:"Array",proto:!0,forced:c||!d},{indexOf:function(m){var g=arguments.length>1?arguments[1]:void 0;return c?h(this,m,g)||0:a(this,m,g)}})},function(i,r,t){t(63);var s=t(47),o=t(13),a=t(12),l=t(379),h=Array.prototype,c={DOMTokenList:!0,NodeList:!0};i.exports=function(d){var f=d.keys;return d===h||a(h,d)&&f===h.keys||o(c,s(d))?l:f}},function(i,r,t){var s=t(380);i.exports=s},function(i,r,t){t(60),t(96);var s=t(26);i.exports=s("Array").keys},function(i,r){var t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(t){var s=new Uint8Array(16);i.exports=function(){return t(s),s}}else{var o=new Array(16);i.exports=function(){for(var l=0,h;l<16;l++)(l&3)===0&&(h=Math.random()*4294967296),o[l]=h>>>((l&3)<<3)&255;return o}}},function(i,r){for(var t=[],s=0;s<256;++s)t[s]=(s+256).toString(16).substr(1);function o(a,l){var h=l||0,c=t;return[c[a[h++]],c[a[h++]],c[a[h++]],c[a[h++]],"-",c[a[h++]],c[a[h++]],"-",c[a[h++]],c[a[h++]],"-",c[a[h++]],c[a[h++]],"-",c[a[h++]],c[a[h++]],c[a[h++]],c[a[h++]],c[a[h++]],c[a[h++]]].join("")}i.exports=o},function(i,r,t){function s(o){l.debug=l,l.default=l,l.coerce=g,l.disable=f,l.enable=d,l.enabled=m,l.humanize=t(384),Object.keys(o).forEach(function(v){l[v]=o[v]}),l.instances=[],l.names=[],l.skips=[],l.formatters={};function a(v){for(var p=0,E=0;E<v.length;E++)p=(p<<5)-p+v.charCodeAt(E),p|=0;return l.colors[Math.abs(p)%l.colors.length]}l.selectColor=a;function l(v){var p;function E(){if(E.enabled){for(var w=arguments.length,O=new Array(w),T=0;T<w;T++)O[T]=arguments[T];var S=E,M=Number(new Date),P=M-(p||M);S.diff=P,S.prev=p,S.curr=M,p=M,O[0]=l.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");var y=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,function(b,R){if(b==="%%")return b;y++;var D=l.formatters[R];if(typeof D=="function"){var I=O[y];b=D.call(S,I),O.splice(y,1),y--}return b}),l.formatArgs.call(S,O);var C=S.log||l.log;C.apply(S,O)}}return E.namespace=v,E.enabled=l.enabled(v),E.useColors=l.useColors(),E.color=a(v),E.destroy=h,E.extend=c,typeof l.init=="function"&&l.init(E),l.instances.push(E),E}function h(){var v=l.instances.indexOf(this);return v!==-1?(l.instances.splice(v,1),!0):!1}function c(v,p){return l(this.namespace+(typeof p>"u"?":":p)+v)}function d(v){l.save(v),l.names=[],l.skips=[];var p,E=(typeof v=="string"?v:"").split(/[\s,]+/),w=E.length;for(p=0;p<w;p++)E[p]&&(v=E[p].replace(/\*/g,".*?"),v[0]==="-"?l.skips.push(new RegExp("^"+v.substr(1)+"$")):l.names.push(new RegExp("^"+v+"$")));for(p=0;p<l.instances.length;p++){var O=l.instances[p];O.enabled=l.enabled(O.namespace)}}function f(){l.enable("")}function m(v){if(v[v.length-1]==="*")return!0;var p,E;for(p=0,E=l.skips.length;p<E;p++)if(l.skips[p].test(v))return!1;for(p=0,E=l.names.length;p<E;p++)if(l.names[p].test(v))return!0;return!1}function g(v){return v instanceof Error?v.stack||v.message:v}return l.enable(l.load()),l}i.exports=s},function(i,r){var t=1e3,s=t*60,o=s*60,a=o*24,l=a*7,h=a*365.25;i.exports=function(g,v){v=v||{};var p=typeof g;if(p==="string"&&g.length>0)return c(g);if(p==="number"&&isFinite(g))return v.long?f(g):d(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function c(g){if(g=String(g),!(g.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(v){var p=parseFloat(v[1]),E=(v[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return p*h;case"weeks":case"week":case"w":return p*l;case"days":case"day":case"d":return p*a;case"hours":case"hour":case"hrs":case"hr":case"h":return p*o;case"minutes":case"minute":case"mins":case"min":case"m":return p*s;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function d(g){var v=Math.abs(g);return v>=a?Math.round(g/a)+"d":v>=o?Math.round(g/o)+"h":v>=s?Math.round(g/s)+"m":v>=t?Math.round(g/t)+"s":g+"ms"}function f(g){var v=Math.abs(g);return v>=a?m(g,v,a,"day"):v>=o?m(g,v,o,"hour"):v>=s?m(g,v,s,"minute"):v>=t?m(g,v,t,"second"):g+" ms"}function m(g,v,p,E){var w=v>=p*1.5;return Math.round(g/p)+" "+E+(w?"s":"")}},function(i,r,t){t(386);var s=t(15);i.exports=s.Object.getPrototypeOf},function(i,r,t){var s=t(0),o=t(3),a=t(33),l=t(90),h=t(150),c=o(function(){l(1)});s({target:"Object",stat:!0,forced:c,sham:!h},{getPrototypeOf:function(f){return l(a(f))}})},function(i,r,t){i.exports=t(226)},function(i,r,t){t(389);var s=t(15);i.exports=s.Object.setPrototypeOf},function(i,r,t){var s=t(0),o=t(92);s({target:"Object",stat:!0},{setPrototypeOf:o})},function(i,r,t){var s=t(1),o=s(t(38)),a=s(t(25)),l=s(t(140)),h=t(67),c=t(396),d=t(31),f=d.isNullOrUndefined,m=t(2),g=m.extend,v=m.isObject,p=m.isEmpty,E=function(y){return(0,o.default)(y).call(y,-9)!=="-MdYXbMMI"},w=function(y){return{push:y,stats:y,engine:y,api:y,rtm:y}};function O(P){var y,C,b,R,D;if(E(P))return{};var I=(0,o.default)(P).call(P,0,8).toLowerCase(),x="lncldglobal.com";return{push:(0,a.default)(y="https://".concat(I,".push.")).call(y,x),stats:(0,a.default)(C="https://".concat(I,".stats.")).call(C,x),engine:(0,a.default)(b="https://".concat(I,".engine.")).call(b,x),api:(0,a.default)(R="https://".concat(I,".api.")).call(R,x),rtm:(0,a.default)(D="https://".concat(I,".rtm.")).call(D,x)}}var T=!1,S=!1;h.init=function(y){if(!v(y))return h.init({appId:y,appKey:arguments.length<=1?void 0:arguments[1],masterKey:arguments.length<=2?void 0:arguments[2]});var C=y.appId,b=y.appKey,R=y.masterKey,D=y.hookKey,I=y.serverURL,x=y.serverURLs,A=x===void 0?I:x,N=y.disableCurrentUser,F=y.production,B=y.realtime;if(S&&console.warn("Initializing LeanCloud Storage SDK which has already been initialized. Reinitializing the SDK might cause problems like unexpected cross-app data writing and invalid relations."),!C)throw new TypeError("appId must be a string");if(!b)throw new TypeError("appKey must be a string");if(R&&console.warn("MasterKey is not supposed to be used at client side."),E(C)&&!A&&p(h._config.serverURLs))throw new TypeError("serverURL option is required for apps from CN region");C!==h._config.applicationId?(h._config.masterKey=R,h._config.hookKey=D):(R&&(h._config.masterKey=R),D&&(h._config.hookKey=D)),h._config.applicationId=C,h._config.applicationKey=b,f(F)||h.setProduction(F),typeof N<"u"&&(h._config.disableCurrentUser=N);var L=T||typeof A<"u";if(L||(h._appRouter=new c(h)),h._setServerURLs(g({},O(C),h._config.serverURLs,typeof A=="string"?w(A):A),L),B)h._config.realtime=B;else if(h._sharedConfig.liveQueryRealtime){var W=h._config.serverURLs,z=W.api,j=W.rtm;h._config.realtime=new h._sharedConfig.liveQueryRealtime({appId:C,appKey:b,server:{api:z,RTMRouter:j}})}S=!0},h.setProduction=function(P){f(P)?h._config.production=null:h._config.production=P?1:0},h._setServerURLs=function(P){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;typeof P!="string"?g(h._config.serverURLs,P):h._config.serverURLs=w(P),y&&(h._appRouter?h._appRouter.disable():T=!0)},h.setServerURL=function(P){return h._setServerURLs(P)},h.setServerURLs=h.setServerURL,h.keepErrorRawMessage=function(P){h._sharedConfig.keepErrorRawMessage=P},h.setRequestTimeout=function(P){h._config.requestTimeout=P},h.initialize=h.init;var M=function(y){return(0,l.default)(h,y,{get:function(){return h._config[y]},set:function(b){h._config[y]=b}})};["applicationId","applicationKey","masterKey","hookKey"].forEach(M)},function(i,r,t){var s=t(12),o=t(392),a=Array.prototype;i.exports=function(l){var h=l.slice;return l===a||s(a,l)&&h===a.slice?o:h}},function(i,r,t){t(393);var s=t(26);i.exports=s("Array").slice},function(i,r,t){var s=t(0),o=t(86),a=t(98),l=t(17),h=t(116),c=t(36),d=t(35),f=t(103),m=t(5),g=t(104),v=t(99),p=g("slice"),E=m("species"),w=Array,O=Math.max;s({target:"Array",proto:!0,forced:!p},{slice:function(S,M){var P=d(this),y=c(P),C=h(S,y),b=h(M===void 0?y:M,y),R,D,I;if(o(P)&&(R=P.constructor,a(R)&&(R===w||o(R.prototype))?R=void 0:l(R)&&(R=R[E],R===null&&(R=void 0)),R===w||R===void 0))return v(P,C,b);for(D=new(R===void 0?w:R)(O(b-C,0)),I=0;C<b;C++,I++)C in P&&f(D,I,P[C]);return D.length=I,D}})},function(i,r,t){t(395);var s=t(15),o=s.Object,a=i.exports=function(h,c,d){return o.defineProperty(h,c,d)};o.defineProperty.sham&&(a.sham=!0)},function(i,r,t){var s=t(0),o=t(20),a=t(34).f;s({target:"Object",stat:!0,forced:Object.defineProperty!==a,sham:!o},{defineProperty:a})},function(i,r,t){var s=t(106),o=t(225);function a(l){var h=this;this.AV=l,this.lockedUntil=0,o.getAsync("serverURLs").then(function(c){if(!h.disabled){if(!c)return h.lock(0);var d=c.serverURLs,f=c.lockedUntil;h.AV._setServerURLs(d,!1),h.lockedUntil=f}}).catch(function(){return h.lock(0)})}a.prototype.disable=function(){this.disabled=!0},a.prototype.lock=function(h){this.lockedUntil=Date.now()+h},a.prototype.refresh=function(){var h=this;if(!this.disabled&&!(Date.now()<this.lockedUntil)){this.lock(10);var c="https://app-router.com/2/route";return s({method:"get",url:c,query:{appId:this.AV.applicationId}}).then(function(d){if(!h.disabled){var f=d.ttl;if(!f)throw new Error("missing ttl");f=f*1e3;var m="https://",g={push:m+d.push_server,stats:m+d.stats_server,engine:m+d.engine_server,api:m+d.api_server};return h.AV._setServerURLs(g,!1),h.lock(f),o.setAsync("serverURLs",{serverURLs:g,lockedUntil:h.lockedUntil},f)}}).catch(function(d){console.warn("refresh server URLs failed: ".concat(d.message)),h.lock(600)})}},i.exports=a},function(i,r,t){i.exports=t(398)},function(i,r,t){var s=t(399);t(423),t(424),t(425),t(426),t(427),t(428),t(429),t(430),i.exports=s},function(i,r,t){var s=t(230);i.exports=s},function(i,r,t){t(215),t(96),t(401),t(407),t(408),t(409),t(410),t(234),t(411),t(412),t(413),t(414),t(415),t(416),t(417),t(418),t(419),t(420),t(421),t(422);var s=t(15);i.exports=s.Symbol},function(i,r,t){t(402),t(404),t(405),t(218),t(406)},function(i,r,t){var s=t(0),o=t(9),a=t(11),l=t(4),h=t(32),c=t(20),d=t(55),f=t(3),m=t(13),g=t(12),v=t(21),p=t(35),E=t(88),w=t(40),O=t(44),T=t(59),S=t(120),M=t(114),P=t(403),y=t(119),C=t(73),b=t(34),R=t(152),D=t(145),I=t(48),x=t(75),A=t(91),N=t(93),F=t(112),B=t(5),L=t(142),W=t(7),z=t(232),j=t(61),H=t(95),K=t(105).forEach,Z=A("hidden"),Q="Symbol",V="prototype",ee=H.set,ue=H.getterFor(Q),q=Object[V],he=o.Symbol,fe=he&&he[V],Ne=o.TypeError,je=o.QObject,Le=C.f,ke=b.f,He=P.f,_e=D.f,ze=l([].push),Ke=x("symbols"),lt=x("op-symbols"),Ft=x("wks"),vt=!je||!je[V]||!je[V].findChild,nt=c&&f(function(){return T(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a!=7})?function($,X,Y){var oe=Le(q,X);oe&&delete q[X],ke($,X,Y),oe&&$!==q&&ke(q,X,oe)}:ke,Ye=function($,X){var Y=Ke[$]=T(fe);return ee(Y,{type:Q,tag:$,description:X}),c||(Y.description=X),Y},Je=function(X,Y,oe){X===q&&Je(lt,Y,oe),v(X);var ge=E(Y);return v(oe),m(Ke,ge)?(oe.enumerable?(m(X,Z)&&X[Z][ge]&&(X[Z][ge]=!1),oe=T(oe,{enumerable:O(0,!1)})):(m(X,Z)||ke(X,Z,O(1,{})),X[Z][ge]=!0),nt(X,ge,oe)):ke(X,ge,oe)},ut=function(X,Y){v(X);var oe=p(Y),ge=S(oe).concat(Re(oe));return K(ge,function(De){(!c||a(de,oe,De))&&Je(X,De,oe[De])}),X},re=function(X,Y){return Y===void 0?T(X):ut(T(X),Y)},de=function(X){var Y=E(X),oe=a(_e,this,Y);return this===q&&m(Ke,Y)&&!m(lt,Y)?!1:oe||!m(this,Y)||!m(Ke,Y)||m(this,Z)&&this[Z][Y]?oe:!0},Oe=function(X,Y){var oe=p(X),ge=E(Y);if(!(oe===q&&m(Ke,ge)&&!m(lt,ge))){var De=Le(oe,ge);return De&&m(Ke,ge)&&!(m(oe,Z)&&oe[Z][ge])&&(De.enumerable=!0),De}},ye=function(X){var Y=He(p(X)),oe=[];return K(Y,function(ge){!m(Ke,ge)&&!m(N,ge)&&ze(oe,ge)}),oe},Re=function($){var X=$===q,Y=He(X?lt:p($)),oe=[];return K(Y,function(ge){m(Ke,ge)&&(!X||m(q,ge))&&ze(oe,Ke[ge])}),oe};d||(he=function(){if(g(fe,this))throw Ne("Symbol is not a constructor");var X=!arguments.length||arguments[0]===void 0?void 0:w(arguments[0]),Y=F(X),oe=function(ge){this===q&&a(oe,lt,ge),m(this,Z)&&m(this[Z],Y)&&(this[Z][Y]=!1),nt(this,Y,O(1,ge))};return c&&vt&&nt(q,Y,{configurable:!0,set:oe}),Ye(Y,X)},fe=he[V],I(fe,"toString",function(){return ue(this).tag}),I(he,"withoutSetter",function($){return Ye(F($),$)}),D.f=de,b.f=Je,R.f=ut,C.f=Oe,M.f=P.f=ye,y.f=Re,L.f=function($){return Ye(B($),$)},c&&(ke(fe,"description",{configurable:!0,get:function(){return ue(this).description}}),h||I(q,"propertyIsEnumerable",de,{unsafe:!0}))),s({global:!0,constructor:!0,wrap:!0,forced:!d,sham:!d},{Symbol:he}),K(S(Ft),function($){W($)}),s({target:Q,stat:!0,forced:!d},{useSetter:function(){vt=!0},useSimple:function(){vt=!1}}),s({target:"Object",stat:!0,forced:!d,sham:!c},{create:re,defineProperty:Je,defineProperties:ut,getOwnPropertyDescriptor:Oe}),s({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:ye}),z(),j(he,Q),N[Z]=!0},function(i,r,t){var s=t(54),o=t(35),a=t(114).f,l=t(231),h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(d){try{return a(d)}catch{return l(h)}};i.exports.f=function(f){return h&&s(f)=="Window"?c(f):a(o(f))}},function(i,r,t){var s=t(0),o=t(18),a=t(13),l=t(40),h=t(75),c=t(233),d=h("string-to-symbol-registry"),f=h("symbol-to-string-registry");s({target:"Symbol",stat:!0,forced:!c},{for:function(m){var g=l(m);if(a(d,g))return d[g];var v=o("Symbol")(g);return d[g]=v,f[v]=g,v}})},function(i,r,t){var s=t(0),o=t(13),a=t(89),l=t(57),h=t(75),c=t(233),d=h("symbol-to-string-registry");s({target:"Symbol",stat:!0,forced:!c},{keyFor:function(m){if(!a(m))throw TypeError(l(m)+" is not a symbol");if(o(d,m))return d[m]}})},function(i,r,t){var s=t(0),o=t(55),a=t(3),l=t(119),h=t(33),c=!o||a(function(){l.f(1)});s({target:"Object",stat:!0,forced:c},{getOwnPropertySymbols:function(f){var m=l.f;return m?m(h(f)):[]}})},function(i,r,t){var s=t(7);s("asyncIterator")},function(i,r){},function(i,r,t){var s=t(7);s("hasInstance")},function(i,r,t){var s=t(7);s("isConcatSpreadable")},function(i,r,t){var s=t(7);s("match")},function(i,r,t){var s=t(7);s("matchAll")},function(i,r,t){var s=t(7);s("replace")},function(i,r,t){var s=t(7);s("search")},function(i,r,t){var s=t(7);s("species")},function(i,r,t){var s=t(7);s("split")},function(i,r,t){var s=t(7),o=t(232);s("toPrimitive"),o()},function(i,r,t){var s=t(18),o=t(7),a=t(61);o("toStringTag"),a(s("Symbol"),"Symbol")},function(i,r,t){var s=t(7);s("unscopables")},function(i,r,t){var s=t(9),o=t(61);o(s.JSON,"JSON",!0)},function(i,r){},function(i,r){},function(i,r,t){var s=t(7);s("asyncDispose")},function(i,r,t){var s=t(7);s("dispose")},function(i,r,t){var s=t(7);s("matcher")},function(i,r,t){var s=t(7);s("metadataKey")},function(i,r,t){var s=t(7);s("observable")},function(i,r,t){var s=t(7);s("metadata")},function(i,r,t){var s=t(7);s("patternMatch")},function(i,r,t){var s=t(7);s("replaceAll")},function(i,r,t){i.exports=t(432)},function(i,r,t){i.exports=t(433)},function(i,r,t){var s=t(434);i.exports=s},function(i,r,t){var s=t(235);i.exports=s},function(i,r,t){t(60),t(96),t(79),t(234);var s=t(142);i.exports=s.f("iterator")},function(i,r,t){i.exports=t(437)},function(i,r,t){var s=t(438);i.exports=s},function(i,r,t){var s=t(12),o=t(439),a=Array.prototype;i.exports=function(l){var h=l.filter;return l===a||s(a,l)&&h===a.filter?o:h}},function(i,r,t){t(440);var s=t(26);i.exports=s("Array").filter},function(i,r,t){var s=t(0),o=t(105).filter,a=t(104),l=a("filter");s({target:"Array",proto:!0,forced:!l},{filter:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}})},function(i,r,t){var s;i.exports.timeout=function(o,a){var l=new s,h;return Promise.race([o,new Promise(function(c,d){h=setTimeout(function(){d(l)},a)})]).then(function(c){return clearTimeout(h),c},function(c){throw clearTimeout(h),c})},s=i.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"},s.prototype=Object.create(Error.prototype),s.prototype.name="TimeoutError"},function(i,r,t){var s=t(1),o=s(t(38)),a=s(t(53)),l=s(t(25)),h=t(2);i.exports=function(c){var d=/\s+/,f=(0,o.default)(Array.prototype);c.Events={on:function(g,v,p){var E,w,O,T,S;if(!v)return this;for(g=g.split(d),E=this._callbacks||(this._callbacks={}),w=g.shift();w;)S=E[w],O=S?S.tail:{},O.next=T={},O.context=p,O.callback=v,E[w]={tail:T,next:S?S.next:O},w=g.shift();return this},off:function(g,v,p){var E,w,O,T,S,M;if(w=this._callbacks){if(!(g||v||p))return delete this._callbacks,this;for(g=g?g.split(d):(0,a.default)(h).call(h,w),E=g.shift();E;)if(O=w[E],delete w[E],!(!O||!(v||p))){for(T=O.tail,O=O.next;O!==T;)S=O.callback,M=O.context,(v&&S!==v||p&&M!==p)&&this.on(E,S,M),O=O.next;E=g.shift()}return this}},trigger:function(g){var v,p,E,w,O,T,S;if(!(E=this._callbacks))return this;for(T=E.all,g=g.split(d),S=f.call(arguments,1),v=g.shift();v;){if(p=E[v],p)for(w=p.tail;(p=p.next)!==w;)p.callback.apply(p.context||this,S);if(p=T,p){var M;for(w=p.tail,O=(0,l.default)(M=[v]).call(M,S);(p=p.next)!==w;)p.callback.apply(p.context||this,O)}v=g.shift()}return this}},c.Events.bind=c.Events.on,c.Events.unbind=c.Events.off}},function(i,r,t){var s=t(1),o=s(t(10)),a=t(2);i.exports=function(l){l.GeoPoint=function(h,c){a.isArray(h)?(l.GeoPoint._validate(h[0],h[1]),this.latitude=h[0],this.longitude=h[1]):a.isObject(h)?(l.GeoPoint._validate(h.latitude,h.longitude),this.latitude=h.latitude,this.longitude=h.longitude):a.isNumber(h)&&a.isNumber(c)?(l.GeoPoint._validate(h,c),this.latitude=h,this.longitude=c):(this.latitude=0,this.longitude=0);var d=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return d._latitude}),this.__defineGetter__("longitude",function(){return d._longitude}),this.__defineSetter__("latitude",function(f){l.GeoPoint._validate(f,d.longitude),d._latitude=f}),this.__defineSetter__("longitude",function(f){l.GeoPoint._validate(d.latitude,f),d._longitude=f}))},l.GeoPoint._validate=function(h,c){if(h<-90)throw new Error("AV.GeoPoint latitude "+h+" < -90.0.");if(h>90)throw new Error("AV.GeoPoint latitude "+h+" > 90.0.");if(c<-180)throw new Error("AV.GeoPoint longitude "+c+" < -180.0.");if(c>180)throw new Error("AV.GeoPoint longitude "+c+" > 180.0.")},l.GeoPoint.current=function(){return new o.default(function(h,c){navigator.geolocation.getCurrentPosition(function(d){h(new l.GeoPoint({latitude:d.coords.latitude,longitude:d.coords.longitude}))},c)})},a.extend(l.GeoPoint.prototype,{toJSON:function(){return l.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(c){var d=Math.PI/180,f=this.latitude*d,m=this.longitude*d,g=c.latitude*d,v=c.longitude*d,p=f-g,E=m-v,w=Math.sin(p/2),O=Math.sin(E/2),T=w*w+Math.cos(f)*Math.cos(g)*O*O;return T=Math.min(1,T),2*Math.asin(Math.sqrt(T))},kilometersTo:function(c){return this.radiansTo(c)*6371},milesTo:function(c){return this.radiansTo(c)*3958.8}})}},function(i,r,t){var s=t(2);i.exports=function(o){var a="*";o.ACL=function(l){var h=this;if(h.permissionsById={},s.isObject(l))if(l instanceof o.User)h.setReadAccess(l,!0),h.setWriteAccess(l,!0);else{if(s.isFunction(l))throw new Error("AV.ACL() called with a function.  Did you forget ()?");o._objectEach(l,function(c,d){if(!s.isString(d))throw new Error("Tried to create an ACL with an invalid userId.");h.permissionsById[d]={},o._objectEach(c,function(f,m){if(m!=="read"&&m!=="write")throw new Error("Tried to create an ACL with an invalid permission type.");if(!s.isBoolean(f))throw new Error("Tried to create an ACL with an invalid permission value.");h.permissionsById[d][m]=f})})}},o.ACL.prototype.toJSON=function(){return s.clone(this.permissionsById)},o.ACL.prototype._setAccess=function(l,h,c){if(h instanceof o.User?h=h.id:h instanceof o.Role&&(h="role:"+h.getName()),!s.isString(h))throw new Error("userId must be a string.");if(!s.isBoolean(c))throw new Error("allowed must be either true or false.");var d=this.permissionsById[h];if(!d)if(c)d={},this.permissionsById[h]=d;else return;c?this.permissionsById[h][l]=!0:(delete d[l],s.isEmpty(d)&&delete this.permissionsById[h])},o.ACL.prototype._getAccess=function(l,h){h instanceof o.User?h=h.id:h instanceof o.Role&&(h="role:"+h.getName());var c=this.permissionsById[h];return c?!!c[l]:!1},o.ACL.prototype.setReadAccess=function(l,h){this._setAccess("read",l,h)},o.ACL.prototype.getReadAccess=function(l){return this._getAccess("read",l)},o.ACL.prototype.setWriteAccess=function(l,h){this._setAccess("write",l,h)},o.ACL.prototype.getWriteAccess=function(l){return this._getAccess("write",l)},o.ACL.prototype.setPublicReadAccess=function(l){this.setReadAccess(a,l)},o.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(a)},o.ACL.prototype.setPublicWriteAccess=function(l){this.setWriteAccess(a,l)},o.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(a)},o.ACL.prototype.getRoleReadAccess=function(l){if(l instanceof o.Role&&(l=l.getName()),s.isString(l))return this.getReadAccess("role:"+l);throw new Error("role must be a AV.Role or a String")},o.ACL.prototype.getRoleWriteAccess=function(l){if(l instanceof o.Role&&(l=l.getName()),s.isString(l))return this.getWriteAccess("role:"+l);throw new Error("role must be a AV.Role or a String")},o.ACL.prototype.setRoleReadAccess=function(l,h){if(l instanceof o.Role&&(l=l.getName()),s.isString(l)){this.setReadAccess("role:"+l,h);return}throw new Error("role must be a AV.Role or a String")},o.ACL.prototype.setRoleWriteAccess=function(l,h){if(l instanceof o.Role&&(l=l.getName()),s.isString(l)){this.setWriteAccess("role:"+l,h);return}throw new Error("role must be a AV.Role or a String")}}},function(i,r,t){var s=t(1),o=s(t(25)),a=s(t(107)),l=s(t(68)),h=s(t(42)),c=t(2);i.exports=function(d){d.Op=function(){this._initialize.apply(this,arguments)},c.extend(d.Op.prototype,{_initialize:function(){}}),c.extend(d.Op,{_extend:d._extend,_opDecoderMap:{},_registerDecoder:function(m,g){d.Op._opDecoderMap[m]=g},_decode:function(m){var g=d.Op._opDecoderMap[m.__op];if(g)return g(m)}}),d.Op._registerDecoder("Batch",function(f){var m=null;return d._arrayEach(f.ops,function(g){g=d.Op._decode(g),m=g._mergeWithPrevious(m)}),m}),d.Op.Set=d.Op._extend({_initialize:function(m){this._value=m},value:function(){return this._value},toJSON:function(){return d._encode(this.value())},_mergeWithPrevious:function(m){return this},_estimate:function(m){return this.value()}}),d.Op._UNSET={},d.Op.Unset=d.Op._extend({toJSON:function(){return{__op:"Delete"}},_mergeWithPrevious:function(m){return this},_estimate:function(m){return d.Op._UNSET}}),d.Op._registerDecoder("Delete",function(f){return new d.Op.Unset}),d.Op.Increment=d.Op._extend({_initialize:function(m){this._amount=m},amount:function(){return this._amount},toJSON:function(){return{__op:"Increment",amount:this._amount}},_mergeWithPrevious:function(m){if(m){if(m instanceof d.Op.Unset)return new d.Op.Set(this.amount());if(m instanceof d.Op.Set)return new d.Op.Set(m.value()+this.amount());if(m instanceof d.Op.Increment)return new d.Op.Increment(this.amount()+m.amount());throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m?m+this.amount():this.amount()}}),d.Op._registerDecoder("Increment",function(f){return new d.Op.Increment(f.amount)}),d.Op.BitAnd=d.Op._extend({_initialize:function(m){this._value=m},value:function(){return this._value},toJSON:function(){return{__op:"BitAnd",value:this.value()}},_mergeWithPrevious:function(m){if(m){if(m instanceof d.Op.Unset)return new d.Op.Set(0);if(m instanceof d.Op.Set)return new d.Op.Set(m.value()&this.value());throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m&this.value()}}),d.Op._registerDecoder("BitAnd",function(f){return new d.Op.BitAnd(f.value)}),d.Op.BitOr=d.Op._extend({_initialize:function(m){this._value=m},value:function(){return this._value},toJSON:function(){return{__op:"BitOr",value:this.value()}},_mergeWithPrevious:function(m){if(m){if(m instanceof d.Op.Unset)return new d.Op.Set(this.value());if(m instanceof d.Op.Set)return new d.Op.Set(m.value()|this.value());throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m|this.value()}}),d.Op._registerDecoder("BitOr",function(f){return new d.Op.BitOr(f.value)}),d.Op.BitXor=d.Op._extend({_initialize:function(m){this._value=m},value:function(){return this._value},toJSON:function(){return{__op:"BitXor",value:this.value()}},_mergeWithPrevious:function(m){if(m){if(m instanceof d.Op.Unset)return new d.Op.Set(this.value());if(m instanceof d.Op.Set)return new d.Op.Set(m.value()^this.value());throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m^this.value()}}),d.Op._registerDecoder("BitXor",function(f){return new d.Op.BitXor(f.value)}),d.Op.Add=d.Op._extend({_initialize:function(m){this._objects=m},objects:function(){return this._objects},toJSON:function(){return{__op:"Add",objects:d._encode(this.objects())}},_mergeWithPrevious:function(m){if(m){if(m instanceof d.Op.Unset)return new d.Op.Set(this.objects());if(m instanceof d.Op.Set)return new d.Op.Set(this._estimate(m.value()));if(m instanceof d.Op.Add){var g;return new d.Op.Add((0,o.default)(g=m.objects()).call(g,this.objects()))}else throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){return m?(0,o.default)(m).call(m,this.objects()):c.clone(this.objects())}}),d.Op._registerDecoder("Add",function(f){return new d.Op.Add(d._decode(f.objects))}),d.Op.AddUnique=d.Op._extend({_initialize:function(m){this._objects=c.uniq(m)},objects:function(){return this._objects},toJSON:function(){return{__op:"AddUnique",objects:d._encode(this.objects())}},_mergeWithPrevious:function(m){if(m){if(m instanceof d.Op.Unset)return new d.Op.Set(this.objects());if(m instanceof d.Op.Set)return new d.Op.Set(this._estimate(m.value()));if(m instanceof d.Op.AddUnique)return new d.Op.AddUnique(this._estimate(m.objects()));throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){if(m){var g=c.clone(m);return d._arrayEach(this.objects(),function(v){if(v instanceof d.Object&&v.id){var p=(0,a.default)(c).call(c,g,function(w){return w instanceof d.Object&&w.id===v.id});if(!p)g.push(v);else{var E=(0,l.default)(c).call(c,g,p);g[E]=v}}else c.contains(g,v)||g.push(v)}),g}else return c.clone(this.objects())}}),d.Op._registerDecoder("AddUnique",function(f){return new d.Op.AddUnique(d._decode(f.objects))}),d.Op.Remove=d.Op._extend({_initialize:function(m){this._objects=c.uniq(m)},objects:function(){return this._objects},toJSON:function(){return{__op:"Remove",objects:d._encode(this.objects())}},_mergeWithPrevious:function(m){if(m){if(m instanceof d.Op.Unset)return m;if(m instanceof d.Op.Set)return new d.Op.Set(this._estimate(m.value()));if(m instanceof d.Op.Remove)return new d.Op.Remove(c.union(m.objects(),this.objects()));throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m){if(m){var g=c.difference(m,this.objects());return d._arrayEach(this.objects(),function(v){v instanceof d.Object&&v.id&&(g=c.reject(g,function(p){return p instanceof d.Object&&p.id===v.id}))}),g}else return[]}}),d.Op._registerDecoder("Remove",function(f){return new d.Op.Remove(d._decode(f.objects))}),d.Op.Relation=d.Op._extend({_initialize:function(m,g){this._targetClassName=null;var v=this,p=function(w){if(w instanceof d.Object){if(!w.id)throw new Error("You can't add an unsaved AV.Object to a relation.");if(v._targetClassName||(v._targetClassName=w.className),v._targetClassName!==w.className)throw new Error("Tried to create a AV.Relation with 2 different types: "+v._targetClassName+" and "+w.className+".");return w.id}return w};this.relationsToAdd=c.uniq((0,h.default)(c).call(c,m,p)),this.relationsToRemove=c.uniq((0,h.default)(c).call(c,g,p))},added:function(){var m=this;return(0,h.default)(c).call(c,this.relationsToAdd,function(g){var v=d.Object._create(m._targetClassName);return v.id=g,v})},removed:function(){var m=this;return(0,h.default)(c).call(c,this.relationsToRemove,function(g){var v=d.Object._create(m._targetClassName);return v.id=g,v})},toJSON:function(){var m=null,g=null,v=this,p=function(O){return{__type:"Pointer",className:v._targetClassName,objectId:O}},E=null;return this.relationsToAdd.length>0&&(E=(0,h.default)(c).call(c,this.relationsToAdd,p),m={__op:"AddRelation",objects:E}),this.relationsToRemove.length>0&&(E=(0,h.default)(c).call(c,this.relationsToRemove,p),g={__op:"RemoveRelation",objects:E}),m&&g?{__op:"Batch",ops:[m,g]}:m||g||{}},_mergeWithPrevious:function(m){if(m){if(m instanceof d.Op.Unset)throw new Error("You can't modify a relation after deleting it.");if(m instanceof d.Op.Relation){if(m._targetClassName&&m._targetClassName!==this._targetClassName)throw new Error("Related object must be of class "+m._targetClassName+", but "+this._targetClassName+" was passed in.");var g=c.union(c.difference(m.relationsToAdd,this.relationsToRemove),this.relationsToAdd),v=c.union(c.difference(m.relationsToRemove,this.relationsToAdd),this.relationsToRemove),p=new d.Op.Relation(g,v);return p._targetClassName=this._targetClassName,p}else throw new Error("Op is invalid after previous op.")}else return this},_estimate:function(m,g,v){if(m)if(m instanceof d.Relation){if(this._targetClassName)if(m.targetClassName){if(m.targetClassName!==this._targetClassName)throw new Error("Related object must be a "+m.targetClassName+", but a "+this._targetClassName+" was passed in.")}else m.targetClassName=this._targetClassName;return m}else throw new Error("Op is invalid after previous op.");else{var p=new d.Relation(g,v);p.targetClassName=this._targetClassName}}}),d.Op._registerDecoder("AddRelation",function(f){return new d.Op.Relation(d._decode(f.objects),[])}),d.Op._registerDecoder("RemoveRelation",function(f){return new d.Op.Relation([],d._decode(f.objects))})}},function(i,r,t){var s=t(447);i.exports=s},function(i,r,t){var s=t(12),o=t(448),a=Array.prototype;i.exports=function(l){var h=l.find;return l===a||s(a,l)&&h===a.find?o:h}},function(i,r,t){t(449);var s=t(26);i.exports=s("Array").find},function(i,r,t){var s=t(0),o=t(105).find,a=t(122),l="find",h=!0;l in[]&&Array(1)[l](function(){h=!1}),s({target:"Array",proto:!0,forced:h},{find:function(d){return o(this,d,arguments.length>1?arguments[1]:void 0)}}),a(l)},function(i,r,t){var s=t(2);i.exports=function(o){o.Relation=function(a,l){if(!s.isString(l))throw new TypeError("key must be a string");this.parent=a,this.key=l,this.targetClassName=null},o.Relation.reverseQuery=function(a,l,h){var c=new o.Query(a);return c.equalTo(l,h._toPointer()),c},s.extend(o.Relation.prototype,{_ensureParentAndKey:function(l,h){if(this.parent=this.parent||l,this.key=this.key||h,this.parent!==l)throw new Error("Internal Error. Relation retrieved from two different Objects.");if(this.key!==h)throw new Error("Internal Error. Relation retrieved from two different keys.")},add:function(l){s.isArray(l)||(l=[l]);var h=new o.Op.Relation(l,[]);this.parent.set(this.key,h),this.targetClassName=h._targetClassName},remove:function(l){s.isArray(l)||(l=[l]);var h=new o.Op.Relation([],l);this.parent.set(this.key,h),this.targetClassName=h._targetClassName},toJSON:function(){return{__type:"Relation",className:this.targetClassName}},query:function(){var l,h;return this.targetClassName?(l=o.Object._getSubclass(this.targetClassName),h=new o.Query(l)):(l=o.Object._getSubclass(this.parent.className),h=new o.Query(l),h._defaultParams.redirectClassNameForKey=this.key),h._addCondition("$relatedTo","object",this.parent._toPointer()),h._addCondition("$relatedTo","key",this.key),h}})}},function(i,r,t){var s=t(1),o=s(t(10)),a=t(2),l=t(452),h=t(453),c=t(499),d=t(43),f=t(27),m=f.request,g=f._request,v=t(31),p=v.tap,E=v.transformFetchOptions,w=t(69)("leancloud:file"),O=t(503);i.exports=function(T){var S=function(C){return a.isString(C)?C.match(/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/)[4]:""},M=function(C){if(C<26)return String.fromCharCode(65+C);if(C<52)return String.fromCharCode(97+(C-26));if(C<62)return String.fromCharCode(48+(C-52));if(C===62)return"+";if(C===63)return"/";throw new Error("Tried to encode large digit "+C+" in base64.")},P=function(C){var b=[];return b.length=Math.ceil(C.length/3),a.times(b.length,function(R){var D=C[R*3],I=C[R*3+1]||0,x=C[R*3+2]||0,A=R*3+1<C.length,N=R*3+2<C.length;b[R]=[M(D>>2&63),M(D<<4&48|I>>4&15),A?M(I<<2&60|x>>6&3):"=",N?M(x&63):"="].join("")}),b.join("")};T.File=function(y,C,b){if(this.attributes={name:y,url:"",metaData:{},base64:""},a.isString(C))throw new TypeError("Creating an AV.File from a String is not yet supported.");a.isArray(C)&&(this.attributes.metaData.size=C.length,C={base64:P(C)}),this._extName="",this._data=C,this._uploadHeaders={},C&&C.blob&&typeof C.blob.uri=="string"&&(this._extName=S(C.blob.uri)),typeof Blob<"u"&&C instanceof Blob&&(C.size&&(this.attributes.metaData.size=C.size),C.name&&(this._extName=S(C.name)));var R;if(C&&C.owner)R=C.owner;else if(!T._config.disableCurrentUser)try{R=T.User.current()}catch(D){if(D.code!=="SYNC_API_NOT_AVAILABLE")throw D}this.attributes.metaData.owner=R?R.id:"unknown",this.set("mime_type",b)},T.File.withURL=function(y,C,b,R){if(!y||!C)throw new Error("Please provide file name and url");var D=new T.File(y,null,R);if(b)for(var I in b)D.attributes.metaData[I]||(D.attributes.metaData[I]=b[I]);return D.attributes.url=C,D.attributes.metaData.__source="external",D.attributes.metaData.size=0,D},T.File.createWithoutData=function(y){if(!y)throw new TypeError("The objectId must be provided");var C=new T.File;return C.id=y,C},T.File.censor=function(y){if(!T._config.masterKey)throw new Error("Cannot censor a file without masterKey");return m({method:"POST",path:"/files/".concat(y,"/censor"),authOptions:{useMasterKey:!0}}).then(function(C){return C.censorResult})},a.extend(T.File.prototype,{className:"_File",_toFullJSON:function(C){var b=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,D=a.clone(this.attributes);return T._objectEach(D,function(I,x){D[x]=T._encode(I,C,void 0,R)}),T._objectEach(this._operations,function(I,x){D[x]=I}),a.has(this,"id")&&(D.objectId=this.id),["createdAt","updatedAt"].forEach(function(I){if(a.has(b,I)){var x=b[I];D[I]=a.isDate(x)?x.toJSON():x}}),R&&(D.__type="File"),D},toFullJSON:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this._toFullJSON(C)},toJSON:function(C,b){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[this];return this._toFullJSON(R,!1)},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},getACL:function(){return this._acl},setACL:function(C){return C instanceof T.ACL?(this._acl=C,this):new d(d.OTHER_CAUSE,"ACL must be a AV.ACL.")},name:function(){return this.get("name")},url:function(){return this.get("url")},get:function(C){switch(C){case"objectId":return this.id;case"url":case"name":case"mime_type":case"metaData":case"createdAt":case"updatedAt":return this.attributes[C];default:return this.attributes.metaData[C]}},set:function(){for(var C=this,b=function(N,F){switch(N){case"name":case"url":case"mime_type":case"base64":case"metaData":C.attributes[N]=F;break;default:C.attributes.metaData[N]=F;break}},R=arguments.length,D=new Array(R),I=0;I<R;I++)D[I]=arguments[I];switch(D.length){case 1:for(var x in D[0])b(x,D[0][x]);break;case 2:b(D[0],D[1]);break}return this},setUploadHeader:function(C,b){return this._uploadHeaders[C]=b,this},metaData:function(C,b){return C&&b?(this.attributes.metaData[C]=b,this):C&&!b?this.attributes.metaData[C]:this.attributes.metaData},thumbnailURL:function(C,b){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"png",x=this.attributes.url;if(!x)throw new Error("Invalid url.");if(!C||!b||C<=0||b<=0)throw new Error("Invalid width or height value.");if(R<=0||R>100)throw new Error("Invalid quality value.");var A=D?2:1;return x+"?imageView/"+A+"/w/"+C+"/h/"+b+"/q/"+R+"/format/"+I},size:function(){return this.metaData().size},ownerId:function(){return this.metaData().owner},destroy:function(C){if(!this.id)return o.default.reject(new Error("The file id does not eixst."));var b=g("files",null,this.id,"DELETE",null,C);return b},_fileToken:function(C,b){var R=this.attributes.name,D=S(R);!D&&this._extName&&(R+=this._extName,D=this._extName);var I={name:R,keep_file_name:b.keepFileName,key:b.key,ACL:this._acl,mime_type:C,metaData:this.attributes.metaData};return g("fileTokens",null,null,"POST",I,b)},save:function(){var C=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.id)throw new Error("File is already saved.");if(!this._previousSave){if(this._data){var R=this.get("mime_type");this._previousSave=this._fileToken(R,b).then(function(I){return I.mime_type&&(R=I.mime_type,C.set("mime_type",R)),C._token=I.token,o.default.resolve().then(function(){var x=C._data;if(x&&x.base64)return O(x.base64,R);if(x&&x.blob)return!x.blob.type&&R&&(x.blob.type=R),x.blob.name||(x.blob.name=C.get("name")),x.blob;if(typeof Blob<"u"&&x instanceof Blob)return x;throw new TypeError("malformed file data")}).then(function(x){var A=a.extend({},b);switch(b.onprogress&&(A.onprogress=function(N){if(N.direction!=="download")return b.onprogress(N)}),I.provider){case"s3":return c(I,x,C,A);case"qcloud":return l(I,x,C,A);case"qiniu":default:return h(I,x,C,A)}}).then(p(function(){return C._callback(!0)}),function(x){throw C._callback(!1),x})})}else if(this.attributes.url&&this.attributes.metaData.__source==="external"){var D={name:this.attributes.name,ACL:this._acl,metaData:this.attributes.metaData,mime_type:this.mimeType,url:this.attributes.url};this._previousSave=g("files",null,null,"post",D,b).then(function(I){return C.id=I.objectId,C})}}return this._previousSave},_callback:function(C){g("fileCallback",null,null,"post",{token:this._token,result:C}).catch(w),delete this._token,delete this._data},fetch:function(C,b){if(!this.id)throw new Error("Cannot fetch unsaved file");var R=g("files",null,this.id,"GET",E(C),b);return R.then(this._finishFetch.bind(this))},_finishFetch:function(C){var b=T.Object.prototype.parse(C);return b.attributes={name:b.name,url:b.url,mime_type:b.mime_type,bucket:b.bucket},b.attributes.metaData=b.metaData||{},b.id=b.objectId,delete b.objectId,delete b.metaData,delete b.url,delete b.name,delete b.mime_type,delete b.bucket,a.extend(this,b),this},censor:function(){if(!this.id)throw new Error("Cannot censor an unsaved file");return T.File.censor(this.id)}})}},function(i,r,t){var s=t(70),o=s.getAdapter,a=t(69)("cos");i.exports=function(l,h,c){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},f=l.upload_url+"?sign="+encodeURIComponent(l.token),m={field:"fileContent",data:h,name:c.attributes.name},g={headers:c._uploadHeaders,data:{op:"upload"},onprogress:d.onprogress};a("url: %s, file: %o, options: %o",f,m,g);var v=o("upload");return v(f,m,g).then(function(p){if(a(p.status,p.data),p.ok===!1){var E=new Error(p.status);throw E.response=p,E}return c.attributes.url=l.url,c._bucket=l.bucket,c.id=l.objectId,c},function(p){var E=p.response;throw E&&(a(E.status,E.data),p.statusCode=E.status,p.response=E.data),p})}},function(i,r,t){var s=t(38),o=t(236),a=t(87),l=t(238),h=t(463),c=t(1),d=c(t(467)),f=c(t(489)),m=c(t(491)),g=c(t(496)),v=c(t(497)),p=c(t(37)),E=c(t(25)),w=c(t(10)),O=c(t(38));function T(z){var j=S();return function(){var K=(0,m.default)(z),Z;if(j){var Q=(0,m.default)(this).constructor;Z=h(K,arguments,Q)}else Z=K.apply(this,arguments);return(0,f.default)(this,Z)}}function S(){if(typeof Reflect>"u"||!h||h.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(h(Boolean,[],function(){})),!0}catch{return!1}}function M(z,j){var H=typeof a<"u"&&l(z)||z["@@iterator"];if(!H){if(Array.isArray(z)||(H=P(z))||j){H&&(z=H);var K=0,Z=function(){};return{s:Z,n:function(){return K>=z.length?{done:!0}:{done:!1,value:z[K++]}},e:function(q){throw q},f:Z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Q=!0,V=!1,ee;return{s:function(){H=H.call(z)},n:function(){var q=H.next();return Q=q.done,q},e:function(q){V=!0,ee=q},f:function(){try{!Q&&H.return!=null&&H.return()}finally{if(V)throw ee}}}}function P(z,j){var H;if(z){if(typeof z=="string")return y(z,j);var K=s(H=Object.prototype.toString.call(z)).call(H,8,-1);if(K==="Object"&&z.constructor&&(K=z.constructor.name),K==="Map"||K==="Set")return o(z);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return y(z,j)}}function y(z,j){(j==null||j>z.length)&&(j=z.length);for(var H=0,K=new Array(j);H<j;H++)K[H]=z[H];return K}var C=t(70),b=C.getAdapter,R=t(69)("leancloud:qiniu"),D=t(106),I=t(498),x=1024*1024*64,A=1024*1024*16;function N(z,j,H){var K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Z=z.token,Q=z.upload_url||"https://upload.qiniup.com",V={field:"file",data:j,name:H.attributes.name},ee={headers:H._uploadHeaders,data:{name:H.attributes.name,key:z.key,token:Z},onprogress:K.onprogress};R("url: %s, file: %o, options: %o",Q,V,ee);var ue=b("upload");return ue(Q,V,ee).then(function(q){if(R(q.status,q.data),q.ok===!1){var he=q.status;q.data&&(q.data.error?he=q.data.error:he=(0,p.default)(q.data));var fe=new Error(he);throw fe.response=q,fe}return H.attributes.url=z.url,H._bucket=z.bucket,H.id=z.objectId,H},function(q){var he=q.response;throw he&&(R(he.status,he.data),q.statusCode=he.status,q.response=he.data),q})}function F(z){var j=I(unescape(encodeURIComponent(z))),H="",K=M(j),Z;try{for(K.s();!(Z=K.n()).done;){var Q=Z.value;switch(Q){case"+":H+="-";break;case"/":H+="_";break;default:H+=Q}}}catch(V){K.e(V)}finally{K.f()}return H}var B=function(){function z(j,H,K,Z){var Q,V,ee=this;(0,g.default)(this,z),this.uploadInfo=j,this.data=H,this.file=K,this.size=void 0,this.offset=0,this.uploadedChunks=0;var ue=F(j.key),q=j.upload_url||"https://upload.qiniup.com";this.baseURL=(0,E.default)(Q=(0,E.default)(V="".concat(q,"/buckets/")).call(V,j.bucket,"/objects/")).call(Q,ue,"/uploads"),this.upToken="UpToken "+j.token,this.uploaded=0,Z&&Z.onprogress&&(this.onProgress=function(he){var fe=he.loaded;fe+=ee.uploadedChunks*A,!(fe<=ee.uploaded)&&(ee.size?Z.onprogress({loaded:fe,total:ee.size,percent:fe/ee.size*100}):Z.onprogress({loaded:fe}),ee.uploaded=fe)})}return(0,v.default)(z,[{key:"getUploadId",value:function(){return D({method:"POST",url:this.baseURL,headers:{Authorization:this.upToken}}).then(function(H){return H.uploadId})}},{key:"getChunk",value:function(){throw new Error("Not implemented")}},{key:"uploadPart",value:function(H,K,Z){var Q,V;return D({method:"PUT",url:(0,E.default)(Q=(0,E.default)(V="".concat(this.baseURL,"/")).call(V,H,"/")).call(Q,K),headers:{Authorization:this.upToken},data:Z,onprogress:this.onProgress}).then(function(ee){var ue=ee.etag;return{partNumber:K,etag:ue}})}},{key:"stopUpload",value:function(H){var K;return D({method:"DELETE",url:(0,E.default)(K="".concat(this.baseURL,"/")).call(K,H),headers:{Authorization:this.upToken}})}},{key:"upload",value:function(){var H=this,K=[];return this.getUploadId().then(function(Z){var Q=function V(){return w.default.resolve(H.getChunk()).then(function(ee){if(ee){var ue=K.length+1;return H.uploadPart(Z,ue,ee).then(function(q){return K.push(q),H.uploadedChunks++,V()})}}).catch(function(ee){return H.stopUpload(Z).then(function(){return w.default.reject(ee)})})};return Q().then(function(){var V;return D({method:"POST",url:(0,E.default)(V="".concat(H.baseURL,"/")).call(V,Z),headers:{Authorization:H.upToken},data:{parts:K,fname:H.file.attributes.name,mimeType:H.file.attributes.mime_type}})})}).then(function(){return H.file.attributes.url=H.uploadInfo.url,H.file._bucket=H.uploadInfo.bucket,H.file.id=H.uploadInfo.objectId,H.file})}}]),z}(),L=function(z){(0,d.default)(H,z);var j=T(H);function H(K,Z,Q,V){var ee;return(0,g.default)(this,H),ee=j.call(this,K,Z,Q,V),ee.size=Z.size,ee}return(0,v.default)(H,[{key:"getChunk",value:function(){var Z;if(this.offset>=this.size)return null;var Q=(0,O.default)(Z=this.data).call(Z,this.offset,this.offset+A);return this.offset+=Q.size,Q}}]),H}(B);function W(z){return typeof Blob<"u"&&z instanceof Blob}i.exports=function(z,j,H){var K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return W(j)&&j.size>=x?new L(z,j,H,K).upload():N(z,j,H,K)}},function(i,r,t){t(79),t(455);var s=t(15);i.exports=s.Array.from},function(i,r,t){var s=t(0),o=t(456),a=t(165),l=!a(function(h){Array.from(h)});s({target:"Array",stat:!0,forced:l},{from:o})},function(i,r,t){var s=t(58),o=t(11),a=t(33),l=t(457),h=t(154),c=t(98),d=t(36),f=t(103),m=t(155),g=t(94),v=Array;i.exports=function(E){var w=a(E),O=c(this),T=arguments.length,S=T>1?arguments[1]:void 0,M=S!==void 0;M&&(S=s(S,T>2?arguments[2]:void 0));var P=g(w),y=0,C,b,R,D,I,x;if(P&&!(this===v&&h(P)))for(D=m(w,P),I=D.next,b=O?new this:[];!(R=o(I,D)).done;y++)x=M?l(D,S,[R.value,y],!0):R.value,f(b,y,x);else for(C=d(w),b=O?new this(C):v(C);C>y;y++)x=M?S(w[y],y):w[y],f(b,y,x);return b.length=y,b}},function(i,r,t){var s=t(21),o=t(156);i.exports=function(a,l,h,c){try{return c?l(s(h)[0],h[1]):l(h)}catch(d){o(a,"throw",d)}}},function(i,r,t){i.exports=t(459)},function(i,r,t){var s=t(460);i.exports=s},function(i,r,t){var s=t(461);i.exports=s},function(i,r,t){var s=t(462);t(63),i.exports=s},function(i,r,t){t(60),t(79);var s=t(94);i.exports=s},function(i,r,t){i.exports=t(464)},function(i,r,t){var s=t(465);i.exports=s},function(i,r,t){t(466);var s=t(15);i.exports=s.Reflect.construct},function(i,r,t){var s=t(0),o=t(18),a=t(71),l=t(239),h=t(161),c=t(21),d=t(17),f=t(59),m=t(3),g=o("Reflect","construct"),v=Object.prototype,p=[].push,E=m(function(){function T(){}return!(g(function(){},[],T)instanceof T)}),w=!m(function(){g(function(){})}),O=E||w;s({target:"Reflect",stat:!0,forced:O,sham:O},{construct:function(S,M){h(S),c(M);var P=arguments.length<3?S:h(arguments[2]);if(w&&!E)return g(S,M,P);if(S==P){switch(M.length){case 0:return new S;case 1:return new S(M[0]);case 2:return new S(M[0],M[1]);case 3:return new S(M[0],M[1],M[2]);case 4:return new S(M[0],M[1],M[2],M[3])}var y=[null];return a(p,y,M),new(a(l,S,y))}var C=P.prototype,b=f(d(C)?C:v),R=a(S,b,M);return d(R)?R:b}})},function(i,r,t){var s=t(468),o=t(143),a=t(478);function l(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=s(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),o(h,"prototype",{writable:!1}),c&&a(h,c)}i.exports=l,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){i.exports=t(469)},function(i,r,t){i.exports=t(470)},function(i,r,t){var s=t(471);i.exports=s},function(i,r,t){var s=t(472);i.exports=s},function(i,r,t){var s=t(473);i.exports=s},function(i,r,t){t(474);var s=t(15),o=s.Object;i.exports=function(l,h){return o.create(l,h)}},function(i,r,t){var s=t(0),o=t(20),a=t(59);s({target:"Object",stat:!0,sham:!o},{create:a})},function(i,r,t){i.exports=t(476)},function(i,r,t){var s=t(477);i.exports=s},function(i,r,t){var s=t(228);i.exports=s},function(i,r,t){var s=t(240),o=t(241);function a(l,h){var c;return i.exports=a=s?o(c=s).call(c):function(f,m){return f.__proto__=m,f},i.exports.__esModule=!0,i.exports.default=i.exports,a(l,h)}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){i.exports=t(480)},function(i,r,t){var s=t(481);i.exports=s},function(i,r,t){var s=t(226);i.exports=s},function(i,r,t){i.exports=t(483)},function(i,r,t){var s=t(484);i.exports=s},function(i,r,t){var s=t(485);i.exports=s},function(i,r,t){var s=t(486);i.exports=s},function(i,r,t){var s=t(12),o=t(487),a=Function.prototype;i.exports=function(l){var h=l.bind;return l===a||s(a,l)&&h===a.bind?o:h}},function(i,r,t){t(488);var s=t(26);i.exports=s("Function").bind},function(i,r,t){var s=t(0),o=t(239);s({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},function(i,r,t){var s=t(141).default,o=t(490);function a(l,h){if(h&&(s(h)==="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(l)}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r){function t(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){var s=t(240),o=t(241),a=t(492);function l(h){var c;return i.exports=l=s?o(c=a).call(c):function(f){return f.__proto__||a(f)},i.exports.__esModule=!0,i.exports.default=i.exports,l(h)}i.exports=l,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){i.exports=t(493)},function(i,r,t){i.exports=t(494)},function(i,r,t){var s=t(495);i.exports=s},function(i,r,t){var s=t(221);i.exports=s},function(i,r){function t(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){var s=t(143);function o(l,h){for(var c=0;c<h.length;c++){var d=h[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),s(l,d.key,d)}}function a(l,h,c){return h&&o(l.prototype,h),c&&o(l,c),s(l,"prototype",{writable:!1}),l}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){var s=t(1),o=s(t(38)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.exports=function(l){for(var h="",c=0;c<l.length;){var d=l.charCodeAt(c++),f=l.charCodeAt(c++),m=l.charCodeAt(c++);if(d>255||f>255||m>255)throw new TypeError("Failed to encode base64: The string to be encoded contains characters outside of the Latin1 range.");var g=d<<16|f<<8|m;h+=a.charAt(g>>18&63)+a.charAt(g>>12&63)+a.charAt(g>>6&63)+a.charAt(g&63)}var v=l.length%3;return v?(0,o.default)(h).call(h,0,v-3)+"===".substring(v):h}},function(i,r,t){var s=t(2),o=t(106);i.exports=function(l,h,c){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return o({url:l.upload_url,method:"PUT",data:h,headers:s.extend({"Content-Type":c.get("mime_type"),"Cache-Control":"public, max-age=31536000"},c._uploadHeaders),onprogress:d.onprogress}).then(function(){return c.attributes.url=l.url,c._bucket=l.bucket,c.id=l.objectId,c})}},function(i,r,t){(function(){var s=t(501),o=t(242).utf8,a=t(502),l=t(242).bin,h=function(c,d){c.constructor==String?d&&d.encoding==="binary"?c=l.stringToBytes(c):c=o.stringToBytes(c):a(c)?c=Array.prototype.slice.call(c,0):Array.isArray(c)||(c=c.toString());for(var f=s.bytesToWords(c),m=c.length*8,g=1732584193,v=-271733879,p=-1732584194,E=271733878,w=0;w<f.length;w++)f[w]=(f[w]<<8|f[w]>>>24)&16711935|(f[w]<<24|f[w]>>>8)&4278255360;f[m>>>5]|=128<<m%32,f[(m+64>>>9<<4)+14]=m;for(var O=h._ff,T=h._gg,S=h._hh,M=h._ii,w=0;w<f.length;w+=16){var P=g,y=v,C=p,b=E;g=O(g,v,p,E,f[w+0],7,-680876936),E=O(E,g,v,p,f[w+1],12,-389564586),p=O(p,E,g,v,f[w+2],17,606105819),v=O(v,p,E,g,f[w+3],22,-1044525330),g=O(g,v,p,E,f[w+4],7,-176418897),E=O(E,g,v,p,f[w+5],12,1200080426),p=O(p,E,g,v,f[w+6],17,-1473231341),v=O(v,p,E,g,f[w+7],22,-45705983),g=O(g,v,p,E,f[w+8],7,1770035416),E=O(E,g,v,p,f[w+9],12,-1958414417),p=O(p,E,g,v,f[w+10],17,-42063),v=O(v,p,E,g,f[w+11],22,-1990404162),g=O(g,v,p,E,f[w+12],7,1804603682),E=O(E,g,v,p,f[w+13],12,-40341101),p=O(p,E,g,v,f[w+14],17,-1502002290),v=O(v,p,E,g,f[w+15],22,1236535329),g=T(g,v,p,E,f[w+1],5,-165796510),E=T(E,g,v,p,f[w+6],9,-1069501632),p=T(p,E,g,v,f[w+11],14,643717713),v=T(v,p,E,g,f[w+0],20,-373897302),g=T(g,v,p,E,f[w+5],5,-701558691),E=T(E,g,v,p,f[w+10],9,38016083),p=T(p,E,g,v,f[w+15],14,-660478335),v=T(v,p,E,g,f[w+4],20,-405537848),g=T(g,v,p,E,f[w+9],5,568446438),E=T(E,g,v,p,f[w+14],9,-1019803690),p=T(p,E,g,v,f[w+3],14,-187363961),v=T(v,p,E,g,f[w+8],20,1163531501),g=T(g,v,p,E,f[w+13],5,-1444681467),E=T(E,g,v,p,f[w+2],9,-51403784),p=T(p,E,g,v,f[w+7],14,1735328473),v=T(v,p,E,g,f[w+12],20,-1926607734),g=S(g,v,p,E,f[w+5],4,-378558),E=S(E,g,v,p,f[w+8],11,-2022574463),p=S(p,E,g,v,f[w+11],16,1839030562),v=S(v,p,E,g,f[w+14],23,-35309556),g=S(g,v,p,E,f[w+1],4,-1530992060),E=S(E,g,v,p,f[w+4],11,1272893353),p=S(p,E,g,v,f[w+7],16,-155497632),v=S(v,p,E,g,f[w+10],23,-1094730640),g=S(g,v,p,E,f[w+13],4,681279174),E=S(E,g,v,p,f[w+0],11,-358537222),p=S(p,E,g,v,f[w+3],16,-722521979),v=S(v,p,E,g,f[w+6],23,76029189),g=S(g,v,p,E,f[w+9],4,-640364487),E=S(E,g,v,p,f[w+12],11,-421815835),p=S(p,E,g,v,f[w+15],16,530742520),v=S(v,p,E,g,f[w+2],23,-995338651),g=M(g,v,p,E,f[w+0],6,-198630844),E=M(E,g,v,p,f[w+7],10,1126891415),p=M(p,E,g,v,f[w+14],15,-1416354905),v=M(v,p,E,g,f[w+5],21,-57434055),g=M(g,v,p,E,f[w+12],6,1700485571),E=M(E,g,v,p,f[w+3],10,-1894986606),p=M(p,E,g,v,f[w+10],15,-1051523),v=M(v,p,E,g,f[w+1],21,-2054922799),g=M(g,v,p,E,f[w+8],6,1873313359),E=M(E,g,v,p,f[w+15],10,-30611744),p=M(p,E,g,v,f[w+6],15,-1560198380),v=M(v,p,E,g,f[w+13],21,1309151649),g=M(g,v,p,E,f[w+4],6,-145523070),E=M(E,g,v,p,f[w+11],10,-1120210379),p=M(p,E,g,v,f[w+2],15,718787259),v=M(v,p,E,g,f[w+9],21,-343485551),g=g+P>>>0,v=v+y>>>0,p=p+C>>>0,E=E+b>>>0}return s.endian([g,v,p,E])};h._ff=function(c,d,f,m,g,v,p){var E=c+(d&f|~d&m)+(g>>>0)+p;return(E<<v|E>>>32-v)+d},h._gg=function(c,d,f,m,g,v,p){var E=c+(d&m|f&~m)+(g>>>0)+p;return(E<<v|E>>>32-v)+d},h._hh=function(c,d,f,m,g,v,p){var E=c+(d^f^m)+(g>>>0)+p;return(E<<v|E>>>32-v)+d},h._ii=function(c,d,f,m,g,v,p){var E=c+(f^(d|~m))+(g>>>0)+p;return(E<<v|E>>>32-v)+d},h._blocksize=16,h._digestsize=16,i.exports=function(c,d){if(c==null)throw new Error("Illegal argument "+c);var f=s.wordsToBytes(h(c,d));return d&&d.asBytes?f:d&&d.asString?l.bytesToString(f):s.bytesToHex(f)}})()},function(i,r){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s={rotl:function(o,a){return o<<a|o>>>32-a},rotr:function(o,a){return o<<32-a|o>>>a},endian:function(o){if(o.constructor==Number)return s.rotl(o,8)&16711935|s.rotl(o,24)&4278255360;for(var a=0;a<o.length;a++)o[a]=s.endian(o[a]);return o},randomBytes:function(o){for(var a=[];o>0;o--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(o){for(var a=[],l=0,h=0;l<o.length;l++,h+=8)a[h>>>5]|=o[l]<<24-h%32;return a},wordsToBytes:function(o){for(var a=[],l=0;l<o.length*32;l+=8)a.push(o[l>>>5]>>>24-l%32&255);return a},bytesToHex:function(o){for(var a=[],l=0;l<o.length;l++)a.push((o[l]>>>4).toString(16)),a.push((o[l]&15).toString(16));return a.join("")},hexToBytes:function(o){for(var a=[],l=0;l<o.length;l+=2)a.push(parseInt(o.substr(l,2),16));return a},bytesToBase64:function(o){for(var a=[],l=0;l<o.length;l+=3)for(var h=o[l]<<16|o[l+1]<<8|o[l+2],c=0;c<4;c++)l*8+c*6<=o.length*8?a.push(t.charAt(h>>>6*(3-c)&63)):a.push("=");return a.join("")},base64ToBytes:function(o){o=o.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],l=0,h=0;l<o.length;h=++l%4)h!=0&&a.push((t.indexOf(o.charAt(l-1))&Math.pow(2,-2*h+8)-1)<<h*2|t.indexOf(o.charAt(l))>>>6-h*2);return a}};i.exports=s})()},function(i,r){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */i.exports=function(o){return o!=null&&(t(o)||s(o)||!!o._isBuffer)};function t(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function s(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&t(o.slice(0,0))}},function(i,r,t){var s=t(1),o=s(t(68)),a=function(h,c){var d,f;(0,o.default)(h).call(h,"base64")<0?f=atob(h):(0,o.default)(d=h.split(",")[0]).call(d,"base64")>=0?(c=c||h.split(",")[0].split(":")[1].split(";")[0],f=atob(h.split(",")[1])):f=unescape(h.split(",")[1]);for(var m=new Uint8Array(f.length),g=0;g<f.length;g++)m[g]=f.charCodeAt(g);return new Blob([m],{type:c})};i.exports=a},function(i,r,t){var s=t(1),o=s(t(505)),a=s(t(42)),l=s(t(68)),h=s(t(107)),c=s(t(10)),d=s(t(25)),f=s(t(53)),m=s(t(37)),g=s(t(140)),v=s(t(526)),p=t(2),E=t(43),w=t(27),O=w._request,T=t(31),S=T.isNullOrUndefined,M=T.ensureArray,P=T.transformFetchOptions,y=T.setValue,C=T.findValue,b=T.isPlainObject,R=T.continueWhile,D=function F(B){return p.isArray(B)?(0,a.default)(B).call(B,F):b(B)?p.mapObject(B,F):p.isObject(B)&&B._toPointer?B._toPointer():B},I=["objectId","createdAt","updatedAt"],x=function(B){if((0,l.default)(I).call(I,B)!==-1)throw new Error("key[".concat(B,"] is reserved"))},A=function(B){var L=(0,h.default)(p).call(p,B,function(z){return z instanceof Error});if(!L)return B;var W=new E(L.code,L.message);throw W.results=B,W};function N(F,B){return F&&F[B]?p.isFunction(F[B])?F[B]():F[B]:null}i.exports=function(F){F.Object=function(B,L){if(p.isString(B))return F.Object._create.apply(this,arguments);B=B||{},L&&L.parse&&(B=this.parse(B),B=this._mergeMagicFields(B));var W=N(this,"defaults");W&&(B=p.extend({},W,B)),L&&L.collection&&(this.collection=L.collection),this._serverData={},this._opSetQueue=[{}],this._flags={},this.attributes={},this._hashedJSON={},this._escapedAttributes={},this.cid=p.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(B,{silent:!0}),this.changed={},this._silent={},this._pending={},this._hasData=!0,this._previousAttributes=p.clone(this.attributes),this.initialize.apply(this,arguments)},F.Object.saveAll=function(B,L){return F.Object._deepSaveAsync(B,null,L)},F.Object.fetchAll=function(B,L){return c.default.resolve().then(function(){return O("batch",null,null,"POST",{requests:(0,a.default)(p).call(p,B,function(W){var z;if(!W.className)throw new Error("object must have className to fetch");if(!W.id)throw new Error("object must have id to fetch");if(W.dirty())throw new Error("object is modified but not saved");return{method:"GET",path:(0,d.default)(z="/1.1/classes/".concat(W.className,"/")).call(z,W.id)}})},L)}).then(function(W){var z=(0,a.default)(p).call(p,B,function(j,H){if(W[H].success){var K=j.parse(W[H].success);return j._cleanupUnsetKeys(K),j._finishFetch(K),j}return W[H].success===null?new E(E.OBJECT_NOT_FOUND,"Object not found."):new E(W[H].error.code,W[H].error.error)});return A(z)})},p.extend(F.Object.prototype,F.Events,{_fetchWhenSave:!1,initialize:function(){},fetchWhenSave:function(L){if(console.warn("AV.Object#fetchWhenSave is deprecated, use AV.Object#save with options.fetchWhenSave instead."),!p.isBoolean(L))throw new Error("Expect boolean value for fetchWhenSave");this._fetchWhenSave=L},getObjectId:function(){return this.id},getCreatedAt:function(){return this.createdAt},getUpdatedAt:function(){return this.updatedAt},toJSON:function(L,W){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return this._toFullJSON(z,!1)},toFullJSON:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this._toFullJSON(L)},_toFullJSON:function(L){var W=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,j=p.clone(this.attributes);if(p.isArray(L))var H=(0,d.default)(L).call(L,this);return F._objectEach(j,function(K,Z){j[Z]=F._encode(K,H,void 0,z)}),F._objectEach(this._operations,function(K,Z){j[Z]=K}),p.has(this,"id")&&(j.objectId=this.id),["createdAt","updatedAt"].forEach(function(K){if(p.has(W,K)){var Z=W[K];j[K]=p.isDate(Z)?Z.toJSON():Z}}),z&&(j.__type="Object",p.isArray(L)&&L.length&&(j.__type="Pointer"),j.className=this.className),j},_refreshCache:function(){var L=this;L._refreshingCache||(L._refreshingCache=!0,F._objectEach(this.attributes,function(W,z){W instanceof F.Object?W._refreshCache():p.isObject(W)&&L._resetCacheForKey(z)&&L.set(z,new F.Op.Set(W),{silent:!0})}),delete L._refreshingCache)},dirty:function(L){this._refreshCache();var W=p.last(this._opSetQueue);return L?!!W[L]:!this.id||(0,f.default)(p).call(p,W).length>0},dirtyKeys:function(){this._refreshCache();var L=p.last(this._opSetQueue);return(0,f.default)(p).call(p,L)},_toPointer:function(){return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(L){switch(L){case"objectId":return this.id;case"createdAt":case"updatedAt":return this[L];default:return this.attributes[L]}},relation:function(L){var W=this.get(L);if(W){if(!(W instanceof F.Relation))throw new Error("Called relation() on non-relation field "+L);return W._ensureParentAndKey(this,L),W}else return new F.Relation(this,L)},escape:function(L){var W=this._escapedAttributes[L];if(W)return W;var z=this.attributes[L],j;return S(z)?j="":j=p.escape(z.toString()),this._escapedAttributes[L]=j,j},has:function(L){return!S(this.attributes[L])},_mergeMagicFields:function(L){var W=this,z=["objectId","createdAt","updatedAt"];return F._arrayEach(z,function(j){L[j]&&(j==="objectId"?W.id=L[j]:(j==="createdAt"||j==="updatedAt")&&!p.isDate(L[j])?W[j]=F._parseDate(L[j]):W[j]=L[j],delete L[j])}),L},_startSave:function(){this._opSetQueue.push({})},_cancelSave:function(){var L=p.first(this._opSetQueue);this._opSetQueue=p.rest(this._opSetQueue);var W=p.first(this._opSetQueue);F._objectEach(L,function(z,j){var H=L[j],K=W[j];H&&K?W[j]=K._mergeWithPrevious(H):H&&(W[j]=H)}),this._saving=this._saving-1},_finishSave:function(L){var W,z={};F._traverse(this.attributes,function(Z){Z instanceof F.Object&&Z.id&&Z._hasData&&(z[Z.id]=Z)});var j=p.first(this._opSetQueue);this._opSetQueue=p.rest(this._opSetQueue),this._applyOpSet(j,this._serverData),this._mergeMagicFields(L);var H=this;F._objectEach(L,function(Z,Q){H._serverData[Q]=F._decode(Z,Q);var V=F._traverse(H._serverData[Q],function(ee){if(ee instanceof F.Object&&z[ee.id])return z[ee.id]});V&&(H._serverData[Q]=V)}),this._rebuildAllEstimatedData();var K=(0,a.default)(W=this._opSetQueue).call(W,p.clone);this._refreshCache(),this._opSetQueue=K,this._saving=this._saving-1},_finishFetch:function(L,W){this._opSetQueue=[{}],this._mergeMagicFields(L);var z=this;F._objectEach(L,function(j,H){z._serverData[H]=F._decode(j,H)}),this._rebuildAllEstimatedData(),this._refreshCache(),this._opSetQueue=[{}],this._hasData=W},_applyOpSet:function(L,W){var z=this;F._objectEach(L,function(j,H){var K=C(W,H),Z=(0,o.default)(K,3),Q=Z[0],V=Z[1],ee=Z[2];y(W,H,j._estimate(Q,z,H)),V&&V[ee]===F.Op._UNSET&&delete V[ee]})},_resetCacheForKey:function(L){var W=this.attributes[L];if(p.isObject(W)&&!(W instanceof F.Object)&&!(W instanceof F.File)){var z=(0,m.default)(D(W));if(this._hashedJSON[L]!==z){var j=!!this._hashedJSON[L];return this._hashedJSON[L]=z,j}}return!1},_rebuildEstimatedDataForKey:function(L){var W=this;delete this.attributes[L],this._serverData[L]&&(this.attributes[L]=this._serverData[L]),F._arrayEach(this._opSetQueue,function(z){var j=z[L];if(j){var H=C(W.attributes,L),K=(0,o.default)(H,4),Z=K[0],Q=K[1],V=K[2],ee=K[3];y(W.attributes,L,j._estimate(Z,W,L)),Q&&Q[V]===F.Op._UNSET&&delete Q[V],W._resetCacheForKey(ee)}})},_rebuildAllEstimatedData:function(){var L=this,W=p.clone(this.attributes);this.attributes=p.clone(this._serverData),F._arrayEach(this._opSetQueue,function(z){L._applyOpSet(z,L.attributes),F._objectEach(z,function(j,H){L._resetCacheForKey(H)})}),F._objectEach(W,function(z,j){L.attributes[j]!==z&&L.trigger("change:"+j,L,L.attributes[j],{})}),F._objectEach(this.attributes,function(z,j){p.has(W,j)||L.trigger("change:"+j,L,z,{})})},set:function(L,W,z){var j;if(p.isObject(L)||S(L)?(j=p.mapObject(L,function(Q,V){return x(V),F._decode(Q,V)}),z=W):(j={},x(L),j[L]=F._decode(W,L)),z=z||{},!j)return this;j instanceof F.Object&&(j=j.attributes),z.unset&&F._objectEach(j,function(Q,V){j[V]=new F.Op.Unset});var H=p.clone(j),K=this;F._objectEach(H,function(Q,V){Q instanceof F.Op&&(H[V]=Q._estimate(K.attributes[V],K,V),H[V]===F.Op._UNSET&&delete H[V])}),this._validate(j,z),z.changes={};var Z=this._escapedAttributes;return F._arrayEach((0,f.default)(p).call(p,j),function(Q){var V=j[Q];V instanceof F.Relation&&(V.parent=K),V instanceof F.Op||(V=new F.Op.Set(V));var ee=!0;V instanceof F.Op.Set&&p.isEqual(K.attributes[Q],V.value)&&(ee=!1),ee&&(delete Z[Q],z.silent?K._silent[Q]=!0:z.changes[Q]=!0);var ue=p.last(K._opSetQueue);ue[Q]=V._mergeWithPrevious(ue[Q]),K._rebuildEstimatedDataForKey(Q),ee?(K.changed[Q]=K.attributes[Q],z.silent||(K._pending[Q]=!0)):(delete K.changed[Q],delete K._pending[Q])}),z.silent||this.change(z),this},unset:function(L,W){return W=W||{},W.unset=!0,this.set(L,null,W)},increment:function(L,W){return(p.isUndefined(W)||p.isNull(W))&&(W=1),this.set(L,new F.Op.Increment(W))},add:function(L,W){return this.set(L,new F.Op.Add(M(W)))},addUnique:function(L,W){return this.set(L,new F.Op.AddUnique(M(W)))},remove:function(L,W){return this.set(L,new F.Op.Remove(M(W)))},bitAnd:function(L,W){return this.set(L,new F.Op.BitAnd(W))},bitOr:function(L,W){return this.set(L,new F.Op.BitOr(W))},bitXor:function(L,W){return this.set(L,new F.Op.BitXor(W))},op:function(L){return p.last(this._opSetQueue)[L]},clear:function(L){L=L||{},L.unset=!0;var W=p.extend(this.attributes,this._operations);return this.set(W,L)},revert:function(L){var W=p.last(this._opSetQueue),z=M(L||(0,f.default)(p).call(p,W));return z.forEach(function(j){delete W[j]}),this._rebuildAllEstimatedData(),this},_getSaveJSON:function(){var L=p.clone(p.first(this._opSetQueue));return F._objectEach(L,function(W,z){L[z]=W.toJSON()}),L},_canBeSerialized:function(){return F.Object._canBeSerializedAsValue(this.attributes)},fetch:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1?arguments[1]:void 0;if(!this.id)throw new Error("Cannot fetch unsaved object");var z=this,j=O("classes",this.className,this.id,"GET",P(L),W);return j.then(function(H){var K=z.parse(H);return z._cleanupUnsetKeys(K,(0,f.default)(L)?M((0,f.default)(L)).join(",").split(","):void 0),z._finishFetch(K,!0),z})},_cleanupUnsetKeys:function(L){var W=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(0,f.default)(p).call(p,this._serverData);p.forEach(z,function(j){L[j]===void 0&&delete W._serverData[j]})},save:function(L,W,z){var j,H,K;p.isObject(L)||S(L)?(j=L,K=W):(j={},j[L]=W,K=z),K=p.clone(K)||{},K.wait&&(H=p.clone(this.attributes));var Z=p.clone(K)||{};Z.wait&&(Z.silent=!0),j&&this.set(j,Z);var Q=this,V=[],ee=[];return F.Object._findUnsavedChildren(Q,V,ee),V.length+ee.length>1?F.Object._deepSaveAsync(this,Q,K):(this._startSave(),this._saving=(this._saving||0)+1,this._allPreviousSaves=this._allPreviousSaves||c.default.resolve(),this._allPreviousSaves=this._allPreviousSaves.catch(function(ue){}).then(function(){var ue=Q.id?"PUT":"POST",q=Q._getSaveJSON(),he={};if((Q._fetchWhenSave||K.fetchWhenSave)&&(he.new="true"),K._failOnNotExist&&(he.failOnNotExist="true"),K.query){var fe;if(typeof K.query._getParams=="function"&&(fe=K.query._getParams(),fe&&(he.where=fe.where)),!he.where){var Ne=new Error("options.query is not an AV.Query");throw Ne}}p.extend(q,Q._flags);var je="classes",Le=Q.className;Q.className==="_User"&&!Q.id&&(je="users",Le=null);var ke=K._makeRequest||O,He=ke(je,Le,Q.id,ue,q,K,he);return He=He.then(function(_e){var ze=Q.parse(_e);return K.wait&&(ze=p.extend(j||{},ze)),Q._finishSave(ze),K.wait&&Q.set(H,Z),Q},function(_e){throw Q._cancelSave(),_e}),He}),this._allPreviousSaves)},destroy:function(L){L=L||{};var W=this,z=function(){W.trigger("destroy",W,W.collection,L)};if(!this.id)return z();L.wait||z();var j=O("classes",this.className,this.id,"DELETE",this._flags,L);return j.then(function(){return L.wait&&z(),W})},parse:function(L){var W=p.clone(L);return["createdAt","updatedAt"].forEach(function(z){W[z]&&(W[z]=F._parseDate(W[z]))}),W.createdAt&&!W.updatedAt&&(W.updatedAt=W.createdAt),W},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(L){L=L||{};var W=this._changing;this._changing=!0;var z=this;F._objectEach(this._silent,function(K){z._pending[K]=!0});var j=p.extend({},L.changes,this._silent);if(this._silent={},F._objectEach(j,function(K,Z){z.trigger("change:"+Z,z,z.get(Z),L)}),W)return this;for(var H=function(Z,Q){!z._pending[Q]&&!z._silent[Q]&&delete z.changed[Q]};!p.isEmpty(this._pending);)this._pending={},this.trigger("change",this,L),F._objectEach(this.changed,H),z._previousAttributes=p.clone(this.attributes);return this._changing=!1,this},previous:function(L){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[L]},previousAttributes:function(){return p.clone(this._previousAttributes)},isValid:function(){try{this.validate(this.attributes)}catch{return!1}return!0},validate:function(L){if(p.has(L,"ACL")&&!(L.ACL instanceof F.ACL))throw new E(E.OTHER_CAUSE,"ACL must be a AV.ACL.")},_validate:function(L,W){W.silent||!this.validate||(L=p.extend({},this.attributes,L),this.validate(L))},getACL:function(){return this.get("ACL")},setACL:function(L,W){return this.set("ACL",L,W)},disableBeforeHook:function(){this.ignoreHook("beforeSave"),this.ignoreHook("beforeUpdate"),this.ignoreHook("beforeDelete")},disableAfterHook:function(){this.ignoreHook("afterSave"),this.ignoreHook("afterUpdate"),this.ignoreHook("afterDelete")},ignoreHook:function(L){if(!p.contains(["beforeSave","afterSave","beforeUpdate","afterUpdate","beforeDelete","afterDelete"],L))throw new Error("Unsupported hookName: "+L);if(!F.hookKey)throw new Error("ignoreHook required hookKey");this._flags.__ignore_hooks||(this._flags.__ignore_hooks=[]),this._flags.__ignore_hooks.push(L)}}),F.Object.createWithoutData=function(B,L,W){var z;if(p.isString(B))z=F.Object._getSubclass(B);else if(B.prototype&&B.prototype instanceof F.Object)z=B;else throw new Error("class must be a string or a subclass of AV.Object.");if(!L)throw new TypeError("The objectId must be provided");var j=new z;return j.id=L,j._hasData=W,j},F.Object.destroyAll=function(B){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!B||B.length===0)return c.default.resolve();var W=p.groupBy(B,function(j){return(0,m.default)({className:j.className,flags:j._flags})}),z={requests:(0,a.default)(p).call(p,W,function(j){var H,K=(0,a.default)(p).call(p,j,"id").join(",");return{method:"DELETE",path:(0,d.default)(H="/1.1/classes/".concat(j[0].className,"/")).call(H,K),body:j[0]._flags}})};return O("batch",null,null,"POST",z,L).then(function(j){var H=(0,h.default)(p).call(p,j,function(K){return!K.success});if(H)throw new E(H.error.code,H.error.error)})},F.Object._getSubclass=function(B){if(!p.isString(B))throw new Error("AV.Object._getSubclass requires a string argument.");var L=F.Object._classMap[B];return L||(L=F.Object.extend(B),F.Object._classMap[B]=L),L},F.Object._create=function(B,L,W){var z=F.Object._getSubclass(B);return new z(L,W)},F.Object._classMap={},F.Object._extend=F._extend,F.Object.new=function(B,L){return new F.Object(B,L)},F.Object.extend=function(B,L,W){if(!p.isString(B)){if(B&&p.has(B,"className"))return F.Object.extend(B.className,B,L);throw new Error("AV.Object.extend's first argument should be the className.")}B==="User"&&(B="_User");var z=null;if(p.has(F.Object._classMap,B)){var j=F.Object._classMap[B];if(L||W)z=j._extend(L,W);else return j}else L=L||{},L._className=B,z=this._extend(L,W);return z.extend=function(H){var K;if(p.isString(H)||H&&p.has(H,"className"))return F.Object.extend.apply(z,arguments);var Z=(0,d.default)(K=[B]).call(K,p.toArray(arguments));return F.Object.extend.apply(z,Z)},(0,g.default)(z,"query",(0,v.default)(F.Object,"query")),z.new=function(H,K){return new z(H,K)},F.Object._classMap[B]=z,z},(0,g.default)(F.Object.prototype,"className",{get:function(){var L=this._className||this.constructor._LCClassName||this.constructor.name;return L==="User"?"_User":L}}),F.Object.register=function(B,L){if(!(B.prototype instanceof F.Object))throw new Error("registered class is not a subclass of AV.Object");var W=L||B.name;if(!W.length)throw new Error("registered class must be named");L&&(B._LCClassName=L),F.Object._classMap[W]=B},(0,g.default)(F.Object,"query",{get:function(){return new F.Query(this.prototype.className)}}),F.Object._findUnsavedChildren=function(B,L,W){F._traverse(B,function(z){if(z instanceof F.Object){z.dirty()&&L.push(z);return}if(z instanceof F.File){z.id||W.push(z);return}})},F.Object._canBeSerializedAsValue=function(B){var L=!0;return B instanceof F.Object||B instanceof F.File?L=!!B.id:p.isArray(B)?F._arrayEach(B,function(W){F.Object._canBeSerializedAsValue(W)||(L=!1)}):p.isObject(B)&&F._objectEach(B,function(W){F.Object._canBeSerializedAsValue(W)||(L=!1)}),L},F.Object._deepSaveAsync=function(B,L,W){var z=[],j=[];F.Object._findUnsavedChildren(B,z,j),j=p.uniq(j);var H=c.default.resolve();p.each(j,function(Q){H=H.then(function(){return Q.save()})});var K=p.uniq(z),Z=p.uniq(K);return H.then(function(){return R(function(){return Z.length>0},function(){var Q=[],V=[];if(F._arrayEach(Z,function(q){q._canBeSerialized()?Q.push(q):V.push(q)}),Z=V,Q.length===0)return c.default.reject(new E(E.OTHER_CAUSE,"Tried to save a batch with a cycle."));var ee=c.default.resolve((0,a.default)(p).call(p,Q,function(q){return q._allPreviousSaves||c.default.resolve()})),ue=ee.then(function(){return O("batch",null,null,"POST",{requests:(0,a.default)(p).call(p,Q,function(q){var he=q.id?"PUT":"POST",fe=q._getSaveJSON();p.extend(fe,q._flags);var Ne="classes",je=q.className,Le="/".concat(Ne,"/").concat(je);q.className==="_User"&&!q.id&&(Le="/users");var Le="/1.1".concat(Le);return q.id&&(Le=Le+"/"+q.id),q._startSave(),{method:he,path:Le,body:fe,params:W&&W.fetchWhenSave?{fetchWhenSave:!0}:void 0}})},W).then(function(q){var he=(0,a.default)(p).call(p,Q,function(fe,Ne){return q[Ne].success?(fe._finishSave(fe.parse(q[Ne].success)),fe):(fe._cancelSave(),new E(q[Ne].error.code,q[Ne].error.error))});return A(he)})});return F._arrayEach(Q,function(q){q._allPreviousSaves=ue}),ue})}).then(function(){return B})}}},function(i,r,t){var s=t(506),o=t(514),a=t(515),l=t(525);function h(c,d){return s(c)||o(c,d)||a(c,d)||l()}i.exports=h,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){var s=t(507);function o(a){if(s(a))return a}i.exports=o,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){i.exports=t(508)},function(i,r,t){i.exports=t(509)},function(i,r,t){var s=t(510);i.exports=s},function(i,r,t){var s=t(511);i.exports=s},function(i,r,t){var s=t(512);i.exports=s},function(i,r,t){t(513);var s=t(15);i.exports=s.Array.isArray},function(i,r,t){var s=t(0),o=t(86);s({target:"Array",stat:!0},{isArray:o})},function(i,r,t){var s=t(229),o=t(238);function a(l,h){var c=l==null?null:typeof s<"u"&&o(l)||l["@@iterator"];if(c!=null){var d=[],f=!0,m=!1,g,v;try{for(c=c.call(l);!(f=(g=c.next()).done)&&(d.push(g.value),!(h&&d.length===h));f=!0);}catch(p){m=!0,v=p}finally{try{!f&&c.return!=null&&c.return()}finally{if(m)throw v}}return d}}i.exports=a,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){var s=t(516),o=t(520),a=t(524);function l(h,c){var d;if(h){if(typeof h=="string")return a(h,c);var f=s(d=Object.prototype.toString.call(h)).call(d,8,-1);if(f==="Object"&&h.constructor&&(f=h.constructor.name),f==="Map"||f==="Set")return o(h);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return a(h,c)}}i.exports=l,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){i.exports=t(517)},function(i,r,t){i.exports=t(518)},function(i,r,t){var s=t(519);i.exports=s},function(i,r,t){var s=t(227);i.exports=s},function(i,r,t){i.exports=t(521)},function(i,r,t){i.exports=t(522)},function(i,r,t){var s=t(523);i.exports=s},function(i,r,t){var s=t(237);i.exports=s},function(i,r){function t(s,o){(o==null||o>s.length)&&(o=s.length);for(var a=0,l=new Array(o);a<o;a++)l[a]=s[a];return l}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){i.exports=t(527)},function(i,r,t){var s=t(528);i.exports=s},function(i,r,t){t(529);var s=t(15),o=s.Object,a=i.exports=function(h,c){return o.getOwnPropertyDescriptor(h,c)};o.getOwnPropertyDescriptor.sham&&(a.sham=!0)},function(i,r,t){var s=t(0),o=t(3),a=t(35),l=t(73).f,h=t(20),c=o(function(){l(1)}),d=!h||c;s({target:"Object",stat:!0,forced:d,sham:!h},{getOwnPropertyDescriptor:function(m,g){return l(a(m),g)}})},function(i,r,t){var s=t(2),o=t(43);i.exports=function(a){a.Role=a.Object.extend("_Role",{constructor:function(h,c){if(s.isString(h)?(a.Object.prototype.constructor.call(this,null,null),this.setName(h)):a.Object.prototype.constructor.call(this,h,c),c)if(c instanceof a.ACL)this.setACL(c);else throw new TypeError("acl must be an instance of AV.ACL")},getName:function(){return this.get("name")},setName:function(h,c){return this.set("name",h,c)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(h,c){if("name"in h&&h.name!==this.getName()){var d=h.name;if(this.id&&this.id!==h.objectId)return new o(o.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!s.isString(d))return new o(o.OTHER_CAUSE,"A role's name must be a String.");if(!/^[0-9a-zA-Z\-_ ]+$/.test(d))return new o(o.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return a.Object.prototype.validate?a.Object.prototype.validate.call(this,h,c):!1}})}},function(i,r,t){var s=t(1),o=s(t(532)),a=s(t(10)),l=s(t(42)),h=s(t(107)),c=s(t(37)),d=t(2),f=t(219),m=t(43),g=t(27),v=g._request,p=g.request,E=t(70),w=E.getAdapter,O="anonymous",T="lc_qqapp",S=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"weixin";return function(y,C){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=b.unionIdPlatform,D=R===void 0?P:R,I=b.asMainAccount,x=I===void 0?!1:I;if(typeof C!="string")throw new m(m.OTHER_CAUSE,"unionId is not a string");if(typeof D!="string")throw new m(m.OTHER_CAUSE,"unionIdPlatform is not a string");return d.extend({},y,{platform:D,unionid:C,main_account:!!x})}};i.exports=function(M){M.User=M.Object.extend("_User",{_isCurrentUser:!1,_mergeMagicFields:function(y){return y.sessionToken&&(this._sessionToken=y.sessionToken,delete y.sessionToken),M.User.__super__._mergeMagicFields.call(this,y)},_cleanupAuthData:function(){if(this.isCurrent()){var y=this.get("authData");y&&M._objectEach(this.get("authData"),function(C,b){y[b]||delete y[b]})}},_synchronizeAllAuthData:function(){var y=this.get("authData");if(y){var C=this;M._objectEach(this.get("authData"),function(b,R){C._synchronizeAuthData(R)})}},_synchronizeAuthData:function(y){if(this.isCurrent()){var C;d.isString(y)?(C=y,y=M.User._authProviders[C]):C=y.getAuthType();var b=this.get("authData");if(!(!b||!y)){var R=y.restoreAuthentication(b[C]);R||this.dissociateAuthData(y)}}},_handleSaveResult:function(y){return y&&!M._config.disableCurrentUser&&(this._isCurrentUser=!0),this._cleanupAuthData(),this._synchronizeAllAuthData(),delete this._serverData.password,this._rebuildEstimatedDataForKey("password"),this._refreshCache(),(y||this.isCurrent())&&!M._config.disableCurrentUser?a.default.resolve(M.User._saveCurrentUser(this)):a.default.resolve()},_linkWith:function(y,C){var b=this,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},D=R.failOnNotExist,I=D===void 0?!1:D,x=R.useMasterKey,A=R.sessionToken,N=R.user,F;return d.isString(y)?(F=y,y=M.User._authProviders[y]):F=y.getAuthType(),C?this.save({authData:(0,o.default)({},F,C)},{useMasterKey:x,sessionToken:A,user:N,fetchWhenSave:!!this.get("authData"),_failOnNotExist:I}).then(function(B){return B._handleSaveResult(!0).then(function(){return B})}):y.authenticate().then(function(B){return b._linkWith(y,B)})},associateWithAuthData:function(y,C){return this._linkWith(C,y)},associateWithAuthDataAndUnionId:function(y,C,b,R){return this._linkWith(C,S()(y,b,R))},associateWithMiniApp:function(y,C){var b=this;if(y===void 0){var R=w("getAuthInfo");return R().then(function(D){return b._linkWith(D.provider,D.authData,C)})}return this._linkWith(y.provider,y.authData,C)},associateWithQQApp:function(){var y=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=C.preferUnionId,R=b===void 0?!1:b,D=C.unionIdPlatform,I=D===void 0?"qq":D,x=C.asMainAccount,A=x===void 0?!0:x,N=w("getAuthInfo");return N({preferUnionId:R,asMainAccount:A,platform:I}).then(function(F){return F.provider=T,y.associateWithMiniApp(F)})},associateWithWeapp:function(){var y=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=C.preferUnionId,R=b===void 0?!1:b,D=C.unionIdPlatform,I=D===void 0?"weixin":D,x=C.asMainAccount,A=x===void 0?!0:x,N=w("getAuthInfo");return N({preferUnionId:R,asMainAccount:A,platform:I}).then(function(F){return y.associateWithMiniApp(F)})},linkWithWeapp:function(y){return console.warn("DEPRECATED: User#linkWithWeapp 已废弃，请使用 User#associateWithWeapp 代替"),this.associateWithWeapp(y)},associateWithQQAppWithUnionId:function(y){var C=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=b.unionIdPlatform,D=R===void 0?"qq":R,I=b.asMainAccount,x=I===void 0?!1:I,A=w("getAuthInfo");return A({platform:D}).then(function(N){return N=M.User.mergeUnionId(N,y,{asMainAccount:x}),N.provider=T,C.associateWithMiniApp(N)})},associateWithWeappWithUnionId:function(y){var C=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=b.unionIdPlatform,D=R===void 0?"weixin":R,I=b.asMainAccount,x=I===void 0?!1:I,A=w("getAuthInfo");return A({platform:D}).then(function(N){return N=M.User.mergeUnionId(N,y,{asMainAccount:x}),C.associateWithMiniApp(N)})},dissociateAuthData:function(y){return this.unset("authData.".concat(y)),this.save().then(function(C){return C._handleSaveResult(!0).then(function(){return C})})},_unlinkFrom:function(y){return console.warn("DEPRECATED: User#_unlinkFrom 已废弃，请使用 User#dissociateAuthData 代替"),this.dissociateAuthData(y)},_isLinked:function(y){var C;d.isString(y)?C=y:C=y.getAuthType();var b=this.get("authData")||{};return!!b[C]},isAnonymous:function(){return this._isLinked(O)},logOut:function(){this._logOutWithAll(),this._isCurrentUser=!1},_logOutWithAll:function(){var y=this.get("authData");if(y){var C=this;M._objectEach(this.get("authData"),function(b,R){C._logOutWith(R)})}},_logOutWith:function(y){this.isCurrent()&&(d.isString(y)&&(y=M.User._authProviders[y]),y&&y.deauthenticate&&y.deauthenticate())},signUp:function(y,C){var b,R=y&&y.username||this.get("username");if(!R||R==="")throw b=new m(m.OTHER_CAUSE,"Cannot sign up user with an empty name."),b;var D=y&&y.password||this.get("password");if(!D||D==="")throw b=new m(m.OTHER_CAUSE,"Cannot sign up user with an empty password."),b;return this.save(y,C).then(function(I){return I.isAnonymous()&&(I.unset("authData.".concat(O)),I._opSetQueue=[{}]),I._handleSaveResult(!0).then(function(){return I})})},signUpOrlogInWithMobilePhone:function(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b,R=y&&y.mobilePhoneNumber||this.get("mobilePhoneNumber");if(!R||R==="")throw b=new m(m.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber with an empty mobilePhoneNumber."),b;var D=y&&y.smsCode||this.get("smsCode");if(!D||D==="")throw b=new m(m.OTHER_CAUSE,"Cannot sign up or login user by mobilePhoneNumber  with an empty smsCode."),b;return C._makeRequest=function(I,x,A,N,F){return v("usersByMobilePhone",null,null,"POST",F)},this.save(y,C).then(function(I){return delete I.attributes.smsCode,delete I._serverData.smsCode,I._handleSaveResult(!0).then(function(){return I})})},loginWithAuthData:function(y,C,b){return this._linkWith(C,y,b)},loginWithAuthDataAndUnionId:function(y,C,b,R){return this.loginWithAuthData(S()(y,b,R),C,R)},loginWithWeapp:function(){var y=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=C.preferUnionId,R=b===void 0?!1:b,D=C.unionIdPlatform,I=D===void 0?"weixin":D,x=C.asMainAccount,A=x===void 0?!0:x,N=C.failOnNotExist,F=N===void 0?!1:N,B=C.useMasterKey,L=C.sessionToken,W=C.user,z=w("getAuthInfo");return z({preferUnionId:R,asMainAccount:A,platform:I}).then(function(j){return y.loginWithMiniApp(j,{failOnNotExist:F,useMasterKey:B,sessionToken:L,user:W})})},loginWithWeappWithUnionId:function(y){var C=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=b.unionIdPlatform,D=R===void 0?"weixin":R,I=b.asMainAccount,x=I===void 0?!1:I,A=b.failOnNotExist,N=A===void 0?!1:A,F=b.useMasterKey,B=b.sessionToken,L=b.user,W=w("getAuthInfo");return W({platform:D}).then(function(z){return z=M.User.mergeUnionId(z,y,{asMainAccount:x}),C.loginWithMiniApp(z,{failOnNotExist:N,useMasterKey:F,sessionToken:B,user:L})})},loginWithQQApp:function(){var y=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=C.preferUnionId,R=b===void 0?!1:b,D=C.unionIdPlatform,I=D===void 0?"qq":D,x=C.asMainAccount,A=x===void 0?!0:x,N=C.failOnNotExist,F=N===void 0?!1:N,B=C.useMasterKey,L=C.sessionToken,W=C.user,z=w("getAuthInfo");return z({preferUnionId:R,asMainAccount:A,platform:I}).then(function(j){return j.provider=T,y.loginWithMiniApp(j,{failOnNotExist:F,useMasterKey:B,sessionToken:L,user:W})})},loginWithQQAppWithUnionId:function(y){var C=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=b.unionIdPlatform,D=R===void 0?"qq":R,I=b.asMainAccount,x=I===void 0?!1:I,A=b.failOnNotExist,N=A===void 0?!1:A,F=b.useMasterKey,B=b.sessionToken,L=b.user,W=w("getAuthInfo");return W({platform:D}).then(function(z){return z=M.User.mergeUnionId(z,y,{asMainAccount:x}),z.provider=T,C.loginWithMiniApp(z,{failOnNotExist:N,useMasterKey:F,sessionToken:B,user:L})})},loginWithMiniApp:function(y,C){var b=this;if(y===void 0){var R=w("getAuthInfo");return R().then(function(D){return b.loginWithAuthData(D.authData,D.provider,C)})}return this.loginWithAuthData(y.authData,y.provider,C)},logIn:function(){var y=this,C=v("login",null,null,"POST",this.toJSON());return C.then(function(b){var R=y.parse(b);return y._finishFetch(R),y._handleSaveResult(!0).then(function(){return R.smsCode||delete y.attributes.smsCode,y})})},save:function(y,C,b){var R,D;return d.isObject(y)||d.isNull(y)||d.isUndefined(y)?(R=y,D=C):(R={},R[y]=C,D=b),D=D||{},M.Object.prototype.save.call(this,R,D).then(function(I){return I._handleSaveResult(!1).then(function(){return I})})},follow:function(y,C){if(!this.id)throw new Error("Please signin.");var b,R;y.user?(b=y.user,R=y.attributes):b=y;var D=d.isString(b)?b:b.id;if(!D)throw new Error("Invalid target user.");var I="users/"+this.id+"/friendship/"+D,x=v(I,null,null,"POST",M._encode(R),C);return x},unfollow:function(y,C){if(!this.id)throw new Error("Please signin.");var b;y.user?b=y.user:b=y;var R=d.isString(b)?b:b.id;if(!R)throw new Error("Invalid target user.");var D="users/"+this.id+"/friendship/"+R,I=v(D,null,null,"DELETE",null,C);return I},getFollowersAndFollowees:function(y,C){if(!this.id)throw new Error("Please signin.");return p({method:"GET",path:"/users/".concat(this.id,"/followersAndFollowees"),query:{skip:y&&y.skip,limit:y&&y.limit,include:"follower,followee",keys:"follower,followee"},authOptions:C}).then(function(b){var R=b.followers,D=b.followees;return{followers:(0,l.default)(R).call(R,function(I){var x=I.follower;return M._decode(x)}),followees:(0,l.default)(D).call(D,function(I){var x=I.followee;return M._decode(x)})}})},followerQuery:function(){return M.User.followerQuery(this.id)},followeeQuery:function(){return M.User.followeeQuery(this.id)},fetch:function(y,C){return M.Object.prototype.fetch.call(this,y,C).then(function(b){return b._handleSaveResult(!1).then(function(){return b})})},updatePassword:function(y,C,b){var R=this,D="users/"+this.id+"/updatePassword",I={old_password:y,new_password:C},x=v(D,null,null,"PUT",I,b);return x.then(function(A){return R._finishFetch(R.parse(A)),R._handleSaveResult(!0).then(function(){return A})})},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},getMobilePhoneNumber:function(){return this.get("mobilePhoneNumber")},setMobilePhoneNumber:function(y,C){return this.set("mobilePhoneNumber",y,C)},setUsername:function(y,C){return this.set("username",y,C)},setPassword:function(y,C){return this.set("password",y,C)},getEmail:function(){return this.get("email")},setEmail:function(y,C){return this.set("email",y,C)},authenticated:function(){return console.warn("DEPRECATED: 如果要判断当前用户的登录状态是否有效，请使用 currentUser.isAuthenticated().then()，如果要判断该用户是否是当前登录用户，请使用 user.id === currentUser.id。"),!!this._sessionToken&&!M._config.disableCurrentUser&&M.User.current()&&M.User.current().id===this.id},isAuthenticated:function(){var y=this;return a.default.resolve().then(function(){return!!y._sessionToken&&M.User._fetchUserBySessionToken(y._sessionToken).then(function(){return!0},function(C){if(C.code===211)return!1;throw C})})},getSessionToken:function(){return this._sessionToken},refreshSessionToken:function(y){var C=this;return v("users/".concat(this.id,"/refreshSessionToken"),null,null,"PUT",null,y).then(function(b){return C._finishFetch(b),C._handleSaveResult(!0).then(function(){return C})})},getRoles:function(y){var C;return(0,h.default)(C=M.Relation.reverseQuery("_Role","users",this)).call(C,y)}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",_authProviders:{},signUp:function(y,C,b,R){b=b||{},b.username=y,b.password=C;var D=M.Object._create("_User");return D.signUp(b,R)},logIn:function(y,C){var b=M.Object._create("_User");return b._finishFetch({username:y,password:C}),b.logIn()},become:function(y){return this._fetchUserBySessionToken(y).then(function(C){return C._handleSaveResult(!0).then(function(){return C})})},_fetchUserBySessionToken:function(y){if(y===void 0)return a.default.reject(new Error("The sessionToken cannot be undefined"));var C=M.Object._create("_User");return p({method:"GET",path:"/users/me",authOptions:{sessionToken:y}}).then(function(b){var R=C.parse(b);return C._finishFetch(R),C})},logInWithMobilePhoneSmsCode:function(y,C){var b=M.Object._create("_User");return b._finishFetch({mobilePhoneNumber:y,smsCode:C}),b.logIn()},signUpOrlogInWithMobilePhone:function(y,C,b,R){b=b||{},b.mobilePhoneNumber=y,b.smsCode=C;var D=M.Object._create("_User");return D.signUpOrlogInWithMobilePhone(b,R)},logInWithMobilePhone:function(y,C){var b=M.Object._create("_User");return b._finishFetch({mobilePhoneNumber:y,password:C}),b.logIn()},loginWithEmail:function(y,C){var b=M.Object._create("_User");return b._finishFetch({email:y,password:C}),b.logIn()},loginWithAuthData:function(y,C,b){return M.User._logInWith(C,y,b)},signUpOrlogInWithAuthData:function(){return console.warn("DEPRECATED: User.signUpOrlogInWithAuthData 已废弃，请使用 User#loginWithAuthData 代替"),this.loginWithAuthData.apply(this,arguments)},loginWithAuthDataAndUnionId:function(y,C,b,R){return this.loginWithAuthData(S()(y,b,R),C,R)},signUpOrlogInWithAuthDataAndUnionId:function(){return console.warn("DEPRECATED: User.signUpOrlogInWithAuthDataAndUnionId 已废弃，请使用 User#loginWithAuthDataAndUnionId 代替"),this.loginWithAuthDataAndUnionId.apply(this,arguments)},mergeUnionId:function(y,C){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=b.asMainAccount,D=R===void 0?!1:R;y=JSON.parse((0,c.default)(y));var I=y,x=I.authData,A=I.platform;return x.platform=A,x.main_account=D,x.unionid=C,y},loginWithWeapp:function(){var y=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=C.preferUnionId,R=b===void 0?!1:b,D=C.unionIdPlatform,I=D===void 0?"weixin":D,x=C.asMainAccount,A=x===void 0?!0:x,N=C.failOnNotExist,F=N===void 0?!1:N,B=C.useMasterKey,L=C.sessionToken,W=C.user,z=w("getAuthInfo");return z({preferUnionId:R,asMainAccount:A,platform:I}).then(function(j){return y.loginWithMiniApp(j,{failOnNotExist:F,useMasterKey:B,sessionToken:L,user:W})})},loginWithWeappWithUnionId:function(y){var C=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=b.unionIdPlatform,D=R===void 0?"weixin":R,I=b.asMainAccount,x=I===void 0?!1:I,A=b.failOnNotExist,N=A===void 0?!1:A,F=b.useMasterKey,B=b.sessionToken,L=b.user,W=w("getAuthInfo");return W({platform:D}).then(function(z){return z=M.User.mergeUnionId(z,y,{asMainAccount:x}),C.loginWithMiniApp(z,{failOnNotExist:N,useMasterKey:F,sessionToken:B,user:L})})},loginWithQQApp:function(){var y=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=C.preferUnionId,R=b===void 0?!1:b,D=C.unionIdPlatform,I=D===void 0?"qq":D,x=C.asMainAccount,A=x===void 0?!0:x,N=C.failOnNotExist,F=N===void 0?!1:N,B=C.useMasterKey,L=C.sessionToken,W=C.user,z=w("getAuthInfo");return z({preferUnionId:R,asMainAccount:A,platform:I}).then(function(j){return j.provider=T,y.loginWithMiniApp(j,{failOnNotExist:F,useMasterKey:B,sessionToken:L,user:W})})},loginWithQQAppWithUnionId:function(y){var C=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=b.unionIdPlatform,D=R===void 0?"qq":R,I=b.asMainAccount,x=I===void 0?!1:I,A=b.failOnNotExist,N=A===void 0?!1:A,F=b.useMasterKey,B=b.sessionToken,L=b.user,W=w("getAuthInfo");return W({platform:D}).then(function(z){return z=M.User.mergeUnionId(z,y,{asMainAccount:x}),z.provider=T,C.loginWithMiniApp(z,{failOnNotExist:N,useMasterKey:F,sessionToken:B,user:L})})},loginWithMiniApp:function(y,C){var b=this;if(y===void 0){var R=w("getAuthInfo");return R().then(function(D){return b.loginWithAuthData(D.authData,D.provider,C)})}return this.loginWithAuthData(y.authData,y.provider,C)},_genId:function(){return f()},loginAnonymously:function(){return this.loginWithAuthData({id:M.User._genId()},"anonymous")},associateWithAuthData:function(y,C,b){return console.warn("DEPRECATED: User.associateWithAuthData 已废弃，请使用 User#associateWithAuthData 代替"),y._linkWith(C,b)},logOut:function(){return M._config.disableCurrentUser?(console.warn("AV.User.current() was disabled in multi-user environment, call logOut() from user object instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),a.default.resolve(null)):(M.User._currentUser!==null&&(M.User._currentUser._logOutWithAll(),M.User._currentUser._isCurrentUser=!1),M.User._currentUserMatchesDisk=!0,M.User._currentUser=null,M.localStorage.removeItemAsync(M._getAVPath(M.User._CURRENT_USER_KEY)).then(function(){return M._refreshSubscriptionId()}))},followerQuery:function(y){if(!y||!d.isString(y))throw new Error("Invalid user object id.");var C=new M.FriendShipQuery("_Follower");return C._friendshipTag="follower",C.equalTo("user",M.Object.createWithoutData("_User",y)),C},followeeQuery:function(y){if(!y||!d.isString(y))throw new Error("Invalid user object id.");var C=new M.FriendShipQuery("_Followee");return C._friendshipTag="followee",C.equalTo("user",M.Object.createWithoutData("_User",y)),C},requestPasswordReset:function(y){var C={email:y},b=v("requestPasswordReset",null,null,"POST",C);return b},requestEmailVerify:function(y){var C={email:y},b=v("requestEmailVerify",null,null,"POST",C);return b},requestMobilePhoneVerify:function(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b={mobilePhoneNumber:y};C.validateToken&&(b.validate_token=C.validateToken);var R=v("requestMobilePhoneVerify",null,null,"POST",b,C);return R},requestPasswordResetBySmsCode:function(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b={mobilePhoneNumber:y};C.validateToken&&(b.validate_token=C.validateToken);var R=v("requestPasswordResetBySmsCode",null,null,"POST",b,C);return R},requestChangePhoneNumber:function(y,C,b){var R={mobilePhoneNumber:y};return C&&(R.ttl=b.ttl),b&&b.validateToken&&(R.validate_token=b.validateToken),v("requestChangePhoneNumber",null,null,"POST",R,b)},changePhoneNumber:function(y,C){var b={mobilePhoneNumber:y,code:C};return v("changePhoneNumber",null,null,"POST",b)},resetPasswordBySmsCode:function(y,C){var b={password:C},R=v("resetPasswordBySmsCode",null,y,"PUT",b);return R},verifyMobilePhone:function(y){var C=v("verifyMobilePhone",null,y,"POST",null);return C},requestLoginSmsCode:function(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b={mobilePhoneNumber:y};C.validateToken&&(b.validate_token=C.validateToken);var R=v("requestLoginSmsCode",null,null,"POST",b,C);return R},currentAsync:function(){return M._config.disableCurrentUser?(console.warn("AV.User.currentAsync() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),a.default.resolve(null)):M.User._currentUser||M.User._currentUserMatchesDisk?a.default.resolve(M.User._currentUser):M.localStorage.getItemAsync(M._getAVPath(M.User._CURRENT_USER_KEY)).then(function(y){if(!y)return null;M.User._currentUserMatchesDisk=!0,M.User._currentUser=M.Object._create("_User"),M.User._currentUser._isCurrentUser=!0;var C=JSON.parse(y);return M.User._currentUser.id=C._id,delete C._id,M.User._currentUser._sessionToken=C._sessionToken,delete C._sessionToken,M.User._currentUser._finishFetch(C),M.User._currentUser._synchronizeAllAuthData(),M.User._currentUser._refreshCache(),M.User._currentUser._opSetQueue=[{}],M.User._currentUser})},current:function(){if(M._config.disableCurrentUser)return console.warn("AV.User.current() was disabled in multi-user environment, access user from request instead https://leancloud.cn/docs/leanengine-node-sdk-upgrade-1.html"),null;if(M.localStorage.async){var y=new Error("Synchronous API User.current() is not available in this runtime. Use User.currentAsync() instead.");throw y.code="SYNC_API_NOT_AVAILABLE",y}if(M.User._currentUser||M.User._currentUserMatchesDisk)return M.User._currentUser;M.User._currentUserMatchesDisk=!0;var C=M.localStorage.getItem(M._getAVPath(M.User._CURRENT_USER_KEY));if(!C)return null;M.User._currentUser=M.Object._create("_User"),M.User._currentUser._isCurrentUser=!0;var b=JSON.parse(C);return M.User._currentUser.id=b._id,delete b._id,M.User._currentUser._sessionToken=b._sessionToken,delete b._sessionToken,M.User._currentUser._finishFetch(b),M.User._currentUser._synchronizeAllAuthData(),M.User._currentUser._refreshCache(),M.User._currentUser._opSetQueue=[{}],M.User._currentUser},_saveCurrentUser:function(y){var C;return M.User._currentUser!==y?C=M.User.logOut():C=a.default.resolve(),C.then(function(){y._isCurrentUser=!0,M.User._currentUser=y;var b=y._toFullJSON();return b._id=y.id,b._sessionToken=y._sessionToken,M.localStorage.setItemAsync(M._getAVPath(M.User._CURRENT_USER_KEY),(0,c.default)(b)).then(function(){return M.User._currentUserMatchesDisk=!0,M._refreshSubscriptionId()})})},_registerAuthenticationProvider:function(y){M.User._authProviders[y.getAuthType()]=y,!M._config.disableCurrentUser&&M.User.current()&&M.User.current()._synchronizeAuthData(y.getAuthType())},_logInWith:function(y,C,b){var R=M.Object._create("_User");return R._linkWith(y,C,b)}})}},function(i,r,t){var s=t(143);function o(a,l,h){return l in a?s(a,l,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[l]=h,a}i.exports=o,i.exports.__esModule=!0,i.exports.default=i.exports},function(i,r,t){var s=t(1),o=s(t(42)),a=s(t(10)),l=s(t(53)),h=s(t(37)),c=s(t(107)),d=s(t(25)),f=t(2),m=t(69)("leancloud:query"),g=t(43),v=t(27),p=v._request,E=v.request,w=t(31),O=w.ensureArray,T=w.transformFetchOptions,S=w.continueWhile,M=function(y,C){if(y===void 0)throw new Error(C)};i.exports=function(P){P.Query=function(y){f.isString(y)&&(y=P.Object._getSubclass(y)),this.objectClass=y,this.className=y.prototype.className,this._where={},this._include=[],this._select=[],this._limit=-1,this._skip=0,this._defaultParams={}},P.Query.or=function(){var y=f.toArray(arguments),C=null;P._arrayEach(y,function(R){if(f.isNull(C)&&(C=R.className),C!==R.className)throw new Error("All queries must be for the same class")});var b=new P.Query(C);return b._orQuery(y),b},P.Query.and=function(){var y=f.toArray(arguments),C=null;P._arrayEach(y,function(R){if(f.isNull(C)&&(C=R.className),C!==R.className)throw new Error("All queries must be for the same class")});var b=new P.Query(C);return b._andQuery(y),b},P.Query.doCloudQuery=function(y,C,b){var R={cql:y};f.isArray(C)?R.pvalues=C:b=C;var D=p("cloudQuery",null,null,"GET",R,b);return D.then(function(I){var x=new P.Query(I.className),A=(0,o.default)(f).call(f,I.results,function(N){var F=x._newObject(I);return F._finishFetch&&F._finishFetch(x._processResult(N),!0),F});return{results:A,count:I.count,className:I.className}})},P.Query.fromJSON=function(y){var C=y.className,b=y.where,R=y.include,D=y.select,I=y.includeACL,x=y.limit,A=y.skip,N=y.order;if(typeof C!="string")throw new TypeError("Invalid Query JSON, className must be a String.");var F=new P.Query(C);return f.extend(F,{_where:b,_include:R,_select:D,_includeACL:I,_limit:x,_skip:A,_order:N}),F},P.Query._extend=P._extend,f.extend(P.Query.prototype,{_processResult:function(C){return C},get:function(C,b){if(!f.isString(C))throw new Error("objectId must be a string");if(C==="")return a.default.reject(new g(g.OBJECT_NOT_FOUND,"Object not found."));var R=this._newObject();R.id=C;var D=this._getParams(),I={};return(0,l.default)(D)&&(I.keys=(0,l.default)(D)),D.include&&(I.include=D.include),D.includeACL&&(I.includeACL=D.includeACL),p("classes",this.className,C,"GET",T(I),b).then(function(x){if(f.isEmpty(x))throw new g(g.OBJECT_NOT_FOUND,"Object not found.");return R._finishFetch(R.parse(x),!0),R})},toJSON:function(){var C=this.className,b=this._where,R=this._include,D=this._select,I=this._includeACL,x=this._limit,A=this._skip,N=this._order;return{className:C,where:b,include:R,select:D,includeACL:I,limit:x,skip:A,order:N}},_getParams:function(){var C=f.extend({},this._defaultParams,{where:this._where});return this._include.length>0&&(C.include=this._include.join(",")),this._select.length>0&&(C.keys=this._select.join(",")),this._includeACL!==void 0&&(C.returnACL=this._includeACL),this._limit>=0&&(C.limit=this._limit),this._skip>0&&(C.skip=this._skip),this._order!==void 0&&(C.order=this._order),C},_newObject:function(C){var b;return C&&C.className?b=new P.Object(C.className):b=new this.objectClass,b},_createRequest:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._getParams(),b=arguments.length>1?arguments[1]:void 0,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/classes/".concat(this.className);if(encodeURIComponent((0,h.default)(C)).length>2e3){var D={requests:[{method:"GET",path:"/1.1".concat(R),params:C}]};return E({path:"/batch",method:"POST",data:D,authOptions:b}).then(function(I){var x=I[0];if(x.success)return x.success;var A=new g(x.error.code,x.error.error||"Unknown batch error");throw A})}return E({method:"GET",path:R,query:C,authOptions:b})},_parseResponse:function(C){var b=this;return(0,o.default)(f).call(f,C.results,function(R){var D=b._newObject(C);return D._finishFetch&&D._finishFetch(b._processResult(R),!0),D})},find:function(C){var b=this._createRequest(void 0,C);return b.then(this._parseResponse.bind(this))},findAndCount:function(C){var b=this,R=this._getParams();R.count=1;var D=this._createRequest(R,C);return D.then(function(I){return[b._parseResponse(I),I.count]})},scan:function(){var C=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=b.orderedBy,D=b.batchSize,I=arguments.length>1?arguments[1]:void 0,x=this._getParams();m("scan %O",x),x.order&&(console.warn("The order of the query is ignored for Query#scan. Checkout the orderedBy option of Query#scan."),delete x.order),x.skip&&(console.warn("The skip option of the query is ignored for Query#scan."),delete x.skip),x.limit&&(console.warn("The limit option of the query is ignored for Query#scan."),delete x.limit),R&&(x.scan_key=R),D&&(x.limit=D);var A,N=[];return{next:function(){return N.length?a.default.resolve({done:!1,value:N.shift()}):A===null?a.default.resolve({done:!0}):p("scan/classes",C.className,null,"GET",A?f.extend({},x,{cursor:A}):x,I).then(function(B){if(A=B.cursor,B.results.length){var L=C._parseResponse(B);L.forEach(function(W){return N.push(W)})}return A===null&&N.length===0?{done:!0}:{done:!1,value:N.shift()}})}}},destroyAll:function(C){var b=this;return(0,c.default)(b).call(b,C).then(function(R){return P.Object.destroyAll(R,C)})},count:function(C){var b=this._getParams();b.limit=0,b.count=1;var R=this._createRequest(b,C);return R.then(function(D){return D.count})},first:function(C){var b=this,R=this._getParams();R.limit=1;var D=this._createRequest(R,C);return D.then(function(I){return(0,o.default)(f).call(f,I.results,function(x){var A=b._newObject();return A._finishFetch&&A._finishFetch(b._processResult(x),!0),A})[0]})},skip:function(C){return M(C,"undefined is not a valid skip value"),this._skip=C,this},limit:function(C){return M(C,"undefined is not a valid limit value"),this._limit=C,this},equalTo:function(C,b){return M(C,"undefined is not a valid key"),M(b,"undefined is not a valid value"),this._where[C]=P._encode(b),this},_addCondition:function(C,b,R){return M(C,"undefined is not a valid condition key"),M(b,"undefined is not a valid condition"),M(R,"undefined is not a valid condition value"),this._where[C]||(this._where[C]={}),this._where[C][b]=P._encode(R),this},sizeEqualTo:function(C,b){return this._addCondition(C,"$size",b),this},notEqualTo:function(C,b){return this._addCondition(C,"$ne",b),this},lessThan:function(C,b){return this._addCondition(C,"$lt",b),this},greaterThan:function(C,b){return this._addCondition(C,"$gt",b),this},lessThanOrEqualTo:function(C,b){return this._addCondition(C,"$lte",b),this},greaterThanOrEqualTo:function(C,b){return this._addCondition(C,"$gte",b),this},containedIn:function(C,b){return this._addCondition(C,"$in",b),this},notContainedIn:function(C,b){return this._addCondition(C,"$nin",b),this},containsAll:function(C,b){return this._addCondition(C,"$all",b),this},exists:function(C){return this._addCondition(C,"$exists",!0),this},doesNotExist:function(C){return this._addCondition(C,"$exists",!1),this},matches:function(C,b,R){return this._addCondition(C,"$regex",b),R||(R=""),b.ignoreCase&&(R+="i"),b.multiline&&(R+="m"),R&&R.length&&this._addCondition(C,"$options",R),this},matchesQuery:function(C,b){var R=b._getParams();return R.className=b.className,this._addCondition(C,"$inQuery",R),this},doesNotMatchQuery:function(C,b){var R=b._getParams();return R.className=b.className,this._addCondition(C,"$notInQuery",R),this},matchesKeyInQuery:function(C,b,R){var D=R._getParams();return D.className=R.className,this._addCondition(C,"$select",{key:b,query:D}),this},doesNotMatchKeyInQuery:function(C,b,R){var D=R._getParams();return D.className=R.className,this._addCondition(C,"$dontSelect",{key:b,query:D}),this},_orQuery:function(C){var b=(0,o.default)(f).call(f,C,function(R){return R._getParams().where});return this._where.$or=b,this},_andQuery:function(C){var b=(0,o.default)(f).call(f,C,function(R){return R._getParams().where});return this._where.$and=b,this},_quote:function(C){return"\\Q"+C.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(C,b){return this._addCondition(C,"$regex",this._quote(b)),this},startsWith:function(C,b){return this._addCondition(C,"$regex","^"+this._quote(b)),this},endsWith:function(C,b){return this._addCondition(C,"$regex",this._quote(b)+"$"),this},ascending:function(C){return M(C,"undefined is not a valid key"),this._order=C,this},addAscending:function(C){return M(C,"undefined is not a valid key"),this._order?this._order+=","+C:this._order=C,this},descending:function(C){return M(C,"undefined is not a valid key"),this._order="-"+C,this},addDescending:function(C){return M(C,"undefined is not a valid key"),this._order?this._order+=",-"+C:this._order="-"+C,this},near:function(C,b){return b instanceof P.GeoPoint||(b=new P.GeoPoint(b)),this._addCondition(C,"$nearSphere",b),this},withinRadians:function(C,b,R){return this.near(C,b),this._addCondition(C,"$maxDistance",R),this},withinMiles:function(C,b,R){return this.withinRadians(C,b,R/3958.8)},withinKilometers:function(C,b,R){return this.withinRadians(C,b,R/6371)},withinGeoBox:function(C,b,R){return b instanceof P.GeoPoint||(b=new P.GeoPoint(b)),R instanceof P.GeoPoint||(R=new P.GeoPoint(R)),this._addCondition(C,"$within",{$box:[b,R]}),this},include:function(C){var b=this;return M(C,"undefined is not a valid key"),f.forEach(arguments,function(R){var D;b._include=(0,d.default)(D=b._include).call(D,O(R))}),this},includeACL:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._includeACL=C,this},select:function(C){var b=this;return M(C,"undefined is not a valid key"),f.forEach(arguments,function(R){var D;b._select=(0,d.default)(D=b._select).call(D,O(R))}),this},each:function(C){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this._order||this._skip||this._limit>=0){var R=new Error("Cannot iterate on a query with sort, skip, or limit.");return a.default.reject(R)}var D=new P.Query(this.objectClass);D._limit=b.batchSize||100,D._where=f.clone(this._where),D._include=f.clone(this._include),D.ascending("objectId");var I=!1;return S(function(){return!I},function(){return(0,c.default)(D).call(D,b).then(function(x){var A=a.default.resolve();return f.each(x,function(N){A=A.then(function(){return C(N)})}),A.then(function(){x.length>=D._limit?D.greaterThan("objectId",x[x.length-1].id):I=!0})})})},subscribe:function(C){return P.LiveQuery.init(this,C)}}),P.FriendShipQuery=P.Query._extend({_newObject:function(){var C=P.Object._getSubclass("_User");return new C},_processResult:function(C){if(C&&C[this._friendshipTag]){var b=C[this._friendshipTag];return b.__type==="Pointer"&&b.className==="_User"&&(delete b.__type,delete b.className),b}else return null}})}},function(i,r,t){var s=t(1),o=s(t(10)),a=s(t(53)),l=t(2),h=t(223),c=t(31),d=c.inherits,f=t(27),m=f.request,g=function(p,E){return m({method:"POST",path:"/LiveQuery/subscribe",data:{query:p,id:E}})};i.exports=function(v){var p=function(){if(!v._config.realtime)throw new Error("LiveQuery not supported. Please use the LiveQuery bundle. https://url.leanapp.cn/enable-live-query")};v.LiveQuery=d(h,{constructor:function(w,O,T,S){var M=this;h.apply(this),this.id=w,this._client=O,this._client.register(this),this._queryJSON=T,this._subscriptionId=S,this._onMessage=this._dispatch.bind(this),this._onReconnect=function(){g(M._queryJSON,M._subscriptionId).catch(function(P){return console.error("LiveQuery resubscribe error: ".concat(P.message))})},O.on("message",this._onMessage),O.on("reconnect",this._onReconnect)},_dispatch:function(w){var O=this;w.forEach(function(T){var S=T.op,M=T.object,P=T.query_id,y=T.updatedKeys;if(P===O.id){var C=v.parseJSON(l.extend({__type:M.className==="_File"?"File":"Object"},M));y?O.emit(S,C,y):O.emit(S,C)}})},unsubscribe:function(){var w=this._client;return w.off("message",this._onMessage),w.off("reconnect",this._onReconnect),w.deregister(this),m({method:"POST",path:"/LiveQuery/unsubscribe",data:{id:w.id,query_id:this.id}})}},{init:function(w){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=O.subscriptionId,S=T===void 0?v._getSubscriptionId():T;if(p(),!(w instanceof v.Query))throw new TypeError("LiveQuery must be inited with a Query");return o.default.resolve(S).then(function(M){return v._config.realtime.createLiveQueryClient(M).then(function(P){var y=w._getParams(),C=y.where,b=(0,a.default)(y),R=y.returnACL,D={where:C,keys:b,returnACL:R,className:w.className},I=g(D,M).then(function(x){var A=x.query_id;return new v.LiveQuery(A,P,D,M)}).finally(function(){P.deregister(I)});return P.register(I),I})})},pause:function(){return p(),v._config.realtime.pause()},resume:function(){return p(),v._config.realtime.resume()}})}},function(i,r,t){var s=t(2),o=t(31),a=o.tap;i.exports=function(l){l.Captcha=function(c,d){this._options=c,this._authOptions=d,this.url=void 0,this.captchaToken=void 0,this.validateToken=void 0},l.Captcha.prototype.refresh=function(){var c=this;return l.Cloud._requestCaptcha(this._options,this._authOptions).then(function(d){var f=d.captchaToken,m=d.url;return s.extend(c,{captchaToken:f,url:m}),m})},l.Captcha.prototype.verify=function(c){var d=this;return l.Cloud.verifyCaptcha(c,this.captchaToken).then(a(function(f){return d.validateToken=f}))},l.Captcha.prototype.bind=function(c,d){var f=this,m=c.textInput,g=c.image,v=c.verifyButton,p=d.success,E=d.error;if(typeof m=="string"&&(m=document.getElementById(m),!m))throw new Error("textInput with id ".concat(m," not found"));if(typeof g=="string"&&(g=document.getElementById(g),!g))throw new Error("image with id ".concat(g," not found"));if(typeof v=="string"&&(v=document.getElementById(v),!v))throw new Error("verifyButton with id ".concat(v," not found"));this.__refresh=function(){return f.refresh().then(function(w){g.src=w,m&&(m.value="",m.focus())}).catch(function(w){return console.warn("refresh captcha fail: ".concat(w.message))})},g&&(this.__image=g,g.src=this.url,g.addEventListener("click",this.__refresh)),this.__verify=function(){var w=m.value;f.verify(w).catch(function(O){throw f.__refresh(),O}).then(p,E).catch(function(O){return console.warn("verify captcha fail: ".concat(O.message))})},m&&v&&(this.__verifyButton=v,v.addEventListener("click",this.__verify))},l.Captcha.prototype.unbind=function(){this.__image&&this.__image.removeEventListener("click",this.__refresh),this.__verifyButton&&this.__verifyButton.removeEventListener("click",this.__verify)},l.Captcha.request=function(h,c){var d=new l.Captcha(h,c);return d.refresh().then(function(){return d})}}},function(i,r,t){var s=t(1),o=s(t(10)),a=t(2),l=t(27),h=l._request,c=l.request;i.exports=function(d){d.Cloud=d.Cloud||{},a.extend(d.Cloud,{run:function(m,g,v){return c({service:"engine",method:"POST",path:"/functions/".concat(m),data:d._encode(g,null,!0),authOptions:v}).then(function(p){return d._decode(p).result})},rpc:function(m,g,v){return a.isArray(g)?o.default.reject(new Error("Can't pass Array as the param of rpc function in JavaScript SDK.")):c({service:"engine",method:"POST",path:"/call/".concat(m),data:d._encodeObjectOrArray(g),authOptions:v}).then(function(p){return d._decode(p).result})},getServerDate:function(){return h("date",null,null,"GET").then(function(m){return d._decode(m)})},requestSmsCode:function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a.isString(m)&&(m={mobilePhoneNumber:m}),!m.mobilePhoneNumber)throw new Error("Missing mobilePhoneNumber.");return g.validateToken&&(m=a.extend({},m,{validate_token:g.validateToken})),h("requestSmsCode",null,null,"POST",m,g)},verifySmsCode:function(m,g){if(!m)throw new Error("Missing sms code.");var v={};return a.isString(g)&&(v.mobilePhoneNumber=g),h("verifySmsCode",m,null,"POST",v)},_requestCaptcha:function(m,g){return h("requestCaptcha",null,null,"GET",m,g).then(function(v){var p=v.captcha_url,E=v.captcha_token;return{captchaToken:E,url:p}})},requestCaptcha:d.Captcha.request,verifyCaptcha:function(m,g){return h("verifyCaptcha",null,null,"POST",{captcha_code:m,captcha_token:g}).then(function(v){var p=v.validate_token;return p})}})}},function(i,r,t){var s=t(27).request;i.exports=function(o){o.Installation=o.Object.extend("_Installation"),o.Push=o.Push||{},o.Push.send=function(a,l){if(a.where&&(a.where=a.where._getParams().where),a.where&&a.cql)throw new Error("Both where and cql can't be set");if(a.push_time&&(a.push_time=a.push_time.toJSON()),a.expiration_time&&(a.expiration_time=a.expiration_time.toJSON()),a.expiration_time&&a.expiration_interval)throw new Error("Both expiration_time and expiration_interval can't be set");return s({service:"push",method:"POST",path:"/push",data:a,authOptions:l})}}},function(i,r,t){var s=t(1),o=s(t(10)),a=s(t(141)),l=t(2),h=t(27)._request,c=t(31),d=c.getSessionToken;i.exports=function(f){var m=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},E=d(p);return E?f.User._fetchUserBySessionToken(d(p)):f.User.currentAsync()},g=function(p){return m(p).then(function(E){return f.Object.createWithoutData("_User",E.id)._toPointer()})};f.Status=function(v,p){return this.data={},this.inboxType="default",this.query=null,v&&(0,a.default)(v)==="object"?this.data=v:(v&&(this.data.image=v),p&&(this.data.message=p)),this},l.extend(f.Status.prototype,{get:function(p){return this.data[p]},set:function(p,E){return this.data[p]=E,this},destroy:function(p){if(!this.id)return o.default.reject(new Error("The status id is not exists."));var E=h("statuses",null,this.id,"DELETE",p);return E},toObject:function(){return this.id?f.Object.createWithoutData("_Status",this.id):null},_getDataJSON:function(){var p=l.clone(this.data);return f._encode(p)},send:function(){var p=this,E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!d(E)&&!f.User.current())throw new Error("Please signin an user.");return this.query?g(E).then(function(w){var O=p.query._getParams();O.className=p.query.className;var T={};return T.query=O,p.data=p.data||{},p.data.source=p.data.source||w,T.data=p._getDataJSON(),T.inboxType=p.inboxType||"default",h("statuses",null,null,"POST",T,E)}).then(function(w){return p.id=w.objectId,p.createdAt=f._parseDate(w.createdAt),p}):f.Status.sendStatusToFollowers(this,E)},_finishFetch:function(p){this.id=p.objectId,this.createdAt=f._parseDate(p.createdAt),this.updatedAt=f._parseDate(p.updatedAt),this.messageId=p.messageId,delete p.messageId,delete p.objectId,delete p.createdAt,delete p.updatedAt,this.data=f._decode(p)}}),f.Status.sendStatusToFollowers=function(v){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!d(p)&&!f.User.current())throw new Error("Please signin an user.");return g(p).then(function(E){var w={};w.className="_Follower",w.keys="follower",w.where={user:E};var O={};O.query=w,v.data=v.data||{},v.data.source=v.data.source||E,O.data=v._getDataJSON(),O.inboxType=v.inboxType||"default";var T=h("statuses",null,null,"POST",O,p);return T.then(function(S){return v.id=S.objectId,v.createdAt=f._parseDate(S.createdAt),v})})},f.Status.sendPrivateStatus=function(v,p){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!d(E)&&!f.User.current())throw new Error("Please signin an user.");if(!p)throw new Error("Invalid target user.");var w=l.isString(p)?p:p.id;if(!w)throw new Error("Invalid target user.");return g(E).then(function(O){var T={};T.className="_User",T.where={objectId:w};var S={};S.query=T,v.data=v.data||{},v.data.source=v.data.source||O,S.data=v._getDataJSON(),S.inboxType="private",v.inboxType="private";var M=h("statuses",null,null,"POST",S,E);return M.then(function(P){return v.id=P.objectId,v.createdAt=f._parseDate(P.createdAt),v})})},f.Status.countUnreadStatuses=function(v){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(l.isString(p)||(E=p),!d(E)&&v==null&&!f.User.current())throw new Error("Please signin an user or pass the owner objectId.");return o.default.resolve(v||m(E)).then(function(w){var O={};return O.inboxType=f._encode(p),O.owner=f._encode(w),h("subscribe/statuses/count",null,null,"GET",O,E)})},f.Status.resetUnreadCount=function(v){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(l.isString(p)||(E=p),!d(E)&&v==null&&!f.User.current())throw new Error("Please signin an user or pass the owner objectId.");return o.default.resolve(v||m(E)).then(function(w){var O={};return O.inboxType=f._encode(p),O.owner=f._encode(w),h("subscribe/statuses/resetUnreadCount",null,null,"POST",O,E)})},f.Status.statusQuery=function(v){var p=new f.Query("_Status");return v&&p.equalTo("source",v),p},f.InboxQuery=f.Query._extend({_objectClass:f.Status,_sinceId:0,_maxId:0,_inboxType:"default",_owner:null,_newObject:function(){return new f.Status},_createRequest:function(p,E){return f.InboxQuery.__super__._createRequest.call(this,p,E,"/subscribe/statuses")},sinceId:function(p){return this._sinceId=p,this},maxId:function(p){return this._maxId=p,this},owner:function(p){return this._owner=p,this},inboxType:function(p){return this._inboxType=p,this},_getParams:function(){var p=f.InboxQuery.__super__._getParams.call(this);return p.owner=f._encode(this._owner),p.inboxType=f._encode(this._inboxType),p.sinceId=f._encode(this._sinceId),p.maxId=f._encode(this._maxId),p}}),f.Status.inboxQuery=function(v,p){var E=new f.InboxQuery(f.Status);return v&&(E._owner=v),p&&(E._inboxType=p),E}}},function(i,r,t){var s=t(1),o=s(t(37)),a=s(t(42)),l=t(2),h=t(27)._request;i.exports=function(c){c.SearchSortBuilder=function(){this._sortFields=[]},l.extend(c.SearchSortBuilder.prototype,{_addField:function(f,m,g,v){var p={};return p[f]={order:m||"asc",mode:g||"avg",missing:"_"+(v||"last")},this._sortFields.push(p),this},ascending:function(f,m,g){return this._addField(f,"asc",m,g)},descending:function(f,m,g){return this._addField(f,"desc",m,g)},whereNear:function(f,m,g){g=g||{};var v={},p={lat:m.latitude,lon:m.longitude},E={order:g.order||"asc",mode:g.mode||"avg",unit:g.unit||"km"};return E[f]=p,v._geo_distance=E,this._sortFields.push(v),this},build:function(){return(0,o.default)(c._encode(this._sortFields))}}),c.SearchQuery=c.Query._extend({_sid:null,_hits:0,_queryString:null,_highlights:null,_sortBuilder:null,_clazz:null,constructor:function(f){f?this._clazz=f:f="__INVALID_CLASS",c.Query.call(this,f)},_createRequest:function(f,m){return h("search/select",null,null,"GET",f||this._getParams(),m)},sid:function(f){return this._sid=f,this},queryString:function(f){return this._queryString=f,this},highlights:function(f){var m;return f&&l.isString(f)?m=l.toArray(arguments):m=f,this._highlights=m,this},sortBy:function(f){return this._sortBuilder=f,this},hits:function(){return this._hits||(this._hits=0),this._hits},_processResult:function(f){return delete f.className,delete f._app_url,delete f._deeplink,f},hasMore:function(){return!this._hitEnd},reset:function(){this._hitEnd=!1,this._sid=null,this._hits=0},find:function(f){var m=this,g=this._createRequest(void 0,f);return g.then(function(v){return v.sid?(m._oldSid=m._sid,m._sid=v.sid):(m._sid=null,m._hitEnd=!0),m._hits=v.hits||0,(0,a.default)(l).call(l,v.results,function(p){p.className&&(v.className=p.className);var E=m._newObject(v);return E.appURL=p._app_url,E._finishFetch(m._processResult(p),!0),E})})},_getParams:function(){var f=c.SearchQuery.__super__._getParams.call(this);if(delete f.where,this._clazz&&(f.clazz=this.className),this._sid&&(f.sid=this._sid),this._queryString)f.q=this._queryString;else throw new Error("Please set query string.");if(this._highlights&&(f.highlights=this._highlights.join(",")),this._sortBuilder&&f.order)throw new Error("sort and order can not be set at same time.");return this._sortBuilder&&(f.sort=this._sortBuilder.build()),f}})}},function(i,r,t){var s=t(1),o=s(t(10)),a=t(2),l=t(43),h=t(27),c=h.request;i.exports=function(d){d.Insight=d.Insight||{},a.extend(d.Insight,{startJob:function(m,g){if(!m||!m.sql)throw new Error("Please provide the sql to run the job.");var v={jobConfig:m,appId:d.applicationId};return c({path:"/bigquery/jobs",method:"POST",data:d._encode(v,null,!0),authOptions:g,signKey:!1}).then(function(p){return d._decode(p).id})},on:function(m,g){}}),d.Insight.JobQuery=function(f,m){if(!f)throw new Error("Please provide the job id.");this.id=f,this.className=m,this._skip=0,this._limit=100},a.extend(d.Insight.JobQuery.prototype,{skip:function(m){return this._skip=m,this},limit:function(m){return this._limit=m,this},find:function(m){var g={skip:this._skip,limit:this._limit};return c({path:"/bigquery/jobs/".concat(this.id),method:"GET",query:g,authOptions:m,signKey:!1}).then(function(v){return v.error?o.default.reject(new l(v.code,v.error)):o.default.resolve(v)})}})}},function(i,r,t){var s=t(1),o=s(t(10)),a=t(2),l=t(27),h=l.request,c=t(31),d=c.getSessionToken;i.exports=function(f){var m=function(p){if(p.user){if(!p.user._sessionToken)throw new Error("authOptions.user is not signed in.");return o.default.resolve(p.user)}return p.sessionToken?f.User._fetchUserBySessionToken(p.sessionToken):f.User.currentAsync()},g=function(p){var E=d(p);return E?o.default.resolve(E):f.User.currentAsync().then(function(w){if(w)return w.getSessionToken()})};f.Friendship={request:function(p){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w,O;p.friend?(w=p.friend,O=p.attributes):w=p;var T=a.isString(w)?f.Object.createWithoutData("_User",w):w;return m(E).then(function(S){if(!S)throw new Error("Please signin an user.");return h({method:"POST",path:"/users/friendshipRequests",data:{user:S._toPointer(),friend:T._toPointer(),friendship:O},authOptions:E})})},acceptRequest:function(p){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w,O;p.request?(w=p.request,O=p.attributes):w=p;var T=a.isString(w)?w:w.id;return g(E).then(function(S){if(!S)throw new Error("Please signin an user.");return h({method:"PUT",path:"/users/friendshipRequests/"+T+"/accept",data:{friendship:f._encode(O)},authOptions:E})})},declineRequest:function(p){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=a.isString(p)?p:p.id;return g(E).then(function(O){if(!O)throw new Error("Please signin an user.");return h({method:"PUT",path:"/users/friendshipRequests/"+w+"/decline",authOptions:E})})}}}},function(i,r,t){var s=t(1),o=s(t(37)),a=t(2),l=t(27),h=l._request,c=t(67),d=function(m){return typeof m=="string"?m:typeof m.getPayload=="function"?(0,o.default)(m.getPayload()):(0,o.default)(m)};i.exports=c.Object.extend("_Conversation",{constructor:function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c.Object.prototype.constructor.call(this,null,null),this.set("name",m),g.isSystem!==void 0&&this.set("sys",!!g.isSystem),g.isTransient!==void 0&&this.set("tr",!!g.isTransient)},getCreator:function(){return this.get("c")},getLastMessageAt:function(){return this.get("lm")},getMembers:function(){return this.get("m")},addMember:function(m){return this.add("m",m)},getMutedMembers:function(){return this.get("mu")},getName:function(){return this.get("name")},isTransient:function(){return this.get("tr")},isSystem:function(){return this.get("sys")},send:function(m,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},E={from_peer:m,conv_id:this.id,transient:!1,message:d(g)};return v.toClients!==void 0&&(E.to_peers=v.toClients),v.transient!==void 0&&(E.transient=!!v.transient),v.pushData!==void 0&&(E.push_data=v.pushData),h("rtm","messages",null,"POST",E,p)},broadcast:function(m,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},E={from_peer:m,conv_id:this.id,message:d(g)};if(v.pushData!==void 0&&(E.push=v.pushData),v.validTill!==void 0){var w=v.validTill;a.isDate(w)&&(w=w.getTime()),v.valid_till=w}return h("rtm","broadcast",null,"POST",E,p)}})},function(i,r,t){var s=t(1),o=s(t(10)),a=s(t(42)),l=s(t(25)),h=t(2),c=t(27),d=c.request,f=t(31),m=f.ensureArray,g=f.parseDate,v=t(67);v.LeaderboardVersionChangeInterval={NEVER:"never",DAY:"day",WEEK:"week",MONTH:"month"},v.LeaderboardOrder={ASCENDING:"ascending",DESCENDING:"descending"},v.LeaderboardUpdateStrategy={BETTER:"better",LAST:"last",SUM:"sum"};function p(O){var T=O.name,S=O.value,M=O.version;this.name=T,this.value=S,this.version=M}var E=function(T){var S=v._decode(T),M=S.statisticName,P=S.statisticValue,y=S.version;return new p({name:M,value:P,version:y})};v.Leaderboard=function(T){this.statisticName=T,this.order=void 0,this.updateStrategy=void 0,this.versionChangeInterval=void 0,this.version=void 0,this.nextResetAt=void 0,this.createdAt=void 0};var w=v.Leaderboard;v.Leaderboard.createWithoutData=function(O){return new w(O)},v.Leaderboard.createLeaderboard=function(O,T){var S=O.statisticName,M=O.order,P=O.versionChangeInterval,y=O.updateStrategy;return d({method:"POST",path:"/leaderboard/leaderboards",data:{statisticName:S,order:M,versionChangeInterval:P,updateStrategy:y},authOptions:T}).then(function(C){var b=new w(S);return b._finishFetch(C)})},v.Leaderboard.getLeaderboard=function(O,T){return w.createWithoutData(O).fetch(T)},v.Leaderboard.getStatistics=function(O){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=T.statisticNames,M=arguments.length>2?arguments[2]:void 0;return o.default.resolve().then(function(){if(!(O&&O.id))throw new Error("user must be an AV.User");return d({method:"GET",path:"/leaderboard/users/".concat(O.id,"/statistics"),query:{statistics:S?m(S).join(","):void 0},authOptions:M}).then(function(P){var y=P.results;return(0,a.default)(y).call(y,E)})})},v.Leaderboard.updateStatistics=function(O,T){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return o.default.resolve().then(function(){if(!(O&&O.id))throw new Error("user must be an AV.User");var M=(0,a.default)(h).call(h,T,function(y,C){return{statisticName:C,statisticValue:y}}),P=S.overwrite;return d({method:"POST",path:"/leaderboard/users/".concat(O.id,"/statistics"),query:{overwrite:P?1:void 0},data:M,authOptions:S}).then(function(y){var C=y.results;return(0,a.default)(C).call(C,E)})})},v.Leaderboard.deleteStatistics=function(O,T,S){return o.default.resolve().then(function(){if(!(O&&O.id))throw new Error("user must be an AV.User");return d({method:"DELETE",path:"/leaderboard/users/".concat(O.id,"/statistics"),query:{statistics:m(T).join(",")},authOptions:S}).then(function(){})})},h.extend(w.prototype,{_finishFetch:function(T){var S=this;return h.forEach(T,function(M,P){P==="updatedAt"||P==="objectId"||(P==="expiredAt"&&(P="nextResetAt"),P==="createdAt"&&(M=g(M)),M&&M.__type==="Date"&&(M=g(M.iso)),S[P]=M)}),this},fetch:function(T){var S=this;return d({method:"GET",path:"/leaderboard/leaderboards/".concat(this.statisticName),authOptions:T}).then(function(M){return S._finishFetch(M)})},count:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=T.version,M=arguments.length>1?arguments[1]:void 0;return d({method:"GET",path:"/leaderboard/leaderboards/".concat(this.statisticName,"/ranks"),query:{count:1,limit:0,version:S},authOptions:M}).then(function(P){var y=P.count;return y})},_getResults:function(T,S,M){var P,y=T.skip,C=T.limit,b=T.selectUserKeys,R=T.includeUserKeys,D=T.includeStatistics,I=T.version;return d({method:"GET",path:(0,l.default)(P="/leaderboard/leaderboards/".concat(this.statisticName,"/ranks")).call(P,M?"/".concat(M):""),query:{skip:y,limit:C,selectUserKeys:h.union(m(b),m(R)).join(",")||void 0,includeUser:R?m(R).join(","):void 0,includeStatistics:D?m(D).join(","):void 0,version:I},authOptions:S}).then(function(x){var A=x.results;return(0,a.default)(A).call(A,function(N){var F=v._decode(N),B=F.user,L=F.statisticValue,W=F.rank,z=F.statistics,j=z===void 0?[]:z;return{user:B,value:L,rank:W,includedStatistics:(0,a.default)(j).call(j,E)}})})},getResults:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=T.skip,M=T.limit,P=T.selectUserKeys,y=T.includeUserKeys,C=T.includeStatistics,b=T.version,R=arguments.length>1?arguments[1]:void 0;return this._getResults({skip:S,limit:M,selectUserKeys:P,includeUserKeys:y,includeStatistics:C,version:b},R)},getResultsAroundUser:function(T){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=arguments.length>2?arguments[2]:void 0;if(T&&typeof T.id!="string")return this.getResultsAroundUser(void 0,T,S);var P=S.limit,y=S.selectUserKeys,C=S.includeUserKeys,b=S.includeStatistics,R=S.version;return this._getResults({limit:P,selectUserKeys:y,includeUserKeys:C,includeStatistics:b,version:R},M,T?T.id:"self")},_update:function(T,S){var M=this;return d({method:"PUT",path:"/leaderboard/leaderboards/".concat(this.statisticName),data:T,authOptions:S}).then(function(P){return M._finishFetch(P)})},updateVersionChangeInterval:function(T,S){return this._update({versionChangeInterval:T},S)},updateUpdateStrategy:function(T,S){return this._update({updateStrategy:T},S)},reset:function(T){var S=this;return d({method:"PUT",path:"/leaderboard/leaderboards/".concat(this.statisticName,"/incrementVersion"),authOptions:T}).then(function(M){return S._finishFetch(M)})},destroy:function(T){return v.request({method:"DELETE",path:"/leaderboard/leaderboards/".concat(this.statisticName),authOptions:T}).then(function(){})},getArchives:function(){var T=this,S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},M=S.skip,P=S.limit,y=arguments.length>1?arguments[1]:void 0;return d({method:"GET",path:"/leaderboard/leaderboards/".concat(this.statisticName,"/archives"),query:{skip:M,limit:P},authOptions:y}).then(function(C){var b=C.results;return(0,a.default)(b).call(b,function(R){var D=R.version,I=R.status,x=R.url,A=R.activatedAt,N=R.deactivatedAt;return{statisticName:T.statisticName,version:D,status:I,url:x,activatedAt:g(A.iso),deactivatedAt:g(N.iso)}})})}})},function(i,r,t){var s=t(545);i.exports=function(o){return o.setAdapters(s),o}},function(i,r,t){var s=t(140);s(r,"__esModule",{value:!0}),r.platformInfo=r.WebSocket=void 0,s(r,"request",{enumerable:!0,get:function(){return o.request}}),r.storage=void 0,s(r,"upload",{enumerable:!0,get:function(){return o.upload}});var o=t(546),a=window.localStorage;r.storage=a;var l=window.WebSocket;r.WebSocket=l;var h={name:"Browser"};r.platformInfo=h},function(i,r,t){var s=this&&this.__awaiter||function(f,m,g,v){function p(E){return E instanceof g?E:new g(function(w){w(E)})}return new(g||(g=Promise))(function(E,w){function O(M){try{S(v.next(M))}catch(P){w(P)}}function T(M){try{S(v.throw(M))}catch(P){w(P)}}function S(M){M.done?E(M.value):p(M.value).then(O,T)}S((v=v.apply(f,m||[])).next())})},o=this&&this.__generator||function(f,m){var g={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},v,p,E,w;return w={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function O(S){return function(M){return T([S,M])}}function T(S){if(v)throw new TypeError("Generator is already executing.");for(;g;)try{if(v=1,p&&(E=S[0]&2?p.return:S[0]?p.throw||((E=p.return)&&E.call(p),0):p.next)&&!(E=E.call(p,S[1])).done)return E;switch(p=0,E&&(S=[S[0]&2,E.value]),S[0]){case 0:case 1:E=S;break;case 4:return g.label++,{value:S[1],done:!1};case 5:g.label++,p=S[1],S=[0];continue;case 7:S=g.ops.pop(),g.trys.pop();continue;default:if(E=g.trys,!(E=E.length>0&&E[E.length-1])&&(S[0]===6||S[0]===2)){g=0;continue}if(S[0]===3&&(!E||S[1]>E[0]&&S[1]<E[3])){g.label=S[1];break}if(S[0]===6&&g.label<E[1]){g.label=E[1],E=S;break}if(E&&g.label<E[2]){g.label=E[2],g.ops.push(S);break}E[2]&&g.ops.pop(),g.trys.pop();continue}S=m.call(f,g)}catch(M){S=[6,M],p=0}finally{v=E=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0}),r.upload=r.request=void 0;var a=t(547),l=t(548);function h(f){return{ok:f.ok,status:f.status,headers:f.header,data:f.body}}var c=function(f,m){return m===void 0&&(m={}),s(void 0,void 0,void 0,function(){var g,v,p,E,w,O,T,S,M,P,y;return o(this,function(C){switch(C.label){case 0:if(g=m.method,v=g===void 0?"GET":g,p=m.data,E=m.headers,w=m.onprogress,O=m.signal,O!=null&&O.aborted)throw new a.AbortError("Request aborted");T=l(v,f).ok(function(){return!0}),E&&T.set(E),w&&T.on("progress",w),S=!1,M=function(){S=!0,T.abort()},O==null||O.addEventListener("abort",M),C.label=1;case 1:return C.trys.push([1,3,4,5]),[4,T.send(p)];case 2:return P=C.sent(),[2,h(P)];case 3:throw y=C.sent(),S?new a.AbortError("Request aborted"):y;case 4:return O==null||O.removeEventListener("abort",M),[7];case 5:return[2]}})})};r.request=c;var d=function(f,m,g){return g===void 0&&(g={}),s(void 0,void 0,void 0,function(){var v,p,E,w,O,T,S,M,P,y,C;return o(this,function(b){switch(b.label){case 0:if(v=g.method,p=v===void 0?"POST":v,E=g.data,w=g.headers,O=g.onprogress,T=g.signal,T!=null&&T.aborted)throw new a.AbortError("Request aborted");S=l(p,f).ok(function(){return!0}).attach(m.field,m.data,m.name),E&&S.field(E),w&&S.set(w),O&&S.on("progress",O),M=!1,P=function(){M=!0,S.abort()},T==null||T.addEventListener("abort",P),b.label=1;case 1:return b.trys.push([1,3,4,5]),[4,S];case 2:return y=b.sent(),[2,h(y)];case 3:throw C=b.sent(),M?new a.AbortError("Request aborted"):C;case 4:return T==null||T.removeEventListener("abort",P),[7];case 5:return[2]}})})};r.upload=d},function(i,r,t){Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"AbortError",function(){return a});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var s=function(l,h){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(c[f]=d[f])},s(l,h)};function o(l,h){s(l,h);function c(){this.constructor=l}l.prototype=h===null?Object.create(h):(c.prototype=h.prototype,new c)}var a=function(l){o(h,l);function h(){var c=l!==null&&l.apply(this,arguments)||this;return c.name="AbortError",c}return h}(Error)},function(i,r,t){var s=t(1),o=s(t(87)),a=s(t(144)),l=s(t(549)),h=s(t(25)),c=s(t(68)),d=s(t(38));function f(A){"@babel/helpers - typeof";return typeof o.default=="function"&&typeof a.default=="symbol"?f=function(F){return typeof F}:f=function(F){return F&&typeof o.default=="function"&&F.constructor===o.default&&F!==o.default.prototype?"symbol":typeof F},f(A)}var m;typeof window<"u"?m=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),m=void 0):m=self;var g=t(556),v=t(557),p=t(558),E=t(244),w=t(579),O=t(587);function T(){}i.exports=function(A,N){return typeof N=="function"?new r.Request("GET",A).end(N):arguments.length===1?new r.Request("GET",A):new r.Request(A,N)},r=i.exports;var S=r;r.Request=I,S.getXHR=function(){if(m.XMLHttpRequest&&(!m.location||m.location.protocol!=="file:"||!m.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("Browser-only version of superagent could not find XHR")};var M=(0,l.default)("")?function(A){return(0,l.default)(A).call(A)}:function(A){return A.replace(/(^\s*|\s*$)/g,"")};function P(A){if(!E(A))return A;var N=[];for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&y(N,F,A[F]);return N.join("&")}function y(A,N,F){if(F!==void 0){if(F===null){A.push(encodeURI(N));return}if(Array.isArray(F))F.forEach(function(W){y(A,N,W)});else if(E(F))for(var B in F){var L;Object.prototype.hasOwnProperty.call(F,B)&&y(A,(0,h.default)(L="".concat(N,"[")).call(L,B,"]"),F[B])}else A.push(encodeURI(N)+"="+encodeURIComponent(F))}}S.serializeObject=P;function C(A){for(var N={},F=A.split("&"),B,L,W=0,z=F.length;W<z;++W)B=F[W],L=(0,c.default)(B).call(B,"="),L===-1?N[decodeURIComponent(B)]="":N[decodeURIComponent((0,d.default)(B).call(B,0,L))]=decodeURIComponent((0,d.default)(B).call(B,L+1));return N}S.parseString=C,S.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},S.serialize={"application/x-www-form-urlencoded":P,"application/json":v},S.parse={"application/x-www-form-urlencoded":C,"application/json":JSON.parse};function b(A){for(var N=A.split(/\r?\n/),F={},B,L,W,z,j=0,H=N.length;j<H;++j)L=N[j],B=(0,c.default)(L).call(L,":"),B!==-1&&(W=(0,d.default)(L).call(L,0,B).toLowerCase(),z=M((0,d.default)(L).call(L,B+1)),F[W]=z);return F}function R(A){return/[/+]json($|[^-\w])/.test(A)}function D(A){this.req=A,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType>"u"?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var N=this.xhr.status;N===1223&&(N=204),this._setStatusProperties(N),this.headers=b(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&A._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}w(D.prototype),D.prototype._parseBody=function(A){var N=S.parse[this.type];return this.req._parser?this.req._parser(this,A):(!N&&R(this.type)&&(N=S.parse["application/json"]),N&&A&&(A.length>0||A instanceof Object)?N(A):null)},D.prototype.toError=function(){var A,N,F=this.req,B=F.method,L=F.url,W=(0,h.default)(A=(0,h.default)(N="cannot ".concat(B," ")).call(N,L," (")).call(A,this.status,")"),z=new Error(W);return z.status=this.status,z.method=B,z.url=L,z},S.Response=D;function I(A,N){var F=this;this._query=this._query||[],this.method=A,this.url=N,this.header={},this._header={},this.on("end",function(){var B=null,L=null;try{L=new D(F)}catch(z){return B=new Error("Parser is unable to parse the response"),B.parse=!0,B.original=z,F.xhr?(B.rawResponse=typeof F.xhr.responseType>"u"?F.xhr.responseText:F.xhr.response,B.status=F.xhr.status?F.xhr.status:null,B.statusCode=B.status):(B.rawResponse=null,B.status=null),F.callback(B)}F.emit("response",L);var W;try{F._isResponseOK(L)||(W=new Error(L.statusText||L.text||"Unsuccessful HTTP response"))}catch(z){W=z}W?(W.original=B,W.response=L,W.status=L.status,F.callback(W,L)):F.callback(null,L)})}g(I.prototype),p(I.prototype),I.prototype.type=function(A){return this.set("Content-Type",S.types[A]||A),this},I.prototype.accept=function(A){return this.set("Accept",S.types[A]||A),this},I.prototype.auth=function(A,N,F){arguments.length===1&&(N=""),f(N)==="object"&&N!==null&&(F=N,N=""),F||(F={type:typeof btoa=="function"?"basic":"auto"});var B=function(W){if(typeof btoa=="function")return btoa(W);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(A,N,F,B)},I.prototype.query=function(A){return typeof A!="string"&&(A=P(A)),A&&this._query.push(A),this},I.prototype.attach=function(A,N,F){if(N){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(A,N,F||N.name)}return this},I.prototype._getFormData=function(){return this._formData||(this._formData=new m.FormData),this._formData},I.prototype.callback=function(A,N){if(this._shouldRetry(A,N))return this._retry();var F=this._callback;this.clearTimeout(),A&&(this._maxRetries&&(A.retries=this._retries-1),this.emit("error",A)),F(A,N)},I.prototype.crossDomainError=function(){var A=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);A.crossDomain=!0,A.status=this.status,A.method=this.method,A.url=this.url,this.callback(A)},I.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},I.prototype.ca=I.prototype.agent,I.prototype.buffer=I.prototype.ca,I.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},I.prototype.pipe=I.prototype.write,I.prototype._isHost=function(A){return A&&f(A)==="object"&&!Array.isArray(A)&&Object.prototype.toString.call(A)!=="[object Object]"},I.prototype.end=function(A){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=A||T,this._finalizeQueryString(),this._end()},I.prototype._setUploadTimeout=function(){var A=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){A._timeoutError("Upload timeout of ",A._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},I.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var A=this;this.xhr=S.getXHR();var N=this.xhr,F=this._formData||this._data;this._setTimeouts(),N.onreadystatechange=function(){var j=N.readyState;if(j>=2&&A._responseTimeoutTimer&&clearTimeout(A._responseTimeoutTimer),j===4){var H;try{H=N.status}catch{H=0}if(!H)return A.timedout||A._aborted?void 0:A.crossDomainError();A.emit("end")}};var B=function(H,K){K.total>0&&(K.percent=K.loaded/K.total*100,K.percent===100&&clearTimeout(A._uploadTimeoutTimer)),K.direction=H,A.emit("progress",K)};if(this.hasListeners("progress"))try{N.addEventListener("progress",B.bind(null,"download")),N.upload&&N.upload.addEventListener("progress",B.bind(null,"upload"))}catch{}N.upload&&this._setUploadTimeout();try{this.username&&this.password?N.open(this.method,this.url,!0,this.username,this.password):N.open(this.method,this.url,!0)}catch(j){return this.callback(j)}if(this._withCredentials&&(N.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof F!="string"&&!this._isHost(F)){var L=this._header["content-type"],W=this._serializer||S.serialize[L?L.split(";")[0]:""];!W&&R(L)&&(W=S.serialize["application/json"]),W&&(F=W(F))}for(var z in this.header)this.header[z]!==null&&Object.prototype.hasOwnProperty.call(this.header,z)&&N.setRequestHeader(z,this.header[z]);this._responseType&&(N.responseType=this._responseType),this.emit("request",this),N.send(typeof F>"u"?null:F)},S.agent=function(){return new O},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(A){O.prototype[A.toLowerCase()]=function(N,F){var B=new S.Request(A,N);return this._setDefaults(B),F&&B.end(F),B}}),O.prototype.del=O.prototype.delete,S.get=function(A,N,F){var B=S("GET",A);return typeof N=="function"&&(F=N,N=null),N&&B.query(N),F&&B.end(F),B},S.head=function(A,N,F){var B=S("HEAD",A);return typeof N=="function"&&(F=N,N=null),N&&B.query(N),F&&B.end(F),B},S.options=function(A,N,F){var B=S("OPTIONS",A);return typeof N=="function"&&(F=N,N=null),N&&B.send(N),F&&B.end(F),B};function x(A,N,F){var B=S("DELETE",A);return typeof N=="function"&&(F=N,N=null),N&&B.send(N),F&&B.end(F),B}S.del=x,S.delete=x,S.patch=function(A,N,F){var B=S("PATCH",A);return typeof N=="function"&&(F=N,N=null),N&&B.send(N),F&&B.end(F),B},S.post=function(A,N,F){var B=S("POST",A);return typeof N=="function"&&(F=N,N=null),N&&B.send(N),F&&B.end(F),B},S.put=function(A,N,F){var B=S("PUT",A);return typeof N=="function"&&(F=N,N=null),N&&B.send(N),F&&B.end(F),B}},function(i,r,t){i.exports=t(550)},function(i,r,t){var s=t(551);i.exports=s},function(i,r,t){var s=t(12),o=t(552),a=String.prototype;i.exports=function(l){var h=l.trim;return typeof l=="string"||l===a||s(a,l)&&h===a.trim?o:h}},function(i,r,t){t(553);var s=t(26);i.exports=s("String").trim},function(i,r,t){var s=t(0),o=t(554).trim,a=t(555);s({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})},function(i,r,t){var s=t(4),o=t(74),a=t(40),l=t(243),h=s("".replace),c="["+l+"]",d=RegExp("^"+c+c+"*"),f=RegExp(c+c+"*$"),m=function(g){return function(v){var p=a(o(v));return g&1&&(p=h(p,d,"")),g&2&&(p=h(p,f,"")),p}};i.exports={start:m(1),end:m(2),trim:m(3)}},function(i,r,t){var s=t(158).PROPER,o=t(3),a=t(243),l="​᠎";i.exports=function(h){return o(function(){return!!a[h]()||l[h]()!==l||s&&a[h].name!==h})}},function(i,r,t){i.exports=s;function s(a){if(a)return o(a)}function o(a){for(var l in s.prototype)a[l]=s.prototype[l];return a}s.prototype.on=s.prototype.addEventListener=function(a,l){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(l),this},s.prototype.once=function(a,l){function h(){this.off(a,h),l.apply(this,arguments)}return h.fn=l,this.on(a,h),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(a,l){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var h=this._callbacks["$"+a];if(!h)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var c,d=0;d<h.length;d++)if(c=h[d],c===l||c.fn===l){h.splice(d,1);break}return h.length===0&&delete this._callbacks["$"+a],this},s.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var l=new Array(arguments.length-1),h=this._callbacks["$"+a],c=1;c<arguments.length;c++)l[c-1]=arguments[c];if(h){h=h.slice(0);for(var c=0,d=h.length;c<d;++c)h[c].apply(this,l)}return this},s.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},s.prototype.hasListeners=function(a){return!!this.listeners(a).length}},function(i,r){i.exports=h,h.default=h,h.stable=m,h.stableStringify=m;var t="[...]",s="[Circular]",o=[],a=[];function l(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function h(p,E,w,O){typeof O>"u"&&(O=l()),d(p,"",0,[],void 0,0,O);var T;try{a.length===0?T=JSON.stringify(p,E,w):T=JSON.stringify(p,v(E),w)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;o.length!==0;){var S=o.pop();S.length===4?Object.defineProperty(S[0],S[1],S[3]):S[0][S[1]]=S[2]}}return T}function c(p,E,w,O){var T=Object.getOwnPropertyDescriptor(O,w);T.get!==void 0?T.configurable?(Object.defineProperty(O,w,{value:p}),o.push([O,w,E,T])):a.push([E,w,p]):(O[w]=p,o.push([O,w,E]))}function d(p,E,w,O,T,S,M){S+=1;var P;if(typeof p=="object"&&p!==null){for(P=0;P<O.length;P++)if(O[P]===p){c(s,p,E,T);return}if(typeof M.depthLimit<"u"&&S>M.depthLimit){c(t,p,E,T);return}if(typeof M.edgesLimit<"u"&&w+1>M.edgesLimit){c(t,p,E,T);return}if(O.push(p),Array.isArray(p))for(P=0;P<p.length;P++)d(p[P],P,P,O,p,S,M);else{var y=Object.keys(p);for(P=0;P<y.length;P++){var C=y[P];d(p[C],C,P,O,p,S,M)}}O.pop()}}function f(p,E){return p<E?-1:p>E?1:0}function m(p,E,w,O){typeof O>"u"&&(O=l());var T=g(p,"",0,[],void 0,0,O)||p,S;try{a.length===0?S=JSON.stringify(T,E,w):S=JSON.stringify(T,v(E),w)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;o.length!==0;){var M=o.pop();M.length===4?Object.defineProperty(M[0],M[1],M[3]):M[0][M[1]]=M[2]}}return S}function g(p,E,w,O,T,S,M){S+=1;var P;if(typeof p=="object"&&p!==null){for(P=0;P<O.length;P++)if(O[P]===p){c(s,p,E,T);return}try{if(typeof p.toJSON=="function")return}catch{return}if(typeof M.depthLimit<"u"&&S>M.depthLimit){c(t,p,E,T);return}if(typeof M.edgesLimit<"u"&&w+1>M.edgesLimit){c(t,p,E,T);return}if(O.push(p),Array.isArray(p))for(P=0;P<p.length;P++)g(p[P],P,P,O,p,S,M);else{var y={},C=Object.keys(p).sort(f);for(P=0;P<C.length;P++){var b=C[P];g(p[b],b,P,O,p,S,M),y[b]=p[b]}if(typeof T<"u")o.push([T,E,p]),T[E]=y;else return y}O.pop()}}function v(p){return p=typeof p<"u"?p:function(E,w){return w},function(E,w){if(a.length>0)for(var O=0;O<a.length;O++){var T=a[O];if(T[1]===E&&T[0]===w){w=T[2],a.splice(O,1);break}}return p.call(this,E,w)}}},function(i,r,t){var s=t(1),o=s(t(87)),a=s(t(144)),l=s(t(559)),h=s(t(10)),c=s(t(25)),d=s(t(68)),f=s(t(38)),m=s(t(569));function g(O){"@babel/helpers - typeof";return typeof o.default=="function"&&typeof a.default=="symbol"?g=function(S){return typeof S}:g=function(S){return S&&typeof o.default=="function"&&S.constructor===o.default&&S!==o.default.prototype?"symbol":typeof S},g(O)}var v=t(244);i.exports=p;function p(O){if(O)return E(O)}function E(O){for(var T in p.prototype)Object.prototype.hasOwnProperty.call(p.prototype,T)&&(O[T]=p.prototype[T]);return O}p.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},p.prototype.parse=function(O){return this._parser=O,this},p.prototype.responseType=function(O){return this._responseType=O,this},p.prototype.serialize=function(O){return this._serializer=O,this},p.prototype.timeout=function(O){if(!O||g(O)!=="object")return this._timeout=O,this._responseTimeout=0,this._uploadTimeout=0,this;for(var T in O)if(Object.prototype.hasOwnProperty.call(O,T))switch(T){case"deadline":this._timeout=O.deadline;break;case"response":this._responseTimeout=O.response;break;case"upload":this._uploadTimeout=O.upload;break;default:console.warn("Unknown timeout option",T)}return this},p.prototype.retry=function(O,T){return(arguments.length===0||O===!0)&&(O=1),O<=0&&(O=0),this._maxRetries=O,this._retries=0,this._retryCallback=T,this};var w=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];p.prototype._shouldRetry=function(O,T){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var S=this._retryCallback(O,T);if(S===!0)return!0;if(S===!1)return!1}catch(M){console.error(M)}return!!(T&&T.status&&T.status>=500&&T.status!==501||O&&(O.code&&(0,l.default)(w).call(w,O.code)||O.timeout&&O.code==="ECONNABORTED"||O.crossDomain))},p.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},p.prototype.then=function(O,T){var S=this;if(!this._fullfilledPromise){var M=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new h.default(function(P,y){M.on("abort",function(){if(!(S._maxRetries&&S._maxRetries>S._retries)){if(S.timedout&&S.timedoutError){y(S.timedoutError);return}var C=new Error("Aborted");C.code="ABORTED",C.status=S.status,C.method=S.method,C.url=S.url,y(C)}}),M.end(function(C,b){C?y(C):P(b)})})}return this._fullfilledPromise.then(O,T)},p.prototype.catch=function(O){return this.then(void 0,O)},p.prototype.use=function(O){return O(this),this},p.prototype.ok=function(O){if(typeof O!="function")throw new Error("Callback required");return this._okCallback=O,this},p.prototype._isResponseOK=function(O){return O?this._okCallback?this._okCallback(O):O.status>=200&&O.status<300:!1},p.prototype.get=function(O){return this._header[O.toLowerCase()]},p.prototype.getHeader=p.prototype.get,p.prototype.set=function(O,T){if(v(O)){for(var S in O)Object.prototype.hasOwnProperty.call(O,S)&&this.set(S,O[S]);return this}return this._header[O.toLowerCase()]=T,this.header[O]=T,this},p.prototype.unset=function(O){return delete this._header[O.toLowerCase()],delete this.header[O],this},p.prototype.field=function(O,T){if(O==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(v(O)){for(var S in O)Object.prototype.hasOwnProperty.call(O,S)&&this.field(S,O[S]);return this}if(Array.isArray(T)){for(var M in T)Object.prototype.hasOwnProperty.call(T,M)&&this.field(O,T[M]);return this}if(T==null)throw new Error(".field(name, val) val can not be empty");return typeof T=="boolean"&&(T=String(T)),this._getFormData().append(O,T),this},p.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype._auth=function(O,T,S,M){var P;switch(S.type){case"basic":this.set("Authorization","Basic ".concat(M((0,c.default)(P="".concat(O,":")).call(P,T))));break;case"auto":this.username=O,this.password=T;break;case"bearer":this.set("Authorization","Bearer ".concat(O));break}return this},p.prototype.withCredentials=function(O){return O===void 0&&(O=!0),this._withCredentials=O,this},p.prototype.redirects=function(O){return this._maxRedirects=O,this},p.prototype.maxResponseSize=function(O){if(typeof O!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=O,this},p.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},p.prototype.send=function(O){var T=v(O),S=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(T&&!this._data)Array.isArray(O)?this._data=[]:this._isHost(O)||(this._data={});else if(O&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(T&&v(this._data))for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(this._data[M]=O[M]);else if(typeof O=="string")if(S||this.type("form"),S=this._header["content-type"],S==="application/x-www-form-urlencoded"){var P;this._data=this._data?(0,c.default)(P="".concat(this._data,"&")).call(P,O):O}else this._data=(this._data||"")+O;else this._data=O;return!T||this._isHost(O)?this:(S||this.type("json"),this)},p.prototype.sortQuery=function(O){return this._sort=typeof O>"u"?!0:O,this},p.prototype._finalizeQueryString=function(){var O=this._query.join("&");if(O){var T;this.url+=((0,l.default)(T=this.url).call(T,"?")?"&":"?")+O}if(this._query.length=0,this._sort){var S,M=(0,d.default)(S=this.url).call(S,"?");if(M>=0){var P,y,C=(0,f.default)(P=this.url).call(P,M+1).split("&");typeof this._sort=="function"?(0,m.default)(C).call(C,this._sort):(0,m.default)(C).call(C),this.url=(0,f.default)(y=this.url).call(y,0,M)+"?"+C.join("&")}}},p.prototype._appendQueryString=function(){console.warn("Unsupported")},p.prototype._timeoutError=function(O,T,S){if(!this._aborted){var M=new Error("".concat(O+T,"ms exceeded"));M.timeout=T,M.code="ECONNABORTED",M.errno=S,this.timedout=!0,this.timedoutError=M,this.abort(),this.callback(M)}},p.prototype._setTimeouts=function(){var O=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){O._timeoutError("Timeout of ",O._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){O._timeoutError("Response timeout of ",O._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(i,r,t){i.exports=t(560)},function(i,r,t){var s=t(561);i.exports=s},function(i,r,t){var s=t(12),o=t(562),a=t(564),l=Array.prototype,h=String.prototype;i.exports=function(c){var d=c.includes;return c===l||s(l,c)&&d===l.includes?o:typeof c=="string"||c===h||s(h,c)&&d===h.includes?a:d}},function(i,r,t){t(563);var s=t(26);i.exports=s("Array").includes},function(i,r,t){var s=t(0),o=t(115).includes,a=t(3),l=t(122),h=a(function(){return!Array(1).includes()});s({target:"Array",proto:!0,forced:h},{includes:function(d){return o(this,d,arguments.length>1?arguments[1]:void 0)}}),l("includes")},function(i,r,t){t(565);var s=t(26);i.exports=s("String").includes},function(i,r,t){var s=t(0),o=t(4),a=t(566),l=t(74),h=t(40),c=t(568),d=o("".indexOf);s({target:"String",proto:!0,forced:!c("includes")},{includes:function(m){return!!~d(h(l(this)),h(a(m)),arguments.length>1?arguments[1]:void 0)}})},function(i,r,t){var s=t(567),o=TypeError;i.exports=function(a){if(s(a))throw o("The method doesn't accept regular expressions");return a}},function(i,r,t){var s=t(17),o=t(54),a=t(5),l=a("match");i.exports=function(h){var c;return s(h)&&((c=h[l])!==void 0?!!c:o(h)=="RegExp")}},function(i,r,t){var s=t(5),o=s("match");i.exports=function(a){var l=/./;try{"/./"[a](l)}catch{try{return l[o]=!1,"/./"[a](l)}catch{}}return!1}},function(i,r,t){i.exports=t(570)},function(i,r,t){var s=t(571);i.exports=s},function(i,r,t){var s=t(12),o=t(572),a=Array.prototype;i.exports=function(l){var h=l.sort;return l===a||s(a,l)&&h===a.sort?o:h}},function(i,r,t){t(573);var s=t(26);i.exports=s("Array").sort},function(i,r,t){var s=t(0),o=t(4),a=t(28),l=t(33),h=t(36),c=t(574),d=t(40),f=t(3),m=t(575),g=t(139),v=t(576),p=t(577),E=t(56),w=t(578),O=[],T=o(O.sort),S=o(O.push),M=f(function(){O.sort(void 0)}),P=f(function(){O.sort(null)}),y=g("sort"),C=!f(function(){if(E)return E<70;if(!(v&&v>3)){if(p)return!0;if(w)return w<603;var D="",I,x,A,N;for(I=65;I<76;I++){switch(x=String.fromCharCode(I),I){case 66:case 69:case 70:case 72:A=3;break;case 68:case 71:A=4;break;default:A=2}for(N=0;N<47;N++)O.push({k:x+N,v:A})}for(O.sort(function(F,B){return B.v-F.v}),N=0;N<O.length;N++)x=O[N].k.charAt(0),D.charAt(D.length-1)!==x&&(D+=x);return D!=="DGBEFHACIJK"}}),b=M||!P||!y||!C,R=function(D){return function(I,x){return x===void 0?-1:I===void 0?1:D!==void 0?+D(I,x)||0:d(I)>d(x)?1:-1}};s({target:"Array",proto:!0,forced:b},{sort:function(I){I!==void 0&&a(I);var x=l(this);if(C)return I===void 0?T(x):T(x,I);var A=[],N=h(x),F,B;for(B=0;B<N;B++)B in x&&S(A,x[B]);for(m(A,R(I)),F=A.length,B=0;B<F;)x[B]=A[B++];for(;B<N;)c(x,B++);return x}})},function(i,r,t){var s=t(57),o=TypeError;i.exports=function(a,l){if(!delete a[l])throw o("Cannot delete property "+s(l)+" of "+s(a))}},function(i,r,t){var s=t(231),o=Math.floor,a=function(c,d){var f=c.length,m=o(f/2);return f<8?l(c,d):h(c,a(s(c,0,m),d),a(s(c,m),d),d)},l=function(c,d){for(var f=c.length,m=1,g,v;m<f;){for(v=m,g=c[m];v&&d(c[v-1],g)>0;)c[v]=c[--v];v!==m++&&(c[v]=g)}return c},h=function(c,d,f,m){for(var g=d.length,v=f.length,p=0,E=0;p<g||E<v;)c[p+E]=p<g&&E<v?m(d[p],f[E])<=0?d[p++]:f[E++]:p<g?d[p++]:f[E++];return c};i.exports=a},function(i,r,t){var s=t(45),o=s.match(/firefox\/(\d+)/i);i.exports=!!o&&+o[1]},function(i,r,t){var s=t(45);i.exports=/MSIE|Trident/.test(s)},function(i,r,t){var s=t(45),o=s.match(/AppleWebKit\/(\d+)\./);i.exports=!!o&&+o[1]},function(i,r,t){var s=t(580);i.exports=o;function o(l){if(l)return a(l)}function a(l){for(var h in o.prototype)Object.prototype.hasOwnProperty.call(o.prototype,h)&&(l[h]=o.prototype[h]);return l}o.prototype.get=function(l){return this.header[l.toLowerCase()]},o.prototype._setHeaderProperties=function(l){var h=l["content-type"]||"";this.type=s.type(h);var c=s.params(h);for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(this[d]=c[d]);this.links={};try{l.link&&(this.links=s.parseLinks(l.link))}catch{}},o.prototype._setStatusProperties=function(l){var h=l/100|0;this.statusCode=l,this.status=this.statusCode,this.statusType=h,this.info=h===1,this.ok=h===2,this.redirect=h===3,this.clientError=h===4,this.serverError=h===5,this.error=h===4||h===5?this.toError():!1,this.created=l===201,this.accepted=l===202,this.noContent=l===204,this.badRequest=l===400,this.unauthorized=l===401,this.notAcceptable=l===406,this.forbidden=l===403,this.notFound=l===404,this.unprocessableEntity=l===422}},function(i,r,t){var s=t(1),o=s(t(581)),a=s(t(38));r.type=function(l){return l.split(/ *; */).shift()},r.params=function(l){var h;return(0,o.default)(h=l.split(/ *; */)).call(h,function(c,d){var f=d.split(/ *= */),m=f.shift(),g=f.shift();return m&&g&&(c[m]=g),c},{})},r.parseLinks=function(l){var h;return(0,o.default)(h=l.split(/ *, */)).call(h,function(c,d){var f,m,g=d.split(/ *; */),v=(0,a.default)(f=g[0]).call(f,1,-1),p=(0,a.default)(m=g[1].split(/ *= */)[1]).call(m,1,-1);return c[p]=v,c},{})},r.cleanHeader=function(l,h){return delete l["content-type"],delete l["content-length"],delete l["transfer-encoding"],delete l.host,h&&(delete l.authorization,delete l.cookie),l}},function(i,r,t){i.exports=t(582)},function(i,r,t){var s=t(583);i.exports=s},function(i,r,t){var s=t(12),o=t(584),a=Array.prototype;i.exports=function(l){var h=l.reduce;return l===a||s(a,l)&&h===a.reduce?o:h}},function(i,r,t){t(585);var s=t(26);i.exports=s("Array").reduce},function(i,r,t){var s=t(0),o=t(586).left,a=t(139),l=t(56),h=t(97),c=a("reduce"),d=!h&&l>79&&l<83;s({target:"Array",proto:!0,forced:!c||d},{reduce:function(m){var g=arguments.length;return o(this,m,g,g>1?arguments[1]:void 0)}})},function(i,r,t){var s=t(28),o=t(33),a=t(109),l=t(36),h=TypeError,c=function(d){return function(f,m,g,v){s(m);var p=o(f),E=a(p),w=l(p),O=d?w-1:0,T=d?-1:1;if(g<2)for(;;){if(O in E){v=E[O],O+=T;break}if(O+=T,d?O<0:w<=O)throw h("Reduce of empty array with no initial value")}for(;d?O>=0:w>O;O+=T)O in E&&(v=m(v,E[O],O,p));return v}};i.exports={left:c(!1),right:c(!0)}},function(i,r,t){var s=t(1),o=s(t(38)),a=s(t(236)),l=s(t(87)),h=s(t(588));function c(E){return g(E)||m(E)||f(E)||d()}function d(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(E,w){var O;if(E){if(typeof E=="string")return v(E,w);var T=(0,o.default)(O=Object.prototype.toString.call(E)).call(O,8,-1);if(T==="Object"&&E.constructor&&(T=E.constructor.name),T==="Map"||T==="Set")return(0,a.default)(E);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return v(E,w)}}function m(E){if(typeof l.default<"u"&&(0,h.default)(Object(E)))return(0,a.default)(E)}function g(E){if(Array.isArray(E))return v(E)}function v(E,w){(w==null||w>E.length)&&(w=E.length);for(var O=0,T=new Array(w);O<w;O++)T[O]=E[O];return T}function p(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach(function(E){p.prototype[E]=function(){for(var w=arguments.length,O=new Array(w),T=0;T<w;T++)O[T]=arguments[T];return this._defaults.push({fn:E,args:O}),this}}),p.prototype._setDefaults=function(E){this._defaults.forEach(function(w){E[w.fn].apply(E,c(w.args))})},i.exports=p},function(i,r,t){i.exports=t(589)},function(i,r,t){i.exports=t(590)},function(i,r,t){var s=t(591);i.exports=s},function(i,r,t){var s=t(592);i.exports=s},function(i,r,t){var s=t(593);t(63),i.exports=s},function(i,r,t){t(60),t(79);var s=t(594);i.exports=s},function(i,r,t){var s=t(47),o=t(13),a=t(5),l=t(46),h=a("iterator"),c=Object;i.exports=function(d){var f=c(d);return f[h]!==void 0||"@@iterator"in f||o(l,s(f))}}])})}(un)),un.exports}var Zf=Yf();const hn=Ql(Zf),qf=["极诣·剑魂","极诣·狂战士","极诣·鬼泣","极诣·阿修罗","极诣·剑影","极诣·驭剑士","极诣·契魔者","极诣·暗殿骑士","极诣·流浪武士","极诣·刃影","重霄·漫游枪手","重霄·枪炮师","重霄·机械师","重霄·弹药专家","重霄·合金战士","重霄·女漫游枪手","重霄·女枪炮师","重霄·女机械师","重霄·女弹药专家","重霄·协战师","归元·气功师","归元·散打","归元·柔道家","归元·街霸","归元·气功师（女）","归元·散打（女）","归元·柔道家（女）","归元·街霸（女）","知源·元素爆破师","知源·冰结师","知源·血法师","知源·逐风者","知源·次元行者","知源·元素师","知源·召唤师","知源·战斗法师","知源·魔道学者","知源·小魔女","光启·圣骑士","光启·蓝拳圣使","光启·驱魔师","光启·复仇者","光启·圣骑士（女）","光启·异端审判者","光启·巫女","光启·诱魔者","隐夜·刺客","隐夜·死灵术士","隐夜·忍者","隐夜·影舞者","皓曦·精灵骑士","皓曦·混沌魔灵","皓曦·帕拉丁","皓曦·龙骑士","千魂·征战者","千魂·决战者","千魂·狩猎者","千魂·暗枪士","苍暮·暗刃","苍暮·特工","苍暮·战线佣兵","苍暮·源能专家","聆风·缪斯","聆风·旅人","聆风·奇美拉","聆风·妖护使","缔造者","黑暗武士"];hn.init({appId:"OymXq6ZGQbnJoyQ2uOHpfmj6-gzGzoHsz",appKey:"CQc5f48ugFiMwGhsQoqS54Jd",serverURL:"https://oymxq6zg.lc-cn-n1-shared.com"});const sa=Bl("edit",{state:()=>({editTable:[],base64code:"",playerId:"",DNFProfessions:qf,uploadResult:null,uploadError:null,fetchError:null}),actions:{async uploadTable(){var n;const{playerId:u,editTable:e}=this;if(!u){console.warn("请先选择角色 ID"),this.uploadError="未选择角色 ID";return}this.uploadError=null;try{const i=hn.Object.extend("DNFEditTable"),r=new hn.Query("DNFEditTable");r.equalTo("playerId",u);const t=await r.find();let s;t.length>0?s=t[0]:s=new i,s.set("playerId",u),s.set("editTableData",e);const o=await s.save(),a={id:o.id,createdAt:o.get("createdAt"),updatedAt:o.get("updatedAt"),playerId:o.get("playerId"),dataPreview:((n=o.get("editTableData"))==null?void 0:n.slice(0,3))||[]};this.uploadResult=a,console.log("上传成功:",a),wt.success(`${this.playerId} 上传成功!`)}catch(i){console.error("上传失败:",i),this.uploadError=i.message,wt.error(`上传失败: ${i.message}`)}},async fetchTable(){const{playerId:u}=this;if(!u){console.warn("请先选择角色 ID"),this.fetchError="未选择角色 ID";return}this.fetchError=null;try{const e=new hn.Query("DNFEditTable");e.equalTo("playerId",u);const n=await e.first();if(n){const i={id:n.id,createdAt:n.get("createdAt"),updatedAt:n.get("updatedAt"),playerId:n.get("playerId"),editTableData:n.get("editTableData")};this.editTable=i.editTableData,console.log("查询成功:",i),wt.success(`找到数据！更新时间：${i.updatedAt}`)}else console.log("未找到该角色 ID 的数据"),this.editTable=null,wt.error("未找到该角色 ID 的数据")}catch(e){console.error("查询失败:",e),this.fetchError=e.message,wt.error(`查询失败: ${e.message}`)}},base64ToArrayBuffer(u){u=u.replace(/-/g,"+").replace(/_/g,"/");const e=window.atob(u),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i},base2Table(u){const e=this.base64ToArrayBuffer(u),n=Xl(e.buffer,{type:"array"}),i=n.SheetNames[0],r=n.Sheets[i];return Yl.sheet_to_json(r,{header:1})},initTable(u=this.base64code){const e=this.base2Table(u);if(!e||e.length<=1){this.editTable=[{fame:0,charid:"<请填写>",profession:"缔造者",ifsup:0,buff:0}];return}const n=e.slice(1);this.editTable=n.map(i=>{const r=i[0]||"";return{fame:Number(r.toString().replace(/,/g,"")),charid:i[1]||"",profession:this.DNFProfessions.includes(i[2])?i[2]:"缔造者",ifsup:0,buff:0}}).filter(i=>i.fame)}},persist:{paths:["editTable"]}}),_f={class:"table-wrapper"},ep={class:"m-4"},tp={__name:"RecognizeTable",setup(u){const e=sa(),{editTable:n,DNFProfessions:i,playerId:r}=lo(e);let t=null;const s=d=>{r.value=d,console.log("playerSelect:",d)},o=[{value:"kk",label:"kk"},{value:"丁真",label:"丁真"},{value:"akira",label:"akira"},{value:"牢弟",label:"牢弟"},{value:"茜",label:"茜"},{value:"飞飞",label:"飞飞"},{value:"圣羽",label:"圣羽"},{value:"发少",label:"发少"},{value:"幻梦",label:"幻梦"},{value:"可爱多",label:"可爱多"},{value:"牢见",label:"牢见"},{value:"老鸽",label:"老鸽"},{value:"娜娜米",label:"娜娜米"},{value:"千千",label:"千千"},{value:"烧鸡",label:"烧鸡"},{value:"迷人",label:"迷人"},{value:"大丢",label:"大丢"},{value:"大滴",label:"大滴"},{value:"饼",label:"饼"}],a=()=>{t.addRow({fame:0,charid:"<请填入>",profession:"缔造者",ifsup:0,buff:0})};async function l(){await e.fetchTable(),n.value&&t.setData(n.value)}function h(){if(t){const d=t.getData();n.value=d,e.uploadTable()}}function c(){if(e.initTable(),t){t.setData(n.value),wt.success("载入识别结果");return}t=new Qf("#tabulator-table",{data:n.value,layout:"fitColumns",height:"400px",reactiveData:!0,columns:[{title:"名望",field:"fame",editor:"number",validator:["required","integer","min:0"]},{title:"角色名",field:"charid",editor:"input"},{title:"职业(必填)",field:"profession",editor:"list",validator:["required"],editorParams:{values:i.value,autocomplete:!0,placeholderEmpty:"无选项"}},{title:"是否奶",field:"ifsup",editor:"list",editorParams:{values:{0:"否",1:"是"},clearable:!0},formatter:d=>d.getValue()?"是":"否",mutatorEdit:d=>Number(d)},{title:"唱歌三攻",field:"buff",editor:"number",validator:["integer","min:0"]},{title:"删除",formatter:"buttonCross",width:80,hozAlign:"center",headerSort:!1,cellClick:function(d,f){f.getRow().delete()}}]})}return Ct(()=>{e.initTable(),c()}),(d,f)=>{const m=qr,g=zu;return _(),ce("div",_f,[ae(m,{type:"info",onClick:c},{default:se(()=>f[0]||(f[0]=[at("载入识别结果")])),_:1,__:[0]}),ae(m,{type:"info",onClick:l},{default:se(()=>f[1]||(f[1]=[at("获取数据库数据")])),_:1,__:[1]}),pe("div",ep,[f[2]||(f[2]=pe("p",null,"必须选择ID才能获取或上传",-1)),ae(g,{placeholder:"我是谁",options:o,onChange:s,filterable:""})]),ae(m,{type:"primary",onClick:a,class:"btn-add"},{default:se(()=>f[3]||(f[3]=[at("添加角色")])),_:1,__:[3]}),ae(m,{type:"primary",onClick:h,class:"btn-upload"},{default:se(()=>f[4]||(f[4]=[at(" 上传角色数据 ")])),_:1,__:[4]}),f[5]||(f[5]=pe("div",{id:"tabulator-table"},null,-1)),f[6]||(f[6]=pe("div",{id:"tabulator-table"},null,-1))])}}},ip=ao(tp,[["__scopeId","data-v-02f2c71f"]]),np="/toolkit/assets/table-B6kGN9zL.png",rp={style:{"margin-top":"20px","font-size":"16px","font-weight":"bold"}},sp={__name:"SampleFigure",setup(u){const e=le(!1),n={name:"xmn",buff:15e3,fourDimension:9e3,buffPercent:20,amuletBuff:3},r=Nl(()=>Ul("vue-use-locale-storage",n,localStorage,{mergeDefaults:!0}))(),t=J(()=>{const s=r.value.buff;let o=0,a=1;r.value.name==="xmn"?(o=664,a=1.15*1.25):r.value.name==="nm"?(o=664,a=1.15):r.value.name==="nb"?(o=729,a=1.12):r.value.name==="ms"&&(o=725,a=1.1);const l=((r.value.fourDimension+o+4350)/665+1)/((r.value.fourDimension+4350)/665+1),h=(r.value.amuletBuff+r.value.buffPercent+100)/(r.value.buffPercent+100);return Math.round(s*a*l*h)});return(s,o)=>{const a=qr,l=Md,h=Td,c=id,d=ld,f=td,m=uh;return _(),ce(Tt,null,[ae(a,{type:"primary",style:{"font-size":"16px",width:"130px","background-color":"rgb(248, 152, 152)"},onClick:o[0]||(o[0]=g=>e.value=!0)},{default:se(()=>o[7]||(o[7]=[at(" 角色列表截图样例 ")])),_:1,__:[7]}),o[9]||(o[9]=pe("div",{style:{"margin-top":"20px"}},null,-1)),ae(f,{model:U(r),"label-width":"120px",class:"custom-form"},{default:se(()=>[ae(c,{label:"奶："},{default:se(()=>[ae(h,{modelValue:U(r).name,"onUpdate:modelValue":o[1]||(o[1]=g=>U(r).name=g),placeholder:"请选择奶职业",style:{width:"100%"}},{default:se(()=>[ae(l,{label:"小魔女",value:"xmn"}),ae(l,{label:"奶妈",value:"nm"}),ae(l,{label:"奶爸",value:"nb"}),ae(l,{label:"缪斯",value:"ms"})]),_:1},8,["modelValue"])]),_:1}),ae(c,{label:"登记三攻"},{default:se(()=>[ae(d,{modelValue:U(r).buff,"onUpdate:modelValue":o[2]||(o[2]=g=>U(r).buff=g),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),ae(c,{label:"站街四维"},{default:se(()=>[ae(d,{modelValue:U(r).fourDimension,"onUpdate:modelValue":o[3]||(o[3]=g=>U(r).fourDimension=g),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),ae(c,{label:"站街buff量(%)"},{default:se(()=>[ae(d,{modelValue:U(r).buffPercent,"onUpdate:modelValue":o[4]||(o[4]=g=>U(r).buffPercent=g),min:0,max:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),ae(c,{label:"辟邪玉buff量(%)"},{default:se(()=>[ae(d,{modelValue:U(r).amuletBuff,"onUpdate:modelValue":o[5]||(o[5]=g=>U(r).amuletBuff=g),min:0,max:10,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),pe("div",rp," 唱歌(偏爱)三攻 "+Fe(t.value),1),o[10]||(o[10]=jl('<div style="margin-top:40px;padding:20px;background-color:#f9f9f9;border:1px solid #ccc;border-radius:8px;text-align:left;" data-v-7121dd39><h3 data-v-7121dd39>使用说明</h3><p style="color:red;" data-v-7121dd39><strong data-v-7121dd39>注意事项 1：</strong> 一定要标记角色是不是奶，其他按需填写</p><p data-v-7121dd39><strong data-v-7121dd39>注意事项 2：</strong> 奶爸奶妈、名字太长的职业，以及识别错误的职业会被默认设置为缔造者</p><p data-v-7121dd39><strong data-v-7121dd39>注意事项 3：</strong> 记得上传</p><p data-v-7121dd39><strong data-v-7121dd39>表格填写：</strong> 如果角色不多可以手动填，角色较多可以识别并载入</p><p data-v-7121dd39><strong data-v-7121dd39>获取服务器数据：</strong> 如果之前上传过可以获取之前填写的数据更新</p><p style="color:hsla(160, 53%, 59%, 0.897);" data-v-7121dd39><strong data-v-7121dd39>致谢：</strong> <br data-v-7121dd39>感谢千千对云识别的资金支持<br data-v-7121dd39>感谢鸽子群友的使用支持</p></div>',1)),ae(m,{modelValue:e.value,"onUpdate:modelValue":o[6]||(o[6]=g=>e.value=g),"with-header":!1},{default:se(()=>o[8]||(o[8]=[pe("img",{src:np,alt:"示例图片",style:{width:"100%",height:"auto"}},null,-1),pe("p",{style:{"margin-top":"15px",color:"#333","font-weight":"600"}},[at(" DNF客户端ESC->玩法信息->右上角设置按钮->截图 "),pe("br"),at(" (最好不要包含其他内容) ")],-1)])),_:1,__:[8]},8,["modelValue"])],64)}}},op=ao(sp,[["__scopeId","data-v-7121dd39"]]);function oa(u,e){return function(){return u.apply(e,arguments)}}const{toString:ap}=Object.prototype,{getPrototypeOf:is}=Object,{iterator:Tn,toStringTag:aa}=Symbol,Mn=(u=>e=>{const n=ap.call(e);return u[n]||(u[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pt=u=>(u=u.toLowerCase(),e=>Mn(e)===u),Sn=u=>e=>typeof e===u,{isArray:Ti}=Array,Hi=Sn("undefined");function lp(u){return u!==null&&!Hi(u)&&u.constructor!==null&&!Hi(u.constructor)&&ct(u.constructor.isBuffer)&&u.constructor.isBuffer(u)}const la=Pt("ArrayBuffer");function up(u){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(u):e=u&&u.buffer&&la(u.buffer),e}const hp=Sn("string"),ct=Sn("function"),ua=Sn("number"),Pn=u=>u!==null&&typeof u=="object",dp=u=>u===!0||u===!1,dn=u=>{if(Mn(u)!=="object")return!1;const e=is(u);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(aa in u)&&!(Tn in u)},cp=Pt("Date"),fp=Pt("File"),pp=Pt("Blob"),mp=Pt("FileList"),gp=u=>Pn(u)&&ct(u.pipe),vp=u=>{let e;return u&&(typeof FormData=="function"&&u instanceof FormData||ct(u.append)&&((e=Mn(u))==="formdata"||e==="object"&&ct(u.toString)&&u.toString()==="[object FormData]"))},bp=Pt("URLSearchParams"),[yp,Ep,Cp,Op]=["ReadableStream","Request","Response","Headers"].map(Pt),wp=u=>u.trim?u.trim():u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ji(u,e,{allOwnKeys:n=!1}={}){if(u===null||typeof u>"u")return;let i,r;if(typeof u!="object"&&(u=[u]),Ti(u))for(i=0,r=u.length;i<r;i++)e.call(null,u[i],i,u);else{const t=n?Object.getOwnPropertyNames(u):Object.keys(u),s=t.length;let o;for(i=0;i<s;i++)o=t[i],e.call(null,u[o],o,u)}}function ha(u,e){e=e.toLowerCase();const n=Object.keys(u);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const qt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,da=u=>!Hi(u)&&u!==qt;function Wr(){const{caseless:u}=da(this)&&this||{},e={},n=(i,r)=>{const t=u&&ha(e,r)||r;dn(e[t])&&dn(i)?e[t]=Wr(e[t],i):dn(i)?e[t]=Wr({},i):Ti(i)?e[t]=i.slice():e[t]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Ji(arguments[i],n);return e}const Rp=(u,e,n,{allOwnKeys:i}={})=>(Ji(e,(r,t)=>{n&&ct(r)?u[t]=oa(r,n):u[t]=r},{allOwnKeys:i}),u),Tp=u=>(u.charCodeAt(0)===65279&&(u=u.slice(1)),u),Mp=(u,e,n,i)=>{u.prototype=Object.create(e.prototype,i),u.prototype.constructor=u,Object.defineProperty(u,"super",{value:e.prototype}),n&&Object.assign(u.prototype,n)},Sp=(u,e,n,i)=>{let r,t,s;const o={};if(e=e||{},u==null)return e;do{for(r=Object.getOwnPropertyNames(u),t=r.length;t-- >0;)s=r[t],(!i||i(s,u,e))&&!o[s]&&(e[s]=u[s],o[s]=!0);u=n!==!1&&is(u)}while(u&&(!n||n(u,e))&&u!==Object.prototype);return e},Pp=(u,e,n)=>{u=String(u),(n===void 0||n>u.length)&&(n=u.length),n-=e.length;const i=u.indexOf(e,n);return i!==-1&&i===n},Dp=u=>{if(!u)return null;if(Ti(u))return u;let e=u.length;if(!ua(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=u[e];return n},xp=(u=>e=>u&&e instanceof u)(typeof Uint8Array<"u"&&is(Uint8Array)),Lp=(u,e)=>{const i=(u&&u[Tn]).call(u);let r;for(;(r=i.next())&&!r.done;){const t=r.value;e.call(u,t[0],t[1])}},Ap=(u,e)=>{let n;const i=[];for(;(n=u.exec(e))!==null;)i.push(n);return i},Ip=Pt("HTMLFormElement"),Fp=u=>u.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),Ds=(({hasOwnProperty:u})=>(e,n)=>u.call(e,n))(Object.prototype),Bp=Pt("RegExp"),ca=(u,e)=>{const n=Object.getOwnPropertyDescriptors(u),i={};Ji(n,(r,t)=>{let s;(s=e(r,t,u))!==!1&&(i[t]=s||r)}),Object.defineProperties(u,i)},Np=u=>{ca(u,(e,n)=>{if(ct(u)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=u[n];if(ct(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jp=(u,e)=>{const n={},i=r=>{r.forEach(t=>{n[t]=!0})};return Ti(u)?i(u):i(String(u).split(e)),n},Up=()=>{},Wp=(u,e)=>u!=null&&Number.isFinite(u=+u)?u:e;function zp(u){return!!(u&&ct(u.append)&&u[aa]==="FormData"&&u[Tn])}const Hp=u=>{const e=new Array(10),n=(i,r)=>{if(Pn(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const t=Ti(i)?[]:{};return Ji(i,(s,o)=>{const a=n(s,r+1);!Hi(a)&&(t[o]=a)}),e[r]=void 0,t}}return i};return n(u,0)},Kp=Pt("AsyncFunction"),$p=u=>u&&(Pn(u)||ct(u))&&ct(u.then)&&ct(u.catch),fa=((u,e)=>u?setImmediate:e?((n,i)=>(qt.addEventListener("message",({source:r,data:t})=>{r===qt&&t===n&&i.length&&i.shift()()},!1),r=>{i.push(r),qt.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ct(qt.postMessage)),Gp=typeof queueMicrotask<"u"?queueMicrotask.bind(qt):typeof process<"u"&&process.nextTick||fa,Vp=u=>u!=null&&ct(u[Tn]),k={isArray:Ti,isArrayBuffer:la,isBuffer:lp,isFormData:vp,isArrayBufferView:up,isString:hp,isNumber:ua,isBoolean:dp,isObject:Pn,isPlainObject:dn,isReadableStream:yp,isRequest:Ep,isResponse:Cp,isHeaders:Op,isUndefined:Hi,isDate:cp,isFile:fp,isBlob:pp,isRegExp:Bp,isFunction:ct,isStream:gp,isURLSearchParams:bp,isTypedArray:xp,isFileList:mp,forEach:Ji,merge:Wr,extend:Rp,trim:wp,stripBOM:Tp,inherits:Mp,toFlatObject:Sp,kindOf:Mn,kindOfTest:Pt,endsWith:Pp,toArray:Dp,forEachEntry:Lp,matchAll:Ap,isHTMLForm:Ip,hasOwnProperty:Ds,hasOwnProp:Ds,reduceDescriptors:ca,freezeMethods:Np,toObjectSet:jp,toCamelCase:Fp,noop:Up,toFiniteNumber:Wp,findKey:ha,global:qt,isContextDefined:da,isSpecCompliantForm:zp,toJSONObject:Hp,isAsyncFn:Kp,isThenable:$p,setImmediate:fa,asap:Gp,isIterable:Vp};function be(u,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=u,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}k.inherits(be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.status}}});const pa=be.prototype,ma={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(u=>{ma[u]={value:u}});Object.defineProperties(be,ma);Object.defineProperty(pa,"isAxiosError",{value:!0});be.from=(u,e,n,i,r,t)=>{const s=Object.create(pa);return k.toFlatObject(u,s,function(a){return a!==Error.prototype},o=>o!=="isAxiosError"),be.call(s,u.message,e,n,i,r),s.cause=u,s.name=u.name,t&&Object.assign(s,t),s};const kp=null;function zr(u){return k.isPlainObject(u)||k.isArray(u)}function ga(u){return k.endsWith(u,"[]")?u.slice(0,-2):u}function xs(u,e,n){return u?u.concat(e).map(function(r,t){return r=ga(r),!n&&t?"["+r+"]":r}).join(n?".":""):e}function Jp(u){return k.isArray(u)&&!u.some(zr)}const Qp=k.toFlatObject(k,{},null,function(e){return/^is[A-Z]/.test(e)});function Dn(u,e,n){if(!k.isObject(u))throw new TypeError("target must be an object");e=e||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,v){return!k.isUndefined(v[g])});const i=n.metaTokens,r=n.visitor||h,t=n.dots,s=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(e);if(!k.isFunction(r))throw new TypeError("visitor must be a function");function l(m){if(m===null)return"";if(k.isDate(m))return m.toISOString();if(!a&&k.isBlob(m))throw new be("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(m)||k.isTypedArray(m)?a&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function h(m,g,v){let p=m;if(m&&!v&&typeof m=="object"){if(k.endsWith(g,"{}"))g=i?g:g.slice(0,-2),m=JSON.stringify(m);else if(k.isArray(m)&&Jp(m)||(k.isFileList(m)||k.endsWith(g,"[]"))&&(p=k.toArray(m)))return g=ga(g),p.forEach(function(w,O){!(k.isUndefined(w)||w===null)&&e.append(s===!0?xs([g],O,t):s===null?g:g+"[]",l(w))}),!1}return zr(m)?!0:(e.append(xs(v,g,t),l(m)),!1)}const c=[],d=Object.assign(Qp,{defaultVisitor:h,convertValue:l,isVisitable:zr});function f(m,g){if(!k.isUndefined(m)){if(c.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));c.push(m),k.forEach(m,function(p,E){(!(k.isUndefined(p)||p===null)&&r.call(e,p,k.isString(E)?E.trim():E,g,d))===!0&&f(p,g?g.concat(E):[E])}),c.pop()}}if(!k.isObject(u))throw new TypeError("data must be an object");return f(u),e}function Ls(u){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(u).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function ns(u,e){this._pairs=[],u&&Dn(u,this,e)}const va=ns.prototype;va.append=function(e,n){this._pairs.push([e,n])};va.toString=function(e){const n=e?function(i){return e.call(this,i,Ls)}:Ls;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Xp(u){return encodeURIComponent(u).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ba(u,e,n){if(!e)return u;const i=n&&n.encode||Xp;k.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let t;if(r?t=r(e,n):t=k.isURLSearchParams(e)?e.toString():new ns(e,n).toString(i),t){const s=u.indexOf("#");s!==-1&&(u=u.slice(0,s)),u+=(u.indexOf("?")===-1?"?":"&")+t}return u}class As{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){k.forEach(this.handlers,function(i){i!==null&&e(i)})}}const ya={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yp=typeof URLSearchParams<"u"?URLSearchParams:ns,Zp=typeof FormData<"u"?FormData:null,qp=typeof Blob<"u"?Blob:null,_p={isBrowser:!0,classes:{URLSearchParams:Yp,FormData:Zp,Blob:qp},protocols:["http","https","file","blob","url","data"]},rs=typeof window<"u"&&typeof document<"u",Hr=typeof navigator=="object"&&navigator||void 0,em=rs&&(!Hr||["ReactNative","NativeScript","NS"].indexOf(Hr.product)<0),tm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",im=rs&&window.location.href||"http://localhost",nm=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rs,hasStandardBrowserEnv:em,hasStandardBrowserWebWorkerEnv:tm,navigator:Hr,origin:im},Symbol.toStringTag,{value:"Module"})),tt={...nm,..._p};function rm(u,e){return Dn(u,new tt.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,t){return tt.isNode&&k.isBuffer(n)?(this.append(i,n.toString("base64")),!1):t.defaultVisitor.apply(this,arguments)}},e))}function sm(u){return k.matchAll(/\w+|\[(\w*)]/g,u).map(e=>e[0]==="[]"?"":e[1]||e[0])}function om(u){const e={},n=Object.keys(u);let i;const r=n.length;let t;for(i=0;i<r;i++)t=n[i],e[t]=u[t];return e}function Ea(u){function e(n,i,r,t){let s=n[t++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),a=t>=n.length;return s=!s&&k.isArray(r)?r.length:s,a?(k.hasOwnProp(r,s)?r[s]=[r[s],i]:r[s]=i,!o):((!r[s]||!k.isObject(r[s]))&&(r[s]=[]),e(n,i,r[s],t)&&k.isArray(r[s])&&(r[s]=om(r[s])),!o)}if(k.isFormData(u)&&k.isFunction(u.entries)){const n={};return k.forEachEntry(u,(i,r)=>{e(sm(i),r,n,0)}),n}return null}function am(u,e,n){if(k.isString(u))try{return(e||JSON.parse)(u),k.trim(u)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(u)}const Qi={transitional:ya,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,t=k.isObject(e);if(t&&k.isHTMLForm(e)&&(e=new FormData(e)),k.isFormData(e))return r?JSON.stringify(Ea(e)):e;if(k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e)||k.isReadableStream(e))return e;if(k.isArrayBufferView(e))return e.buffer;if(k.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(t){if(i.indexOf("application/x-www-form-urlencoded")>-1)return rm(e,this.formSerializer).toString();if((o=k.isFileList(e))||i.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Dn(o?{"files[]":e}:e,a&&new a,this.formSerializer)}}return t||r?(n.setContentType("application/json",!1),am(e)):e}],transformResponse:[function(e){const n=this.transitional||Qi.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(k.isResponse(e)||k.isReadableStream(e))return e;if(e&&k.isString(e)&&(i&&!this.responseType||r)){const s=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?be.from(o,be.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tt.classes.FormData,Blob:tt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],u=>{Qi.headers[u]={}});const lm=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),um=u=>{const e={};let n,i,r;return u&&u.split(`
`).forEach(function(s){r=s.indexOf(":"),n=s.substring(0,r).trim().toLowerCase(),i=s.substring(r+1).trim(),!(!n||e[n]&&lm[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Is=Symbol("internals");function xi(u){return u&&String(u).trim().toLowerCase()}function cn(u){return u===!1||u==null?u:k.isArray(u)?u.map(cn):String(u)}function hm(u){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(u);)e[i[1]]=i[2];return e}const dm=u=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(u.trim());function Qn(u,e,n,i,r){if(k.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!k.isString(e)){if(k.isString(i))return e.indexOf(i)!==-1;if(k.isRegExp(i))return i.test(e)}}function cm(u){return u.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function fm(u,e){const n=k.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(u,i+n,{value:function(r,t,s){return this[i].call(this,e,r,t,s)},configurable:!0})})}let ft=class{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function t(o,a,l){const h=xi(a);if(!h)throw new Error("header name must be a non-empty string");const c=k.findKey(r,h);(!c||r[c]===void 0||l===!0||l===void 0&&r[c]!==!1)&&(r[c||a]=cn(o))}const s=(o,a)=>k.forEach(o,(l,h)=>t(l,h,a));if(k.isPlainObject(e)||e instanceof this.constructor)s(e,n);else if(k.isString(e)&&(e=e.trim())&&!dm(e))s(um(e),n);else if(k.isObject(e)&&k.isIterable(e)){let o={},a,l;for(const h of e){if(!k.isArray(h))throw TypeError("Object iterator must return a key-value pair");o[l=h[0]]=(a=o[l])?k.isArray(a)?[...a,h[1]]:[a,h[1]]:h[1]}s(o,n)}else e!=null&&t(n,e,i);return this}get(e,n){if(e=xi(e),e){const i=k.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return hm(r);if(k.isFunction(n))return n.call(this,r,i);if(k.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=xi(e),e){const i=k.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Qn(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function t(s){if(s=xi(s),s){const o=k.findKey(i,s);o&&(!n||Qn(i,i[o],o,n))&&(delete i[o],r=!0)}}return k.isArray(e)?e.forEach(t):t(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const t=n[i];(!e||Qn(this,this[t],t,e,!0))&&(delete this[t],r=!0)}return r}normalize(e){const n=this,i={};return k.forEach(this,(r,t)=>{const s=k.findKey(i,t);if(s){n[s]=cn(r),delete n[t];return}const o=e?cm(t):String(t).trim();o!==t&&delete n[t],n[o]=cn(r),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return k.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&k.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[Is]=this[Is]={accessors:{}}).accessors,r=this.prototype;function t(s){const o=xi(s);i[o]||(fm(r,s),i[o]=!0)}return k.isArray(e)?e.forEach(t):t(e),this}};ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(ft.prototype,({value:u},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>u,set(i){this[n]=i}}});k.freezeMethods(ft);function Xn(u,e){const n=this||Qi,i=e||n,r=ft.from(i.headers);let t=i.data;return k.forEach(u,function(o){t=o.call(n,t,r.normalize(),e?e.status:void 0)}),r.normalize(),t}function Ca(u){return!!(u&&u.__CANCEL__)}function Mi(u,e,n){be.call(this,u??"canceled",be.ERR_CANCELED,e,n),this.name="CanceledError"}k.inherits(Mi,be,{__CANCEL__:!0});function Oa(u,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?u(n):e(new be("Request failed with status code "+n.status,[be.ERR_BAD_REQUEST,be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function pm(u){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(u);return e&&e[1]||""}function mm(u,e){u=u||10;const n=new Array(u),i=new Array(u);let r=0,t=0,s;return e=e!==void 0?e:1e3,function(a){const l=Date.now(),h=i[t];s||(s=l),n[r]=a,i[r]=l;let c=t,d=0;for(;c!==r;)d+=n[c++],c=c%u;if(r=(r+1)%u,r===t&&(t=(t+1)%u),l-s<e)return;const f=h&&l-h;return f?Math.round(d*1e3/f):void 0}}function gm(u,e){let n=0,i=1e3/e,r,t;const s=(l,h=Date.now())=>{n=h,r=null,t&&(clearTimeout(t),t=null),u.apply(null,l)};return[(...l)=>{const h=Date.now(),c=h-n;c>=i?s(l,h):(r=l,t||(t=setTimeout(()=>{t=null,s(r)},i-c)))},()=>r&&s(r)]}const mn=(u,e,n=3)=>{let i=0;const r=mm(50,250);return gm(t=>{const s=t.loaded,o=t.lengthComputable?t.total:void 0,a=s-i,l=r(a),h=s<=o;i=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&h?(o-s)/l:void 0,event:t,lengthComputable:o!=null,[e?"download":"upload"]:!0};u(c)},n)},Fs=(u,e)=>{const n=u!=null;return[i=>e[0]({lengthComputable:n,total:u,loaded:i}),e[1]]},Bs=u=>(...e)=>k.asap(()=>u(...e)),vm=tt.hasStandardBrowserEnv?((u,e)=>n=>(n=new URL(n,tt.origin),u.protocol===n.protocol&&u.host===n.host&&(e||u.port===n.port)))(new URL(tt.origin),tt.navigator&&/(msie|trident)/i.test(tt.navigator.userAgent)):()=>!0,bm=tt.hasStandardBrowserEnv?{write(u,e,n,i,r,t){const s=[u+"="+encodeURIComponent(e)];k.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),k.isString(i)&&s.push("path="+i),k.isString(r)&&s.push("domain="+r),t===!0&&s.push("secure"),document.cookie=s.join("; ")},read(u){const e=document.cookie.match(new RegExp("(^|;\\s*)("+u+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(u){this.write(u,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ym(u){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(u)}function Em(u,e){return e?u.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):u}function wa(u,e,n){let i=!ym(e);return u&&(i||n==!1)?Em(u,e):e}const Ns=u=>u instanceof ft?{...u}:u;function oi(u,e){e=e||{};const n={};function i(l,h,c,d){return k.isPlainObject(l)&&k.isPlainObject(h)?k.merge.call({caseless:d},l,h):k.isPlainObject(h)?k.merge({},h):k.isArray(h)?h.slice():h}function r(l,h,c,d){if(k.isUndefined(h)){if(!k.isUndefined(l))return i(void 0,l,c,d)}else return i(l,h,c,d)}function t(l,h){if(!k.isUndefined(h))return i(void 0,h)}function s(l,h){if(k.isUndefined(h)){if(!k.isUndefined(l))return i(void 0,l)}else return i(void 0,h)}function o(l,h,c){if(c in e)return i(l,h);if(c in u)return i(void 0,l)}const a={url:t,method:t,data:t,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(l,h,c)=>r(Ns(l),Ns(h),c,!0)};return k.forEach(Object.keys(Object.assign({},u,e)),function(h){const c=a[h]||r,d=c(u[h],e[h],h);k.isUndefined(d)&&c!==o||(n[h]=d)}),n}const Ra=u=>{const e=oi({},u);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:t,headers:s,auth:o}=e;e.headers=s=ft.from(s),e.url=ba(wa(e.baseURL,e.url,e.allowAbsoluteUrls),u.params,u.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let a;if(k.isFormData(n)){if(tt.hasStandardBrowserEnv||tt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((a=s.getContentType())!==!1){const[l,...h]=a?a.split(";").map(c=>c.trim()).filter(Boolean):[];s.setContentType([l||"multipart/form-data",...h].join("; "))}}if(tt.hasStandardBrowserEnv&&(i&&k.isFunction(i)&&(i=i(e)),i||i!==!1&&vm(e.url))){const l=r&&t&&bm.read(t);l&&s.set(r,l)}return e},Cm=typeof XMLHttpRequest<"u",Om=Cm&&function(u){return new Promise(function(n,i){const r=Ra(u);let t=r.data;const s=ft.from(r.headers).normalize();let{responseType:o,onUploadProgress:a,onDownloadProgress:l}=r,h,c,d,f,m;function g(){f&&f(),m&&m(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function p(){if(!v)return;const w=ft.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:w,config:u,request:v};Oa(function(M){n(M),g()},function(M){i(M),g()},T),v=null}"onloadend"in v?v.onloadend=p:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(p)},v.onabort=function(){v&&(i(new be("Request aborted",be.ECONNABORTED,u,v)),v=null)},v.onerror=function(){i(new be("Network Error",be.ERR_NETWORK,u,v)),v=null},v.ontimeout=function(){let O=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const T=r.transitional||ya;r.timeoutErrorMessage&&(O=r.timeoutErrorMessage),i(new be(O,T.clarifyTimeoutError?be.ETIMEDOUT:be.ECONNABORTED,u,v)),v=null},t===void 0&&s.setContentType(null),"setRequestHeader"in v&&k.forEach(s.toJSON(),function(O,T){v.setRequestHeader(T,O)}),k.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),o&&o!=="json"&&(v.responseType=r.responseType),l&&([d,m]=mn(l,!0),v.addEventListener("progress",d)),a&&v.upload&&([c,f]=mn(a),v.upload.addEventListener("progress",c),v.upload.addEventListener("loadend",f)),(r.cancelToken||r.signal)&&(h=w=>{v&&(i(!w||w.type?new Mi(null,u,v):w),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const E=pm(r.url);if(E&&tt.protocols.indexOf(E)===-1){i(new be("Unsupported protocol "+E+":",be.ERR_BAD_REQUEST,u));return}v.send(t||null)})},wm=(u,e)=>{const{length:n}=u=u?u.filter(Boolean):[];if(e||n){let i=new AbortController,r;const t=function(l){if(!r){r=!0,o();const h=l instanceof Error?l:this.reason;i.abort(h instanceof be?h:new Mi(h instanceof Error?h.message:h))}};let s=e&&setTimeout(()=>{s=null,t(new be(`timeout ${e} of ms exceeded`,be.ETIMEDOUT))},e);const o=()=>{u&&(s&&clearTimeout(s),s=null,u.forEach(l=>{l.unsubscribe?l.unsubscribe(t):l.removeEventListener("abort",t)}),u=null)};u.forEach(l=>l.addEventListener("abort",t));const{signal:a}=i;return a.unsubscribe=()=>k.asap(o),a}},Rm=function*(u,e){let n=u.byteLength;if(n<e){yield u;return}let i=0,r;for(;i<n;)r=i+e,yield u.slice(i,r),i=r},Tm=async function*(u,e){for await(const n of Mm(u))yield*Rm(n,e)},Mm=async function*(u){if(u[Symbol.asyncIterator]){yield*u;return}const e=u.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},js=(u,e,n,i)=>{const r=Tm(u,e);let t=0,s,o=a=>{s||(s=!0,i&&i(a))};return new ReadableStream({async pull(a){try{const{done:l,value:h}=await r.next();if(l){o(),a.close();return}let c=h.byteLength;if(n){let d=t+=c;n(d)}a.enqueue(new Uint8Array(h))}catch(l){throw o(l),l}},cancel(a){return o(a),r.return()}},{highWaterMark:2})},xn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ta=xn&&typeof ReadableStream=="function",Sm=xn&&(typeof TextEncoder=="function"?(u=>e=>u.encode(e))(new TextEncoder):async u=>new Uint8Array(await new Response(u).arrayBuffer())),Ma=(u,...e)=>{try{return!!u(...e)}catch{return!1}},Pm=Ta&&Ma(()=>{let u=!1;const e=new Request(tt.origin,{body:new ReadableStream,method:"POST",get duplex(){return u=!0,"half"}}).headers.has("Content-Type");return u&&!e}),Us=64*1024,Kr=Ta&&Ma(()=>k.isReadableStream(new Response("").body)),gn={stream:Kr&&(u=>u.body)};xn&&(u=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!gn[e]&&(gn[e]=k.isFunction(u[e])?n=>n[e]():(n,i)=>{throw new be(`Response type '${e}' is not supported`,be.ERR_NOT_SUPPORT,i)})})})(new Response);const Dm=async u=>{if(u==null)return 0;if(k.isBlob(u))return u.size;if(k.isSpecCompliantForm(u))return(await new Request(tt.origin,{method:"POST",body:u}).arrayBuffer()).byteLength;if(k.isArrayBufferView(u)||k.isArrayBuffer(u))return u.byteLength;if(k.isURLSearchParams(u)&&(u=u+""),k.isString(u))return(await Sm(u)).byteLength},xm=async(u,e)=>{const n=k.toFiniteNumber(u.getContentLength());return n??Dm(e)},Lm=xn&&(async u=>{let{url:e,method:n,data:i,signal:r,cancelToken:t,timeout:s,onDownloadProgress:o,onUploadProgress:a,responseType:l,headers:h,withCredentials:c="same-origin",fetchOptions:d}=Ra(u);l=l?(l+"").toLowerCase():"text";let f=wm([r,t&&t.toAbortSignal()],s),m;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(a&&Pm&&n!=="get"&&n!=="head"&&(v=await xm(h,i))!==0){let T=new Request(e,{method:"POST",body:i,duplex:"half"}),S;if(k.isFormData(i)&&(S=T.headers.get("content-type"))&&h.setContentType(S),T.body){const[M,P]=Fs(v,mn(Bs(a)));i=js(T.body,Us,M,P)}}k.isString(c)||(c=c?"include":"omit");const p="credentials"in Request.prototype;m=new Request(e,{...d,signal:f,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",credentials:p?c:void 0});let E=await fetch(m);const w=Kr&&(l==="stream"||l==="response");if(Kr&&(o||w&&g)){const T={};["status","statusText","headers"].forEach(y=>{T[y]=E[y]});const S=k.toFiniteNumber(E.headers.get("content-length")),[M,P]=o&&Fs(S,mn(Bs(o),!0))||[];E=new Response(js(E.body,Us,M,()=>{P&&P(),g&&g()}),T)}l=l||"text";let O=await gn[k.findKey(gn,l)||"text"](E,u);return!w&&g&&g(),await new Promise((T,S)=>{Oa(T,S,{data:O,headers:ft.from(E.headers),status:E.status,statusText:E.statusText,config:u,request:m})})}catch(p){throw g&&g(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new be("Network Error",be.ERR_NETWORK,u,m),{cause:p.cause||p}):be.from(p,p&&p.code,u,m)}}),$r={http:kp,xhr:Om,fetch:Lm};k.forEach($r,(u,e)=>{if(u){try{Object.defineProperty(u,"name",{value:e})}catch{}Object.defineProperty(u,"adapterName",{value:e})}});const Ws=u=>`- ${u}`,Am=u=>k.isFunction(u)||u===null||u===!1,Sa={getAdapter:u=>{u=k.isArray(u)?u:[u];const{length:e}=u;let n,i;const r={};for(let t=0;t<e;t++){n=u[t];let s;if(i=n,!Am(n)&&(i=$r[(s=String(n)).toLowerCase()],i===void 0))throw new be(`Unknown adapter '${s}'`);if(i)break;r[s||"#"+t]=i}if(!i){const t=Object.entries(r).map(([o,a])=>`adapter ${o} `+(a===!1?"is not supported by the environment":"is not available in the build"));let s=e?t.length>1?`since :
`+t.map(Ws).join(`
`):" "+Ws(t[0]):"as no adapter specified";throw new be("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:$r};function Yn(u){if(u.cancelToken&&u.cancelToken.throwIfRequested(),u.signal&&u.signal.aborted)throw new Mi(null,u)}function zs(u){return Yn(u),u.headers=ft.from(u.headers),u.data=Xn.call(u,u.transformRequest),["post","put","patch"].indexOf(u.method)!==-1&&u.headers.setContentType("application/x-www-form-urlencoded",!1),Sa.getAdapter(u.adapter||Qi.adapter)(u).then(function(i){return Yn(u),i.data=Xn.call(u,u.transformResponse,i),i.headers=ft.from(i.headers),i},function(i){return Ca(i)||(Yn(u),i&&i.response&&(i.response.data=Xn.call(u,u.transformResponse,i.response),i.response.headers=ft.from(i.response.headers))),Promise.reject(i)})}const Pa="1.9.0",Ln={};["object","boolean","number","function","string","symbol"].forEach((u,e)=>{Ln[u]=function(i){return typeof i===u||"a"+(e<1?"n ":" ")+u}});const Hs={};Ln.transitional=function(e,n,i){function r(t,s){return"[Axios v"+Pa+"] Transitional option '"+t+"'"+s+(i?". "+i:"")}return(t,s,o)=>{if(e===!1)throw new be(r(s," has been removed"+(n?" in "+n:"")),be.ERR_DEPRECATED);return n&&!Hs[s]&&(Hs[s]=!0,console.warn(r(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(t,s,o):!0}};Ln.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function Im(u,e,n){if(typeof u!="object")throw new be("options must be an object",be.ERR_BAD_OPTION_VALUE);const i=Object.keys(u);let r=i.length;for(;r-- >0;){const t=i[r],s=e[t];if(s){const o=u[t],a=o===void 0||s(o,t,u);if(a!==!0)throw new be("option "+t+" must be "+a,be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new be("Unknown option "+t,be.ERR_BAD_OPTION)}}const fn={assertOptions:Im,validators:Ln},xt=fn.validators;let ti=class{constructor(e){this.defaults=e||{},this.interceptors={request:new As,response:new As}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const t=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?t&&!String(i.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+t):i.stack=t}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=oi(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:t}=n;i!==void 0&&fn.assertOptions(i,{silentJSONParsing:xt.transitional(xt.boolean),forcedJSONParsing:xt.transitional(xt.boolean),clarifyTimeoutError:xt.transitional(xt.boolean)},!1),r!=null&&(k.isFunction(r)?n.paramsSerializer={serialize:r}:fn.assertOptions(r,{encode:xt.function,serialize:xt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),fn.assertOptions(n,{baseUrl:xt.spelling("baseURL"),withXsrfToken:xt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=t&&k.merge(t.common,t[n.method]);t&&k.forEach(["delete","get","head","post","put","patch","common"],m=>{delete t[m]}),n.headers=ft.concat(s,t);const o=[];let a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(a=a&&g.synchronous,o.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let h,c=0,d;if(!a){const m=[zs.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,l),d=m.length,h=Promise.resolve(n);c<d;)h=h.then(m[c++],m[c++]);return h}d=o.length;let f=n;for(c=0;c<d;){const m=o[c++],g=o[c++];try{f=m(f)}catch(v){g.call(this,v);break}}try{h=zs.call(this,f)}catch(m){return Promise.reject(m)}for(c=0,d=l.length;c<d;)h=h.then(l[c++],l[c++]);return h}getUri(e){e=oi(this.defaults,e);const n=wa(e.baseURL,e.url,e.allowAbsoluteUrls);return ba(n,e.params,e.paramsSerializer)}};k.forEach(["delete","get","head","options"],function(e){ti.prototype[e]=function(n,i){return this.request(oi(i||{},{method:e,url:n,data:(i||{}).data}))}});k.forEach(["post","put","patch"],function(e){function n(i){return function(t,s,o){return this.request(oi(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:t,data:s}))}}ti.prototype[e]=n(),ti.prototype[e+"Form"]=n(!0)});let Fm=class Da{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(t){n=t});const i=this;this.promise.then(r=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](r);i._listeners=null}),this.promise.then=r=>{let t;const s=new Promise(o=>{i.subscribe(o),t=o}).then(r);return s.cancel=function(){i.unsubscribe(t)},s},e(function(t,s,o){i.reason||(i.reason=new Mi(t,s,o),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Da(function(r){e=r}),cancel:e}}};function Bm(u){return function(n){return u.apply(null,n)}}function Nm(u){return k.isObject(u)&&u.isAxiosError===!0}const Gr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gr).forEach(([u,e])=>{Gr[e]=u});function xa(u){const e=new ti(u),n=oa(ti.prototype.request,e);return k.extend(n,ti.prototype,e,{allOwnKeys:!0}),k.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return xa(oi(u,r))},n}const We=xa(Qi);We.Axios=ti;We.CanceledError=Mi;We.CancelToken=Fm;We.isCancel=Ca;We.VERSION=Pa;We.toFormData=Dn;We.AxiosError=be;We.Cancel=We.CanceledError;We.all=function(e){return Promise.all(e)};We.spread=Bm;We.isAxiosError=Nm;We.mergeConfig=oi;We.AxiosHeaders=ft;We.formToJSON=u=>Ea(k.isHTMLForm(u)?new FormData(u):u);We.getAdapter=Sa.getAdapter;We.HttpStatusCode=Gr;We.default=We;const{Axios:Xm,AxiosError:Ym,CanceledError:Zm,isCancel:qm,CancelToken:_m,VERSION:eg,all:tg,Cancel:ig,isAxiosError:ng,spread:rg,toFormData:sg,AxiosHeaders:og,HttpStatusCode:ag,formToJSON:lg,getAdapter:ug,mergeConfig:hg}=We,jm={class:"common-layout"},Um=["src"],dg=Me({__name:"index",setup(u){const e=sa(),{editTable:n,base64code:i}=lo(e),r=le([]),t=le(null),s=le(""),o=le(!1),a=(v,p)=>{console.log("Removed:",v,p)},l=v=>{s.value=v.url||"",o.value=!0},h=(v,p)=>{r.value.length>1&&(r.value=r.value.slice(-1)),console.log("File changed:",v,r.value)},c=(v,p)=>{alert("只能上传一个文件！")},d=v=>{const p=v.type==="image/jpeg"||v.type==="image/png"||v.type==="image/jpg";return p||alert("只能上传 JPG 或 PNG 格式的图片！"),p};function f(v){return new Promise((p,E)=>{const w=new FileReader;w.readAsDataURL(v),w.onload=()=>p(w.result),w.onerror=O=>E(O)})}function m(){if(r.value.length===0){wt.error("没有图片可以上传");return}t.value&&(wt.success("已上传，正在识别"),t.value.submit())}async function g({file:v,onProgress:p,onSuccess:E,onError:w}){var O;try{const S={base64:await f(v)},M={"X-LC-Id":"OymXq6ZGQbnJoyQ2uOHpfmj6-gzGzoHsz","X-LC-Key":"CQc5f48ugFiMwGhsQoqS54Jd","Content-Type":"application/json"},y=(await We.post("https://oymxq6zg.lc-cn-n1-shared.com/1.1/functions/decodeImage",S,{headers:M,onUploadProgress:R=>{R.lengthComputable&&p({percent:R.loaded/R.total*100})}})).data.result,C=y.code,b=y.msg;switch(console.log("rescode:",C),console.log("resmsg:",b),C){case 0:{if(wt.success("识别成功"),i.value=(O=y.result)==null?void 0:O.text.Data,i.value==="")throw new Error("未接收到有效的 Base64 数据");break}case 1:{wt.error("缺少参数base64");break}case 2:{wt.error(y.msg);break}}r.value=[]}catch(T){const S=T.message;console.log("try-catch-msg",S)}}return(v,p)=>{const E=op,w=Wl,O=Mt,T=Zl,S=qr,M=nh,P=ip,y=Hl,C=zl;return _(),ce("div",jm,[ae(C,{style:{height:"100vh"}},{default:se(()=>[ae(w,{width:"400px"},{default:se(()=>[ae(E)]),_:1}),ae(C,null,{default:se(()=>[ae(y,{style:{padding:"20px",overflow:"auto"}},{default:se(()=>[ae(T,{"file-list":r.value,"onUpdate:fileList":p[0]||(p[0]=b=>r.value=b),"list-type":"picture-card","auto-upload":!1,"on-preview":l,"on-remove":a,"on-change":h,limit:1,"on-exceed":c,"before-upload":d,"http-request":g,ref_key:"uploadRef",ref:t},{default:se(()=>[r.value.length===0?(_(),Te(O,{key:0},{default:se(()=>[ae(U(oo))]),_:1})):Ee("",!0)]),_:1},8,["file-list"]),ae(S,{type:"primary",onClick:m,style:{"background-color":"rgb(121.3, 187.1, 255)"}},{default:se(()=>p[2]||(p[2]=[at("上传识别角色信息")])),_:1,__:[2]}),p[3]||(p[3]=pe("div",{style:{"font-size":"12px",color:"#999","margin-top":"6px"}}," 请上传角色列表截图：只支持 PNG/JPG 格式，最大 2MB; 上传后请稍后载入 ",-1)),ae(M,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=b=>o.value=b),width:"50%"},{default:se(()=>[pe("img",{style:{width:"100%"},src:s.value,alt:"Preview Image"},null,8,Um)]),_:1},8,["modelValue"]),ae(P)]),_:1,__:[3]})]),_:1})]),_:1})])}}});export{dg as default};
